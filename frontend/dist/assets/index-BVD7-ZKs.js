var bD=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var ZH=bD((k8,rT)=>{function xD(t,n){for(var e=0;e<n.length;e++){const r=n[e];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();var wD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dg={exports:{}},xf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function ED(){if(Lw)return xf;Lw=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function e(r,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var s in a)s!=="key"&&(o[s]=a[s])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:u,ref:a!==void 0?a:null,props:o}}return xf.Fragment=n,xf.jsx=e,xf.jsxs=e,xf}var Uw;function SD(){return Uw||(Uw=1,dg.exports=ED()),dg.exports}var Q=SD(),hg={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function _D(){if(zw)return Ut;zw=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(L){return L===null||typeof L!="object"?null:(L=p&&L[p]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function S(L,se,Re){this.props=L,this.context=se,this.refs=E,this.updater=Re||g}S.prototype.isReactComponent={},S.prototype.setState=function(L,se){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,se,"setState")},S.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=S.prototype;function A(L,se,Re){this.props=L,this.context=se,this.refs=E,this.updater=Re||g}var T=A.prototype=new _;T.constructor=A,x(T,S.prototype),T.isPureReactComponent=!0;var N=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function P(L,se,Re,Se,je,Xe){return Re=Xe.ref,{$$typeof:t,type:L,key:se,ref:Re!==void 0?Re:null,props:Xe}}function H(L,se){return P(L.type,se,void 0,void 0,void 0,L.props)}function U(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function j(L){var se={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Re){return se[Re]})}var G=/\/+/g;function K(L,se){return typeof L=="object"&&L!==null&&L.key!=null?j(""+L.key):se.toString(36)}function be(){}function pe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(be,be):(L.status="pending",L.then(function(se){L.status==="pending"&&(L.status="fulfilled",L.value=se)},function(se){L.status==="pending"&&(L.status="rejected",L.reason=se)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function he(L,se,Re,Se,je){var Xe=typeof L;(Xe==="undefined"||Xe==="boolean")&&(L=null);var Ve=!1;if(L===null)Ve=!0;else switch(Xe){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(L.$$typeof){case t:case n:Ve=!0;break;case h:return Ve=L._init,he(Ve(L._payload),se,Re,Se,je)}}if(Ve)return je=je(L),Ve=Se===""?"."+K(L,0):Se,N(je)?(Re="",Ve!=null&&(Re=Ve.replace(G,"$&/")+"/"),he(je,se,Re,"",function(He){return He})):je!=null&&(U(je)&&(je=H(je,Re+(je.key==null||L&&L.key===je.key?"":(""+je.key).replace(G,"$&/")+"/")+Ve)),se.push(je)),1;Ve=0;var yt=Se===""?".":Se+":";if(N(L))for(var ot=0;ot<L.length;ot++)Se=L[ot],Xe=yt+K(Se,ot),Ve+=he(Se,se,Re,Xe,je);else if(ot=m(L),typeof ot=="function")for(L=ot.call(L),ot=0;!(Se=L.next()).done;)Se=Se.value,Xe=yt+K(Se,ot++),Ve+=he(Se,se,Re,Xe,je);else if(Xe==="object"){if(typeof L.then=="function")return he(pe(L),se,Re,Se,je);throw se=String(L),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function q(L,se,Re){if(L==null)return L;var Se=[],je=0;return he(L,Se,"","",function(Xe){return se.call(Re,Xe,je++)}),Se}function ne(L){if(L._status===-1){var se=L._result;se=se(),se.then(function(Re){(L._status===0||L._status===-1)&&(L._status=1,L._result=Re)},function(Re){(L._status===0||L._status===-1)&&(L._status=2,L._result=Re)}),L._status===-1&&(L._status=0,L._result=se)}if(L._status===1)return L._result.default;throw L._result}var ee=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function J(){}return Ut.Children={map:q,forEach:function(L,se,Re){q(L,function(){se.apply(this,arguments)},Re)},count:function(L){var se=0;return q(L,function(){se++}),se},toArray:function(L){return q(L,function(se){return se})||[]},only:function(L){if(!U(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ut.Component=S,Ut.Fragment=e,Ut.Profiler=a,Ut.PureComponent=A,Ut.StrictMode=r,Ut.Suspense=c,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(L){return D.H.useMemoCache(L)}},Ut.cache=function(L){return function(){return L.apply(null,arguments)}},Ut.cloneElement=function(L,se,Re){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Se=x({},L.props),je=L.key,Xe=void 0;if(se!=null)for(Ve in se.ref!==void 0&&(Xe=void 0),se.key!==void 0&&(je=""+se.key),se)!k.call(se,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&se.ref===void 0||(Se[Ve]=se[Ve]);var Ve=arguments.length-2;if(Ve===1)Se.children=Re;else if(1<Ve){for(var yt=Array(Ve),ot=0;ot<Ve;ot++)yt[ot]=arguments[ot+2];Se.children=yt}return P(L.type,je,void 0,void 0,Xe,Se)},Ut.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Ut.createElement=function(L,se,Re){var Se,je={},Xe=null;if(se!=null)for(Se in se.key!==void 0&&(Xe=""+se.key),se)k.call(se,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(je[Se]=se[Se]);var Ve=arguments.length-2;if(Ve===1)je.children=Re;else if(1<Ve){for(var yt=Array(Ve),ot=0;ot<Ve;ot++)yt[ot]=arguments[ot+2];je.children=yt}if(L&&L.defaultProps)for(Se in Ve=L.defaultProps,Ve)je[Se]===void 0&&(je[Se]=Ve[Se]);return P(L,Xe,void 0,void 0,null,je)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(L){return{$$typeof:s,render:L}},Ut.isValidElement=U,Ut.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:ne}},Ut.memo=function(L,se){return{$$typeof:f,type:L,compare:se===void 0?null:se}},Ut.startTransition=function(L){var se=D.T,Re={};D.T=Re;try{var Se=L(),je=D.S;je!==null&&je(Re,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(J,ee)}catch(Xe){ee(Xe)}finally{D.T=se}},Ut.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ut.use=function(L){return D.H.use(L)},Ut.useActionState=function(L,se,Re){return D.H.useActionState(L,se,Re)},Ut.useCallback=function(L,se){return D.H.useCallback(L,se)},Ut.useContext=function(L){return D.H.useContext(L)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(L,se){return D.H.useDeferredValue(L,se)},Ut.useEffect=function(L,se,Re){var Se=D.H;if(typeof Re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Se.useEffect(L,se)},Ut.useId=function(){return D.H.useId()},Ut.useImperativeHandle=function(L,se,Re){return D.H.useImperativeHandle(L,se,Re)},Ut.useInsertionEffect=function(L,se){return D.H.useInsertionEffect(L,se)},Ut.useLayoutEffect=function(L,se){return D.H.useLayoutEffect(L,se)},Ut.useMemo=function(L,se){return D.H.useMemo(L,se)},Ut.useOptimistic=function(L,se){return D.H.useOptimistic(L,se)},Ut.useReducer=function(L,se,Re){return D.H.useReducer(L,se,Re)},Ut.useRef=function(L){return D.H.useRef(L)},Ut.useState=function(L){return D.H.useState(L)},Ut.useSyncExternalStore=function(L,se,Re){return D.H.useSyncExternalStore(L,se,Re)},Ut.useTransition=function(){return D.H.useTransition()},Ut.version="19.1.0",Ut}var jw;function Wp(){return jw||(jw=1,hg.exports=_D()),hg.exports}var F=Wp();const On=bS(F),dy=xD({__proto__:null,default:On},[F]);var pg={exports:{}},wf={},vg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function CD(){return Hw||(Hw=1,function(t){function n(q,ne){var ee=q.length;q.push(ne);e:for(;0<ee;){var J=ee-1>>>1,L=q[J];if(0<a(L,ne))q[J]=ne,q[ee]=L,ee=J;else break e}}function e(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ne=q[0],ee=q.pop();if(ee!==ne){q[0]=ee;e:for(var J=0,L=q.length,se=L>>>1;J<se;){var Re=2*(J+1)-1,Se=q[Re],je=Re+1,Xe=q[je];if(0>a(Se,ee))je<L&&0>a(Xe,Se)?(q[J]=Xe,q[je]=ee,J=je):(q[J]=Se,q[Re]=ee,J=Re);else if(je<L&&0>a(Xe,ee))q[J]=Xe,q[je]=ee,J=je;else break e}}return ne}function a(q,ne){var ee=q.sortIndex-ne.sortIndex;return ee!==0?ee:q.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],f=[],h=1,p=null,m=3,g=!1,x=!1,E=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N(q){for(var ne=e(f);ne!==null;){if(ne.callback===null)r(f);else if(ne.startTime<=q)r(f),ne.sortIndex=ne.expirationTime,n(c,ne);else break;ne=e(f)}}function D(q){if(E=!1,N(q),!x)if(e(c)!==null)x=!0,k||(k=!0,K());else{var ne=e(f);ne!==null&&he(D,ne.startTime-q)}}var k=!1,P=-1,H=5,U=-1;function j(){return S?!0:!(t.unstable_now()-U<H)}function G(){if(S=!1,k){var q=t.unstable_now();U=q;var ne=!0;try{e:{x=!1,E&&(E=!1,A(P),P=-1),g=!0;var ee=m;try{t:{for(N(q),p=e(c);p!==null&&!(p.expirationTime>q&&j());){var J=p.callback;if(typeof J=="function"){p.callback=null,m=p.priorityLevel;var L=J(p.expirationTime<=q);if(q=t.unstable_now(),typeof L=="function"){p.callback=L,N(q),ne=!0;break t}p===e(c)&&r(c),N(q)}else r(c);p=e(c)}if(p!==null)ne=!0;else{var se=e(f);se!==null&&he(D,se.startTime-q),ne=!1}}break e}finally{p=null,m=ee,g=!1}ne=void 0}}finally{ne?K():k=!1}}}var K;if(typeof T=="function")K=function(){T(G)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,pe=be.port2;be.port1.onmessage=G,K=function(){pe.postMessage(null)}}else K=function(){_(G,0)};function he(q,ne){P=_(function(){q(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var ee=m;m=ne;try{return q()}finally{m=ee}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(q,ne){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ee=m;m=q;try{return ne()}finally{m=ee}},t.unstable_scheduleCallback=function(q,ne,ee){var J=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?J+ee:J):ee=J,q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ee+L,q={id:h++,callback:ne,priorityLevel:q,startTime:ee,expirationTime:L,sortIndex:-1},ee>J?(q.sortIndex=ee,n(f,q),e(c)===null&&q===e(f)&&(E?(A(P),P=-1):E=!0,he(D,ee-J))):(q.sortIndex=L,n(c,q),x||g||(x=!0,k||(k=!0,K()))),q},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(q){var ne=m;return function(){var ee=m;m=ne;try{return q.apply(this,arguments)}finally{m=ee}}}}(mg)),mg}var Vw;function RD(){return Vw||(Vw=1,vg.exports=CD()),vg.exports}var gg={exports:{}},Xr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function AD(){if(Ww)return Xr;Ww=1;var t=Wp();function n(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(n(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(c,f,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:f,implementation:h}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xr.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(n(299));return o(c,f,null,h)},Xr.flushSync=function(c){var f=u.T,h=r.p;try{if(u.T=null,r.p=2,c)return c()}finally{u.T=f,r.p=h,r.d.f()}},Xr.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Xr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Xr.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,p=s(h,f.crossOrigin),m=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:g}):h==="script"&&r.d.X(c,{crossOrigin:p,integrity:m,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Xr.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=s(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Xr.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,p=s(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Xr.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=s(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Xr.requestFormReset=function(c){r.d.r(c)},Xr.unstable_batchedUpdates=function(c,f){return c(f)},Xr.useFormState=function(c,f,h){return u.H.useFormState(c,f,h)},Xr.useFormStatus=function(){return u.H.useHostTransitionStatus()},Xr.version="19.1.0",Xr}var qw;function xS(){if(qw)return gg.exports;qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),gg.exports=AD(),gg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function TD(){if($w)return wf;$w=1;var t=RD(),n=Wp(),e=xS();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function u(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function s(i){if(o(i)!==i)throw Error(r(188))}function c(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(r(188));return l!==i?null:i}for(var d=i,v=l;;){var b=d.return;if(b===null)break;var C=b.alternate;if(C===null){if(v=b.return,v!==null){d=v;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===d)return s(b),i;if(C===v)return s(b),l;C=C.sibling}throw Error(r(188))}if(d.return!==v.return)d=b,v=C;else{for(var M=!1,z=b.child;z;){if(z===d){M=!0,d=b,v=C;break}if(z===v){M=!0,v=b,d=C;break}z=z.sibling}if(!M){for(z=C.child;z;){if(z===d){M=!0,d=C,v=b;break}if(z===v){M=!0,v=C,d=b;break}z=z.sibling}if(!M)throw Error(r(189))}}if(d.alternate!==v)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?i:l}function f(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=f(i),l!==null)return l;i=i.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=G&&i[G]||i["@@iterator"],typeof i=="function"?i:null)}var be=Symbol.for("react.client.reference");function pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===be?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case k:return"SuspenseList";case U:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case g:return"Portal";case T:return(i.displayName||"Context")+".Provider";case A:return(i._context.displayName||"Context")+".Consumer";case N:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return l=i.displayName||null,l!==null?l:pe(i.type)||"Memo";case H:l=i._payload,i=i._init;try{return pe(i(l))}catch{}}return null}var he=Array.isArray,q=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},J=[],L=-1;function se(i){return{current:i}}function Re(i){0>L||(i.current=J[L],J[L]=null,L--)}function Se(i,l){L++,J[L]=i.current,i.current=l}var je=se(null),Xe=se(null),Ve=se(null),yt=se(null);function ot(i,l){switch(Se(Ve,l),Se(Xe,i),Se(je,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?dw(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=dw(l),i=hw(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Re(je),Se(je,i)}function He(){Re(je),Re(Xe),Re(Ve)}function kt(i){i.memoizedState!==null&&Se(yt,i);var l=je.current,d=hw(l,i.type);l!==d&&(Se(Xe,i),Se(je,d))}function wt(i){Xe.current===i&&(Re(je),Re(Xe)),yt.current===i&&(Re(yt),vf._currentValue=ee)}var it=Object.prototype.hasOwnProperty,It=t.unstable_scheduleCallback,Qt=t.unstable_cancelCallback,Jt=t.unstable_shouldYield,cn=t.unstable_requestPaint,Sn=t.unstable_now,Ur=t.unstable_getCurrentPriorityLevel,Zn=t.unstable_ImmediatePriority,aa=t.unstable_UserBlockingPriority,gn=t.unstable_NormalPriority,qn=t.unstable_LowPriority,Mn=t.unstable_IdlePriority,ha=t.log,$n=t.unstable_setDisableYieldValue,_n=null,Vt=null;function Cn(i){if(typeof ha=="function"&&$n(i),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(_n,i)}catch{}}var yn=Math.clz32?Math.clz32:pa,ii=Math.log,Dr=Math.LN2;function pa(i){return i>>>=0,i===0?32:31-(ii(i)/Dr|0)|0}var zr=256,oa=4194304;function Un(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function rt(i,l,d){var v=i.pendingLanes;if(v===0)return 0;var b=0,C=i.suspendedLanes,M=i.pingedLanes;i=i.warmLanes;var z=v&134217727;return z!==0?(v=z&~C,v!==0?b=Un(v):(M&=z,M!==0?b=Un(M):d||(d=z&~i,d!==0&&(b=Un(d))))):(z=v&~C,z!==0?b=Un(z):M!==0?b=Un(M):d||(d=v&~i,d!==0&&(b=Un(d)))),b===0?0:l!==0&&l!==b&&(l&C)===0&&(C=b&-b,d=l&-l,C>=d||C===32&&(d&4194048)!==0)?l:b}function jr(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function Va(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lo(){var i=zr;return zr<<=1,(zr&4194048)===0&&(zr=256),i}function Ze(){var i=oa;return oa<<=1,(oa&62914560)===0&&(oa=4194304),i}function So(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function _o(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function $i(i,l,d,v,b,C){var M=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var z=i.entanglements,Y=i.expirationTimes,we=i.hiddenUpdates;for(d=M&~d;0<d;){var Fe=31-yn(d),Ue=1<<Fe;z[Fe]=0,Y[Fe]=-1;var _e=we[Fe];if(_e!==null)for(we[Fe]=null,Fe=0;Fe<_e.length;Fe++){var Ae=_e[Fe];Ae!==null&&(Ae.lane&=-536870913)}d&=~Ue}v!==0&&Co(i,v,0),C!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=C&~(M&~l))}function Co(i,l,d){i.pendingLanes|=l,i.suspendedLanes&=~l;var v=31-yn(l);i.entangledLanes|=l,i.entanglements[v]=i.entanglements[v]|1073741824|d&4194090}function co(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var v=31-yn(d),b=1<<v;b&l|i[v]&l&&(i[v]|=l),d&=~b}}function Zu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ju(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function te(){var i=ne.p;return i!==0?i:(i=window.event,i===void 0?32:Ow(i.type))}function ge(i,l){var d=ne.p;try{return ne.p=i,l()}finally{ne.p=d}}var Ce=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ce,Le="__reactProps$"+Ce,Ye="__reactContainer$"+Ce,xt="__reactEvents$"+Ce,et="__reactListeners$"+Ce,ft="__reactHandles$"+Ce,dt="__reactResources$"+Ce,Et="__reactMarker$"+Ce;function at(i){delete i[Pe],delete i[Le],delete i[xt],delete i[et],delete i[ft]}function bt(i){var l=i[Pe];if(l)return l;for(var d=i.parentNode;d;){if(l=d[Ye]||d[Pe]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=gw(i);i!==null;){if(d=i[Pe])return d;i=gw(i)}return l}i=d,d=i.parentNode}return null}function Ft(i){if(i=i[Pe]||i[Ye]){var l=i.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return i}return null}function sn(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function Tn(i){var l=i[dt];return l||(l=i[dt]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Lt(i){i[Et]=!0}var Wt=new Set,Hr={};function gr(i,l){Vr(i,l),Vr(i+"Capture",l)}function Vr(i,l){for(Hr[i]=l,i=0;i<l.length;i++)Wt.add(l[i])}var Zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wr={},yr={};function Gi(i){return it.call(yr,i)?!0:it.call(Wr,i)?!1:Zt.test(i)?yr[i]=!0:(Wr[i]=!0,!1)}function ur(i,l,d){if(Gi(l))if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+d)}}function va(i,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+d)}}function Bt(i,l,d,v){if(v===null)i.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(l,d,""+v)}}var Jn,sr;function ma(i){if(Jn===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Jn=l&&l[1]||"",sr=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jn+i+sr}var Wa=!1;function bn(i,l){if(!i||Wa)return"";Wa=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(Ae){var _e=Ae}Reflect.construct(i,[],Ue)}else{try{Ue.call()}catch(Ae){_e=Ae}i.call(Ue.prototype)}}else{try{throw Error()}catch(Ae){_e=Ae}(Ue=i())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(Ae){if(Ae&&_e&&typeof Ae.stack=="string")return[Ae.stack,_e.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=v.DetermineComponentFrameRoot(),M=C[0],z=C[1];if(M&&z){var Y=M.split(`
`),we=z.split(`
`);for(b=v=0;v<Y.length&&!Y[v].includes("DetermineComponentFrameRoot");)v++;for(;b<we.length&&!we[b].includes("DetermineComponentFrameRoot");)b++;if(v===Y.length||b===we.length)for(v=Y.length-1,b=we.length-1;1<=v&&0<=b&&Y[v]!==we[b];)b--;for(;1<=v&&0<=b;v--,b--)if(Y[v]!==we[b]){if(v!==1||b!==1)do if(v--,b--,0>b||Y[v]!==we[b]){var Fe=`
`+Y[v].replace(" at new "," at ");return i.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",i.displayName)),Fe}while(1<=v&&0<=b);break}}}finally{Wa=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?ma(d):""}function Ot(i){switch(i.tag){case 26:case 27:case 5:return ma(i.type);case 16:return ma("Lazy");case 13:return ma("Suspense");case 19:return ma("SuspenseList");case 0:case 15:return bn(i.type,!1);case 11:return bn(i.type.render,!1);case 1:return bn(i.type,!0);case 31:return ma("Activity");default:return""}}function Ki(i){try{var l="";do l+=Ot(i),i=i.return;while(i);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Nr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function gc(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function xn(i){var l=gc(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),v=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,C=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return b.call(this)},set:function(M){v=""+M,C.call(this,M)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return v},setValue:function(M){v=""+M},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Ro(i){i._valueTracker||(i._valueTracker=xn(i))}function Xi(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),v="";return i&&(v=gc(i)?i.checked?"true":"false":i.value),i=v,i!==d?(l.setValue(i),!0):!1}function fo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var yc=/[\n"\\]/g;function qr(i){return i.replace(yc,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Yi(i,l,d,v,b,C,M,z){i.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.type=M:i.removeAttribute("type"),l!=null?M==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+Nr(l)):i.value!==""+Nr(l)&&(i.value=""+Nr(l)):M!=="submit"&&M!=="reset"||i.removeAttribute("value"),l!=null?Qi(i,M,Nr(l)):d!=null?Qi(i,M,Nr(d)):v!=null&&i.removeAttribute("value"),b==null&&C!=null&&(i.defaultChecked=!!C),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?i.name=""+Nr(z):i.removeAttribute("name")}function bc(i,l,d,v,b,C,M,z){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.type=C),l!=null||d!=null){if(!(C!=="submit"&&C!=="reset"||l!=null))return;d=d!=null?""+Nr(d):"",l=l!=null?""+Nr(l):d,z||l===i.value||(i.value=l),i.defaultValue=l}v=v??b,v=typeof v!="function"&&typeof v!="symbol"&&!!v,i.checked=z?i.checked:!!v,i.defaultChecked=!!v,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(i.name=M)}function Qi(i,l,d){l==="number"&&fo(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function ui(i,l,d,v){if(i=i.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<i.length;d++)b=l.hasOwnProperty("$"+i[d].value),i[d].selected!==b&&(i[d].selected=b),b&&v&&(i[d].defaultSelected=!0)}else{for(d=""+Nr(d),l=null,b=0;b<i.length;b++){if(i[b].value===d){i[b].selected=!0,v&&(i[b].defaultSelected=!0);return}l!==null||i[b].disabled||(l=i[b])}l!==null&&(l.selected=!0)}}function Zi(i,l,d){if(l!=null&&(l=""+Nr(l),l!==i.value&&(i.value=l),d==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=d!=null?""+Nr(d):""}function xc(i,l,d,v){if(l==null){if(v!=null){if(d!=null)throw Error(r(92));if(he(v)){if(1<v.length)throw Error(r(93));v=v[0]}d=v}d==null&&(d=""),l=d}d=Nr(l),i.defaultValue=d,v=i.textContent,v===d&&v!==""&&v!==null&&(i.value=v)}function Ji(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var en=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xs(i,l,d){var v=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":v?i.setProperty(l,d):typeof d!="number"||d===0||en.has(l)?l==="float"?i.cssFloat=d:i[l]=(""+d).trim():i[l]=d+"px"}function xd(i,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?i.setProperty(v,""):v==="float"?i.cssFloat="":i[v]="");for(var b in l)v=l[b],l.hasOwnProperty(b)&&d[b]!==v&&Xs(i,b,v)}else for(var C in l)l.hasOwnProperty(C)&&Xs(i,C,l[C])}function wc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ia=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function si(i){return eu.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var qa=null;function Ys(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var li=null,Dn=null;function Aa(i){var l=Ft(i);if(l&&(i=l.stateNode)){var d=i[Le]||null;e:switch(i=l.stateNode,l.type){case"input":if(Yi(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+qr(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var v=d[l];if(v!==i&&v.form===i.form){var b=v[Le]||null;if(!b)throw Error(r(90));Yi(v,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<d.length;l++)v=d[l],v.form===i.form&&Xi(v)}break e;case"textarea":Zi(i,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&ui(i,!!d.multiple,l,!1)}}}var ci=!1;function tu(i,l,d){if(ci)return i(l,d);ci=!0;try{var v=i(l);return v}finally{if(ci=!1,(li!==null||Dn!==null)&&(sh(),li&&(l=li,i=Dn,Dn=li=null,Aa(l),i)))for(l=0;l<i.length;l++)Aa(i[l])}}function fi(i,l){var d=i.stateNode;if(d===null)return null;var v=d[Le]||null;if(v===null)return null;d=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(i=i.type,v=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!v;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ec=!1;if(br)try{var $r={};Object.defineProperty($r,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{Ec=!1}var $a=null,Qs=null,nu=null;function ru(){if(nu)return nu;var i,l=Qs,d=l.length,v,b="value"in $a?$a.value:$a.textContent,C=b.length;for(i=0;i<d&&l[i]===b[i];i++);var M=d-i;for(v=1;v<=M&&l[d-v]===b[C-v];v++);return nu=b.slice(i,1<v?1-v:void 0)}function au(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function es(){return!0}function wd(){return!1}function er(i){function l(d,v,b,C,M){this._reactName=d,this._targetInst=b,this.type=v,this.nativeEvent=C,this.target=M,this.currentTarget=null;for(var z in i)i.hasOwnProperty(z)&&(d=i[z],this[z]=d?d(C):C[z]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?es:wd,this.isPropagationStopped=wd,this}return h(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),l}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=er(di),Ao=h({},di,{view:0,detail:0}),Js=er(Ao),ts,Sc,ns,el=h({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hi,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ns&&(ns&&i.type==="mousemove"?(ts=i.screenX-ns.screenX,Sc=i.screenY-ns.screenY):Sc=ts=0,ns=i),ts)},movementY:function(i){return"movementY"in i?i.movementY:Sc}}),tl=er(el),_c=h({},el,{dataTransfer:0}),Ed=er(_c),nl=h({},Ao,{relatedTarget:0}),ou=er(nl),rl=h({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),Sd=er(rl),Rv=h({},di,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),al=er(Rv),Cc=h({},di,{data:0}),ol=er(Cc),Rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ac={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rs(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=xr[i])?!!l[i]:!1}function hi(){return rs}var _d=h({},Ao,{key:function(i){if(i.key){var l=Rc[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=au(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ac[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hi,charCode:function(i){return i.type==="keypress"?au(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?au(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),il=er(_d),Cd=h({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tc=er(Cd),ul=h({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hi}),Dc=er(ul),pi=h({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nc=er(pi),kc=h({},el,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),sl=er(kc),Oc=h({},di,{newState:0,oldState:0}),Rd=er(Oc),Av=[9,13,27,32],as=br&&"CompositionEvent"in window,To=null;br&&"documentMode"in document&&(To=document.documentMode);var Tv=br&&"TextEvent"in window&&!To,ll=br&&(!as||To&&8<To&&11>=To),cl=" ",Ad=!1;function Mc(i,l){switch(i){case"keyup":return Av.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Td(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var vi=!1;function Dd(i,l){switch(i){case"compositionend":return Td(l);case"keypress":return l.which!==32?null:(Ad=!0,cl);case"textInput":return i=l.data,i===cl&&Ad?null:i;default:return null}}function Dv(i,l){if(vi)return i==="compositionend"||!as&&Mc(i,l)?(i=ru(),nu=Qs=$a=null,vi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ll&&l.locale!=="ko"?null:l.data;default:return null}}var Nd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fl(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!Nd[i.type]:l==="textarea"}function Ic(i,l,d,v){li?Dn?Dn.push(v):Dn=[v]:li=v,l=ph(l,"onChange"),0<l.length&&(d=new Zs("onChange","change",null,d,v),i.push({event:d,listeners:l}))}var iu=null,os=null;function Nv(i){uw(i,0)}function dl(i){var l=sn(i);if(Xi(l))return i}function is(i,l){if(i==="change")return l}var Ga=!1;if(br){var Nn;if(br){var uu="oninput"in document;if(!uu){var ua=document.createElement("div");ua.setAttribute("oninput","return;"),uu=typeof ua.oninput=="function"}Nn=uu}else Nn=!1;Ga=Nn&&(!document.documentMode||9<document.documentMode)}function kd(){iu&&(iu.detachEvent("onpropertychange",hl),os=iu=null)}function hl(i){if(i.propertyName==="value"&&dl(os)){var l=[];Ic(l,os,i,Ys(i)),tu(Nv,l)}}function Od(i,l,d){i==="focusin"?(kd(),iu=l,os=d,iu.attachEvent("onpropertychange",hl)):i==="focusout"&&kd()}function mi(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return dl(os)}function Fc(i,l){if(i==="click")return dl(l)}function su(i,l){if(i==="input"||i==="change")return dl(l)}function Do(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Gr=typeof Object.is=="function"?Object.is:Do;function y(i,l){if(Gr(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),v=Object.keys(l);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var b=d[v];if(!it.call(l,b)||!Gr(i[b],l[b]))return!1}return!0}function w(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function R(i,l){var d=w(i);i=0;for(var v;d;){if(d.nodeType===3){if(v=i+d.textContent.length,i<=l&&v>=l)return{node:d,offset:l-i};i=v}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=w(d)}}function O(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?O(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function I(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=fo(i.document);l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=fo(i.document)}return l}function B(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var W=br&&"documentMode"in document&&11>=document.documentMode,X=null,oe=null,ue=null,de=!1;function Z(i,l,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;de||X==null||X!==fo(v)||(v=X,"selectionStart"in v&&B(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ue&&y(ue,v)||(ue=v,v=ph(oe,"onSelect"),0<v.length&&(l=new Zs("onSelect","select",null,l,d),i.push({event:l,listeners:v}),l.target=X)))}function me(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var ae={animationend:me("Animation","AnimationEnd"),animationiteration:me("Animation","AnimationIteration"),animationstart:me("Animation","AnimationStart"),transitionrun:me("Transition","TransitionRun"),transitionstart:me("Transition","TransitionStart"),transitioncancel:me("Transition","TransitionCancel"),transitionend:me("Transition","TransitionEnd")},fe={},ye={};br&&(ye=document.createElement("div").style,"AnimationEvent"in window||(delete ae.animationend.animation,delete ae.animationiteration.animation,delete ae.animationstart.animation),"TransitionEvent"in window||delete ae.transitionend.transition);function le(i){if(fe[i])return fe[i];if(!ae[i])return i;var l=ae[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in ye)return fe[i]=l[d];return i}var Ee=le("animationend"),De=le("animationiteration"),Ne=le("animationstart"),Ie=le("transitionrun"),$e=le("transitionstart"),Ke=le("transitioncancel"),We=le("transitionend"),Ge=new Map,Qe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qe.push("scrollEnd");function qe(i,l){Ge.set(i,l),gr(l,[i])}var tt=new WeakMap;function gt(i,l){if(typeof i=="object"&&i!==null){var d=tt.get(i);return d!==void 0?d:(l={value:i,source:l,stack:Ki(l)},tt.set(i,l),l)}return{value:i,source:l,stack:Ki(l)}}var St=[],Dt=0,kr=0;function Rt(){for(var i=Dt,l=kr=Dt=0;l<i;){var d=St[l];St[l++]=null;var v=St[l];St[l++]=null;var b=St[l];St[l++]=null;var C=St[l];if(St[l++]=null,v!==null&&b!==null){var M=v.pending;M===null?b.next=b:(b.next=M.next,M.next=b),v.pending=b}C!==0&&wr(d,b,C)}}function Gn(i,l,d,v){St[Dt++]=i,St[Dt++]=l,St[Dt++]=d,St[Dt++]=v,kr|=v,i.lanes|=v,i=i.alternate,i!==null&&(i.lanes|=v)}function tr(i,l,d,v){return Gn(i,l,d,v),Ka(i)}function ho(i,l){return Gn(i,null,null,l),Ka(i)}function wr(i,l,d){i.lanes|=d;var v=i.alternate;v!==null&&(v.lanes|=d);for(var b=!1,C=i.return;C!==null;)C.childLanes|=d,v=C.alternate,v!==null&&(v.childLanes|=d),C.tag===22&&(i=C.stateNode,i===null||i._visibility&1||(b=!0)),i=C,C=C.return;return i.tag===3?(C=i.stateNode,b&&l!==null&&(b=31-yn(d),i=C.hiddenUpdates,v=i[b],v===null?i[b]=[l]:v.push(l),l.lane=d|536870912),C):null}function Ka(i){if(50<uf)throw uf=0,Bm=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var No={};function aT(i,l,d,v){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(i,l,d,v){return new aT(i,l,d,v)}function kv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function gi(i,l){var d=i.alternate;return d===null?(d=Ta(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function $b(i,l){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,l=d.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function Md(i,l,d,v,b,C){var M=0;if(v=i,typeof i=="function")kv(i)&&(M=1);else if(typeof i=="string")M=iD(i,d,je.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case U:return i=Ta(31,d,l,b),i.elementType=U,i.lanes=C,i;case x:return us(d.children,b,C,l);case E:M=8,b|=24;break;case S:return i=Ta(12,d,l,b|2),i.elementType=S,i.lanes=C,i;case D:return i=Ta(13,d,l,b),i.elementType=D,i.lanes=C,i;case k:return i=Ta(19,d,l,b),i.elementType=k,i.lanes=C,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:case T:M=10;break e;case A:M=9;break e;case N:M=11;break e;case P:M=14;break e;case H:M=16,v=null;break e}M=29,d=Error(r(130,i===null?"null":typeof i,"")),v=null}return l=Ta(M,d,l,b),l.elementType=i,l.type=v,l.lanes=C,l}function us(i,l,d,v){return i=Ta(7,i,v,l),i.lanes=d,i}function Ov(i,l,d){return i=Ta(6,i,null,l),i.lanes=d,i}function Mv(i,l,d){return l=Ta(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var pl=[],vl=0,Id=null,Fd=0,Xa=[],Ya=0,ss=null,yi=1,bi="";function ls(i,l){pl[vl++]=Fd,pl[vl++]=Id,Id=i,Fd=l}function Gb(i,l,d){Xa[Ya++]=yi,Xa[Ya++]=bi,Xa[Ya++]=ss,ss=i;var v=yi;i=bi;var b=32-yn(v)-1;v&=~(1<<b),d+=1;var C=32-yn(l)+b;if(30<C){var M=b-b%5;C=(v&(1<<M)-1).toString(32),v>>=M,b-=M,yi=1<<32-yn(l)+b|d<<b|v,bi=C+i}else yi=1<<C|d<<b|v,bi=i}function Iv(i){i.return!==null&&(ls(i,1),Gb(i,1,0))}function Fv(i){for(;i===Id;)Id=pl[--vl],pl[vl]=null,Fd=pl[--vl],pl[vl]=null;for(;i===ss;)ss=Xa[--Ya],Xa[Ya]=null,bi=Xa[--Ya],Xa[Ya]=null,yi=Xa[--Ya],Xa[Ya]=null}var sa=null,zn=null,on=!1,cs=null,ko=!1,Bv=Error(r(519));function fs(i){var l=Error(r(418,""));throw Lc(gt(l,i)),Bv}function Kb(i){var l=i.stateNode,d=i.type,v=i.memoizedProps;switch(l[Pe]=i,l[Le]=v,d){case"dialog":Kt("cancel",l),Kt("close",l);break;case"iframe":case"object":case"embed":Kt("load",l);break;case"video":case"audio":for(d=0;d<lf.length;d++)Kt(lf[d],l);break;case"source":Kt("error",l);break;case"img":case"image":case"link":Kt("error",l),Kt("load",l);break;case"details":Kt("toggle",l);break;case"input":Kt("invalid",l),bc(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Ro(l);break;case"select":Kt("invalid",l);break;case"textarea":Kt("invalid",l),xc(l,v.value,v.defaultValue,v.children),Ro(l)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||v.suppressHydrationWarning===!0||fw(l.textContent,d)?(v.popover!=null&&(Kt("beforetoggle",l),Kt("toggle",l)),v.onScroll!=null&&Kt("scroll",l),v.onScrollEnd!=null&&Kt("scrollend",l),v.onClick!=null&&(l.onclick=vh),l=!0):l=!1,l||fs(i)}function Xb(i){for(sa=i.return;sa;)switch(sa.tag){case 5:case 13:ko=!1;return;case 27:case 3:ko=!0;return;default:sa=sa.return}}function Bc(i){if(i!==sa)return!1;if(!on)return Xb(i),on=!0,!1;var l=i.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||Zm(i.type,i.memoizedProps)),d=!d),d&&zn&&fs(i),Xb(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8)if(d=i.data,d==="/$"){if(l===0){zn=vo(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;i=i.nextSibling}zn=null}}else l===27?(l=zn,_u(i.type)?(i=ng,ng=null,zn=i):zn=l):zn=sa?vo(i.stateNode.nextSibling):null;return!0}function Pc(){zn=sa=null,on=!1}function Yb(){var i=cs;return i!==null&&(ba===null?ba=i:ba.push.apply(ba,i),cs=null),i}function Lc(i){cs===null?cs=[i]:cs.push(i)}var Pv=se(null),ds=null,xi=null;function lu(i,l,d){Se(Pv,l._currentValue),l._currentValue=d}function wi(i){i._currentValue=Pv.current,Re(Pv)}function Lv(i,l,d){for(;i!==null;){var v=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),i===d)break;i=i.return}}function Uv(i,l,d,v){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var C=b.dependencies;if(C!==null){var M=b.child;C=C.firstContext;e:for(;C!==null;){var z=C;C=b;for(var Y=0;Y<l.length;Y++)if(z.context===l[Y]){C.lanes|=d,z=C.alternate,z!==null&&(z.lanes|=d),Lv(C.return,d,i),v||(M=null);break e}C=z.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(r(341));M.lanes|=d,C=M.alternate,C!==null&&(C.lanes|=d),Lv(M,d,i),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===i){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function Uc(i,l,d,v){i=null;for(var b=l,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var z=b.type;Gr(b.pendingProps.value,M.value)||(i!==null?i.push(z):i=[z])}}else if(b===yt.current){if(M=b.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(vf):i=[vf])}b=b.return}i!==null&&Uv(l,i,d,v),l.flags|=262144}function Bd(i){for(i=i.firstContext;i!==null;){if(!Gr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function hs(i){ds=i,xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Kr(i){return Qb(ds,i)}function Pd(i,l){return ds===null&&hs(i),Qb(i,l)}function Qb(i,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},xi===null){if(i===null)throw Error(r(308));xi=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else xi=xi.next=l;return d}var oT=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(d,v){i.push(v)}};this.abort=function(){l.aborted=!0,i.forEach(function(d){return d()})}},iT=t.unstable_scheduleCallback,uT=t.unstable_NormalPriority,lr={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zv(){return{controller:new oT,data:new Map,refCount:0}}function zc(i){i.refCount--,i.refCount===0&&iT(uT,function(){i.controller.abort()})}var jc=null,jv=0,ml=0,gl=null;function sT(i,l){if(jc===null){var d=jc=[];jv=0,ml=Vm(),gl={status:"pending",value:void 0,then:function(v){d.push(v)}}}return jv++,l.then(Zb,Zb),l}function Zb(){if(--jv===0&&jc!==null){gl!==null&&(gl.status="fulfilled");var i=jc;jc=null,ml=0,gl=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function lT(i,l){var d=[],v={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return i.then(function(){v.status="fulfilled",v.value=l;for(var b=0;b<d.length;b++)(0,d[b])(l)},function(b){for(v.status="rejected",v.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),v}var Jb=q.S;q.S=function(i,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&sT(i,l),Jb!==null&&Jb(i,l)};var ps=se(null);function Hv(){var i=ps.current;return i!==null?i:Rn.pooledCache}function Ld(i,l){l===null?Se(ps,ps.current):Se(ps,l.pool)}function ex(){var i=Hv();return i===null?null:{parent:lr._currentValue,pool:i}}var Hc=Error(r(460)),tx=Error(r(474)),Ud=Error(r(542)),Vv={then:function(){}};function nx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function zd(){}function rx(i,l,d){switch(d=i[d],d===void 0?i.push(l):d!==l&&(l.then(zd,zd),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,ox(i),i;default:if(typeof l.status=="string")l.then(zd,zd);else{if(i=Rn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(v){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=v}},function(v){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,ox(i),i}throw Vc=l,Hc}}var Vc=null;function ax(){if(Vc===null)throw Error(r(459));var i=Vc;return Vc=null,i}function ox(i){if(i===Hc||i===Ud)throw Error(r(483))}var cu=!1;function Wv(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qv(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function fu(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function du(i,l,d){var v=i.updateQueue;if(v===null)return null;if(v=v.shared,(fn&2)!==0){var b=v.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),v.pending=l,l=Ka(i),wr(i,null,d),l}return Gn(i,v,l,d),Ka(i)}function Wc(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var v=l.lanes;v&=i.pendingLanes,d|=v,l.lanes=d,co(i,d)}}function $v(i,l){var d=i.updateQueue,v=i.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var b=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var M={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};C===null?b=C=M:C=C.next=M,d=d.next}while(d!==null);C===null?b=C=l:C=C.next=l}else b=C=l;d={baseState:v.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:v.shared,callbacks:v.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}var Gv=!1;function qc(){if(Gv){var i=gl;if(i!==null)throw i}}function $c(i,l,d,v){Gv=!1;var b=i.updateQueue;cu=!1;var C=b.firstBaseUpdate,M=b.lastBaseUpdate,z=b.shared.pending;if(z!==null){b.shared.pending=null;var Y=z,we=Y.next;Y.next=null,M===null?C=we:M.next=we,M=Y;var Fe=i.alternate;Fe!==null&&(Fe=Fe.updateQueue,z=Fe.lastBaseUpdate,z!==M&&(z===null?Fe.firstBaseUpdate=we:z.next=we,Fe.lastBaseUpdate=Y))}if(C!==null){var Ue=b.baseState;M=0,Fe=we=Y=null,z=C;do{var _e=z.lane&-536870913,Ae=_e!==z.lane;if(Ae?(tn&_e)===_e:(v&_e)===_e){_e!==0&&_e===ml&&(Gv=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var At=i,_t=z;_e=l;var vn=d;switch(_t.tag){case 1:if(At=_t.payload,typeof At=="function"){Ue=At.call(vn,Ue,_e);break e}Ue=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=_t.payload,_e=typeof At=="function"?At.call(vn,Ue,_e):At,_e==null)break e;Ue=h({},Ue,_e);break e;case 2:cu=!0}}_e=z.callback,_e!==null&&(i.flags|=64,Ae&&(i.flags|=8192),Ae=b.callbacks,Ae===null?b.callbacks=[_e]:Ae.push(_e))}else Ae={lane:_e,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Fe===null?(we=Fe=Ae,Y=Ue):Fe=Fe.next=Ae,M|=_e;if(z=z.next,z===null){if(z=b.shared.pending,z===null)break;Ae=z,z=Ae.next,Ae.next=null,b.lastBaseUpdate=Ae,b.shared.pending=null}}while(!0);Fe===null&&(Y=Ue),b.baseState=Y,b.firstBaseUpdate=we,b.lastBaseUpdate=Fe,C===null&&(b.shared.lanes=0),xu|=M,i.lanes=M,i.memoizedState=Ue}}function ix(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function ux(i,l){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)ix(d[i],l)}var yl=se(null),jd=se(0);function sx(i,l){i=Ti,Se(jd,i),Se(yl,l),Ti=i|l.baseLanes}function Kv(){Se(jd,Ti),Se(yl,yl.current)}function Xv(){Ti=jd.current,Re(yl),Re(jd)}var hu=0,Ht=null,hn=null,nr=null,Hd=!1,bl=!1,vs=!1,Vd=0,Gc=0,xl=null,cT=0;function Kn(){throw Error(r(321))}function Yv(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!Gr(i[d],l[d]))return!1;return!0}function Qv(i,l,d,v,b,C){return hu=C,Ht=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,q.H=i===null||i.memoizedState===null?qx:$x,vs=!1,C=d(v,b),vs=!1,bl&&(C=cx(l,d,v,b)),lx(i),C}function lx(i){q.H=Xd;var l=hn!==null&&hn.next!==null;if(hu=0,nr=hn=Ht=null,Hd=!1,Gc=0,xl=null,l)throw Error(r(300));i===null||Er||(i=i.dependencies,i!==null&&Bd(i)&&(Er=!0))}function cx(i,l,d,v){Ht=i;var b=0;do{if(bl&&(xl=null),Gc=0,bl=!1,25<=b)throw Error(r(301));if(b+=1,nr=hn=null,i.updateQueue!=null){var C=i.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}q.H=gT,C=l(d,v)}while(bl);return C}function fT(){var i=q.H,l=i.useState()[0];return l=typeof l.then=="function"?Kc(l):l,i=i.useState()[0],(hn!==null?hn.memoizedState:null)!==i&&(Ht.flags|=1024),l}function Zv(){var i=Vd!==0;return Vd=0,i}function Jv(i,l,d){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~d}function em(i){if(Hd){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}Hd=!1}hu=0,nr=hn=Ht=null,bl=!1,Gc=Vd=0,xl=null}function ga(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?Ht.memoizedState=nr=i:nr=nr.next=i,nr}function rr(){if(hn===null){var i=Ht.alternate;i=i!==null?i.memoizedState:null}else i=hn.next;var l=nr===null?Ht.memoizedState:nr.next;if(l!==null)nr=l,hn=i;else{if(i===null)throw Ht.alternate===null?Error(r(467)):Error(r(310));hn=i,i={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},nr===null?Ht.memoizedState=nr=i:nr=nr.next=i}return nr}function tm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kc(i){var l=Gc;return Gc+=1,xl===null&&(xl=[]),i=rx(xl,i,l),l=Ht,(nr===null?l.memoizedState:nr.next)===null&&(l=l.alternate,q.H=l===null||l.memoizedState===null?qx:$x),i}function Wd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Kc(i);if(i.$$typeof===T)return Kr(i)}throw Error(r(438,String(i)))}function nm(i){var l=null,d=Ht.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var v=Ht.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=tm(),Ht.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(i),v=0;v<i;v++)d[v]=j;return l.index++,d}function Ei(i,l){return typeof l=="function"?l(i):l}function qd(i){var l=rr();return rm(l,hn,i)}function rm(i,l,d){var v=i.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=d;var b=i.baseQueue,C=v.pending;if(C!==null){if(b!==null){var M=b.next;b.next=C.next,C.next=M}l.baseQueue=b=C,v.pending=null}if(C=i.baseState,b===null)i.memoizedState=C;else{l=b.next;var z=M=null,Y=null,we=l,Fe=!1;do{var Ue=we.lane&-536870913;if(Ue!==we.lane?(tn&Ue)===Ue:(hu&Ue)===Ue){var _e=we.revertLane;if(_e===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),Ue===ml&&(Fe=!0);else if((hu&_e)===_e){we=we.next,_e===ml&&(Fe=!0);continue}else Ue={lane:0,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},Y===null?(z=Y=Ue,M=C):Y=Y.next=Ue,Ht.lanes|=_e,xu|=_e;Ue=we.action,vs&&d(C,Ue),C=we.hasEagerState?we.eagerState:d(C,Ue)}else _e={lane:Ue,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},Y===null?(z=Y=_e,M=C):Y=Y.next=_e,Ht.lanes|=Ue,xu|=Ue;we=we.next}while(we!==null&&we!==l);if(Y===null?M=C:Y.next=z,!Gr(C,i.memoizedState)&&(Er=!0,Fe&&(d=gl,d!==null)))throw d;i.memoizedState=C,i.baseState=M,i.baseQueue=Y,v.lastRenderedState=C}return b===null&&(v.lanes=0),[i.memoizedState,v.dispatch]}function am(i){var l=rr(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=i;var v=d.dispatch,b=d.pending,C=l.memoizedState;if(b!==null){d.pending=null;var M=b=b.next;do C=i(C,M.action),M=M.next;while(M!==b);Gr(C,l.memoizedState)||(Er=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),d.lastRenderedState=C}return[C,v]}function fx(i,l,d){var v=Ht,b=rr(),C=on;if(C){if(d===void 0)throw Error(r(407));d=d()}else d=l();var M=!Gr((hn||b).memoizedState,d);M&&(b.memoizedState=d,Er=!0),b=b.queue;var z=px.bind(null,v,b,i);if(Xc(2048,8,z,[i]),b.getSnapshot!==l||M||nr!==null&&nr.memoizedState.tag&1){if(v.flags|=2048,wl(9,$d(),hx.bind(null,v,b,d,l),null),Rn===null)throw Error(r(349));C||(hu&124)!==0||dx(v,l,d)}return d}function dx(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=Ht.updateQueue,l===null?(l=tm(),Ht.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function hx(i,l,d,v){l.value=d,l.getSnapshot=v,vx(l)&&mx(i)}function px(i,l,d){return d(function(){vx(l)&&mx(i)})}function vx(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!Gr(i,d)}catch{return!0}}function mx(i){var l=ho(i,2);l!==null&&Ma(l,i,2)}function om(i){var l=ga();if(typeof i=="function"){var d=i;if(i=d(),vs){Cn(!0);try{d()}finally{Cn(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:i},l}function gx(i,l,d,v){return i.baseState=d,rm(i,hn,typeof v=="function"?v:Ei)}function dT(i,l,d,v,b){if(Kd(i))throw Error(r(485));if(i=l.action,i!==null){var C={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){C.listeners.push(M)}};q.T!==null?d(!0):C.isTransition=!1,v(C),d=l.pending,d===null?(C.next=l.pending=C,yx(l,C)):(C.next=d.next,l.pending=d.next=C)}}function yx(i,l){var d=l.action,v=l.payload,b=i.state;if(l.isTransition){var C=q.T,M={};q.T=M;try{var z=d(b,v),Y=q.S;Y!==null&&Y(M,z),bx(i,l,z)}catch(we){im(i,l,we)}finally{q.T=C}}else try{C=d(b,v),bx(i,l,C)}catch(we){im(i,l,we)}}function bx(i,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){xx(i,l,v)},function(v){return im(i,l,v)}):xx(i,l,d)}function xx(i,l,d){l.status="fulfilled",l.value=d,wx(l),i.state=d,l=i.pending,l!==null&&(d=l.next,d===l?i.pending=null:(d=d.next,l.next=d,yx(i,d)))}function im(i,l,d){var v=i.pending;if(i.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=d,wx(l),l=l.next;while(l!==v)}i.action=null}function wx(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function Ex(i,l){return l}function Sx(i,l){if(on){var d=Rn.formState;if(d!==null){e:{var v=Ht;if(on){if(zn){t:{for(var b=zn,C=ko;b.nodeType!==8;){if(!C){b=null;break t}if(b=vo(b.nextSibling),b===null){b=null;break t}}C=b.data,b=C==="F!"||C==="F"?b:null}if(b){zn=vo(b.nextSibling),v=b.data==="F!";break e}}fs(v)}v=!1}v&&(l=d[0])}}return d=ga(),d.memoizedState=d.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ex,lastRenderedState:l},d.queue=v,d=Hx.bind(null,Ht,v),v.dispatch=d,v=om(!1),C=fm.bind(null,Ht,!1,v.queue),v=ga(),b={state:l,dispatch:null,action:i,pending:null},v.queue=b,d=dT.bind(null,Ht,b,C,d),b.dispatch=d,v.memoizedState=i,[l,d,!1]}function _x(i){var l=rr();return Cx(l,hn,i)}function Cx(i,l,d){if(l=rm(i,l,Ex)[0],i=qd(Ei)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=Kc(l)}catch(M){throw M===Hc?Ud:M}else v=l;l=rr();var b=l.queue,C=b.dispatch;return d!==l.memoizedState&&(Ht.flags|=2048,wl(9,$d(),hT.bind(null,b,d),null)),[v,C,i]}function hT(i,l){i.action=l}function Rx(i){var l=rr(),d=hn;if(d!==null)return Cx(l,d,i);rr(),l=l.memoizedState,d=rr();var v=d.queue.dispatch;return d.memoizedState=i,[l,v,!1]}function wl(i,l,d,v){return i={tag:i,create:d,deps:v,inst:l,next:null},l=Ht.updateQueue,l===null&&(l=tm(),Ht.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=i.next=i:(v=d.next,d.next=i,i.next=v,l.lastEffect=i),i}function $d(){return{destroy:void 0,resource:void 0}}function Ax(){return rr().memoizedState}function Gd(i,l,d,v){var b=ga();v=v===void 0?null:v,Ht.flags|=i,b.memoizedState=wl(1|l,$d(),d,v)}function Xc(i,l,d,v){var b=rr();v=v===void 0?null:v;var C=b.memoizedState.inst;hn!==null&&v!==null&&Yv(v,hn.memoizedState.deps)?b.memoizedState=wl(l,C,d,v):(Ht.flags|=i,b.memoizedState=wl(1|l,C,d,v))}function Tx(i,l){Gd(8390656,8,i,l)}function Dx(i,l){Xc(2048,8,i,l)}function Nx(i,l){return Xc(4,2,i,l)}function kx(i,l){return Xc(4,4,i,l)}function Ox(i,l){if(typeof l=="function"){i=i();var d=l(i);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function Mx(i,l,d){d=d!=null?d.concat([i]):null,Xc(4,4,Ox.bind(null,l,i),d)}function um(){}function Ix(i,l){var d=rr();l=l===void 0?null:l;var v=d.memoizedState;return l!==null&&Yv(l,v[1])?v[0]:(d.memoizedState=[i,l],i)}function Fx(i,l){var d=rr();l=l===void 0?null:l;var v=d.memoizedState;if(l!==null&&Yv(l,v[1]))return v[0];if(v=i(),vs){Cn(!0);try{i()}finally{Cn(!1)}}return d.memoizedState=[v,l],v}function sm(i,l,d){return d===void 0||(hu&1073741824)!==0?i.memoizedState=l:(i.memoizedState=d,i=L1(),Ht.lanes|=i,xu|=i,d)}function Bx(i,l,d,v){return Gr(d,l)?d:yl.current!==null?(i=sm(i,d,v),Gr(i,l)||(Er=!0),i):(hu&42)===0?(Er=!0,i.memoizedState=d):(i=L1(),Ht.lanes|=i,xu|=i,l)}function Px(i,l,d,v,b){var C=ne.p;ne.p=C!==0&&8>C?C:8;var M=q.T,z={};q.T=z,fm(i,!1,l,d);try{var Y=b(),we=q.S;if(we!==null&&we(z,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var Fe=lT(Y,v);Yc(i,l,Fe,Oa(i))}else Yc(i,l,v,Oa(i))}catch(Ue){Yc(i,l,{then:function(){},status:"rejected",reason:Ue},Oa())}finally{ne.p=C,q.T=M}}function pT(){}function lm(i,l,d,v){if(i.tag!==5)throw Error(r(476));var b=Lx(i).queue;Px(i,b,l,ee,d===null?pT:function(){return Ux(i),d(v)})}function Lx(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:ee},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:d},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function Ux(i){var l=Lx(i).next.queue;Yc(i,l,{},Oa())}function cm(){return Kr(vf)}function zx(){return rr().memoizedState}function jx(){return rr().memoizedState}function vT(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var d=Oa();i=fu(d);var v=du(l,i,d);v!==null&&(Ma(v,l,d),Wc(v,l,d)),l={cache:zv()},i.payload=l;return}l=l.return}}function mT(i,l,d){var v=Oa();d={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Kd(i)?Vx(l,d):(d=tr(i,l,d,v),d!==null&&(Ma(d,i,v),Wx(d,l,v)))}function Hx(i,l,d){var v=Oa();Yc(i,l,d,v)}function Yc(i,l,d,v){var b={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Kd(i))Vx(l,b);else{var C=i.alternate;if(i.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var M=l.lastRenderedState,z=C(M,d);if(b.hasEagerState=!0,b.eagerState=z,Gr(z,M))return Gn(i,l,b,0),Rn===null&&Rt(),!1}catch{}finally{}if(d=tr(i,l,b,v),d!==null)return Ma(d,i,v),Wx(d,l,v),!0}return!1}function fm(i,l,d,v){if(v={lane:2,revertLane:Vm(),action:v,hasEagerState:!1,eagerState:null,next:null},Kd(i)){if(l)throw Error(r(479))}else l=tr(i,d,v,2),l!==null&&Ma(l,i,2)}function Kd(i){var l=i.alternate;return i===Ht||l!==null&&l===Ht}function Vx(i,l){bl=Hd=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function Wx(i,l,d){if((d&4194048)!==0){var v=l.lanes;v&=i.pendingLanes,d|=v,l.lanes=d,co(i,d)}}var Xd={readContext:Kr,use:Wd,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn},qx={readContext:Kr,use:Wd,useCallback:function(i,l){return ga().memoizedState=[i,l===void 0?null:l],i},useContext:Kr,useEffect:Tx,useImperativeHandle:function(i,l,d){d=d!=null?d.concat([i]):null,Gd(4194308,4,Ox.bind(null,l,i),d)},useLayoutEffect:function(i,l){return Gd(4194308,4,i,l)},useInsertionEffect:function(i,l){Gd(4,2,i,l)},useMemo:function(i,l){var d=ga();l=l===void 0?null:l;var v=i();if(vs){Cn(!0);try{i()}finally{Cn(!1)}}return d.memoizedState=[v,l],v},useReducer:function(i,l,d){var v=ga();if(d!==void 0){var b=d(l);if(vs){Cn(!0);try{d(l)}finally{Cn(!1)}}}else b=l;return v.memoizedState=v.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},v.queue=i,i=i.dispatch=mT.bind(null,Ht,i),[v.memoizedState,i]},useRef:function(i){var l=ga();return i={current:i},l.memoizedState=i},useState:function(i){i=om(i);var l=i.queue,d=Hx.bind(null,Ht,l);return l.dispatch=d,[i.memoizedState,d]},useDebugValue:um,useDeferredValue:function(i,l){var d=ga();return sm(d,i,l)},useTransition:function(){var i=om(!1);return i=Px.bind(null,Ht,i.queue,!0,!1),ga().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,d){var v=Ht,b=ga();if(on){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Rn===null)throw Error(r(349));(tn&124)!==0||dx(v,l,d)}b.memoizedState=d;var C={value:d,getSnapshot:l};return b.queue=C,Tx(px.bind(null,v,C,i),[i]),v.flags|=2048,wl(9,$d(),hx.bind(null,v,C,d,l),null),d},useId:function(){var i=ga(),l=Rn.identifierPrefix;if(on){var d=bi,v=yi;d=(v&~(1<<32-yn(v)-1)).toString(32)+d,l=""+l+"R"+d,d=Vd++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=cT++,l=""+l+"r"+d.toString(32)+"";return i.memoizedState=l},useHostTransitionStatus:cm,useFormState:Sx,useActionState:Sx,useOptimistic:function(i){var l=ga();l.memoizedState=l.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=fm.bind(null,Ht,!0,d),d.dispatch=l,[i,l]},useMemoCache:nm,useCacheRefresh:function(){return ga().memoizedState=vT.bind(null,Ht)}},$x={readContext:Kr,use:Wd,useCallback:Ix,useContext:Kr,useEffect:Dx,useImperativeHandle:Mx,useInsertionEffect:Nx,useLayoutEffect:kx,useMemo:Fx,useReducer:qd,useRef:Ax,useState:function(){return qd(Ei)},useDebugValue:um,useDeferredValue:function(i,l){var d=rr();return Bx(d,hn.memoizedState,i,l)},useTransition:function(){var i=qd(Ei)[0],l=rr().memoizedState;return[typeof i=="boolean"?i:Kc(i),l]},useSyncExternalStore:fx,useId:zx,useHostTransitionStatus:cm,useFormState:_x,useActionState:_x,useOptimistic:function(i,l){var d=rr();return gx(d,hn,i,l)},useMemoCache:nm,useCacheRefresh:jx},gT={readContext:Kr,use:Wd,useCallback:Ix,useContext:Kr,useEffect:Dx,useImperativeHandle:Mx,useInsertionEffect:Nx,useLayoutEffect:kx,useMemo:Fx,useReducer:am,useRef:Ax,useState:function(){return am(Ei)},useDebugValue:um,useDeferredValue:function(i,l){var d=rr();return hn===null?sm(d,i,l):Bx(d,hn.memoizedState,i,l)},useTransition:function(){var i=am(Ei)[0],l=rr().memoizedState;return[typeof i=="boolean"?i:Kc(i),l]},useSyncExternalStore:fx,useId:zx,useHostTransitionStatus:cm,useFormState:Rx,useActionState:Rx,useOptimistic:function(i,l){var d=rr();return hn!==null?gx(d,hn,i,l):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:nm,useCacheRefresh:jx},El=null,Qc=0;function Yd(i){var l=Qc;return Qc+=1,El===null&&(El=[]),rx(El,i,l)}function Zc(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function Qd(i,l){throw l.$$typeof===p?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function Gx(i){var l=i._init;return l(i._payload)}function Kx(i){function l(ve,ie){if(i){var xe=ve.deletions;xe===null?(ve.deletions=[ie],ve.flags|=16):xe.push(ie)}}function d(ve,ie){if(!i)return null;for(;ie!==null;)l(ve,ie),ie=ie.sibling;return null}function v(ve){for(var ie=new Map;ve!==null;)ve.key!==null?ie.set(ve.key,ve):ie.set(ve.index,ve),ve=ve.sibling;return ie}function b(ve,ie){return ve=gi(ve,ie),ve.index=0,ve.sibling=null,ve}function C(ve,ie,xe){return ve.index=xe,i?(xe=ve.alternate,xe!==null?(xe=xe.index,xe<ie?(ve.flags|=67108866,ie):xe):(ve.flags|=67108866,ie)):(ve.flags|=1048576,ie)}function M(ve){return i&&ve.alternate===null&&(ve.flags|=67108866),ve}function z(ve,ie,xe,Be){return ie===null||ie.tag!==6?(ie=Ov(xe,ve.mode,Be),ie.return=ve,ie):(ie=b(ie,xe),ie.return=ve,ie)}function Y(ve,ie,xe,Be){var ut=xe.type;return ut===x?Fe(ve,ie,xe.props.children,Be,xe.key):ie!==null&&(ie.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===H&&Gx(ut)===ie.type)?(ie=b(ie,xe.props),Zc(ie,xe),ie.return=ve,ie):(ie=Md(xe.type,xe.key,xe.props,null,ve.mode,Be),Zc(ie,xe),ie.return=ve,ie)}function we(ve,ie,xe,Be){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==xe.containerInfo||ie.stateNode.implementation!==xe.implementation?(ie=Mv(xe,ve.mode,Be),ie.return=ve,ie):(ie=b(ie,xe.children||[]),ie.return=ve,ie)}function Fe(ve,ie,xe,Be,ut){return ie===null||ie.tag!==7?(ie=us(xe,ve.mode,Be,ut),ie.return=ve,ie):(ie=b(ie,xe),ie.return=ve,ie)}function Ue(ve,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=Ov(""+ie,ve.mode,xe),ie.return=ve,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case m:return xe=Md(ie.type,ie.key,ie.props,null,ve.mode,xe),Zc(xe,ie),xe.return=ve,xe;case g:return ie=Mv(ie,ve.mode,xe),ie.return=ve,ie;case H:var Be=ie._init;return ie=Be(ie._payload),Ue(ve,ie,xe)}if(he(ie)||K(ie))return ie=us(ie,ve.mode,xe,null),ie.return=ve,ie;if(typeof ie.then=="function")return Ue(ve,Yd(ie),xe);if(ie.$$typeof===T)return Ue(ve,Pd(ve,ie),xe);Qd(ve,ie)}return null}function _e(ve,ie,xe,Be){var ut=ie!==null?ie.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ut!==null?null:z(ve,ie,""+xe,Be);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case m:return xe.key===ut?Y(ve,ie,xe,Be):null;case g:return xe.key===ut?we(ve,ie,xe,Be):null;case H:return ut=xe._init,xe=ut(xe._payload),_e(ve,ie,xe,Be)}if(he(xe)||K(xe))return ut!==null?null:Fe(ve,ie,xe,Be,null);if(typeof xe.then=="function")return _e(ve,ie,Yd(xe),Be);if(xe.$$typeof===T)return _e(ve,ie,Pd(ve,xe),Be);Qd(ve,xe)}return null}function Ae(ve,ie,xe,Be,ut){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return ve=ve.get(xe)||null,z(ie,ve,""+Be,ut);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case m:return ve=ve.get(Be.key===null?xe:Be.key)||null,Y(ie,ve,Be,ut);case g:return ve=ve.get(Be.key===null?xe:Be.key)||null,we(ie,ve,Be,ut);case H:var qt=Be._init;return Be=qt(Be._payload),Ae(ve,ie,xe,Be,ut)}if(he(Be)||K(Be))return ve=ve.get(xe)||null,Fe(ie,ve,Be,ut,null);if(typeof Be.then=="function")return Ae(ve,ie,xe,Yd(Be),ut);if(Be.$$typeof===T)return Ae(ve,ie,xe,Pd(ie,Be),ut);Qd(ie,Be)}return null}function At(ve,ie,xe,Be){for(var ut=null,qt=null,mt=ie,Ct=ie=0,_r=null;mt!==null&&Ct<xe.length;Ct++){mt.index>Ct?(_r=mt,mt=null):_r=mt.sibling;var an=_e(ve,mt,xe[Ct],Be);if(an===null){mt===null&&(mt=_r);break}i&&mt&&an.alternate===null&&l(ve,mt),ie=C(an,ie,Ct),qt===null?ut=an:qt.sibling=an,qt=an,mt=_r}if(Ct===xe.length)return d(ve,mt),on&&ls(ve,Ct),ut;if(mt===null){for(;Ct<xe.length;Ct++)mt=Ue(ve,xe[Ct],Be),mt!==null&&(ie=C(mt,ie,Ct),qt===null?ut=mt:qt.sibling=mt,qt=mt);return on&&ls(ve,Ct),ut}for(mt=v(mt);Ct<xe.length;Ct++)_r=Ae(mt,ve,Ct,xe[Ct],Be),_r!==null&&(i&&_r.alternate!==null&&mt.delete(_r.key===null?Ct:_r.key),ie=C(_r,ie,Ct),qt===null?ut=_r:qt.sibling=_r,qt=_r);return i&&mt.forEach(function(Du){return l(ve,Du)}),on&&ls(ve,Ct),ut}function _t(ve,ie,xe,Be){if(xe==null)throw Error(r(151));for(var ut=null,qt=null,mt=ie,Ct=ie=0,_r=null,an=xe.next();mt!==null&&!an.done;Ct++,an=xe.next()){mt.index>Ct?(_r=mt,mt=null):_r=mt.sibling;var Du=_e(ve,mt,an.value,Be);if(Du===null){mt===null&&(mt=_r);break}i&&mt&&Du.alternate===null&&l(ve,mt),ie=C(Du,ie,Ct),qt===null?ut=Du:qt.sibling=Du,qt=Du,mt=_r}if(an.done)return d(ve,mt),on&&ls(ve,Ct),ut;if(mt===null){for(;!an.done;Ct++,an=xe.next())an=Ue(ve,an.value,Be),an!==null&&(ie=C(an,ie,Ct),qt===null?ut=an:qt.sibling=an,qt=an);return on&&ls(ve,Ct),ut}for(mt=v(mt);!an.done;Ct++,an=xe.next())an=Ae(mt,ve,Ct,an.value,Be),an!==null&&(i&&an.alternate!==null&&mt.delete(an.key===null?Ct:an.key),ie=C(an,ie,Ct),qt===null?ut=an:qt.sibling=an,qt=an);return i&&mt.forEach(function(yD){return l(ve,yD)}),on&&ls(ve,Ct),ut}function vn(ve,ie,xe,Be){if(typeof xe=="object"&&xe!==null&&xe.type===x&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case m:e:{for(var ut=xe.key;ie!==null;){if(ie.key===ut){if(ut=xe.type,ut===x){if(ie.tag===7){d(ve,ie.sibling),Be=b(ie,xe.props.children),Be.return=ve,ve=Be;break e}}else if(ie.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===H&&Gx(ut)===ie.type){d(ve,ie.sibling),Be=b(ie,xe.props),Zc(Be,xe),Be.return=ve,ve=Be;break e}d(ve,ie);break}else l(ve,ie);ie=ie.sibling}xe.type===x?(Be=us(xe.props.children,ve.mode,Be,xe.key),Be.return=ve,ve=Be):(Be=Md(xe.type,xe.key,xe.props,null,ve.mode,Be),Zc(Be,xe),Be.return=ve,ve=Be)}return M(ve);case g:e:{for(ut=xe.key;ie!==null;){if(ie.key===ut)if(ie.tag===4&&ie.stateNode.containerInfo===xe.containerInfo&&ie.stateNode.implementation===xe.implementation){d(ve,ie.sibling),Be=b(ie,xe.children||[]),Be.return=ve,ve=Be;break e}else{d(ve,ie);break}else l(ve,ie);ie=ie.sibling}Be=Mv(xe,ve.mode,Be),Be.return=ve,ve=Be}return M(ve);case H:return ut=xe._init,xe=ut(xe._payload),vn(ve,ie,xe,Be)}if(he(xe))return At(ve,ie,xe,Be);if(K(xe)){if(ut=K(xe),typeof ut!="function")throw Error(r(150));return xe=ut.call(xe),_t(ve,ie,xe,Be)}if(typeof xe.then=="function")return vn(ve,ie,Yd(xe),Be);if(xe.$$typeof===T)return vn(ve,ie,Pd(ve,xe),Be);Qd(ve,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint"?(xe=""+xe,ie!==null&&ie.tag===6?(d(ve,ie.sibling),Be=b(ie,xe),Be.return=ve,ve=Be):(d(ve,ie),Be=Ov(xe,ve.mode,Be),Be.return=ve,ve=Be),M(ve)):d(ve,ie)}return function(ve,ie,xe,Be){try{Qc=0;var ut=vn(ve,ie,xe,Be);return El=null,ut}catch(mt){if(mt===Hc||mt===Ud)throw mt;var qt=Ta(29,mt,null,ve.mode);return qt.lanes=Be,qt.return=ve,qt}finally{}}}var Sl=Kx(!0),Xx=Kx(!1),Qa=se(null),Oo=null;function pu(i){var l=i.alternate;Se(cr,cr.current&1),Se(Qa,i),Oo===null&&(l===null||yl.current!==null||l.memoizedState!==null)&&(Oo=i)}function Yx(i){if(i.tag===22){if(Se(cr,cr.current),Se(Qa,i),Oo===null){var l=i.alternate;l!==null&&l.memoizedState!==null&&(Oo=i)}}else vu()}function vu(){Se(cr,cr.current),Se(Qa,Qa.current)}function Si(i){Re(Qa),Oo===i&&(Oo=null),Re(cr)}var cr=se(0);function Zd(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||tg(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function dm(i,l,d,v){l=i.memoizedState,d=d(v,l),d=d==null?l:h({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var hm={enqueueSetState:function(i,l,d){i=i._reactInternals;var v=Oa(),b=fu(v);b.payload=l,d!=null&&(b.callback=d),l=du(i,b,v),l!==null&&(Ma(l,i,v),Wc(l,i,v))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var v=Oa(),b=fu(v);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=du(i,b,v),l!==null&&(Ma(l,i,v),Wc(l,i,v))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=Oa(),v=fu(d);v.tag=2,l!=null&&(v.callback=l),l=du(i,v,d),l!==null&&(Ma(l,i,d),Wc(l,i,d))}};function Qx(i,l,d,v,b,C,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(v,C,M):l.prototype&&l.prototype.isPureReactComponent?!y(d,v)||!y(b,C):!0}function Zx(i,l,d,v){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,v),l.state!==i&&hm.enqueueReplaceState(l,l.state,null)}function ms(i,l){var d=l;if("ref"in l){d={};for(var v in l)v!=="ref"&&(d[v]=l[v])}if(i=i.defaultProps){d===l&&(d=h({},d));for(var b in i)d[b]===void 0&&(d[b]=i[b])}return d}var Jd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Jx(i){Jd(i)}function e1(i){console.error(i)}function t1(i){Jd(i)}function eh(i,l){try{var d=i.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function n1(i,l,d){try{var v=i.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function pm(i,l,d){return d=fu(d),d.tag=3,d.payload={element:null},d.callback=function(){eh(i,l)},d}function r1(i){return i=fu(i),i.tag=3,i}function a1(i,l,d,v){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var C=v.value;i.payload=function(){return b(C)},i.callback=function(){n1(l,d,v)}}var M=d.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(i.callback=function(){n1(l,d,v),typeof b!="function"&&(wu===null?wu=new Set([this]):wu.add(this));var z=v.stack;this.componentDidCatch(v.value,{componentStack:z!==null?z:""})})}function yT(i,l,d,v,b){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=d.alternate,l!==null&&Uc(l,d,b,!0),d=Qa.current,d!==null){switch(d.tag){case 13:return Oo===null?Lm():d.alternate===null&&jn===0&&(jn=3),d.flags&=-257,d.flags|=65536,d.lanes=b,v===Vv?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([v]):l.add(v),zm(i,v,b)),!1;case 22:return d.flags|=65536,v===Vv?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([v]):d.add(v)),zm(i,v,b)),!1}throw Error(r(435,d.tag))}return zm(i,v,b),Lm(),!1}if(on)return l=Qa.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,v!==Bv&&(i=Error(r(422),{cause:v}),Lc(gt(i,d)))):(v!==Bv&&(l=Error(r(423),{cause:v}),Lc(gt(l,d))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,v=gt(v,d),b=pm(i.stateNode,v,b),$v(i,b),jn!==4&&(jn=2)),!1;var C=Error(r(520),{cause:v});if(C=gt(C,d),of===null?of=[C]:of.push(C),jn!==4&&(jn=2),l===null)return!0;v=gt(v,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,i=b&-b,d.lanes|=i,i=pm(d.stateNode,v,i),$v(d,i),!1;case 1:if(l=d.type,C=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(wu===null||!wu.has(C))))return d.flags|=65536,b&=-b,d.lanes|=b,b=r1(b),a1(b,i,d,v),$v(d,b),!1}d=d.return}while(d!==null);return!1}var o1=Error(r(461)),Er=!1;function Or(i,l,d,v){l.child=i===null?Xx(l,null,d,v):Sl(l,i.child,d,v)}function i1(i,l,d,v,b){d=d.render;var C=l.ref;if("ref"in v){var M={};for(var z in v)z!=="ref"&&(M[z]=v[z])}else M=v;return hs(l),v=Qv(i,l,d,M,C,b),z=Zv(),i!==null&&!Er?(Jv(i,l,b),_i(i,l,b)):(on&&z&&Iv(l),l.flags|=1,Or(i,l,v,b),l.child)}function u1(i,l,d,v,b){if(i===null){var C=d.type;return typeof C=="function"&&!kv(C)&&C.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=C,s1(i,l,C,v,b)):(i=Md(d.type,null,v,l,l.mode,b),i.ref=l.ref,i.return=l,l.child=i)}if(C=i.child,!Em(i,b)){var M=C.memoizedProps;if(d=d.compare,d=d!==null?d:y,d(M,v)&&i.ref===l.ref)return _i(i,l,b)}return l.flags|=1,i=gi(C,v),i.ref=l.ref,i.return=l,l.child=i}function s1(i,l,d,v,b){if(i!==null){var C=i.memoizedProps;if(y(C,v)&&i.ref===l.ref)if(Er=!1,l.pendingProps=v=C,Em(i,b))(i.flags&131072)!==0&&(Er=!0);else return l.lanes=i.lanes,_i(i,l,b)}return vm(i,l,d,v,b)}function l1(i,l,d){var v=l.pendingProps,b=v.children,C=i!==null?i.memoizedState:null;if(v.mode==="hidden"){if((l.flags&128)!==0){if(v=C!==null?C.baseLanes|d:d,i!==null){for(b=l.child=i.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;l.childLanes=C&~v}else l.childLanes=0,l.child=null;return c1(i,l,v,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ld(l,C!==null?C.cachePool:null),C!==null?sx(l,C):Kv(),Yx(l);else return l.lanes=l.childLanes=536870912,c1(i,l,C!==null?C.baseLanes|d:d,d)}else C!==null?(Ld(l,C.cachePool),sx(l,C),vu(),l.memoizedState=null):(i!==null&&Ld(l,null),Kv(),vu());return Or(i,l,b,d),l.child}function c1(i,l,d,v){var b=Hv();return b=b===null?null:{parent:lr._currentValue,pool:b},l.memoizedState={baseLanes:d,cachePool:b},i!==null&&Ld(l,null),Kv(),Yx(l),i!==null&&Uc(i,l,v,!0),null}function th(i,l){var d=l.ref;if(d===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(i===null||i.ref!==d)&&(l.flags|=4194816)}}function vm(i,l,d,v,b){return hs(l),d=Qv(i,l,d,v,void 0,b),v=Zv(),i!==null&&!Er?(Jv(i,l,b),_i(i,l,b)):(on&&v&&Iv(l),l.flags|=1,Or(i,l,d,b),l.child)}function f1(i,l,d,v,b,C){return hs(l),l.updateQueue=null,d=cx(l,v,d,b),lx(i),v=Zv(),i!==null&&!Er?(Jv(i,l,C),_i(i,l,C)):(on&&v&&Iv(l),l.flags|=1,Or(i,l,d,C),l.child)}function d1(i,l,d,v,b){if(hs(l),l.stateNode===null){var C=No,M=d.contextType;typeof M=="object"&&M!==null&&(C=Kr(M)),C=new d(v,C),l.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=hm,l.stateNode=C,C._reactInternals=l,C=l.stateNode,C.props=v,C.state=l.memoizedState,C.refs={},Wv(l),M=d.contextType,C.context=typeof M=="object"&&M!==null?Kr(M):No,C.state=l.memoizedState,M=d.getDerivedStateFromProps,typeof M=="function"&&(dm(l,d,M,v),C.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(M=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),M!==C.state&&hm.enqueueReplaceState(C,C.state,null),$c(l,v,C,b),qc(),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(i===null){C=l.stateNode;var z=l.memoizedProps,Y=ms(d,z);C.props=Y;var we=C.context,Fe=d.contextType;M=No,typeof Fe=="object"&&Fe!==null&&(M=Kr(Fe));var Ue=d.getDerivedStateFromProps;Fe=typeof Ue=="function"||typeof C.getSnapshotBeforeUpdate=="function",z=l.pendingProps!==z,Fe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z||we!==M)&&Zx(l,C,v,M),cu=!1;var _e=l.memoizedState;C.state=_e,$c(l,v,C,b),qc(),we=l.memoizedState,z||_e!==we||cu?(typeof Ue=="function"&&(dm(l,d,Ue,v),we=l.memoizedState),(Y=cu||Qx(l,d,Y,v,_e,we,M))?(Fe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(l.flags|=4194308)):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=we),C.props=v,C.state=we,C.context=M,v=Y):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{C=l.stateNode,qv(i,l),M=l.memoizedProps,Fe=ms(d,M),C.props=Fe,Ue=l.pendingProps,_e=C.context,we=d.contextType,Y=No,typeof we=="object"&&we!==null&&(Y=Kr(we)),z=d.getDerivedStateFromProps,(we=typeof z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==Ue||_e!==Y)&&Zx(l,C,v,Y),cu=!1,_e=l.memoizedState,C.state=_e,$c(l,v,C,b),qc();var Ae=l.memoizedState;M!==Ue||_e!==Ae||cu||i!==null&&i.dependencies!==null&&Bd(i.dependencies)?(typeof z=="function"&&(dm(l,d,z,v),Ae=l.memoizedState),(Fe=cu||Qx(l,d,Fe,v,_e,Ae,Y)||i!==null&&i.dependencies!==null&&Bd(i.dependencies))?(we||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,Ae,Y),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,Ae,Y)),typeof C.componentDidUpdate=="function"&&(l.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&_e===i.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&_e===i.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=Ae),C.props=v,C.state=Ae,C.context=Y,v=Fe):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&_e===i.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&_e===i.memoizedState||(l.flags|=1024),v=!1)}return C=v,th(i,l),v=(l.flags&128)!==0,C||v?(C=l.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:C.render(),l.flags|=1,i!==null&&v?(l.child=Sl(l,i.child,null,b),l.child=Sl(l,null,d,b)):Or(i,l,d,b),l.memoizedState=C.state,i=l.child):i=_i(i,l,b),i}function h1(i,l,d,v){return Pc(),l.flags|=256,Or(i,l,d,v),l.child}var mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gm(i){return{baseLanes:i,cachePool:ex()}}function ym(i,l,d){return i=i!==null?i.childLanes&~d:0,l&&(i|=Za),i}function p1(i,l,d){var v=l.pendingProps,b=!1,C=(l.flags&128)!==0,M;if((M=C)||(M=i!==null&&i.memoizedState===null?!1:(cr.current&2)!==0),M&&(b=!0,l.flags&=-129),M=(l.flags&32)!==0,l.flags&=-33,i===null){if(on){if(b?pu(l):vu(),on){var z=zn,Y;if(Y=z){e:{for(Y=z,z=ko;Y.nodeType!==8;){if(!z){z=null;break e}if(Y=vo(Y.nextSibling),Y===null){z=null;break e}}z=Y}z!==null?(l.memoizedState={dehydrated:z,treeContext:ss!==null?{id:yi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},Y=Ta(18,null,null,0),Y.stateNode=z,Y.return=l,l.child=Y,sa=l,zn=null,Y=!0):Y=!1}Y||fs(l)}if(z=l.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return tg(z)?l.lanes=32:l.lanes=536870912,null;Si(l)}return z=v.children,v=v.fallback,b?(vu(),b=l.mode,z=nh({mode:"hidden",children:z},b),v=us(v,b,d,null),z.return=l,v.return=l,z.sibling=v,l.child=z,b=l.child,b.memoizedState=gm(d),b.childLanes=ym(i,M,d),l.memoizedState=mm,v):(pu(l),bm(l,z))}if(Y=i.memoizedState,Y!==null&&(z=Y.dehydrated,z!==null)){if(C)l.flags&256?(pu(l),l.flags&=-257,l=xm(i,l,d)):l.memoizedState!==null?(vu(),l.child=i.child,l.flags|=128,l=null):(vu(),b=v.fallback,z=l.mode,v=nh({mode:"visible",children:v.children},z),b=us(b,z,d,null),b.flags|=2,v.return=l,b.return=l,v.sibling=b,l.child=v,Sl(l,i.child,null,d),v=l.child,v.memoizedState=gm(d),v.childLanes=ym(i,M,d),l.memoizedState=mm,l=b);else if(pu(l),tg(z)){if(M=z.nextSibling&&z.nextSibling.dataset,M)var we=M.dgst;M=we,v=Error(r(419)),v.stack="",v.digest=M,Lc({value:v,source:null,stack:null}),l=xm(i,l,d)}else if(Er||Uc(i,l,d,!1),M=(d&i.childLanes)!==0,Er||M){if(M=Rn,M!==null&&(v=d&-d,v=(v&42)!==0?1:Zu(v),v=(v&(M.suspendedLanes|d))!==0?0:v,v!==0&&v!==Y.retryLane))throw Y.retryLane=v,ho(i,v),Ma(M,i,v),o1;z.data==="$?"||Lm(),l=xm(i,l,d)}else z.data==="$?"?(l.flags|=192,l.child=i.child,l=null):(i=Y.treeContext,zn=vo(z.nextSibling),sa=l,on=!0,cs=null,ko=!1,i!==null&&(Xa[Ya++]=yi,Xa[Ya++]=bi,Xa[Ya++]=ss,yi=i.id,bi=i.overflow,ss=l),l=bm(l,v.children),l.flags|=4096);return l}return b?(vu(),b=v.fallback,z=l.mode,Y=i.child,we=Y.sibling,v=gi(Y,{mode:"hidden",children:v.children}),v.subtreeFlags=Y.subtreeFlags&65011712,we!==null?b=gi(we,b):(b=us(b,z,d,null),b.flags|=2),b.return=l,v.return=l,v.sibling=b,l.child=v,v=b,b=l.child,z=i.child.memoizedState,z===null?z=gm(d):(Y=z.cachePool,Y!==null?(we=lr._currentValue,Y=Y.parent!==we?{parent:we,pool:we}:Y):Y=ex(),z={baseLanes:z.baseLanes|d,cachePool:Y}),b.memoizedState=z,b.childLanes=ym(i,M,d),l.memoizedState=mm,v):(pu(l),d=i.child,i=d.sibling,d=gi(d,{mode:"visible",children:v.children}),d.return=l,d.sibling=null,i!==null&&(M=l.deletions,M===null?(l.deletions=[i],l.flags|=16):M.push(i)),l.child=d,l.memoizedState=null,d)}function bm(i,l){return l=nh({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function nh(i,l){return i=Ta(22,i,null,l),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function xm(i,l,d){return Sl(l,i.child,null,d),i=bm(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function v1(i,l,d){i.lanes|=l;var v=i.alternate;v!==null&&(v.lanes|=l),Lv(i.return,l,d)}function wm(i,l,d,v,b){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:b}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=v,C.tail=d,C.tailMode=b)}function m1(i,l,d){var v=l.pendingProps,b=v.revealOrder,C=v.tail;if(Or(i,l,v.children,d),v=cr.current,(v&2)!==0)v=v&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&v1(i,d,l);else if(i.tag===19)v1(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}v&=1}switch(Se(cr,v),b){case"forwards":for(d=l.child,b=null;d!==null;)i=d.alternate,i!==null&&Zd(i)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),wm(l,!1,b,d,C);break;case"backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(i=b.alternate,i!==null&&Zd(i)===null){l.child=b;break}i=b.sibling,b.sibling=d,d=b,b=i}wm(l,!0,d,null,C);break;case"together":wm(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function _i(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),xu|=l.lanes,(d&l.childLanes)===0)if(i!==null){if(Uc(i,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,d=gi(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=gi(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function Em(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&Bd(i)))}function bT(i,l,d){switch(l.tag){case 3:ot(l,l.stateNode.containerInfo),lu(l,lr,i.memoizedState.cache),Pc();break;case 27:case 5:kt(l);break;case 4:ot(l,l.stateNode.containerInfo);break;case 10:lu(l,l.type,l.memoizedProps.value);break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(pu(l),l.flags|=128,null):(d&l.child.childLanes)!==0?p1(i,l,d):(pu(l),i=_i(i,l,d),i!==null?i.sibling:null);pu(l);break;case 19:var b=(i.flags&128)!==0;if(v=(d&l.childLanes)!==0,v||(Uc(i,l,d,!1),v=(d&l.childLanes)!==0),b){if(v)return m1(i,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Se(cr,cr.current),v)break;return null;case 22:case 23:return l.lanes=0,l1(i,l,d);case 24:lu(l,lr,i.memoizedState.cache)}return _i(i,l,d)}function g1(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps)Er=!0;else{if(!Em(i,d)&&(l.flags&128)===0)return Er=!1,bT(i,l,d);Er=(i.flags&131072)!==0}else Er=!1,on&&(l.flags&1048576)!==0&&Gb(l,Fd,l.index);switch(l.lanes=0,l.tag){case 16:e:{i=l.pendingProps;var v=l.elementType,b=v._init;if(v=b(v._payload),l.type=v,typeof v=="function")kv(v)?(i=ms(v,i),l.tag=1,l=d1(null,l,v,i,d)):(l.tag=0,l=vm(null,l,v,i,d));else{if(v!=null){if(b=v.$$typeof,b===N){l.tag=11,l=i1(null,l,v,i,d);break e}else if(b===P){l.tag=14,l=u1(null,l,v,i,d);break e}}throw l=pe(v)||v,Error(r(306,l,""))}}return l;case 0:return vm(i,l,l.type,l.pendingProps,d);case 1:return v=l.type,b=ms(v,l.pendingProps),d1(i,l,v,b,d);case 3:e:{if(ot(l,l.stateNode.containerInfo),i===null)throw Error(r(387));v=l.pendingProps;var C=l.memoizedState;b=C.element,qv(i,l),$c(l,v,null,d);var M=l.memoizedState;if(v=M.cache,lu(l,lr,v),v!==C.cache&&Uv(l,[lr],d,!0),qc(),v=M.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:M.cache},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){l=h1(i,l,v,d);break e}else if(v!==b){b=gt(Error(r(424)),l),Lc(b),l=h1(i,l,v,d);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(zn=vo(i.firstChild),sa=l,on=!0,cs=null,ko=!0,d=Xx(l,null,v,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Pc(),v===b){l=_i(i,l,d);break e}Or(i,l,v,d)}l=l.child}return l;case 26:return th(i,l),i===null?(d=ww(l.type,null,l.pendingProps,null))?l.memoizedState=d:on||(d=l.type,i=l.pendingProps,v=mh(Ve.current).createElement(d),v[Pe]=l,v[Le]=i,Ir(v,d,i),Lt(v),l.stateNode=v):l.memoizedState=ww(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return kt(l),i===null&&on&&(v=l.stateNode=yw(l.type,l.pendingProps,Ve.current),sa=l,ko=!0,b=zn,_u(l.type)?(ng=b,zn=vo(v.firstChild)):zn=b),Or(i,l,l.pendingProps.children,d),th(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&on&&((b=v=zn)&&(v=GT(v,l.type,l.pendingProps,ko),v!==null?(l.stateNode=v,sa=l,zn=vo(v.firstChild),ko=!1,b=!0):b=!1),b||fs(l)),kt(l),b=l.type,C=l.pendingProps,M=i!==null?i.memoizedProps:null,v=C.children,Zm(b,C)?v=null:M!==null&&Zm(b,M)&&(l.flags|=32),l.memoizedState!==null&&(b=Qv(i,l,fT,null,null,d),vf._currentValue=b),th(i,l),Or(i,l,v,d),l.child;case 6:return i===null&&on&&((i=d=zn)&&(d=KT(d,l.pendingProps,ko),d!==null?(l.stateNode=d,sa=l,zn=null,i=!0):i=!1),i||fs(l)),null;case 13:return p1(i,l,d);case 4:return ot(l,l.stateNode.containerInfo),v=l.pendingProps,i===null?l.child=Sl(l,null,v,d):Or(i,l,v,d),l.child;case 11:return i1(i,l,l.type,l.pendingProps,d);case 7:return Or(i,l,l.pendingProps,d),l.child;case 8:return Or(i,l,l.pendingProps.children,d),l.child;case 12:return Or(i,l,l.pendingProps.children,d),l.child;case 10:return v=l.pendingProps,lu(l,l.type,v.value),Or(i,l,v.children,d),l.child;case 9:return b=l.type._context,v=l.pendingProps.children,hs(l),b=Kr(b),v=v(b),l.flags|=1,Or(i,l,v,d),l.child;case 14:return u1(i,l,l.type,l.pendingProps,d);case 15:return s1(i,l,l.type,l.pendingProps,d);case 19:return m1(i,l,d);case 31:return v=l.pendingProps,d=l.mode,v={mode:v.mode,children:v.children},i===null?(d=nh(v,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=gi(i.child,v),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return l1(i,l,d);case 24:return hs(l),v=Kr(lr),i===null?(b=Hv(),b===null&&(b=Rn,C=zv(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=d),b=C),l.memoizedState={parent:v,cache:b},Wv(l),lu(l,lr,b)):((i.lanes&d)!==0&&(qv(i,l),$c(l,null,null,d),qc()),b=i.memoizedState,C=l.memoizedState,b.parent!==v?(b={parent:v,cache:v},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),lu(l,lr,v)):(v=C.cache,lu(l,lr,v),v!==b.cache&&Uv(l,[lr],d,!0))),Or(i,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ci(i){i.flags|=4}function y1(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Rw(l)){if(l=Qa.current,l!==null&&((tn&4194048)===tn?Oo!==null:(tn&62914560)!==tn&&(tn&536870912)===0||l!==Oo))throw Vc=Vv,tx;i.flags|=8192}}function rh(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?Ze():536870912,i.lanes|=l,Al|=l)}function Jc(i,l){if(!on)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:v.sibling=null}}function Fn(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,v=0;if(l)for(var b=i.child;b!==null;)d|=b.lanes|b.childLanes,v|=b.subtreeFlags&65011712,v|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)d|=b.lanes|b.childLanes,v|=b.subtreeFlags,v|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=v,i.childLanes=d,l}function xT(i,l,d){var v=l.pendingProps;switch(Fv(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(l),null;case 1:return Fn(l),null;case 3:return d=l.stateNode,v=null,i!==null&&(v=i.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),wi(lr),He(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Bc(l)?Ci(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Yb())),Fn(l),null;case 26:return d=l.memoizedState,i===null?(Ci(l),d!==null?(Fn(l),y1(l,d)):(Fn(l),l.flags&=-16777217)):d?d!==i.memoizedState?(Ci(l),Fn(l),y1(l,d)):(Fn(l),l.flags&=-16777217):(i.memoizedProps!==v&&Ci(l),Fn(l),l.flags&=-16777217),null;case 27:wt(l),d=Ve.current;var b=l.type;if(i!==null&&l.stateNode!=null)i.memoizedProps!==v&&Ci(l);else{if(!v){if(l.stateNode===null)throw Error(r(166));return Fn(l),null}i=je.current,Bc(l)?Kb(l):(i=yw(b,v,d),l.stateNode=i,Ci(l))}return Fn(l),null;case 5:if(wt(l),d=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==v&&Ci(l);else{if(!v){if(l.stateNode===null)throw Error(r(166));return Fn(l),null}if(i=je.current,Bc(l))Kb(l);else{switch(b=mh(Ve.current),i){case 1:i=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:i=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":i=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":i=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof v.is=="string"?b.createElement("select",{is:v.is}):b.createElement("select"),v.multiple?i.multiple=!0:v.size&&(i.size=v.size);break;default:i=typeof v.is=="string"?b.createElement(d,{is:v.is}):b.createElement(d)}}i[Pe]=l,i[Le]=v;e:for(b=l.child;b!==null;){if(b.tag===5||b.tag===6)i.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===l)break e;for(;b.sibling===null;){if(b.return===null||b.return===l)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}l.stateNode=i;e:switch(Ir(i,d,v),d){case"button":case"input":case"select":case"textarea":i=!!v.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ci(l)}}return Fn(l),l.flags&=-16777217,null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==v&&Ci(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(r(166));if(i=Ve.current,Bc(l)){if(i=l.stateNode,d=l.memoizedProps,v=null,b=sa,b!==null)switch(b.tag){case 27:case 5:v=b.memoizedProps}i[Pe]=l,i=!!(i.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||fw(i.nodeValue,d)),i||fs(l)}else i=mh(i).createTextNode(v),i[Pe]=l,l.stateNode=i}return Fn(l),null;case 13:if(v=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=Bc(l),v!==null&&v.dehydrated!==null){if(i===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Pe]=l}else Pc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Fn(l),b=!1}else b=Yb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(Si(l),l):(Si(l),null)}if(Si(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=v!==null,i=i!==null&&i.memoizedState!==null,d){v=l.child,b=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(b=v.alternate.memoizedState.cachePool.pool);var C=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(C=v.memoizedState.cachePool.pool),C!==b&&(v.flags|=2048)}return d!==i&&d&&(l.child.flags|=8192),rh(l,l.updateQueue),Fn(l),null;case 4:return He(),i===null&&Gm(l.stateNode.containerInfo),Fn(l),null;case 10:return wi(l.type),Fn(l),null;case 19:if(Re(cr),b=l.memoizedState,b===null)return Fn(l),null;if(v=(l.flags&128)!==0,C=b.rendering,C===null)if(v)Jc(b,!1);else{if(jn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(C=Zd(i),C!==null){for(l.flags|=128,Jc(b,!1),i=C.updateQueue,l.updateQueue=i,rh(l,i),l.subtreeFlags=0,i=d,d=l.child;d!==null;)$b(d,i),d=d.sibling;return Se(cr,cr.current&1|2),l.child}i=i.sibling}b.tail!==null&&Sn()>ih&&(l.flags|=128,v=!0,Jc(b,!1),l.lanes=4194304)}else{if(!v)if(i=Zd(C),i!==null){if(l.flags|=128,v=!0,i=i.updateQueue,l.updateQueue=i,rh(l,i),Jc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!C.alternate&&!on)return Fn(l),null}else 2*Sn()-b.renderingStartTime>ih&&d!==536870912&&(l.flags|=128,v=!0,Jc(b,!1),l.lanes=4194304);b.isBackwards?(C.sibling=l.child,l.child=C):(i=b.last,i!==null?i.sibling=C:l.child=C,b.last=C)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Sn(),l.sibling=null,i=cr.current,Se(cr,v?i&1|2:i&1),l):(Fn(l),null);case 22:case 23:return Si(l),Xv(),v=l.memoizedState!==null,i!==null?i.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(d&536870912)!==0&&(l.flags&128)===0&&(Fn(l),l.subtreeFlags&6&&(l.flags|=8192)):Fn(l),d=l.updateQueue,d!==null&&rh(l,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==d&&(l.flags|=2048),i!==null&&Re(ps),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),wi(lr),Fn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function wT(i,l){switch(Fv(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return wi(lr),He(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return wt(l),null;case 13:if(Si(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Pc()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Re(cr),null;case 4:return He(),null;case 10:return wi(l.type),null;case 22:case 23:return Si(l),Xv(),i!==null&&Re(ps),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return wi(lr),null;case 25:return null;default:return null}}function b1(i,l){switch(Fv(l),l.tag){case 3:wi(lr),He();break;case 26:case 27:case 5:wt(l);break;case 4:He();break;case 13:Si(l);break;case 19:Re(cr);break;case 10:wi(l.type);break;case 22:case 23:Si(l),Xv(),i!==null&&Re(ps);break;case 24:wi(lr)}}function ef(i,l){try{var d=l.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var b=v.next;d=b;do{if((d.tag&i)===i){v=void 0;var C=d.create,M=d.inst;v=C(),M.destroy=v}d=d.next}while(d!==b)}}catch(z){wn(l,l.return,z)}}function mu(i,l,d){try{var v=l.updateQueue,b=v!==null?v.lastEffect:null;if(b!==null){var C=b.next;v=C;do{if((v.tag&i)===i){var M=v.inst,z=M.destroy;if(z!==void 0){M.destroy=void 0,b=l;var Y=d,we=z;try{we()}catch(Fe){wn(b,Y,Fe)}}}v=v.next}while(v!==C)}}catch(Fe){wn(l,l.return,Fe)}}function x1(i){var l=i.updateQueue;if(l!==null){var d=i.stateNode;try{ux(l,d)}catch(v){wn(i,i.return,v)}}}function w1(i,l,d){d.props=ms(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(v){wn(i,l,v)}}function tf(i,l){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var v=i.stateNode;break;case 30:v=i.stateNode;break;default:v=i.stateNode}typeof d=="function"?i.refCleanup=d(v):d.current=v}}catch(b){wn(i,l,b)}}function Mo(i,l){var d=i.ref,v=i.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(b){wn(i,l,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){wn(i,l,b)}else d.current=null}function E1(i){var l=i.type,d=i.memoizedProps,v=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break e;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(b){wn(i,i.return,b)}}function Sm(i,l,d){try{var v=i.stateNode;HT(v,i.type,d,l),v[Le]=l}catch(b){wn(i,i.return,b)}}function S1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&_u(i.type)||i.tag===4}function _m(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||S1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&_u(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Cm(i,l,d){var v=i.tag;if(v===5||v===6)i=i.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(i),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=vh));else if(v!==4&&(v===27&&_u(i.type)&&(d=i.stateNode,l=null),i=i.child,i!==null))for(Cm(i,l,d),i=i.sibling;i!==null;)Cm(i,l,d),i=i.sibling}function ah(i,l,d){var v=i.tag;if(v===5||v===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(v!==4&&(v===27&&_u(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(ah(i,l,d),i=i.sibling;i!==null;)ah(i,l,d),i=i.sibling}function _1(i){var l=i.stateNode,d=i.memoizedProps;try{for(var v=i.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Ir(l,v,d),l[Pe]=i,l[Le]=d}catch(C){wn(i,i.return,C)}}var Ri=!1,Xn=!1,Rm=!1,C1=typeof WeakSet=="function"?WeakSet:Set,Sr=null;function ET(i,l){if(i=i.containerInfo,Ym=Eh,i=I(i),B(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var b=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break e}var M=0,z=-1,Y=-1,we=0,Fe=0,Ue=i,_e=null;t:for(;;){for(var Ae;Ue!==d||b!==0&&Ue.nodeType!==3||(z=M+b),Ue!==C||v!==0&&Ue.nodeType!==3||(Y=M+v),Ue.nodeType===3&&(M+=Ue.nodeValue.length),(Ae=Ue.firstChild)!==null;)_e=Ue,Ue=Ae;for(;;){if(Ue===i)break t;if(_e===d&&++we===b&&(z=M),_e===C&&++Fe===v&&(Y=M),(Ae=Ue.nextSibling)!==null)break;Ue=_e,_e=Ue.parentNode}Ue=Ae}d=z===-1||Y===-1?null:{start:z,end:Y}}else d=null}d=d||{start:0,end:0}}else d=null;for(Qm={focusedElem:i,selectionRange:d},Eh=!1,Sr=l;Sr!==null;)if(l=Sr,i=l.child,(l.subtreeFlags&1024)!==0&&i!==null)i.return=l,Sr=i;else for(;Sr!==null;){switch(l=Sr,C=l.alternate,i=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&C!==null){i=void 0,d=l,b=C.memoizedProps,C=C.memoizedState,v=d.stateNode;try{var At=ms(d.type,b,d.elementType===d.type);i=v.getSnapshotBeforeUpdate(At,C),v.__reactInternalSnapshotBeforeUpdate=i}catch(_t){wn(d,d.return,_t)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,d=i.nodeType,d===9)eg(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":eg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,Sr=i;break}Sr=l.return}}function R1(i,l,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:gu(i,d),v&4&&ef(5,d);break;case 1:if(gu(i,d),v&4)if(i=d.stateNode,l===null)try{i.componentDidMount()}catch(M){wn(d,d.return,M)}else{var b=ms(d.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(b,l,i.__reactInternalSnapshotBeforeUpdate)}catch(M){wn(d,d.return,M)}}v&64&&x1(d),v&512&&tf(d,d.return);break;case 3:if(gu(i,d),v&64&&(i=d.updateQueue,i!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{ux(i,l)}catch(M){wn(d,d.return,M)}}break;case 27:l===null&&v&4&&_1(d);case 26:case 5:gu(i,d),l===null&&v&4&&E1(d),v&512&&tf(d,d.return);break;case 12:gu(i,d);break;case 13:gu(i,d),v&4&&D1(i,d),v&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=kT.bind(null,d),XT(i,d))));break;case 22:if(v=d.memoizedState!==null||Ri,!v){l=l!==null&&l.memoizedState!==null||Xn,b=Ri;var C=Xn;Ri=v,(Xn=l)&&!C?yu(i,d,(d.subtreeFlags&8772)!==0):gu(i,d),Ri=b,Xn=C}break;case 30:break;default:gu(i,d)}}function A1(i){var l=i.alternate;l!==null&&(i.alternate=null,A1(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&at(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var In=null,ya=!1;function Ai(i,l,d){for(d=d.child;d!==null;)T1(i,l,d),d=d.sibling}function T1(i,l,d){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(_n,d)}catch{}switch(d.tag){case 26:Xn||Mo(d,l),Ai(i,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Xn||Mo(d,l);var v=In,b=ya;_u(d.type)&&(In=d.stateNode,ya=!1),Ai(i,l,d),ff(d.stateNode),In=v,ya=b;break;case 5:Xn||Mo(d,l);case 6:if(v=In,b=ya,In=null,Ai(i,l,d),In=v,ya=b,In!==null)if(ya)try{(In.nodeType===9?In.body:In.nodeName==="HTML"?In.ownerDocument.body:In).removeChild(d.stateNode)}catch(C){wn(d,l,C)}else try{In.removeChild(d.stateNode)}catch(C){wn(d,l,C)}break;case 18:In!==null&&(ya?(i=In,mw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),bf(i)):mw(In,d.stateNode));break;case 4:v=In,b=ya,In=d.stateNode.containerInfo,ya=!0,Ai(i,l,d),In=v,ya=b;break;case 0:case 11:case 14:case 15:Xn||mu(2,d,l),Xn||mu(4,d,l),Ai(i,l,d);break;case 1:Xn||(Mo(d,l),v=d.stateNode,typeof v.componentWillUnmount=="function"&&w1(d,l,v)),Ai(i,l,d);break;case 21:Ai(i,l,d);break;case 22:Xn=(v=Xn)||d.memoizedState!==null,Ai(i,l,d),Xn=v;break;default:Ai(i,l,d)}}function D1(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{bf(i)}catch(d){wn(l,l.return,d)}}function ST(i){switch(i.tag){case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new C1),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new C1),l;default:throw Error(r(435,i.tag))}}function Am(i,l){var d=ST(i);l.forEach(function(v){var b=OT.bind(null,i,v);d.has(v)||(d.add(v),v.then(b,b))})}function Da(i,l){var d=l.deletions;if(d!==null)for(var v=0;v<d.length;v++){var b=d[v],C=i,M=l,z=M;e:for(;z!==null;){switch(z.tag){case 27:if(_u(z.type)){In=z.stateNode,ya=!1;break e}break;case 5:In=z.stateNode,ya=!1;break e;case 3:case 4:In=z.stateNode.containerInfo,ya=!0;break e}z=z.return}if(In===null)throw Error(r(160));T1(C,M,b),In=null,ya=!1,C=b.alternate,C!==null&&(C.return=null),b.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)N1(l,i),l=l.sibling}var po=null;function N1(i,l){var d=i.alternate,v=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Da(l,i),Na(i),v&4&&(mu(3,i,i.return),ef(3,i),mu(5,i,i.return));break;case 1:Da(l,i),Na(i),v&512&&(Xn||d===null||Mo(d,d.return)),v&64&&Ri&&(i=i.updateQueue,i!==null&&(v=i.callbacks,v!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var b=po;if(Da(l,i),Na(i),v&512&&(Xn||d===null||Mo(d,d.return)),v&4){var C=d!==null?d.memoizedState:null;if(v=i.memoizedState,d===null)if(v===null)if(i.stateNode===null){e:{v=i.type,d=i.memoizedProps,b=b.ownerDocument||b;t:switch(v){case"title":C=b.getElementsByTagName("title")[0],(!C||C[Et]||C[Pe]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=b.createElement(v),b.head.insertBefore(C,b.querySelector("head > title"))),Ir(C,v,d),C[Pe]=i,Lt(C),v=C;break e;case"link":var M=_w("link","href",b).get(v+(d.href||""));if(M){for(var z=0;z<M.length;z++)if(C=M[z],C.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&C.getAttribute("rel")===(d.rel==null?null:d.rel)&&C.getAttribute("title")===(d.title==null?null:d.title)&&C.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){M.splice(z,1);break t}}C=b.createElement(v),Ir(C,v,d),b.head.appendChild(C);break;case"meta":if(M=_w("meta","content",b).get(v+(d.content||""))){for(z=0;z<M.length;z++)if(C=M[z],C.getAttribute("content")===(d.content==null?null:""+d.content)&&C.getAttribute("name")===(d.name==null?null:d.name)&&C.getAttribute("property")===(d.property==null?null:d.property)&&C.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&C.getAttribute("charset")===(d.charSet==null?null:d.charSet)){M.splice(z,1);break t}}C=b.createElement(v),Ir(C,v,d),b.head.appendChild(C);break;default:throw Error(r(468,v))}C[Pe]=i,Lt(C),v=C}i.stateNode=v}else Cw(b,i.type,i.stateNode);else i.stateNode=Sw(b,v,i.memoizedProps);else C!==v?(C===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):C.count--,v===null?Cw(b,i.type,i.stateNode):Sw(b,v,i.memoizedProps)):v===null&&i.stateNode!==null&&Sm(i,i.memoizedProps,d.memoizedProps)}break;case 27:Da(l,i),Na(i),v&512&&(Xn||d===null||Mo(d,d.return)),d!==null&&v&4&&Sm(i,i.memoizedProps,d.memoizedProps);break;case 5:if(Da(l,i),Na(i),v&512&&(Xn||d===null||Mo(d,d.return)),i.flags&32){b=i.stateNode;try{Ji(b,"")}catch(Ae){wn(i,i.return,Ae)}}v&4&&i.stateNode!=null&&(b=i.memoizedProps,Sm(i,b,d!==null?d.memoizedProps:b)),v&1024&&(Rm=!0);break;case 6:if(Da(l,i),Na(i),v&4){if(i.stateNode===null)throw Error(r(162));v=i.memoizedProps,d=i.stateNode;try{d.nodeValue=v}catch(Ae){wn(i,i.return,Ae)}}break;case 3:if(bh=null,b=po,po=gh(l.containerInfo),Da(l,i),po=b,Na(i),v&4&&d!==null&&d.memoizedState.isDehydrated)try{bf(l.containerInfo)}catch(Ae){wn(i,i.return,Ae)}Rm&&(Rm=!1,k1(i));break;case 4:v=po,po=gh(i.stateNode.containerInfo),Da(l,i),Na(i),po=v;break;case 12:Da(l,i),Na(i);break;case 13:Da(l,i),Na(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Mm=Sn()),v&4&&(v=i.updateQueue,v!==null&&(i.updateQueue=null,Am(i,v)));break;case 22:b=i.memoizedState!==null;var Y=d!==null&&d.memoizedState!==null,we=Ri,Fe=Xn;if(Ri=we||b,Xn=Fe||Y,Da(l,i),Xn=Fe,Ri=we,Na(i),v&8192)e:for(l=i.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(d===null||Y||Ri||Xn||gs(i)),d=null,l=i;;){if(l.tag===5||l.tag===26){if(d===null){Y=d=l;try{if(C=Y.stateNode,b)M=C.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{z=Y.stateNode;var Ue=Y.memoizedProps.style,_e=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;z.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(Ae){wn(Y,Y.return,Ae)}}}else if(l.tag===6){if(d===null){Y=l;try{Y.stateNode.nodeValue=b?"":Y.memoizedProps}catch(Ae){wn(Y,Y.return,Ae)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=i.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,Am(i,d))));break;case 19:Da(l,i),Na(i),v&4&&(v=i.updateQueue,v!==null&&(i.updateQueue=null,Am(i,v)));break;case 30:break;case 21:break;default:Da(l,i),Na(i)}}function Na(i){var l=i.flags;if(l&2){try{for(var d,v=i.return;v!==null;){if(S1(v)){d=v;break}v=v.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var b=d.stateNode,C=_m(i);ah(i,C,b);break;case 5:var M=d.stateNode;d.flags&32&&(Ji(M,""),d.flags&=-33);var z=_m(i);ah(i,z,M);break;case 3:case 4:var Y=d.stateNode.containerInfo,we=_m(i);Cm(i,we,Y);break;default:throw Error(r(161))}}catch(Fe){wn(i,i.return,Fe)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function k1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;k1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function gu(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)R1(i,l.alternate,l),l=l.sibling}function gs(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:mu(4,l,l.return),gs(l);break;case 1:Mo(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&w1(l,l.return,d),gs(l);break;case 27:ff(l.stateNode);case 26:case 5:Mo(l,l.return),gs(l);break;case 22:l.memoizedState===null&&gs(l);break;case 30:gs(l);break;default:gs(l)}i=i.sibling}}function yu(i,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,b=i,C=l,M=C.flags;switch(C.tag){case 0:case 11:case 15:yu(b,C,d),ef(4,C);break;case 1:if(yu(b,C,d),v=C,b=v.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(we){wn(v,v.return,we)}if(v=C,b=v.updateQueue,b!==null){var z=v.stateNode;try{var Y=b.shared.hiddenCallbacks;if(Y!==null)for(b.shared.hiddenCallbacks=null,b=0;b<Y.length;b++)ix(Y[b],z)}catch(we){wn(v,v.return,we)}}d&&M&64&&x1(C),tf(C,C.return);break;case 27:_1(C);case 26:case 5:yu(b,C,d),d&&v===null&&M&4&&E1(C),tf(C,C.return);break;case 12:yu(b,C,d);break;case 13:yu(b,C,d),d&&M&4&&D1(b,C);break;case 22:C.memoizedState===null&&yu(b,C,d),tf(C,C.return);break;case 30:break;default:yu(b,C,d)}l=l.sibling}}function Tm(i,l){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&zc(d))}function Dm(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&zc(i))}function Io(i,l,d,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)O1(i,l,d,v),l=l.sibling}function O1(i,l,d,v){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Io(i,l,d,v),b&2048&&ef(9,l);break;case 1:Io(i,l,d,v);break;case 3:Io(i,l,d,v),b&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&zc(i)));break;case 12:if(b&2048){Io(i,l,d,v),i=l.stateNode;try{var C=l.memoizedProps,M=C.id,z=C.onPostCommit;typeof z=="function"&&z(M,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){wn(l,l.return,Y)}}else Io(i,l,d,v);break;case 13:Io(i,l,d,v);break;case 23:break;case 22:C=l.stateNode,M=l.alternate,l.memoizedState!==null?C._visibility&2?Io(i,l,d,v):nf(i,l):C._visibility&2?Io(i,l,d,v):(C._visibility|=2,_l(i,l,d,v,(l.subtreeFlags&10256)!==0)),b&2048&&Tm(M,l);break;case 24:Io(i,l,d,v),b&2048&&Dm(l.alternate,l);break;default:Io(i,l,d,v)}}function _l(i,l,d,v,b){for(b=b&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var C=i,M=l,z=d,Y=v,we=M.flags;switch(M.tag){case 0:case 11:case 15:_l(C,M,z,Y,b),ef(8,M);break;case 23:break;case 22:var Fe=M.stateNode;M.memoizedState!==null?Fe._visibility&2?_l(C,M,z,Y,b):nf(C,M):(Fe._visibility|=2,_l(C,M,z,Y,b)),b&&we&2048&&Tm(M.alternate,M);break;case 24:_l(C,M,z,Y,b),b&&we&2048&&Dm(M.alternate,M);break;default:_l(C,M,z,Y,b)}l=l.sibling}}function nf(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=i,v=l,b=v.flags;switch(v.tag){case 22:nf(d,v),b&2048&&Tm(v.alternate,v);break;case 24:nf(d,v),b&2048&&Dm(v.alternate,v);break;default:nf(d,v)}l=l.sibling}}var rf=8192;function Cl(i){if(i.subtreeFlags&rf)for(i=i.child;i!==null;)M1(i),i=i.sibling}function M1(i){switch(i.tag){case 26:Cl(i),i.flags&rf&&i.memoizedState!==null&&sD(po,i.memoizedState,i.memoizedProps);break;case 5:Cl(i);break;case 3:case 4:var l=po;po=gh(i.stateNode.containerInfo),Cl(i),po=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=rf,rf=16777216,Cl(i),rf=l):Cl(i));break;default:Cl(i)}}function I1(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function af(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];Sr=v,B1(v,i)}I1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)F1(i),i=i.sibling}function F1(i){switch(i.tag){case 0:case 11:case 15:af(i),i.flags&2048&&mu(9,i,i.return);break;case 3:af(i);break;case 12:af(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,oh(i)):af(i);break;default:af(i)}}function oh(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];Sr=v,B1(v,i)}I1(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:mu(8,l,l.return),oh(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,oh(l));break;default:oh(l)}i=i.sibling}}function B1(i,l){for(;Sr!==null;){var d=Sr;switch(d.tag){case 0:case 11:case 15:mu(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:zc(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,Sr=v;else e:for(d=i;Sr!==null;){v=Sr;var b=v.sibling,C=v.return;if(A1(v),v===d){Sr=null;break e}if(b!==null){b.return=C,Sr=b;break e}Sr=C}}}var _T={getCacheForType:function(i){var l=Kr(lr),d=l.data.get(i);return d===void 0&&(d=i(),l.data.set(i,d)),d}},CT=typeof WeakMap=="function"?WeakMap:Map,fn=0,Rn=null,Gt=null,tn=0,dn=0,ka=null,bu=!1,Rl=!1,Nm=!1,Ti=0,jn=0,xu=0,ys=0,km=0,Za=0,Al=0,of=null,ba=null,Om=!1,Mm=0,ih=1/0,uh=null,wu=null,Mr=0,Eu=null,Tl=null,Dl=0,Im=0,Fm=null,P1=null,uf=0,Bm=null;function Oa(){if((fn&2)!==0&&tn!==0)return tn&-tn;if(q.T!==null){var i=ml;return i!==0?i:Vm()}return te()}function L1(){Za===0&&(Za=(tn&536870912)===0||on?lo():536870912);var i=Qa.current;return i!==null&&(i.flags|=32),Za}function Ma(i,l,d){(i===Rn&&(dn===2||dn===9)||i.cancelPendingCommit!==null)&&(Nl(i,0),Su(i,tn,Za,!1)),_o(i,d),((fn&2)===0||i!==Rn)&&(i===Rn&&((fn&2)===0&&(ys|=d),jn===4&&Su(i,tn,Za,!1)),Fo(i))}function U1(i,l,d){if((fn&6)!==0)throw Error(r(327));var v=!d&&(l&124)===0&&(l&i.expiredLanes)===0||jr(i,l),b=v?TT(i,l):Um(i,l,!0),C=v;do{if(b===0){Rl&&!v&&Su(i,l,0,!1);break}else{if(d=i.current.alternate,C&&!RT(d)){b=Um(i,l,!1),C=!1;continue}if(b===2){if(C=l,i.errorRecoveryDisabledLanes&C)var M=0;else M=i.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){l=M;e:{var z=i;b=of;var Y=z.current.memoizedState.isDehydrated;if(Y&&(Nl(z,M).flags|=256),M=Um(z,M,!1),M!==2){if(Nm&&!Y){z.errorRecoveryDisabledLanes|=C,ys|=C,b=4;break e}C=ba,ba=b,C!==null&&(ba===null?ba=C:ba.push.apply(ba,C))}b=M}if(C=!1,b!==2)continue}}if(b===1){Nl(i,0),Su(i,l,0,!0);break}e:{switch(v=i,C=b,C){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Su(v,l,Za,!bu);break e;case 2:ba=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=Mm+300-Sn(),10<b)){if(Su(v,l,Za,!bu),rt(v,0,!0)!==0)break e;v.timeoutHandle=pw(z1.bind(null,v,d,ba,uh,Om,l,Za,ys,Al,bu,C,2,-0,0),b);break e}z1(v,d,ba,uh,Om,l,Za,ys,Al,bu,C,0,-0,0)}}break}while(!0);Fo(i)}function z1(i,l,d,v,b,C,M,z,Y,we,Fe,Ue,_e,Ae){if(i.timeoutHandle=-1,Ue=l.subtreeFlags,(Ue&8192||(Ue&16785408)===16785408)&&(pf={stylesheets:null,count:0,unsuspend:uD},M1(l),Ue=lD(),Ue!==null)){i.cancelPendingCommit=Ue(G1.bind(null,i,l,C,d,v,b,M,z,Y,Fe,1,_e,Ae)),Su(i,C,M,!we);return}G1(i,l,C,d,v,b,M,z,Y)}function RT(i){for(var l=i;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var b=d[v],C=b.getSnapshot;b=b.value;try{if(!Gr(C(),b))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Su(i,l,d,v){l&=~km,l&=~ys,i.suspendedLanes|=l,i.pingedLanes&=~l,v&&(i.warmLanes|=l),v=i.expirationTimes;for(var b=l;0<b;){var C=31-yn(b),M=1<<C;v[C]=-1,b&=~M}d!==0&&Co(i,d,l)}function sh(){return(fn&6)===0?(sf(0),!1):!0}function Pm(){if(Gt!==null){if(dn===0)var i=Gt.return;else i=Gt,xi=ds=null,em(i),El=null,Qc=0,i=Gt;for(;i!==null;)b1(i.alternate,i),i=i.return;Gt=null}}function Nl(i,l){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,WT(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),Pm(),Rn=i,Gt=d=gi(i.current,null),tn=l,dn=0,ka=null,bu=!1,Rl=jr(i,l),Nm=!1,Al=Za=km=ys=xu=jn=0,ba=of=null,Om=!1,(l&8)!==0&&(l|=l&32);var v=i.entangledLanes;if(v!==0)for(i=i.entanglements,v&=l;0<v;){var b=31-yn(v),C=1<<b;l|=i[b],v&=~C}return Ti=l,Rt(),d}function j1(i,l){Ht=null,q.H=Xd,l===Hc||l===Ud?(l=ax(),dn=3):l===tx?(l=ax(),dn=4):dn=l===o1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ka=l,Gt===null&&(jn=1,eh(i,gt(l,i.current)))}function H1(){var i=q.H;return q.H=Xd,i===null?Xd:i}function V1(){var i=q.A;return q.A=_T,i}function Lm(){jn=4,bu||(tn&4194048)!==tn&&Qa.current!==null||(Rl=!0),(xu&134217727)===0&&(ys&134217727)===0||Rn===null||Su(Rn,tn,Za,!1)}function Um(i,l,d){var v=fn;fn|=2;var b=H1(),C=V1();(Rn!==i||tn!==l)&&(uh=null,Nl(i,l)),l=!1;var M=jn;e:do try{if(dn!==0&&Gt!==null){var z=Gt,Y=ka;switch(dn){case 8:Pm(),M=6;break e;case 3:case 2:case 9:case 6:Qa.current===null&&(l=!0);var we=dn;if(dn=0,ka=null,kl(i,z,Y,we),d&&Rl){M=0;break e}break;default:we=dn,dn=0,ka=null,kl(i,z,Y,we)}}AT(),M=jn;break}catch(Fe){j1(i,Fe)}while(!0);return l&&i.shellSuspendCounter++,xi=ds=null,fn=v,q.H=b,q.A=C,Gt===null&&(Rn=null,tn=0,Rt()),M}function AT(){for(;Gt!==null;)W1(Gt)}function TT(i,l){var d=fn;fn|=2;var v=H1(),b=V1();Rn!==i||tn!==l?(uh=null,ih=Sn()+500,Nl(i,l)):Rl=jr(i,l);e:do try{if(dn!==0&&Gt!==null){l=Gt;var C=ka;t:switch(dn){case 1:dn=0,ka=null,kl(i,l,C,1);break;case 2:case 9:if(nx(C)){dn=0,ka=null,q1(l);break}l=function(){dn!==2&&dn!==9||Rn!==i||(dn=7),Fo(i)},C.then(l,l);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:nx(C)?(dn=0,ka=null,q1(l)):(dn=0,ka=null,kl(i,l,C,7));break;case 5:var M=null;switch(Gt.tag){case 26:M=Gt.memoizedState;case 5:case 27:var z=Gt;if(!M||Rw(M)){dn=0,ka=null;var Y=z.sibling;if(Y!==null)Gt=Y;else{var we=z.return;we!==null?(Gt=we,lh(we)):Gt=null}break t}}dn=0,ka=null,kl(i,l,C,5);break;case 6:dn=0,ka=null,kl(i,l,C,6);break;case 8:Pm(),jn=6;break e;default:throw Error(r(462))}}DT();break}catch(Fe){j1(i,Fe)}while(!0);return xi=ds=null,q.H=v,q.A=b,fn=d,Gt!==null?0:(Rn=null,tn=0,Rt(),jn)}function DT(){for(;Gt!==null&&!Jt();)W1(Gt)}function W1(i){var l=g1(i.alternate,i,Ti);i.memoizedProps=i.pendingProps,l===null?lh(i):Gt=l}function q1(i){var l=i,d=l.alternate;switch(l.tag){case 15:case 0:l=f1(d,l,l.pendingProps,l.type,void 0,tn);break;case 11:l=f1(d,l,l.pendingProps,l.type.render,l.ref,tn);break;case 5:em(l);default:b1(d,l),l=Gt=$b(l,Ti),l=g1(d,l,Ti)}i.memoizedProps=i.pendingProps,l===null?lh(i):Gt=l}function kl(i,l,d,v){xi=ds=null,em(l),El=null,Qc=0;var b=l.return;try{if(yT(i,b,l,d,tn)){jn=1,eh(i,gt(d,i.current)),Gt=null;return}}catch(C){if(b!==null)throw Gt=b,C;jn=1,eh(i,gt(d,i.current)),Gt=null;return}l.flags&32768?(on||v===1?i=!0:Rl||(tn&536870912)!==0?i=!1:(bu=i=!0,(v===2||v===9||v===3||v===6)&&(v=Qa.current,v!==null&&v.tag===13&&(v.flags|=16384))),$1(l,i)):lh(l)}function lh(i){var l=i;do{if((l.flags&32768)!==0){$1(l,bu);return}i=l.return;var d=xT(l.alternate,l,Ti);if(d!==null){Gt=d;return}if(l=l.sibling,l!==null){Gt=l;return}Gt=l=i}while(l!==null);jn===0&&(jn=5)}function $1(i,l){do{var d=wT(i.alternate,i);if(d!==null){d.flags&=32767,Gt=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(i=i.sibling,i!==null)){Gt=i;return}Gt=i=d}while(i!==null);jn=6,Gt=null}function G1(i,l,d,v,b,C,M,z,Y){i.cancelPendingCommit=null;do ch();while(Mr!==0);if((fn&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(C=l.lanes|l.childLanes,C|=kr,$i(i,d,C,M,z,Y),i===Rn&&(Gt=Rn=null,tn=0),Tl=l,Eu=i,Dl=d,Im=C,Fm=b,P1=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,MT(gn,function(){return Z1(),null})):(i.callbackNode=null,i.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=q.T,q.T=null,b=ne.p,ne.p=2,M=fn,fn|=4;try{ET(i,l,d)}finally{fn=M,ne.p=b,q.T=v}}Mr=1,K1(),X1(),Y1()}}function K1(){if(Mr===1){Mr=0;var i=Eu,l=Tl,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=q.T,q.T=null;var v=ne.p;ne.p=2;var b=fn;fn|=4;try{N1(l,i);var C=Qm,M=I(i.containerInfo),z=C.focusedElem,Y=C.selectionRange;if(M!==z&&z&&z.ownerDocument&&O(z.ownerDocument.documentElement,z)){if(Y!==null&&B(z)){var we=Y.start,Fe=Y.end;if(Fe===void 0&&(Fe=we),"selectionStart"in z)z.selectionStart=we,z.selectionEnd=Math.min(Fe,z.value.length);else{var Ue=z.ownerDocument||document,_e=Ue&&Ue.defaultView||window;if(_e.getSelection){var Ae=_e.getSelection(),At=z.textContent.length,_t=Math.min(Y.start,At),vn=Y.end===void 0?_t:Math.min(Y.end,At);!Ae.extend&&_t>vn&&(M=vn,vn=_t,_t=M);var ve=R(z,_t),ie=R(z,vn);if(ve&&ie&&(Ae.rangeCount!==1||Ae.anchorNode!==ve.node||Ae.anchorOffset!==ve.offset||Ae.focusNode!==ie.node||Ae.focusOffset!==ie.offset)){var xe=Ue.createRange();xe.setStart(ve.node,ve.offset),Ae.removeAllRanges(),_t>vn?(Ae.addRange(xe),Ae.extend(ie.node,ie.offset)):(xe.setEnd(ie.node,ie.offset),Ae.addRange(xe))}}}}for(Ue=[],Ae=z;Ae=Ae.parentNode;)Ae.nodeType===1&&Ue.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Ue.length;z++){var Be=Ue[z];Be.element.scrollLeft=Be.left,Be.element.scrollTop=Be.top}}Eh=!!Ym,Qm=Ym=null}finally{fn=b,ne.p=v,q.T=d}}i.current=l,Mr=2}}function X1(){if(Mr===2){Mr=0;var i=Eu,l=Tl,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=q.T,q.T=null;var v=ne.p;ne.p=2;var b=fn;fn|=4;try{R1(i,l.alternate,l)}finally{fn=b,ne.p=v,q.T=d}}Mr=3}}function Y1(){if(Mr===4||Mr===3){Mr=0,cn();var i=Eu,l=Tl,d=Dl,v=P1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Mr=5:(Mr=0,Tl=Eu=null,Q1(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(wu=null),Ju(d),l=l.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(_n,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=q.T,b=ne.p,ne.p=2,q.T=null;try{for(var C=i.onRecoverableError,M=0;M<v.length;M++){var z=v[M];C(z.value,{componentStack:z.stack})}}finally{q.T=l,ne.p=b}}(Dl&3)!==0&&ch(),Fo(i),b=i.pendingLanes,(d&4194090)!==0&&(b&42)!==0?i===Bm?uf++:(uf=0,Bm=i):uf=0,sf(0)}}function Q1(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,zc(l)))}function ch(i){return K1(),X1(),Y1(),Z1()}function Z1(){if(Mr!==5)return!1;var i=Eu,l=Im;Im=0;var d=Ju(Dl),v=q.T,b=ne.p;try{ne.p=32>d?32:d,q.T=null,d=Fm,Fm=null;var C=Eu,M=Dl;if(Mr=0,Tl=Eu=null,Dl=0,(fn&6)!==0)throw Error(r(331));var z=fn;if(fn|=4,F1(C.current),O1(C,C.current,M,d),fn=z,sf(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(_n,C)}catch{}return!0}finally{ne.p=b,q.T=v,Q1(i,l)}}function J1(i,l,d){l=gt(d,l),l=pm(i.stateNode,l,2),i=du(i,l,2),i!==null&&(_o(i,2),Fo(i))}function wn(i,l,d){if(i.tag===3)J1(i,i,d);else for(;l!==null;){if(l.tag===3){J1(l,i,d);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(wu===null||!wu.has(v))){i=gt(d,i),d=r1(2),v=du(l,d,2),v!==null&&(a1(d,v,l,i),_o(v,2),Fo(v));break}}l=l.return}}function zm(i,l,d){var v=i.pingCache;if(v===null){v=i.pingCache=new CT;var b=new Set;v.set(l,b)}else b=v.get(l),b===void 0&&(b=new Set,v.set(l,b));b.has(d)||(Nm=!0,b.add(d),i=NT.bind(null,i,l,d),l.then(i,i))}function NT(i,l,d){var v=i.pingCache;v!==null&&v.delete(l),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,Rn===i&&(tn&d)===d&&(jn===4||jn===3&&(tn&62914560)===tn&&300>Sn()-Mm?(fn&2)===0&&Nl(i,0):km|=d,Al===tn&&(Al=0)),Fo(i)}function ew(i,l){l===0&&(l=Ze()),i=ho(i,l),i!==null&&(_o(i,l),Fo(i))}function kT(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),ew(i,d)}function OT(i,l){var d=0;switch(i.tag){case 13:var v=i.stateNode,b=i.memoizedState;b!==null&&(d=b.retryLane);break;case 19:v=i.stateNode;break;case 22:v=i.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(l),ew(i,d)}function MT(i,l){return It(i,l)}var fh=null,Ol=null,jm=!1,dh=!1,Hm=!1,bs=0;function Fo(i){i!==Ol&&i.next===null&&(Ol===null?fh=Ol=i:Ol=Ol.next=i),dh=!0,jm||(jm=!0,FT())}function sf(i,l){if(!Hm&&dh){Hm=!0;do for(var d=!1,v=fh;v!==null;){if(i!==0){var b=v.pendingLanes;if(b===0)var C=0;else{var M=v.suspendedLanes,z=v.pingedLanes;C=(1<<31-yn(42|i)+1)-1,C&=b&~(M&~z),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(d=!0,aw(v,C))}else C=tn,C=rt(v,v===Rn?C:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(C&3)===0||jr(v,C)||(d=!0,aw(v,C));v=v.next}while(d);Hm=!1}}function IT(){tw()}function tw(){dh=jm=!1;var i=0;bs!==0&&(VT()&&(i=bs),bs=0);for(var l=Sn(),d=null,v=fh;v!==null;){var b=v.next,C=nw(v,l);C===0?(v.next=null,d===null?fh=b:d.next=b,b===null&&(Ol=d)):(d=v,(i!==0||(C&3)!==0)&&(dh=!0)),v=b}sf(i)}function nw(i,l){for(var d=i.suspendedLanes,v=i.pingedLanes,b=i.expirationTimes,C=i.pendingLanes&-62914561;0<C;){var M=31-yn(C),z=1<<M,Y=b[M];Y===-1?((z&d)===0||(z&v)!==0)&&(b[M]=Va(z,l)):Y<=l&&(i.expiredLanes|=z),C&=~z}if(l=Rn,d=tn,d=rt(i,i===l?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),v=i.callbackNode,d===0||i===l&&(dn===2||dn===9)||i.cancelPendingCommit!==null)return v!==null&&v!==null&&Qt(v),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||jr(i,d)){if(l=d&-d,l===i.callbackPriority)return l;switch(v!==null&&Qt(v),Ju(d)){case 2:case 8:d=aa;break;case 32:d=gn;break;case 268435456:d=Mn;break;default:d=gn}return v=rw.bind(null,i),d=It(d,v),i.callbackPriority=l,i.callbackNode=d,l}return v!==null&&v!==null&&Qt(v),i.callbackPriority=2,i.callbackNode=null,2}function rw(i,l){if(Mr!==0&&Mr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if(ch()&&i.callbackNode!==d)return null;var v=tn;return v=rt(i,i===Rn?v:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),v===0?null:(U1(i,v,l),nw(i,Sn()),i.callbackNode!=null&&i.callbackNode===d?rw.bind(null,i):null)}function aw(i,l){if(ch())return null;U1(i,l,!0)}function FT(){qT(function(){(fn&6)!==0?It(Zn,IT):tw()})}function Vm(){return bs===0&&(bs=lo()),bs}function ow(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:si(""+i)}function iw(i,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,i.id&&d.setAttribute("form",i.id),l.parentNode.insertBefore(d,l),i=new FormData(i),d.parentNode.removeChild(d),i}function BT(i,l,d,v,b){if(l==="submit"&&d&&d.stateNode===b){var C=ow((b[Le]||null).action),M=v.submitter;M&&(l=(l=M[Le]||null)?ow(l.formAction):M.getAttribute("formAction"),l!==null&&(C=l,M=null));var z=new Zs("action","action",null,v,b);i.push({event:z,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(bs!==0){var Y=M?iw(b,M):new FormData(b);lm(d,{pending:!0,data:Y,method:b.method,action:C},null,Y)}}else typeof C=="function"&&(z.preventDefault(),Y=M?iw(b,M):new FormData(b),lm(d,{pending:!0,data:Y,method:b.method,action:C},C,Y))},currentTarget:b}]})}}for(var Wm=0;Wm<Qe.length;Wm++){var qm=Qe[Wm],PT=qm.toLowerCase(),LT=qm[0].toUpperCase()+qm.slice(1);qe(PT,"on"+LT)}qe(Ee,"onAnimationEnd"),qe(De,"onAnimationIteration"),qe(Ne,"onAnimationStart"),qe("dblclick","onDoubleClick"),qe("focusin","onFocus"),qe("focusout","onBlur"),qe(Ie,"onTransitionRun"),qe($e,"onTransitionStart"),qe(Ke,"onTransitionCancel"),qe(We,"onTransitionEnd"),Vr("onMouseEnter",["mouseout","mouseover"]),Vr("onMouseLeave",["mouseout","mouseover"]),Vr("onPointerEnter",["pointerout","pointerover"]),Vr("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lf));function uw(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var v=i[d],b=v.event;v=v.listeners;e:{var C=void 0;if(l)for(var M=v.length-1;0<=M;M--){var z=v[M],Y=z.instance,we=z.currentTarget;if(z=z.listener,Y!==C&&b.isPropagationStopped())break e;C=z,b.currentTarget=we;try{C(b)}catch(Fe){Jd(Fe)}b.currentTarget=null,C=Y}else for(M=0;M<v.length;M++){if(z=v[M],Y=z.instance,we=z.currentTarget,z=z.listener,Y!==C&&b.isPropagationStopped())break e;C=z,b.currentTarget=we;try{C(b)}catch(Fe){Jd(Fe)}b.currentTarget=null,C=Y}}}}function Kt(i,l){var d=l[xt];d===void 0&&(d=l[xt]=new Set);var v=i+"__bubble";d.has(v)||(sw(l,i,2,!1),d.add(v))}function $m(i,l,d){var v=0;l&&(v|=4),sw(d,i,v,l)}var hh="_reactListening"+Math.random().toString(36).slice(2);function Gm(i){if(!i[hh]){i[hh]=!0,Wt.forEach(function(d){d!=="selectionchange"&&(UT.has(d)||$m(d,!1,i),$m(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[hh]||(l[hh]=!0,$m("selectionchange",!1,l))}}function sw(i,l,d,v){switch(Ow(l)){case 2:var b=dD;break;case 8:b=hD;break;default:b=ug}d=b.bind(null,l,d,i),b=void 0,!Ec||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),v?b!==void 0?i.addEventListener(l,d,{capture:!0,passive:b}):i.addEventListener(l,d,!0):b!==void 0?i.addEventListener(l,d,{passive:b}):i.addEventListener(l,d,!1)}function Km(i,l,d,v,b){var C=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var M=v.tag;if(M===3||M===4){var z=v.stateNode.containerInfo;if(z===b)break;if(M===4)for(M=v.return;M!==null;){var Y=M.tag;if((Y===3||Y===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;z!==null;){if(M=bt(z),M===null)return;if(Y=M.tag,Y===5||Y===6||Y===26||Y===27){v=C=M;continue e}z=z.parentNode}}v=v.return}tu(function(){var we=C,Fe=Ys(d),Ue=[];e:{var _e=Ge.get(i);if(_e!==void 0){var Ae=Zs,At=i;switch(i){case"keypress":if(au(d)===0)break e;case"keydown":case"keyup":Ae=il;break;case"focusin":At="focus",Ae=ou;break;case"focusout":At="blur",Ae=ou;break;case"beforeblur":case"afterblur":Ae=ou;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Ed;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=Dc;break;case Ee:case De:case Ne:Ae=Sd;break;case We:Ae=Nc;break;case"scroll":case"scrollend":Ae=Js;break;case"wheel":Ae=sl;break;case"copy":case"cut":case"paste":Ae=al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Tc;break;case"toggle":case"beforetoggle":Ae=Rd}var _t=(l&4)!==0,vn=!_t&&(i==="scroll"||i==="scrollend"),ve=_t?_e!==null?_e+"Capture":null:_e;_t=[];for(var ie=we,xe;ie!==null;){var Be=ie;if(xe=Be.stateNode,Be=Be.tag,Be!==5&&Be!==26&&Be!==27||xe===null||ve===null||(Be=fi(ie,ve),Be!=null&&_t.push(cf(ie,Be,xe))),vn)break;ie=ie.return}0<_t.length&&(_e=new Ae(_e,At,null,d,Fe),Ue.push({event:_e,listeners:_t}))}}if((l&7)===0){e:{if(_e=i==="mouseover"||i==="pointerover",Ae=i==="mouseout"||i==="pointerout",_e&&d!==qa&&(At=d.relatedTarget||d.fromElement)&&(bt(At)||At[Ye]))break e;if((Ae||_e)&&(_e=Fe.window===Fe?Fe:(_e=Fe.ownerDocument)?_e.defaultView||_e.parentWindow:window,Ae?(At=d.relatedTarget||d.toElement,Ae=we,At=At?bt(At):null,At!==null&&(vn=o(At),_t=At.tag,At!==vn||_t!==5&&_t!==27&&_t!==6)&&(At=null)):(Ae=null,At=we),Ae!==At)){if(_t=tl,Be="onMouseLeave",ve="onMouseEnter",ie="mouse",(i==="pointerout"||i==="pointerover")&&(_t=Tc,Be="onPointerLeave",ve="onPointerEnter",ie="pointer"),vn=Ae==null?_e:sn(Ae),xe=At==null?_e:sn(At),_e=new _t(Be,ie+"leave",Ae,d,Fe),_e.target=vn,_e.relatedTarget=xe,Be=null,bt(Fe)===we&&(_t=new _t(ve,ie+"enter",At,d,Fe),_t.target=xe,_t.relatedTarget=vn,Be=_t),vn=Be,Ae&&At)t:{for(_t=Ae,ve=At,ie=0,xe=_t;xe;xe=Ml(xe))ie++;for(xe=0,Be=ve;Be;Be=Ml(Be))xe++;for(;0<ie-xe;)_t=Ml(_t),ie--;for(;0<xe-ie;)ve=Ml(ve),xe--;for(;ie--;){if(_t===ve||ve!==null&&_t===ve.alternate)break t;_t=Ml(_t),ve=Ml(ve)}_t=null}else _t=null;Ae!==null&&lw(Ue,_e,Ae,_t,!1),At!==null&&vn!==null&&lw(Ue,vn,At,_t,!0)}}e:{if(_e=we?sn(we):window,Ae=_e.nodeName&&_e.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&_e.type==="file")var ut=is;else if(fl(_e))if(Ga)ut=su;else{ut=mi;var qt=Od}else Ae=_e.nodeName,!Ae||Ae.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?we&&wc(we.elementType)&&(ut=is):ut=Fc;if(ut&&(ut=ut(i,we))){Ic(Ue,ut,d,Fe);break e}qt&&qt(i,_e,we),i==="focusout"&&we&&_e.type==="number"&&we.memoizedProps.value!=null&&Qi(_e,"number",_e.value)}switch(qt=we?sn(we):window,i){case"focusin":(fl(qt)||qt.contentEditable==="true")&&(X=qt,oe=we,ue=null);break;case"focusout":ue=oe=X=null;break;case"mousedown":de=!0;break;case"contextmenu":case"mouseup":case"dragend":de=!1,Z(Ue,d,Fe);break;case"selectionchange":if(W)break;case"keydown":case"keyup":Z(Ue,d,Fe)}var mt;if(as)e:{switch(i){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else vi?Mc(i,d)&&(Ct="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Ct="onCompositionStart");Ct&&(ll&&d.locale!=="ko"&&(vi||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&vi&&(mt=ru()):($a=Fe,Qs="value"in $a?$a.value:$a.textContent,vi=!0)),qt=ph(we,Ct),0<qt.length&&(Ct=new ol(Ct,i,null,d,Fe),Ue.push({event:Ct,listeners:qt}),mt?Ct.data=mt:(mt=Td(d),mt!==null&&(Ct.data=mt)))),(mt=Tv?Dd(i,d):Dv(i,d))&&(Ct=ph(we,"onBeforeInput"),0<Ct.length&&(qt=new ol("onBeforeInput","beforeinput",null,d,Fe),Ue.push({event:qt,listeners:Ct}),qt.data=mt)),BT(Ue,i,we,d,Fe)}uw(Ue,l)})}function cf(i,l,d){return{instance:i,listener:l,currentTarget:d}}function ph(i,l){for(var d=l+"Capture",v=[];i!==null;){var b=i,C=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||C===null||(b=fi(i,d),b!=null&&v.unshift(cf(i,b,C)),b=fi(i,l),b!=null&&v.push(cf(i,b,C))),i.tag===3)return v;i=i.return}return[]}function Ml(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function lw(i,l,d,v,b){for(var C=l._reactName,M=[];d!==null&&d!==v;){var z=d,Y=z.alternate,we=z.stateNode;if(z=z.tag,Y!==null&&Y===v)break;z!==5&&z!==26&&z!==27||we===null||(Y=we,b?(we=fi(d,C),we!=null&&M.unshift(cf(d,we,Y))):b||(we=fi(d,C),we!=null&&M.push(cf(d,we,Y)))),d=d.return}M.length!==0&&i.push({event:l,listeners:M})}var zT=/\r\n?/g,jT=/\u0000|\uFFFD/g;function cw(i){return(typeof i=="string"?i:""+i).replace(zT,`
`).replace(jT,"")}function fw(i,l){return l=cw(l),cw(i)===l}function vh(){}function pn(i,l,d,v,b,C){switch(d){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||Ji(i,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&Ji(i,""+v);break;case"className":va(i,"class",v);break;case"tabIndex":va(i,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":va(i,d,v);break;case"style":xd(i,v,C);break;case"data":if(l!=="object"){va(i,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||d!=="href")){i.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){i.removeAttribute(d);break}v=si(""+v),i.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(d==="formAction"?(l!=="input"&&pn(i,l,"name",b.name,b,null),pn(i,l,"formEncType",b.formEncType,b,null),pn(i,l,"formMethod",b.formMethod,b,null),pn(i,l,"formTarget",b.formTarget,b,null)):(pn(i,l,"encType",b.encType,b,null),pn(i,l,"method",b.method,b,null),pn(i,l,"target",b.target,b,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){i.removeAttribute(d);break}v=si(""+v),i.setAttribute(d,v);break;case"onClick":v!=null&&(i.onclick=vh);break;case"onScroll":v!=null&&Kt("scroll",i);break;case"onScrollEnd":v!=null&&Kt("scrollend",i);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"multiple":i.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":i.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){i.removeAttribute("xlink:href");break}d=si(""+v),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?i.setAttribute(d,""+v):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":v===!0?i.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?i.setAttribute(d,v):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?i.setAttribute(d,v):i.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?i.removeAttribute(d):i.setAttribute(d,v);break;case"popover":Kt("beforetoggle",i),Kt("toggle",i),ur(i,"popover",v);break;case"xlinkActuate":Bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Bt(i,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Bt(i,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Bt(i,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Bt(i,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":ur(i,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=ia.get(d)||d,ur(i,d,v))}}function Xm(i,l,d,v,b,C){switch(d){case"style":xd(i,v,C);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"children":typeof v=="string"?Ji(i,v):(typeof v=="number"||typeof v=="bigint")&&Ji(i,""+v);break;case"onScroll":v!=null&&Kt("scroll",i);break;case"onScrollEnd":v!=null&&Kt("scrollend",i);break;case"onClick":v!=null&&(i.onclick=vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hr.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),l=d.slice(2,b?d.length-7:void 0),C=i[Le]||null,C=C!=null?C[d]:null,typeof C=="function"&&i.removeEventListener(l,C,b),typeof v=="function")){typeof C!="function"&&C!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(l,v,b);break e}d in i?i[d]=v:v===!0?i.setAttribute(d,""):ur(i,d,v)}}}function Ir(i,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kt("error",i),Kt("load",i);var v=!1,b=!1,C;for(C in d)if(d.hasOwnProperty(C)){var M=d[C];if(M!=null)switch(C){case"src":v=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:pn(i,l,C,M,d,null)}}b&&pn(i,l,"srcSet",d.srcSet,d,null),v&&pn(i,l,"src",d.src,d,null);return;case"input":Kt("invalid",i);var z=C=M=b=null,Y=null,we=null;for(v in d)if(d.hasOwnProperty(v)){var Fe=d[v];if(Fe!=null)switch(v){case"name":b=Fe;break;case"type":M=Fe;break;case"checked":Y=Fe;break;case"defaultChecked":we=Fe;break;case"value":C=Fe;break;case"defaultValue":z=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,l));break;default:pn(i,l,v,Fe,d,null)}}bc(i,C,z,Y,we,M,b,!1),Ro(i);return;case"select":Kt("invalid",i),v=M=C=null;for(b in d)if(d.hasOwnProperty(b)&&(z=d[b],z!=null))switch(b){case"value":C=z;break;case"defaultValue":M=z;break;case"multiple":v=z;default:pn(i,l,b,z,d,null)}l=C,d=M,i.multiple=!!v,l!=null?ui(i,!!v,l,!1):d!=null&&ui(i,!!v,d,!0);return;case"textarea":Kt("invalid",i),C=b=v=null;for(M in d)if(d.hasOwnProperty(M)&&(z=d[M],z!=null))switch(M){case"value":v=z;break;case"defaultValue":b=z;break;case"children":C=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:pn(i,l,M,z,d,null)}xc(i,v,b,C),Ro(i);return;case"option":for(Y in d)if(d.hasOwnProperty(Y)&&(v=d[Y],v!=null))switch(Y){case"selected":i.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:pn(i,l,Y,v,d,null)}return;case"dialog":Kt("beforetoggle",i),Kt("toggle",i),Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":Kt("load",i);break;case"video":case"audio":for(v=0;v<lf.length;v++)Kt(lf[v],i);break;case"image":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"embed":case"source":case"link":Kt("error",i),Kt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in d)if(d.hasOwnProperty(we)&&(v=d[we],v!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:pn(i,l,we,v,d,null)}return;default:if(wc(l)){for(Fe in d)d.hasOwnProperty(Fe)&&(v=d[Fe],v!==void 0&&Xm(i,l,Fe,v,d,void 0));return}}for(z in d)d.hasOwnProperty(z)&&(v=d[z],v!=null&&pn(i,l,z,v,d,null))}function HT(i,l,d,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,C=null,M=null,z=null,Y=null,we=null,Fe=null;for(Ae in d){var Ue=d[Ae];if(d.hasOwnProperty(Ae)&&Ue!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":Y=Ue;default:v.hasOwnProperty(Ae)||pn(i,l,Ae,null,v,Ue)}}for(var _e in v){var Ae=v[_e];if(Ue=d[_e],v.hasOwnProperty(_e)&&(Ae!=null||Ue!=null))switch(_e){case"type":C=Ae;break;case"name":b=Ae;break;case"checked":we=Ae;break;case"defaultChecked":Fe=Ae;break;case"value":M=Ae;break;case"defaultValue":z=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(137,l));break;default:Ae!==Ue&&pn(i,l,_e,Ae,v,Ue)}}Yi(i,M,z,Y,we,Fe,C,b);return;case"select":Ae=M=z=_e=null;for(C in d)if(Y=d[C],d.hasOwnProperty(C)&&Y!=null)switch(C){case"value":break;case"multiple":Ae=Y;default:v.hasOwnProperty(C)||pn(i,l,C,null,v,Y)}for(b in v)if(C=v[b],Y=d[b],v.hasOwnProperty(b)&&(C!=null||Y!=null))switch(b){case"value":_e=C;break;case"defaultValue":z=C;break;case"multiple":M=C;default:C!==Y&&pn(i,l,b,C,v,Y)}l=z,d=M,v=Ae,_e!=null?ui(i,!!d,_e,!1):!!v!=!!d&&(l!=null?ui(i,!!d,l,!0):ui(i,!!d,d?[]:"",!1));return;case"textarea":Ae=_e=null;for(z in d)if(b=d[z],d.hasOwnProperty(z)&&b!=null&&!v.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:pn(i,l,z,null,v,b)}for(M in v)if(b=v[M],C=d[M],v.hasOwnProperty(M)&&(b!=null||C!=null))switch(M){case"value":_e=b;break;case"defaultValue":Ae=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==C&&pn(i,l,M,b,v,C)}Zi(i,_e,Ae);return;case"option":for(var At in d)if(_e=d[At],d.hasOwnProperty(At)&&_e!=null&&!v.hasOwnProperty(At))switch(At){case"selected":i.selected=!1;break;default:pn(i,l,At,null,v,_e)}for(Y in v)if(_e=v[Y],Ae=d[Y],v.hasOwnProperty(Y)&&_e!==Ae&&(_e!=null||Ae!=null))switch(Y){case"selected":i.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:pn(i,l,Y,_e,v,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in d)_e=d[_t],d.hasOwnProperty(_t)&&_e!=null&&!v.hasOwnProperty(_t)&&pn(i,l,_t,null,v,_e);for(we in v)if(_e=v[we],Ae=d[we],v.hasOwnProperty(we)&&_e!==Ae&&(_e!=null||Ae!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,l));break;default:pn(i,l,we,_e,v,Ae)}return;default:if(wc(l)){for(var vn in d)_e=d[vn],d.hasOwnProperty(vn)&&_e!==void 0&&!v.hasOwnProperty(vn)&&Xm(i,l,vn,void 0,v,_e);for(Fe in v)_e=v[Fe],Ae=d[Fe],!v.hasOwnProperty(Fe)||_e===Ae||_e===void 0&&Ae===void 0||Xm(i,l,Fe,_e,v,Ae);return}}for(var ve in d)_e=d[ve],d.hasOwnProperty(ve)&&_e!=null&&!v.hasOwnProperty(ve)&&pn(i,l,ve,null,v,_e);for(Ue in v)_e=v[Ue],Ae=d[Ue],!v.hasOwnProperty(Ue)||_e===Ae||_e==null&&Ae==null||pn(i,l,Ue,_e,v,Ae)}var Ym=null,Qm=null;function mh(i){return i.nodeType===9?i:i.ownerDocument}function dw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hw(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Zm(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Jm=null;function VT(){var i=window.event;return i&&i.type==="popstate"?i===Jm?!1:(Jm=i,!0):(Jm=null,!1)}var pw=typeof setTimeout=="function"?setTimeout:void 0,WT=typeof clearTimeout=="function"?clearTimeout:void 0,vw=typeof Promise=="function"?Promise:void 0,qT=typeof queueMicrotask=="function"?queueMicrotask:typeof vw<"u"?function(i){return vw.resolve(null).then(i).catch($T)}:pw;function $T(i){setTimeout(function(){throw i})}function _u(i){return i==="head"}function mw(i,l){var d=l,v=0,b=0;do{var C=d.nextSibling;if(i.removeChild(d),C&&C.nodeType===8)if(d=C.data,d==="/$"){if(0<v&&8>v){d=v;var M=i.ownerDocument;if(d&1&&ff(M.documentElement),d&2&&ff(M.body),d&4)for(d=M.head,ff(d),M=d.firstChild;M;){var z=M.nextSibling,Y=M.nodeName;M[Et]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&M.rel.toLowerCase()==="stylesheet"||d.removeChild(M),M=z}}if(b===0){i.removeChild(C),bf(l);return}b--}else d==="$"||d==="$?"||d==="$!"?b++:v=d.charCodeAt(0)-48;else v=0;d=C}while(d);bf(l)}function eg(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":eg(d),at(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function GT(i,l,d,v){for(;i.nodeType===1;){var b=d;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(v){if(!i[Et])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(C=i.getAttribute("rel"),C==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(C!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(C=i.getAttribute("src"),(C!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&C&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var C=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===C)return i}else return i;if(i=vo(i.nextSibling),i===null)break}return null}function KT(i,l,d){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=vo(i.nextSibling),i===null))return null;return i}function tg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function XT(i,l){var d=i.ownerDocument;if(i.data!=="$?"||d.readyState==="complete")l();else{var v=function(){l(),d.removeEventListener("DOMContentLoaded",v)};d.addEventListener("DOMContentLoaded",v),i._reactRetry=v}}function vo(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return i}var ng=null;function gw(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}function yw(i,l,d){switch(l=mh(d),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function ff(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);at(i)}var Ja=new Map,bw=new Set;function gh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Di=ne.d;ne.d={f:YT,r:QT,D:ZT,C:JT,L:eD,m:tD,X:rD,S:nD,M:aD};function YT(){var i=Di.f(),l=sh();return i||l}function QT(i){var l=Ft(i);l!==null&&l.tag===5&&l.type==="form"?Ux(l):Di.r(i)}var Il=typeof document>"u"?null:document;function xw(i,l,d){var v=Il;if(v&&typeof l=="string"&&l){var b=qr(l);b='link[rel="'+i+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),bw.has(b)||(bw.add(b),i={rel:i,crossOrigin:d,href:l},v.querySelector(b)===null&&(l=v.createElement("link"),Ir(l,"link",i),Lt(l),v.head.appendChild(l)))}}function ZT(i){Di.D(i),xw("dns-prefetch",i,null)}function JT(i,l){Di.C(i,l),xw("preconnect",i,l)}function eD(i,l,d){Di.L(i,l,d);var v=Il;if(v&&i&&l){var b='link[rel="preload"][as="'+qr(l)+'"]';l==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+qr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+qr(d.imageSizes)+'"]')):b+='[href="'+qr(i)+'"]';var C=b;switch(l){case"style":C=Fl(i);break;case"script":C=Bl(i)}Ja.has(C)||(i=h({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:i,as:l},d),Ja.set(C,i),v.querySelector(b)!==null||l==="style"&&v.querySelector(df(C))||l==="script"&&v.querySelector(hf(C))||(l=v.createElement("link"),Ir(l,"link",i),Lt(l),v.head.appendChild(l)))}}function tD(i,l){Di.m(i,l);var d=Il;if(d&&i){var v=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+qr(v)+'"][href="'+qr(i)+'"]',C=b;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Bl(i)}if(!Ja.has(C)&&(i=h({rel:"modulepreload",href:i},l),Ja.set(C,i),d.querySelector(b)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(hf(C)))return}v=d.createElement("link"),Ir(v,"link",i),Lt(v),d.head.appendChild(v)}}}function nD(i,l,d){Di.S(i,l,d);var v=Il;if(v&&i){var b=Tn(v).hoistableStyles,C=Fl(i);l=l||"default";var M=b.get(C);if(!M){var z={loading:0,preload:null};if(M=v.querySelector(df(C)))z.loading=5;else{i=h({rel:"stylesheet",href:i,"data-precedence":l},d),(d=Ja.get(C))&&rg(i,d);var Y=M=v.createElement("link");Lt(Y),Ir(Y,"link",i),Y._p=new Promise(function(we,Fe){Y.onload=we,Y.onerror=Fe}),Y.addEventListener("load",function(){z.loading|=1}),Y.addEventListener("error",function(){z.loading|=2}),z.loading|=4,yh(M,l,v)}M={type:"stylesheet",instance:M,count:1,state:z},b.set(C,M)}}}function rD(i,l){Di.X(i,l);var d=Il;if(d&&i){var v=Tn(d).hoistableScripts,b=Bl(i),C=v.get(b);C||(C=d.querySelector(hf(b)),C||(i=h({src:i,async:!0},l),(l=Ja.get(b))&&ag(i,l),C=d.createElement("script"),Lt(C),Ir(C,"link",i),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(b,C))}}function aD(i,l){Di.M(i,l);var d=Il;if(d&&i){var v=Tn(d).hoistableScripts,b=Bl(i),C=v.get(b);C||(C=d.querySelector(hf(b)),C||(i=h({src:i,async:!0,type:"module"},l),(l=Ja.get(b))&&ag(i,l),C=d.createElement("script"),Lt(C),Ir(C,"link",i),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(b,C))}}function ww(i,l,d,v){var b=(b=Ve.current)?gh(b):null;if(!b)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Fl(d.href),d=Tn(b).hoistableStyles,v=d.get(l),v||(v={type:"style",instance:null,count:0,state:null},d.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=Fl(d.href);var C=Tn(b).hoistableStyles,M=C.get(i);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(i,M),(C=b.querySelector(df(i)))&&!C._p&&(M.instance=C,M.state.loading=5),Ja.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ja.set(i,d),C||oD(b,i,d,M.state))),l&&v===null)throw Error(r(528,""));return M}if(l&&v!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Bl(d),d=Tn(b).hoistableScripts,v=d.get(l),v||(v={type:"script",instance:null,count:0,state:null},d.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Fl(i){return'href="'+qr(i)+'"'}function df(i){return'link[rel="stylesheet"]['+i+"]"}function Ew(i){return h({},i,{"data-precedence":i.precedence,precedence:null})}function oD(i,l,d,v){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=i.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),Ir(l,"link",d),Lt(l),i.head.appendChild(l))}function Bl(i){return'[src="'+qr(i)+'"]'}function hf(i){return"script[async]"+i}function Sw(i,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var v=i.querySelector('style[data-href~="'+qr(d.href)+'"]');if(v)return l.instance=v,Lt(v),v;var b=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(i.ownerDocument||i).createElement("style"),Lt(v),Ir(v,"style",b),yh(v,d.precedence,i),l.instance=v;case"stylesheet":b=Fl(d.href);var C=i.querySelector(df(b));if(C)return l.state.loading|=4,l.instance=C,Lt(C),C;v=Ew(d),(b=Ja.get(b))&&rg(v,b),C=(i.ownerDocument||i).createElement("link"),Lt(C);var M=C;return M._p=new Promise(function(z,Y){M.onload=z,M.onerror=Y}),Ir(C,"link",v),l.state.loading|=4,yh(C,d.precedence,i),l.instance=C;case"script":return C=Bl(d.src),(b=i.querySelector(hf(C)))?(l.instance=b,Lt(b),b):(v=d,(b=Ja.get(C))&&(v=h({},d),ag(v,b)),i=i.ownerDocument||i,b=i.createElement("script"),Lt(b),Ir(b,"link",v),i.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,yh(v,d.precedence,i));return l.instance}function yh(i,l,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=v.length?v[v.length-1]:null,C=b,M=0;M<v.length;M++){var z=v[M];if(z.dataset.precedence===l)C=z;else if(C!==b)break}C?C.parentNode.insertBefore(i,C.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(i,l.firstChild))}function rg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function ag(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var bh=null;function _w(i,l,d){if(bh===null){var v=new Map,b=bh=new Map;b.set(d,v)}else b=bh,v=b.get(d),v||(v=new Map,b.set(d,v));if(v.has(i))return v;for(v.set(i,null),d=d.getElementsByTagName(i),b=0;b<d.length;b++){var C=d[b];if(!(C[Et]||C[Pe]||i==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var M=C.getAttribute(l)||"";M=i+M;var z=v.get(M);z?z.push(C):v.set(M,[C])}}return v}function Cw(i,l,d){i=i.ownerDocument||i,i.head.insertBefore(d,l==="title"?i.querySelector("head > title"):null)}function iD(i,l,d){if(d===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Rw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var pf=null;function uD(){}function sD(i,l,d){if(pf===null)throw Error(r(475));var v=pf;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var b=Fl(d.href),C=i.querySelector(df(b));if(C){i=C._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(v.count++,v=xh.bind(v),i.then(v,v)),l.state.loading|=4,l.instance=C,Lt(C);return}C=i.ownerDocument||i,d=Ew(d),(b=Ja.get(b))&&rg(d,b),C=C.createElement("link"),Lt(C);var M=C;M._p=new Promise(function(z,Y){M.onload=z,M.onerror=Y}),Ir(C,"link",d),l.instance=C}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(v.count++,l=xh.bind(v),i.addEventListener("load",l),i.addEventListener("error",l))}}function lD(){if(pf===null)throw Error(r(475));var i=pf;return i.stylesheets&&i.count===0&&og(i,i.stylesheets),0<i.count?function(l){var d=setTimeout(function(){if(i.stylesheets&&og(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d)}}:null}function xh(){if(this.count--,this.count===0){if(this.stylesheets)og(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wh=null;function og(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wh=new Map,l.forEach(cD,i),wh=null,xh.call(i))}function cD(i,l){if(!(l.state.loading&4)){var d=wh.get(i);if(d)var v=d.get(null);else{d=new Map,wh.set(i,d);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<b.length;C++){var M=b[C];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(d.set(M.dataset.precedence,M),v=M)}v&&d.set(null,v)}b=l.instance,M=b.getAttribute("data-precedence"),C=d.get(M)||v,C===v&&d.set(null,b),d.set(M,b),this.count++,v=xh.bind(this),b.addEventListener("load",v),b.addEventListener("error",v),C?C.parentNode.insertBefore(b,C.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),l.state.loading|=4}}var vf={$$typeof:T,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function fD(i,l,d,v,b,C,M,z){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=So(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=So(0),this.hiddenUpdates=So(null),this.identifierPrefix=v,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Aw(i,l,d,v,b,C,M,z,Y,we,Fe,Ue){return i=new fD(i,l,d,M,z,Y,we,Ue),l=1,C===!0&&(l|=24),C=Ta(3,null,null,l),i.current=C,C.stateNode=i,l=zv(),l.refCount++,i.pooledCache=l,l.refCount++,C.memoizedState={element:v,isDehydrated:d,cache:l},Wv(C),i}function Tw(i){return i?(i=No,i):No}function Dw(i,l,d,v,b,C){b=Tw(b),v.context===null?v.context=b:v.pendingContext=b,v=fu(l),v.payload={element:d},C=C===void 0?null:C,C!==null&&(v.callback=C),d=du(i,v,l),d!==null&&(Ma(d,i,l),Wc(d,i,l))}function Nw(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function ig(i,l){Nw(i,l),(i=i.alternate)&&Nw(i,l)}function kw(i){if(i.tag===13){var l=ho(i,67108864);l!==null&&Ma(l,i,67108864),ig(i,67108864)}}var Eh=!0;function dD(i,l,d,v){var b=q.T;q.T=null;var C=ne.p;try{ne.p=2,ug(i,l,d,v)}finally{ne.p=C,q.T=b}}function hD(i,l,d,v){var b=q.T;q.T=null;var C=ne.p;try{ne.p=8,ug(i,l,d,v)}finally{ne.p=C,q.T=b}}function ug(i,l,d,v){if(Eh){var b=sg(v);if(b===null)Km(i,l,v,Sh,d),Mw(i,v);else if(vD(b,i,l,d,v))v.stopPropagation();else if(Mw(i,v),l&4&&-1<pD.indexOf(i)){for(;b!==null;){var C=Ft(b);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var M=Un(C.pendingLanes);if(M!==0){var z=C;for(z.pendingLanes|=2,z.entangledLanes|=2;M;){var Y=1<<31-yn(M);z.entanglements[1]|=Y,M&=~Y}Fo(C),(fn&6)===0&&(ih=Sn()+500,sf(0))}}break;case 13:z=ho(C,2),z!==null&&Ma(z,C,2),sh(),ig(C,2)}if(C=sg(v),C===null&&Km(i,l,v,Sh,d),C===b)break;b=C}b!==null&&v.stopPropagation()}else Km(i,l,v,null,d)}}function sg(i){return i=Ys(i),lg(i)}var Sh=null;function lg(i){if(Sh=null,i=bt(i),i!==null){var l=o(i);if(l===null)i=null;else{var d=l.tag;if(d===13){if(i=u(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return Sh=i,null}function Ow(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ur()){case Zn:return 2;case aa:return 8;case gn:case qn:return 32;case Mn:return 268435456;default:return 32}default:return 32}}var cg=!1,Cu=null,Ru=null,Au=null,mf=new Map,gf=new Map,Tu=[],pD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mw(i,l){switch(i){case"focusin":case"focusout":Cu=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Au=null;break;case"pointerover":case"pointerout":mf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":gf.delete(l.pointerId)}}function yf(i,l,d,v,b,C){return i===null||i.nativeEvent!==C?(i={blockedOn:l,domEventName:d,eventSystemFlags:v,nativeEvent:C,targetContainers:[b]},l!==null&&(l=Ft(l),l!==null&&kw(l)),i):(i.eventSystemFlags|=v,l=i.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),i)}function vD(i,l,d,v,b){switch(l){case"focusin":return Cu=yf(Cu,i,l,d,v,b),!0;case"dragenter":return Ru=yf(Ru,i,l,d,v,b),!0;case"mouseover":return Au=yf(Au,i,l,d,v,b),!0;case"pointerover":var C=b.pointerId;return mf.set(C,yf(mf.get(C)||null,i,l,d,v,b)),!0;case"gotpointercapture":return C=b.pointerId,gf.set(C,yf(gf.get(C)||null,i,l,d,v,b)),!0}return!1}function Iw(i){var l=bt(i.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=u(d),l!==null){i.blockedOn=l,ge(i.priority,function(){if(d.tag===13){var v=Oa();v=Zu(v);var b=ho(d,v);b!==null&&Ma(b,d,v),ig(d,v)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function _h(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=sg(i.nativeEvent);if(d===null){d=i.nativeEvent;var v=new d.constructor(d.type,d);qa=v,d.target.dispatchEvent(v),qa=null}else return l=Ft(d),l!==null&&kw(l),i.blockedOn=d,!1;l.shift()}return!0}function Fw(i,l,d){_h(i)&&d.delete(l)}function mD(){cg=!1,Cu!==null&&_h(Cu)&&(Cu=null),Ru!==null&&_h(Ru)&&(Ru=null),Au!==null&&_h(Au)&&(Au=null),mf.forEach(Fw),gf.forEach(Fw)}function Ch(i,l){i.blockedOn===l&&(i.blockedOn=null,cg||(cg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mD)))}var Rh=null;function Bw(i){Rh!==i&&(Rh=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Rh===i&&(Rh=null);for(var l=0;l<i.length;l+=3){var d=i[l],v=i[l+1],b=i[l+2];if(typeof v!="function"){if(lg(v||d)===null)continue;break}var C=Ft(d);C!==null&&(i.splice(l,3),l-=3,lm(C,{pending:!0,data:b,method:d.method,action:v},v,b))}}))}function bf(i){function l(Y){return Ch(Y,i)}Cu!==null&&Ch(Cu,i),Ru!==null&&Ch(Ru,i),Au!==null&&Ch(Au,i),mf.forEach(l),gf.forEach(l);for(var d=0;d<Tu.length;d++){var v=Tu[d];v.blockedOn===i&&(v.blockedOn=null)}for(;0<Tu.length&&(d=Tu[0],d.blockedOn===null);)Iw(d),d.blockedOn===null&&Tu.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var b=d[v],C=d[v+1],M=b[Le]||null;if(typeof C=="function")M||Bw(d);else if(M){var z=null;if(C&&C.hasAttribute("formAction")){if(b=C,M=C[Le]||null)z=M.formAction;else if(lg(b)!==null)continue}else z=M.action;typeof z=="function"?d[v+1]=z:(d.splice(v,3),v-=3),Bw(d)}}}function fg(i){this._internalRoot=i}Ah.prototype.render=fg.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,v=Oa();Dw(d,v,i,l,null,null)},Ah.prototype.unmount=fg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Dw(i.current,2,null,i,null,null),sh(),l[Ye]=null}};function Ah(i){this._internalRoot=i}Ah.prototype.unstable_scheduleHydration=function(i){if(i){var l=te();i={blockedOn:null,target:i,priority:l};for(var d=0;d<Tu.length&&l!==0&&l<Tu[d].priority;d++);Tu.splice(d,0,i),d===0&&Iw(i)}};var Pw=n.version;if(Pw!=="19.1.0")throw Error(r(527,Pw,"19.1.0"));ne.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=c(l),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var gD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{_n=Th.inject(gD),Vt=Th}catch{}}return wf.createRoot=function(i,l){if(!a(i))throw Error(r(299));var d=!1,v="",b=Jx,C=e1,M=t1,z=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(z=l.unstable_transitionCallbacks)),l=Aw(i,1,!1,null,null,d,v,b,C,M,z,null),i[Ye]=l.current,Gm(i),new fg(l)},wf.hydrateRoot=function(i,l,d){if(!a(i))throw Error(r(299));var v=!1,b="",C=Jx,M=e1,z=t1,Y=null,we=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(z=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Y=d.unstable_transitionCallbacks),d.formState!==void 0&&(we=d.formState)),l=Aw(i,1,!0,l,d??null,v,b,C,M,z,Y,we),l.context=Tw(null),d=l.current,v=Oa(),v=Zu(v),b=fu(v),b.callback=null,du(d,b,v),d=v,l.current.lanes=d,_o(l,d),Fo(l),i[Ye]=l.current,Gm(i),new Ah(l)},wf.version="19.1.0",wf}var Gw;function DD(){if(Gw)return pg.exports;Gw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),pg.exports=TD(),pg.exports}var ND=DD(),Ef={},Kw;function kD(){if(Kw)return Ef;Kw=1,Object.defineProperty(Ef,"__esModule",{value:!0}),Ef.parse=u,Ef.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function u(m,g){const x=new o,E=m.length;if(E<2)return x;const S=(g==null?void 0:g.decode)||h;let _=0;do{const A=m.indexOf("=",_);if(A===-1)break;const T=m.indexOf(";",_),N=T===-1?E:T;if(A>N){_=m.lastIndexOf(";",A-1)+1;continue}const D=s(m,_,A),k=c(m,A,D),P=m.slice(D,k);if(x[P]===void 0){let H=s(m,A+1,N),U=c(m,N,H);const j=S(m.slice(H,U));x[P]=j}_=N+1}while(_<E);return x}function s(m,g,x){do{const E=m.charCodeAt(g);if(E!==32&&E!==9)return g}while(++g<x);return x}function c(m,g,x){for(;g>x;){const E=m.charCodeAt(--g);if(E!==32&&E!==9)return g+1}return x}function f(m,g,x){const E=(x==null?void 0:x.encode)||encodeURIComponent;if(!t.test(m))throw new TypeError(`argument name is invalid: ${m}`);const S=E(g);if(!n.test(S))throw new TypeError(`argument val is invalid: ${g}`);let _=m+"="+S;if(!x)return _;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);_+="; Max-Age="+x.maxAge}if(x.domain){if(!e.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);_+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);_+="; Path="+x.path}if(x.expires){if(!p(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);_+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(_+="; HttpOnly"),x.secure&&(_+="; Secure"),x.partitioned&&(_+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return _}function h(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function p(m){return a.call(m)==="[object Date]"}return Ef}kD();/**
 * react-router v7.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wS=t=>{throw TypeError(t)},OD=(t,n,e)=>n.has(t)||wS("Cannot "+e),yg=(t,n,e)=>(OD(t,n,"read from private field"),e?e.call(t):n.get(t)),MD=(t,n,e)=>n.has(t)?wS("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,e),Xw="popstate";function ID(t={}){function n(r,a){let{pathname:o,search:u,hash:s}=r.location;return jf("",{pathname:o,search:u,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(r,a){return typeof a=="string"?a:ju(a)}return BD(n,e,null,t)}function Xt(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function or(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function FD(){return Math.random().toString(36).substring(2,10)}function Yw(t,n){return{usr:t.state,key:t.key,idx:n}}function jf(t,n,e=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?$u(n):n,state:e,key:n&&n.key||r||FD()}}function ju({pathname:t="/",search:n="",hash:e=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function $u(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substring(e),t=t.substring(0,e));let r=t.indexOf("?");r>=0&&(n.search=t.substring(r),t=t.substring(0,r)),t&&(n.pathname=t)}return n}function BD(t,n,e,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,u=a.history,s="POP",c=null,f=h();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function h(){return(u.state||{idx:null}).idx}function p(){s="POP";let S=h(),_=S==null?null:S-f;f=S,c&&c({action:s,location:E.location,delta:_})}function m(S,_){s="PUSH";let A=jf(E.location,S,_);f=h()+1;let T=Yw(A,f),N=E.createHref(A);try{u.pushState(T,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(N)}o&&c&&c({action:s,location:E.location,delta:1})}function g(S,_){s="REPLACE";let A=jf(E.location,S,_);f=h();let T=Yw(A,f),N=E.createHref(A);u.replaceState(T,"",N),o&&c&&c({action:s,location:E.location,delta:0})}function x(S){return ES(S)}let E={get action(){return s},get location(){return t(a,u)},listen(S){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Xw,p),c=S,()=>{a.removeEventListener(Xw,p),c=null}},createHref(S){return n(a,S)},createURL:x,encodeLocation(S){let _=x(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:g,go(S){return u.go(S)}};return E}function ES(t,n=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Xt(e,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ju(t);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=e+r),new URL(r,e)}var kf,Qw=class{constructor(t){if(MD(this,kf,new Map),t)for(let[n,e]of t)this.set(n,e)}get(t){if(yg(this,kf).has(t))return yg(this,kf).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,n){yg(this,kf).set(t,n)}};kf=new WeakMap;var PD=new Set(["lazy","caseSensitive","path","id","index","children"]);function LD(t){return PD.has(t)}var UD=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function zD(t){return UD.has(t)}function jD(t){return t.index===!0}function up(t,n,e=[],r={}){return t.map((a,o)=>{let u=[...e,String(o)],s=typeof a.id=="string"?a.id:u.join("-");if(Xt(a.index!==!0||!a.children,"Cannot specify children on an index route"),Xt(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),jD(a)){let c={...a,...n(a),id:s};return r[s]=c,c}else{let c={...a,...n(a),id:s,children:void 0};return r[s]=c,a.children&&(c.children=up(a.children,n,u,r)),c}})}function Mu(t,n,e="/"){return Yh(t,n,e,!1)}function Yh(t,n,e,r){let a=typeof n=="string"?$u(n):n,o=oo(a.pathname||"/",e);if(o==null)return null;let u=SS(t);VD(u);let s=null;for(let c=0;s==null&&c<u.length;++c){let f=eN(o);s=ZD(u[c],f,r)}return s}function HD(t,n){let{route:e,pathname:r,params:a}=t;return{id:e.id,pathname:r,params:a,data:n[e.id],handle:e.handle}}function SS(t,n=[],e=[],r=""){let a=(o,u,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};c.relativePath.startsWith("/")&&(Xt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=qo([r,c.relativePath]),h=e.concat(c);o.children&&o.children.length>0&&(Xt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),SS(o.children,n,h,f)),!(o.path==null&&!o.index)&&n.push({path:f,score:YD(f,o.index),routesMeta:h})};return t.forEach((o,u)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))a(o,u);else for(let c of _S(o.path))a(o,u,c)}),n}function _S(t){let n=t.split("/");if(n.length===0)return[];let[e,...r]=n,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let u=_S(r.join("/")),s=[];return s.push(...u.map(c=>c===""?o:[o,c].join("/"))),a&&s.push(...u),s.map(c=>t.startsWith("/")&&c===""?"/":c)}function VD(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:QD(n.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}var WD=/^:[\w-]+$/,qD=3,$D=2,GD=1,KD=10,XD=-2,Zw=t=>t==="*";function YD(t,n){let e=t.split("/"),r=e.length;return e.some(Zw)&&(r+=XD),n&&(r+=$D),e.filter(a=>!Zw(a)).reduce((a,o)=>a+(WD.test(o)?qD:o===""?GD:KD),r)}function QD(t,n){return t.length===n.length&&t.slice(0,-1).every((r,a)=>r===n[a])?t[t.length-1]-n[n.length-1]:0}function ZD(t,n,e=!1){let{routesMeta:r}=t,a={},o="/",u=[];for(let s=0;s<r.length;++s){let c=r[s],f=s===r.length-1,h=o==="/"?n:n.slice(o.length)||"/",p=sp({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),m=c.route;if(!p&&f&&e&&!r[r.length-1].route.index&&(p=sp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(a,p.params),u.push({params:a,pathname:qo([o,p.pathname]),pathnameBase:rN(qo([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=qo([o,p.pathnameBase]))}return u}function sp(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,r]=JD(t.path,t.caseSensitive,t.end),a=n.match(e);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:p},m)=>{if(h==="*"){let x=s[m]||"";u=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const g=s[m];return p&&!g?f[h]=void 0:f[h]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:u,pattern:t}}function JD(t,n=!1,e=!0){or(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),r]}function eN(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return or(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function oo(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,r=t.charAt(e);return r&&r!=="/"?null:t.slice(e)||"/"}function tN(t,n="/"){let{pathname:e,search:r="",hash:a=""}=typeof t=="string"?$u(t):t;return{pathname:e?e.startsWith("/")?e:nN(e,n):n,search:aN(r),hash:oN(a)}}function nN(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function bg(t,n,e,r){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CS(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function u0(t){let n=CS(t);return n.map((e,r)=>r===n.length-1?e.pathname:e.pathnameBase)}function s0(t,n,e,r=!1){let a;typeof t=="string"?a=$u(t):(a={...t},Xt(!a.pathname||!a.pathname.includes("?"),bg("?","pathname","search",a)),Xt(!a.pathname||!a.pathname.includes("#"),bg("#","pathname","hash",a)),Xt(!a.search||!a.search.includes("#"),bg("#","search","hash",a)));let o=t===""||a.pathname==="",u=o?"/":a.pathname,s;if(u==null)s=e;else{let p=n.length-1;if(!r&&u.startsWith("..")){let m=u.split("/");for(;m[0]==="..";)m.shift(),p-=1;a.pathname=m.join("/")}s=p>=0?n[p]:"/"}let c=tN(a,s),f=u&&u!=="/"&&u.endsWith("/"),h=(o||u===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var qo=t=>t.join("/").replace(/\/\/+/g,"/"),rN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,lp=class{constructor(t,n,e,r=!1){this.status=t,this.statusText=n||"",this.internal=r,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function Hf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var RS=["POST","PUT","PATCH","DELETE"],iN=new Set(RS),uN=["GET",...RS],sN=new Set(uN),lN=new Set([301,302,303,307,308]),cN=new Set([307,308]),xg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Sf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},l0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dN=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),AS="remix-router-transitions",TS=Symbol("ResetLoaderData");function hN(t){const n=t.window?t.window:typeof window<"u"?window:void 0,e=typeof n<"u"&&typeof n.document<"u"&&typeof n.document.createElement<"u";Xt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],a=t.mapRouteProperties||dN,o={},u=up(t.routes,a,void 0,o),s,c=t.basename||"/",f=t.dataStrategy||yN,h={unstable_middleware:!1,...t.future},p=null,m=new Set,g=null,x=null,E=null,S=t.hydrationData!=null,_=Mu(u,t.history.location,c),A=!1,T=null,N;if(_==null&&!t.patchRoutesOnNavigation){let te=to(404,{pathname:t.history.location.pathname}),{matches:ge,route:Ce}=c2(u);N=!0,_=ge,T={[Ce.id]:te}}else if(_&&!t.hydrationData&&Co(_,u,t.history.location.pathname).active&&(_=null),_)if(_.some(te=>te.route.lazy))N=!1;else if(!_.some(te=>te.route.loader))N=!0;else{let te=t.hydrationData?t.hydrationData.loaderData:null,ge=t.hydrationData?t.hydrationData.errors:null;if(ge){let Ce=_.findIndex(Pe=>ge[Pe.route.id]!==void 0);N=_.slice(0,Ce+1).every(Pe=>!py(Pe.route,te,ge))}else N=_.every(Ce=>!py(Ce.route,te,ge))}else{N=!1,_=[];let te=Co(null,u,t.history.location.pathname);te.active&&te.matches&&(A=!0,_=te.matches)}let D,k={historyAction:t.history.action,location:t.history.location,matches:_,initialized:N,navigation:xg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||T,fetchers:new Map,blockers:new Map},P="POP",H=!1,U,j=!1,G=new Map,K=null,be=!1,pe=!1,he=new Set,q=new Map,ne=0,ee=-1,J=new Map,L=new Set,se=new Map,Re=new Map,Se=new Set,je=new Map,Xe,Ve=null;function yt(){if(p=t.history.listen(({action:te,location:ge,delta:Ce})=>{if(Xe){Xe(),Xe=void 0;return}or(je.size===0||Ce!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Pe=Va({currentLocation:k.location,nextLocation:ge,historyAction:te});if(Pe&&Ce!=null){let Le=new Promise(Ye=>{Xe=Ye});t.history.go(Ce*-1),jr(Pe,{state:"blocked",location:ge,proceed(){jr(Pe,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),Le.then(()=>t.history.go(Ce))},reset(){let Ye=new Map(k.blockers);Ye.set(Pe,Sf),kt({blockers:Ye})}});return}return Qt(te,ge)}),e){DN(n,G);let te=()=>NN(n,G);n.addEventListener("pagehide",te),K=()=>n.removeEventListener("pagehide",te)}return k.initialized||Qt("POP",k.location,{initialHydration:!0}),D}function ot(){p&&p(),K&&K(),m.clear(),U&&U.abort(),k.fetchers.forEach((te,ge)=>yn(ge)),k.blockers.forEach((te,ge)=>rt(ge))}function He(te){return m.add(te),()=>m.delete(te)}function kt(te,ge={}){k={...k,...te};let Ce=[],Pe=[];k.fetchers.forEach((Le,Ye)=>{Le.state==="idle"&&(Se.has(Ye)?Ce.push(Ye):Pe.push(Ye))}),Se.forEach(Le=>{!k.fetchers.has(Le)&&!q.has(Le)&&Ce.push(Le)}),[...m].forEach(Le=>Le(k,{deletedFetchers:Ce,viewTransitionOpts:ge.viewTransitionOpts,flushSync:ge.flushSync===!0})),Ce.forEach(Le=>yn(Le)),Pe.forEach(Le=>k.fetchers.delete(Le))}function wt(te,ge,{flushSync:Ce}={}){var dt,Et;let Pe=k.actionData!=null&&k.navigation.formMethod!=null&&Fa(k.navigation.formMethod)&&k.navigation.state==="loading"&&((dt=te.state)==null?void 0:dt._isRedirect)!==!0,Le;ge.actionData?Object.keys(ge.actionData).length>0?Le=ge.actionData:Le=null:Pe?Le=k.actionData:Le=null;let Ye=ge.loaderData?s2(k.loaderData,ge.loaderData,ge.matches||[],ge.errors):k.loaderData,xt=k.blockers;xt.size>0&&(xt=new Map(xt),xt.forEach((at,bt)=>xt.set(bt,Sf)));let et=H===!0||k.navigation.formMethod!=null&&Fa(k.navigation.formMethod)&&((Et=te.state)==null?void 0:Et._isRedirect)!==!0;s&&(u=s,s=void 0),be||P==="POP"||(P==="PUSH"?t.history.push(te,te.state):P==="REPLACE"&&t.history.replace(te,te.state));let ft;if(P==="POP"){let at=G.get(k.location.pathname);at&&at.has(te.pathname)?ft={currentLocation:k.location,nextLocation:te}:G.has(te.pathname)&&(ft={currentLocation:te,nextLocation:k.location})}else if(j){let at=G.get(k.location.pathname);at?at.add(te.pathname):(at=new Set([te.pathname]),G.set(k.location.pathname,at)),ft={currentLocation:k.location,nextLocation:te}}kt({...ge,actionData:Le,loaderData:Ye,historyAction:P,location:te,initialized:!0,navigation:xg,revalidation:"idle",restoreScrollPosition:$i(te,ge.matches||k.matches),preventScrollReset:et,blockers:xt},{viewTransitionOpts:ft,flushSync:Ce===!0}),P="POP",H=!1,j=!1,be=!1,pe=!1,Ve==null||Ve.resolve(),Ve=null}async function it(te,ge){if(typeof te=="number"){t.history.go(te);return}let Ce=hy(k.location,k.matches,c,te,ge==null?void 0:ge.fromRouteId,ge==null?void 0:ge.relative),{path:Pe,submission:Le,error:Ye}=Jw(!1,Ce,ge),xt=k.location,et=jf(k.location,Pe,ge&&ge.state);et={...et,...t.history.encodeLocation(et)};let ft=ge&&ge.replace!=null?ge.replace:void 0,dt="PUSH";ft===!0?dt="REPLACE":ft===!1||Le!=null&&Fa(Le.formMethod)&&Le.formAction===k.location.pathname+k.location.search&&(dt="REPLACE");let Et=ge&&"preventScrollReset"in ge?ge.preventScrollReset===!0:void 0,at=(ge&&ge.flushSync)===!0,bt=Va({currentLocation:xt,nextLocation:et,historyAction:dt});if(bt){jr(bt,{state:"blocked",location:et,proceed(){jr(bt,{state:"proceeding",proceed:void 0,reset:void 0,location:et}),it(te,ge)},reset(){let Ft=new Map(k.blockers);Ft.set(bt,Sf),kt({blockers:Ft})}});return}await Qt(dt,et,{submission:Le,pendingError:Ye,preventScrollReset:Et,replace:ge&&ge.replace,enableViewTransition:ge&&ge.viewTransition,flushSync:at})}function It(){Ve||(Ve=kN()),$n(),kt({revalidation:"loading"});let te=Ve.promise;return k.navigation.state==="submitting"?te:k.navigation.state==="idle"?(Qt(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),te):(Qt(P||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:j===!0}),te)}async function Qt(te,ge,Ce){U&&U.abort(),U=null,P=te,be=(Ce&&Ce.startUninterruptedRevalidation)===!0,_o(k.location,k.matches),H=(Ce&&Ce.preventScrollReset)===!0,j=(Ce&&Ce.enableViewTransition)===!0;let Pe=s||u,Le=Ce&&Ce.overrideNavigation,Ye=Ce!=null&&Ce.initialHydration&&k.matches&&k.matches.length>0&&!A?k.matches:Mu(Pe,ge,c),xt=(Ce&&Ce.flushSync)===!0;if(Ye&&k.initialized&&!pe&&_N(k.location,ge)&&!(Ce&&Ce.submission&&Fa(Ce.submission.formMethod))){wt(ge,{matches:Ye},{flushSync:xt});return}let et=Co(Ye,Pe,ge.pathname);if(et.active&&et.matches&&(Ye=et.matches),!Ye){let{error:Tn,notFoundMatches:Lt,route:Wt}=lo(ge.pathname);wt(ge,{matches:Lt,loaderData:{},errors:{[Wt.id]:Tn}},{flushSync:xt});return}U=new AbortController;let ft=Hl(t.history,ge,U.signal,Ce&&Ce.submission),dt=new Qw(t.unstable_getContext?await t.unstable_getContext():void 0),Et;if(Ce&&Ce.pendingError)Et=[Ss(Ye).route.id,{type:"error",error:Ce.pendingError}];else if(Ce&&Ce.submission&&Fa(Ce.submission.formMethod)){let Tn=await Jt(ft,ge,Ce.submission,Ye,dt,et.active,Ce&&Ce.initialHydration===!0,{replace:Ce.replace,flushSync:xt});if(Tn.shortCircuited)return;if(Tn.pendingActionResult){let[Lt,Wt]=Tn.pendingActionResult;if(Ia(Wt)&&Hf(Wt.error)&&Wt.error.status===404){U=null,wt(ge,{matches:Tn.matches,loaderData:{},errors:{[Lt]:Wt.error}});return}}Ye=Tn.matches||Ye,Et=Tn.pendingActionResult,Le=wg(ge,Ce.submission),xt=!1,et.active=!1,ft=Hl(t.history,ft.url,ft.signal)}let{shortCircuited:at,matches:bt,loaderData:Ft,errors:sn}=await cn(ft,ge,Ye,dt,et.active,Le,Ce&&Ce.submission,Ce&&Ce.fetcherSubmission,Ce&&Ce.replace,Ce&&Ce.initialHydration===!0,xt,Et);at||(U=null,wt(ge,{matches:bt||Ye,...l2(Et),loaderData:Ft,errors:sn}))}async function Jt(te,ge,Ce,Pe,Le,Ye,xt,et={}){$n();let ft=AN(ge,Ce);if(kt({navigation:ft},{flushSync:et.flushSync===!0}),Ye){let at=await co(Pe,ge.pathname,te.signal);if(at.type==="aborted")return{shortCircuited:!0};if(at.type==="error"){let bt=Ss(at.partialMatches).route.id;return{matches:at.partialMatches,pendingActionResult:[bt,{type:"error",error:at.error}]}}else if(at.matches)Pe=at.matches;else{let{notFoundMatches:bt,error:Ft,route:sn}=lo(ge.pathname);return{matches:bt,pendingActionResult:[sn.id,{type:"error",error:Ft}]}}}let dt,Et=Of(Pe,ge);if(!Et.route.action&&!Et.route.lazy)dt={type:"error",error:to(405,{method:te.method,pathname:ge.pathname,routeId:Et.route.id})};else{let at=Kl(a,o,te,Pe,Et,xt?[]:r,Le),bt=await Mn(te,at,Le,null);if(dt=bt[Et.route.id],!dt){for(let Ft of Pe)if(bt[Ft.route.id]){dt=bt[Ft.route.id];break}}if(te.signal.aborted)return{shortCircuited:!0}}if(Cs(dt)){let at;return et&&et.replace!=null?at=et.replace:at=o2(dt.response.headers.get("Location"),new URL(te.url),c)===k.location.pathname+k.location.search,await qn(te,dt,!0,{submission:Ce,replace:at}),{shortCircuited:!0}}if(Ia(dt)){let at=Ss(Pe,Et.route.id);return(et&&et.replace)!==!0&&(P="PUSH"),{matches:Pe,pendingActionResult:[at.route.id,dt,Et.route.id]}}return{matches:Pe,pendingActionResult:[Et.route.id,dt]}}async function cn(te,ge,Ce,Pe,Le,Ye,xt,et,ft,dt,Et,at){let bt=Ye||wg(ge,xt),Ft=xt||et||d2(bt),sn=!be&&!dt;if(Le){if(sn){let Jn=Sn(at);kt({navigation:bt,...Jn!==void 0?{actionData:Jn}:{}},{flushSync:Et})}let Bt=await co(Ce,ge.pathname,te.signal);if(Bt.type==="aborted")return{shortCircuited:!0};if(Bt.type==="error"){let Jn=Ss(Bt.partialMatches).route.id;return{matches:Bt.partialMatches,loaderData:{},errors:{[Jn]:Bt.error}}}else if(Bt.matches)Ce=Bt.matches;else{let{error:Jn,notFoundMatches:sr,route:ma}=lo(ge.pathname);return{matches:sr,loaderData:{},errors:{[ma.id]:Jn}}}}let Tn=s||u,{dsMatches:Lt,revalidatingFetchers:Wt}=e2(te,Pe,a,o,t.history,k,Ce,Ft,ge,dt?[]:r,dt===!0,pe,he,Se,se,L,Tn,c,t.patchRoutesOnNavigation!=null,at);if(ee=++ne,!t.dataStrategy&&!Lt.some(Bt=>Bt.shouldLoad)&&Wt.length===0){let Bt=zr();return wt(ge,{matches:Ce,loaderData:{},errors:at&&Ia(at[1])?{[at[0]]:at[1].error}:null,...l2(at),...Bt?{fetchers:new Map(k.fetchers)}:{}},{flushSync:Et}),{shortCircuited:!0}}if(sn){let Bt={};if(!Le){Bt.navigation=bt;let Jn=Sn(at);Jn!==void 0&&(Bt.actionData=Jn)}Wt.length>0&&(Bt.fetchers=Ur(Wt)),kt(Bt,{flushSync:Et})}Wt.forEach(Bt=>{Dr(Bt.key),Bt.controller&&q.set(Bt.key,Bt.controller)});let Hr=()=>Wt.forEach(Bt=>Dr(Bt.key));U&&U.signal.addEventListener("abort",Hr);let{loaderResults:gr,fetcherResults:Vr}=await ha(Lt,Wt,te,Pe);if(te.signal.aborted)return{shortCircuited:!0};U&&U.signal.removeEventListener("abort",Hr),Wt.forEach(Bt=>q.delete(Bt.key));let Zt=Dh(gr);if(Zt)return await qn(te,Zt.result,!0,{replace:ft}),{shortCircuited:!0};if(Zt=Dh(Vr),Zt)return L.add(Zt.key),await qn(te,Zt.result,!0,{replace:ft}),{shortCircuited:!0};let{loaderData:Wr,errors:yr}=u2(k,Ce,gr,at,Wt,Vr);dt&&k.errors&&(yr={...k.errors,...yr});let Gi=zr(),ur=oa(ee),va=Gi||ur||Wt.length>0;return{matches:Ce,loaderData:Wr,errors:yr,...va?{fetchers:new Map(k.fetchers)}:{}}}function Sn(te){if(te&&!Ia(te[1]))return{[te[0]]:te[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Ur(te){return te.forEach(ge=>{let Ce=k.fetchers.get(ge.key),Pe=_f(void 0,Ce?Ce.data:void 0);k.fetchers.set(ge.key,Pe)}),new Map(k.fetchers)}async function Zn(te,ge,Ce,Pe){Dr(te);let Le=(Pe&&Pe.flushSync)===!0,Ye=s||u,xt=hy(k.location,k.matches,c,Ce,ge,Pe==null?void 0:Pe.relative),et=Mu(Ye,xt,c),ft=Co(et,Ye,xt);if(ft.active&&ft.matches&&(et=ft.matches),!et){Vt(te,ge,to(404,{pathname:xt}),{flushSync:Le});return}let{path:dt,submission:Et,error:at}=Jw(!0,xt,Pe);if(at){Vt(te,ge,at,{flushSync:Le});return}let bt=Of(et,dt),Ft=new Qw(t.unstable_getContext?await t.unstable_getContext():void 0),sn=(Pe&&Pe.preventScrollReset)===!0;if(Et&&Fa(Et.formMethod)){await aa(te,ge,dt,bt,et,Ft,ft.active,Le,sn,Et);return}se.set(te,{routeId:ge,path:dt}),await gn(te,ge,dt,bt,et,Ft,ft.active,Le,sn,Et)}async function aa(te,ge,Ce,Pe,Le,Ye,xt,et,ft,dt){$n(),se.delete(te);function Et(bn){if(!bn.route.action&&!bn.route.lazy){let Ot=to(405,{method:dt.formMethod,pathname:Ce,routeId:ge});return Vt(te,ge,Ot,{flushSync:et}),!0}return!1}if(!xt&&Et(Pe))return;let at=k.fetchers.get(te);_n(te,TN(dt,at),{flushSync:et});let bt=new AbortController,Ft=Hl(t.history,Ce,bt.signal,dt);if(xt){let bn=await co(Le,Ce,Ft.signal,te);if(bn.type==="aborted")return;if(bn.type==="error"){Vt(te,ge,bn.error,{flushSync:et});return}else if(bn.matches){if(Le=bn.matches,Pe=Of(Le,Ce),Et(Pe))return}else{Vt(te,ge,to(404,{pathname:Ce}),{flushSync:et});return}}q.set(te,bt);let sn=ne,Tn=Kl(a,o,Ft,Le,Pe,r,Ye),Wt=(await Mn(Ft,Tn,Ye,te))[Pe.route.id];if(Ft.signal.aborted){q.get(te)===bt&&q.delete(te);return}if(Se.has(te)){if(Cs(Wt)||Ia(Wt)){_n(te,Ou(void 0));return}}else{if(Cs(Wt))if(q.delete(te),ee>sn){_n(te,Ou(void 0));return}else return L.add(te),_n(te,_f(dt)),qn(Ft,Wt,!1,{fetcherSubmission:dt,preventScrollReset:ft});if(Ia(Wt)){Vt(te,ge,Wt.error);return}}let Hr=k.navigation.location||k.location,gr=Hl(t.history,Hr,bt.signal),Vr=s||u,Zt=k.navigation.state!=="idle"?Mu(Vr,k.navigation.location,c):k.matches;Xt(Zt,"Didn't find any matches after fetcher action");let Wr=++ne;J.set(te,Wr);let yr=_f(dt,Wt.data);k.fetchers.set(te,yr);let{dsMatches:Gi,revalidatingFetchers:ur}=e2(gr,Ye,a,o,t.history,k,Zt,dt,Hr,r,!1,pe,he,Se,se,L,Vr,c,t.patchRoutesOnNavigation!=null,[Pe.route.id,Wt]);ur.filter(bn=>bn.key!==te).forEach(bn=>{let Ot=bn.key,Ki=k.fetchers.get(Ot),Nr=_f(void 0,Ki?Ki.data:void 0);k.fetchers.set(Ot,Nr),Dr(Ot),bn.controller&&q.set(Ot,bn.controller)}),kt({fetchers:new Map(k.fetchers)});let va=()=>ur.forEach(bn=>Dr(bn.key));bt.signal.addEventListener("abort",va);let{loaderResults:Bt,fetcherResults:Jn}=await ha(Gi,ur,gr,Ye);if(bt.signal.aborted)return;if(bt.signal.removeEventListener("abort",va),J.delete(te),q.delete(te),ur.forEach(bn=>q.delete(bn.key)),k.fetchers.has(te)){let bn=Ou(Wt.data);k.fetchers.set(te,bn)}let sr=Dh(Bt);if(sr)return qn(gr,sr.result,!1,{preventScrollReset:ft});if(sr=Dh(Jn),sr)return L.add(sr.key),qn(gr,sr.result,!1,{preventScrollReset:ft});let{loaderData:ma,errors:Wa}=u2(k,Zt,Bt,void 0,ur,Jn);oa(Wr),k.navigation.state==="loading"&&Wr>ee?(Xt(P,"Expected pending action"),U&&U.abort(),wt(k.navigation.location,{matches:Zt,loaderData:ma,errors:Wa,fetchers:new Map(k.fetchers)})):(kt({errors:Wa,loaderData:s2(k.loaderData,ma,Zt,Wa),fetchers:new Map(k.fetchers)}),pe=!1)}async function gn(te,ge,Ce,Pe,Le,Ye,xt,et,ft,dt){let Et=k.fetchers.get(te);_n(te,_f(dt,Et?Et.data:void 0),{flushSync:et});let at=new AbortController,bt=Hl(t.history,Ce,at.signal);if(xt){let Wt=await co(Le,Ce,bt.signal,te);if(Wt.type==="aborted")return;if(Wt.type==="error"){Vt(te,ge,Wt.error,{flushSync:et});return}else if(Wt.matches)Le=Wt.matches,Pe=Of(Le,Ce);else{Vt(te,ge,to(404,{pathname:Ce}),{flushSync:et});return}}q.set(te,at);let Ft=ne,sn=Kl(a,o,bt,Le,Pe,r,Ye),Lt=(await Mn(bt,sn,Ye,te))[Pe.route.id];if(q.get(te)===at&&q.delete(te),!bt.signal.aborted){if(Se.has(te)){_n(te,Ou(void 0));return}if(Cs(Lt))if(ee>Ft){_n(te,Ou(void 0));return}else{L.add(te),await qn(bt,Lt,!1,{preventScrollReset:ft});return}if(Ia(Lt)){Vt(te,ge,Lt.error);return}_n(te,Ou(Lt.data))}}async function qn(te,ge,Ce,{submission:Pe,fetcherSubmission:Le,preventScrollReset:Ye,replace:xt}={}){ge.response.headers.has("X-Remix-Revalidate")&&(pe=!0);let et=ge.response.headers.get("Location");Xt(et,"Expected a Location header on the redirect Response"),et=o2(et,new URL(te.url),c);let ft=jf(k.location,et,{_isRedirect:!0});if(e){let sn=!1;if(ge.response.headers.has("X-Remix-Reload-Document"))sn=!0;else if(l0.test(et)){const Tn=ES(et,!0);sn=Tn.origin!==n.location.origin||oo(Tn.pathname,c)==null}if(sn){xt?n.location.replace(et):n.location.assign(et);return}}U=null;let dt=xt===!0||ge.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Et,formAction:at,formEncType:bt}=k.navigation;!Pe&&!Le&&Et&&at&&bt&&(Pe=d2(k.navigation));let Ft=Pe||Le;if(cN.has(ge.response.status)&&Ft&&Fa(Ft.formMethod))await Qt(dt,ft,{submission:{...Ft,formAction:et},preventScrollReset:Ye||H,enableViewTransition:Ce?j:void 0});else{let sn=wg(ft,Pe);await Qt(dt,ft,{overrideNavigation:sn,fetcherSubmission:Le,preventScrollReset:Ye||H,enableViewTransition:Ce?j:void 0})}}async function Mn(te,ge,Ce,Pe){let Le,Ye={};try{Le=await bN(f,te,ge,Pe,Ce,!1)}catch(xt){return ge.filter(et=>et.shouldLoad).forEach(et=>{Ye[et.route.id]={type:"error",error:xt}}),Ye}if(te.signal.aborted)return Ye;for(let[xt,et]of Object.entries(Le))if(CN(et)){let ft=et.result;Ye[xt]={type:"redirect",response:EN(ft,te,xt,ge,c)}}else Ye[xt]=await wN(et);return Ye}async function ha(te,ge,Ce,Pe){let Le=Mn(Ce,te,Pe,null),Ye=Promise.all(ge.map(async ft=>{if(ft.matches&&ft.match&&ft.request&&ft.controller){let Et=(await Mn(ft.request,ft.matches,Pe,ft.key))[ft.match.route.id];return{[ft.key]:Et}}else return Promise.resolve({[ft.key]:{type:"error",error:to(404,{pathname:ft.path})}})})),xt=await Le,et=(await Ye).reduce((ft,dt)=>Object.assign(ft,dt),{});return{loaderResults:xt,fetcherResults:et}}function $n(){pe=!0,se.forEach((te,ge)=>{q.has(ge)&&he.add(ge),Dr(ge)})}function _n(te,ge,Ce={}){k.fetchers.set(te,ge),kt({fetchers:new Map(k.fetchers)},{flushSync:(Ce&&Ce.flushSync)===!0})}function Vt(te,ge,Ce,Pe={}){let Le=Ss(k.matches,ge);yn(te),kt({errors:{[Le.route.id]:Ce},fetchers:new Map(k.fetchers)},{flushSync:(Pe&&Pe.flushSync)===!0})}function Cn(te){return Re.set(te,(Re.get(te)||0)+1),Se.has(te)&&Se.delete(te),k.fetchers.get(te)||fN}function yn(te){let ge=k.fetchers.get(te);q.has(te)&&!(ge&&ge.state==="loading"&&J.has(te))&&Dr(te),se.delete(te),J.delete(te),L.delete(te),Se.delete(te),he.delete(te),k.fetchers.delete(te)}function ii(te){let ge=(Re.get(te)||0)-1;ge<=0?(Re.delete(te),Se.add(te)):Re.set(te,ge),kt({fetchers:new Map(k.fetchers)})}function Dr(te){let ge=q.get(te);ge&&(ge.abort(),q.delete(te))}function pa(te){for(let ge of te){let Ce=Cn(ge),Pe=Ou(Ce.data);k.fetchers.set(ge,Pe)}}function zr(){let te=[],ge=!1;for(let Ce of L){let Pe=k.fetchers.get(Ce);Xt(Pe,`Expected fetcher: ${Ce}`),Pe.state==="loading"&&(L.delete(Ce),te.push(Ce),ge=!0)}return pa(te),ge}function oa(te){let ge=[];for(let[Ce,Pe]of J)if(Pe<te){let Le=k.fetchers.get(Ce);Xt(Le,`Expected fetcher: ${Ce}`),Le.state==="loading"&&(Dr(Ce),J.delete(Ce),ge.push(Ce))}return pa(ge),ge.length>0}function Un(te,ge){let Ce=k.blockers.get(te)||Sf;return je.get(te)!==ge&&je.set(te,ge),Ce}function rt(te){k.blockers.delete(te),je.delete(te)}function jr(te,ge){let Ce=k.blockers.get(te)||Sf;Xt(Ce.state==="unblocked"&&ge.state==="blocked"||Ce.state==="blocked"&&ge.state==="blocked"||Ce.state==="blocked"&&ge.state==="proceeding"||Ce.state==="blocked"&&ge.state==="unblocked"||Ce.state==="proceeding"&&ge.state==="unblocked",`Invalid blocker state transition: ${Ce.state} -> ${ge.state}`);let Pe=new Map(k.blockers);Pe.set(te,ge),kt({blockers:Pe})}function Va({currentLocation:te,nextLocation:ge,historyAction:Ce}){if(je.size===0)return;je.size>1&&or(!1,"A router only supports one blocker at a time");let Pe=Array.from(je.entries()),[Le,Ye]=Pe[Pe.length-1],xt=k.blockers.get(Le);if(!(xt&&xt.state==="proceeding")&&Ye({currentLocation:te,nextLocation:ge,historyAction:Ce}))return Le}function lo(te){let ge=to(404,{pathname:te}),Ce=s||u,{matches:Pe,route:Le}=c2(Ce);return{notFoundMatches:Pe,route:Le,error:ge}}function Ze(te,ge,Ce){if(g=te,E=ge,x=Ce||null,!S&&k.navigation===xg){S=!0;let Pe=$i(k.location,k.matches);Pe!=null&&kt({restoreScrollPosition:Pe})}return()=>{g=null,E=null,x=null}}function So(te,ge){return x&&x(te,ge.map(Pe=>HD(Pe,k.loaderData)))||te.key}function _o(te,ge){if(g&&E){let Ce=So(te,ge);g[Ce]=E()}}function $i(te,ge){if(g){let Ce=So(te,ge),Pe=g[Ce];if(typeof Pe=="number")return Pe}return null}function Co(te,ge,Ce){if(t.patchRoutesOnNavigation)if(te){if(Object.keys(te[0].params).length>0)return{active:!0,matches:Yh(ge,Ce,c,!0)}}else return{active:!0,matches:Yh(ge,Ce,c,!0)||[]};return{active:!1,matches:null}}async function co(te,ge,Ce,Pe){if(!t.patchRoutesOnNavigation)return{type:"success",matches:te};let Le=te;for(;;){let Ye=s==null,xt=s||u,et=o;try{await t.patchRoutesOnNavigation({signal:Ce,path:ge,matches:Le,fetcherKey:Pe,patch:(Et,at)=>{Ce.aborted||t2(Et,at,xt,et,a)}})}catch(Et){return{type:"error",error:Et,partialMatches:Le}}finally{Ye&&!Ce.aborted&&(u=[...u])}if(Ce.aborted)return{type:"aborted"};let ft=Mu(xt,ge,c);if(ft)return{type:"success",matches:ft};let dt=Yh(xt,ge,c,!0);if(!dt||Le.length===dt.length&&Le.every((Et,at)=>Et.route.id===dt[at].route.id))return{type:"success",matches:null};Le=dt}}function Zu(te){o={},s=up(te,a,void 0,o)}function Ju(te,ge){let Ce=s==null;t2(te,ge,s||u,o,a),Ce&&(u=[...u],kt({}))}return D={get basename(){return c},get future(){return h},get state(){return k},get routes(){return u},get window(){return n},initialize:yt,subscribe:He,enableScrollRestoration:Ze,navigate:it,fetch:Zn,revalidate:It,createHref:te=>t.history.createHref(te),encodeLocation:te=>t.history.encodeLocation(te),getFetcher:Cn,deleteFetcher:ii,dispose:ot,getBlocker:Un,deleteBlocker:rt,patchRoutes:Ju,_internalFetchControllers:q,_internalSetRoutes:Zu},D}function pN(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function hy(t,n,e,r,a,o){let u,s;if(a){u=[];for(let f of n)if(u.push(f),f.route.id===a){s=f;break}}else u=n,s=n[n.length-1];let c=s0(r||".",u0(u),oo(t.pathname,e)||t.pathname,o==="path");if(r==null&&(c.search=t.search,c.hash=t.hash),(r==null||r===""||r===".")&&s){let f=c0(c.search);if(s.route.index&&!f)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&f){let h=new URLSearchParams(c.search),p=h.getAll("index");h.delete("index"),p.filter(g=>g).forEach(g=>h.append("index",g));let m=h.toString();c.search=m?`?${m}`:""}}return e!=="/"&&(c.pathname=c.pathname==="/"?e:qo([e,c.pathname])),ju(c)}function Jw(t,n,e){if(!e||!pN(e))return{path:n};if(e.formMethod&&!RN(e.formMethod))return{path:n,error:to(405,{method:e.formMethod})};let r=()=>({path:n,error:to(400,{type:"invalid-body"})}),o=(e.formMethod||"get").toUpperCase(),u=IS(n);if(e.body!==void 0){if(e.formEncType==="text/plain"){if(!Fa(o))return r();let p=typeof e.body=="string"?e.body:e.body instanceof FormData||e.body instanceof URLSearchParams?Array.from(e.body.entries()).reduce((m,[g,x])=>`${m}${g}=${x}
`,""):String(e.body);return{path:n,submission:{formMethod:o,formAction:u,formEncType:e.formEncType,formData:void 0,json:void 0,text:p}}}else if(e.formEncType==="application/json"){if(!Fa(o))return r();try{let p=typeof e.body=="string"?JSON.parse(e.body):e.body;return{path:n,submission:{formMethod:o,formAction:u,formEncType:e.formEncType,formData:void 0,json:p,text:void 0}}}catch{return r()}}}Xt(typeof FormData=="function","FormData is not available in this environment");let s,c;if(e.formData)s=my(e.formData),c=e.formData;else if(e.body instanceof FormData)s=my(e.body),c=e.body;else if(e.body instanceof URLSearchParams)s=e.body,c=i2(s);else if(e.body==null)s=new URLSearchParams,c=new FormData;else try{s=new URLSearchParams(e.body),c=i2(s)}catch{return r()}let f={formMethod:o,formAction:u,formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Fa(f.formMethod))return{path:n,submission:f};let h=$u(n);return t&&h.search&&c0(h.search)&&s.append("index",""),h.search=`?${s}`,{path:ju(h),submission:f}}function e2(t,n,e,r,a,o,u,s,c,f,h,p,m,g,x,E,S,_,A,T){var be;let N=T?Ia(T[1])?T[1].error:T[1].data:void 0,D=a.createURL(o.location),k=a.createURL(c),P;if(h&&o.errors){let pe=Object.keys(o.errors)[0];P=u.findIndex(he=>he.route.id===pe)}else if(T&&Ia(T[1])){let pe=T[0];P=u.findIndex(he=>he.route.id===pe)-1}let H=T?T[1].statusCode:void 0,U=H&&H>=400,j={currentUrl:D,currentParams:((be=o.matches[0])==null?void 0:be.params)||{},nextUrl:k,nextParams:u[0].params,...s,actionResult:N,actionStatus:H},G=u.map((pe,he)=>{let{route:q}=pe,ne=null;if(P!=null&&he>P?ne=!1:q.lazy?ne=!0:q.loader==null?ne=!1:h?ne=py(q,o.loaderData,o.errors):vN(o.loaderData,o.matches[he],pe)&&(ne=!0),ne!==null)return vy(e,r,t,pe,f,n,ne);let ee=U?!1:p||D.pathname+D.search===k.pathname+k.search||D.search!==k.search||mN(o.matches[he],pe),J={...j,defaultShouldRevalidate:ee},L=cp(pe,J);return vy(e,r,t,pe,f,n,L,J)}),K=[];return x.forEach((pe,he)=>{if(h||!u.some(Se=>Se.route.id===pe.routeId)||g.has(he))return;let q=o.fetchers.get(he),ne=q&&q.state!=="idle"&&q.data===void 0,ee=Mu(S,pe.path,_);if(!ee){if(A&&ne)return;K.push({key:he,routeId:pe.routeId,path:pe.path,matches:null,match:null,request:null,controller:null});return}if(E.has(he))return;let J=Of(ee,pe.path),L=new AbortController,se=Hl(a,pe.path,L.signal),Re=null;if(m.has(he))m.delete(he),Re=Kl(e,r,se,ee,J,f,n);else if(ne)p&&(Re=Kl(e,r,se,ee,J,f,n));else{let Se={...j,defaultShouldRevalidate:U?!1:p};cp(J,Se)&&(Re=Kl(e,r,se,ee,J,f,n,Se))}Re&&K.push({key:he,routeId:pe.routeId,path:pe.path,matches:Re,match:J,request:se,controller:L})}),{dsMatches:G,revalidatingFetchers:K}}function py(t,n,e){if(t.lazy)return!0;if(!t.loader)return!1;let r=n!=null&&t.id in n,a=e!=null&&e[t.id]!==void 0;return!r&&a?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!a}function vN(t,n,e){let r=!n||e.route.id!==n.route.id,a=!t.hasOwnProperty(e.route.id);return r||a}function mN(t,n){let e=t.route.path;return t.pathname!==n.pathname||e!=null&&e.endsWith("*")&&t.params["*"]!==n.params["*"]}function cp(t,n){if(t.route.shouldRevalidate){let e=t.route.shouldRevalidate(n);if(typeof e=="boolean")return e}return n.defaultShouldRevalidate}function t2(t,n,e,r,a){let o;if(t){let c=r[t];Xt(c,`No route found to patch children into: routeId = ${t}`),c.children||(c.children=[]),o=c.children}else o=e;let u=n.filter(c=>!o.some(f=>DS(c,f))),s=up(u,a,[t||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...s)}function DS(t,n){return"id"in t&&"id"in n&&t.id===n.id?!0:t.index===n.index&&t.path===n.path&&t.caseSensitive===n.caseSensitive?(!t.children||t.children.length===0)&&(!n.children||n.children.length===0)?!0:t.children.every((e,r)=>{var a;return(a=n.children)==null?void 0:a.some(o=>DS(e,o))}):!1}var n2=new WeakMap,NS=({key:t,route:n,manifest:e,mapRouteProperties:r})=>{let a=e[n.id];if(Xt(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let o=a.lazy[t];if(!o)return;let u=n2.get(a);u||(u={},n2.set(a,u));let s=u[t];if(s)return s;let c=(async()=>{let f=LD(t),p=a[t]!==void 0&&t!=="hasErrorBoundary";if(f)or(!f,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),u[t]=Promise.resolve();else if(p)or(!1,`Route "${a.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let m=await o();m!=null&&(Object.assign(a,{[t]:m}),Object.assign(a,r(a)))}typeof a.lazy=="object"&&(a.lazy[t]=void 0,Object.values(a.lazy).every(m=>m===void 0)&&(a.lazy=void 0))})();return u[t]=c,c},r2=new WeakMap;function gN(t,n,e,r,a){let o=e[t.id];if(Xt(o,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let h=r2.get(o);if(h)return{lazyRoutePromise:h,lazyHandlerPromise:h};let p=(async()=>{Xt(typeof t.lazy=="function","No lazy route function found");let m=await t.lazy(),g={};for(let x in m){let E=m[x];if(E===void 0)continue;let S=zD(x),A=o[x]!==void 0&&x!=="hasErrorBoundary";S?or(!S,"Route property "+x+" is not a supported property to be returned from a lazy route function. This property will be ignored."):A?or(!A,`Route "${o.id}" has a static property "${x}" defined but its lazy function is also returning a value for this property. The lazy route property "${x}" will be ignored.`):g[x]=E}Object.assign(o,g),Object.assign(o,{...r(o),lazy:void 0})})();return r2.set(o,p),p.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:p}}let u=Object.keys(t.lazy),s=[],c;for(let h of u){if(a&&a.includes(h))continue;let p=NS({key:h,route:t,manifest:e,mapRouteProperties:r});p&&(s.push(p),h===n&&(c=p))}let f=s.length>0?Promise.all(s).then(()=>{}):void 0;return f==null||f.catch(()=>{}),c==null||c.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:c}}async function a2(t){let n=t.matches.filter(a=>a.shouldLoad),e={};return(await Promise.all(n.map(a=>a.resolve()))).forEach((a,o)=>{e[n[o].route.id]=a}),e}async function yN(t){return t.matches.some(n=>n.route.unstable_middleware)?kS(t,!1,()=>a2(t),(n,e)=>({[e]:{type:"error",result:n}})):a2(t)}async function kS(t,n,e,r){let{matches:a,request:o,params:u,context:s}=t,c={handlerResult:void 0};try{let f=a.flatMap(p=>p.route.unstable_middleware?p.route.unstable_middleware.map(m=>[p.route.id,m]):[]),h=await OS({request:o,params:u,context:s},f,n,c,e);return n?h:c.handlerResult}catch(f){if(!c.middlewareError)throw f;let h=await r(c.middlewareError.error,c.middlewareError.routeId);return c.handlerResult?Object.assign(c.handlerResult,h):h}}async function OS(t,n,e,r,a,o=0){let{request:u}=t;if(u.signal.aborted)throw u.signal.reason?u.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${u.method} ${u.url}`);let s=n[o];if(!s)return r.handlerResult=await a(),r.handlerResult;let[c,f]=s,h=!1,p,m=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");h=!0,await OS(t,n,e,r,a,o+1)};try{let g=await f({request:t.request,params:t.params,context:t.context},m);return h?g===void 0?p:g:m()}catch(g){throw r.middlewareError?r.middlewareError.error!==g&&(r.middlewareError={routeId:c,error:g}):r.middlewareError={routeId:c,error:g},g}}function MS(t,n,e,r,a){let o=NS({key:"unstable_middleware",route:r.route,manifest:n,mapRouteProperties:t}),u=gN(r.route,Fa(e.method)?"action":"loader",n,t,a);return{middleware:o,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function vy(t,n,e,r,a,o,u,s=null){let c=!1,f=MS(t,n,e,r,a);return{...r,_lazyPromises:f,shouldLoad:u,unstable_shouldRevalidateArgs:s,unstable_shouldCallHandler(h){return c=!0,s?typeof h=="boolean"?cp(r,{...s,defaultShouldRevalidate:h}):cp(r,s):u},resolve(h){return c||u||h&&e.method==="GET"&&(r.route.lazy||r.route.loader)?xN({request:e,match:r,lazyHandlerPromise:f==null?void 0:f.handler,lazyRoutePromise:f==null?void 0:f.route,handlerOverride:h,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function Kl(t,n,e,r,a,o,u,s=null){return r.map(c=>c.route.id!==a.route.id?{...c,shouldLoad:!1,unstable_shouldRevalidateArgs:s,unstable_shouldCallHandler:()=>!1,_lazyPromises:MS(t,n,e,c,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:vy(t,n,e,c,o,u,!0,s))}async function bN(t,n,e,r,a,o){e.some(f=>{var h;return(h=f._lazyPromises)==null?void 0:h.middleware})&&await Promise.all(e.map(f=>{var h;return(h=f._lazyPromises)==null?void 0:h.middleware}));let u={request:n,params:e[0].params,context:a,matches:e},c=await t({...u,fetcherKey:r,unstable_runClientMiddleware:f=>{let h=u;return kS(h,!1,()=>f({...h,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(p,m)=>({[m]:{type:"error",result:p}}))}});try{await Promise.all(e.flatMap(f=>{var h,p;return[(h=f._lazyPromises)==null?void 0:h.handler,(p=f._lazyPromises)==null?void 0:p.route]}))}catch{}return c}async function xN({request:t,match:n,lazyHandlerPromise:e,lazyRoutePromise:r,handlerOverride:a,scopedContext:o}){let u,s,c=Fa(t.method),f=c?"action":"loader",h=p=>{let m,g=new Promise((S,_)=>m=_);s=()=>m(),t.signal.addEventListener("abort",s);let x=S=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${f}" [routeId: ${n.route.id}]`)):p({request:t,params:n.params,context:o},...S!==void 0?[S]:[]),E=(async()=>{try{return{type:"data",result:await(a?a(_=>x(_)):x())}}catch(S){return{type:"error",result:S}}})();return Promise.race([E,g])};try{let p=c?n.route.action:n.route.loader;if(e||r)if(p){let m,[g]=await Promise.all([h(p).catch(x=>{m=x}),e,r]);if(m!==void 0)throw m;u=g}else{await e;let m=c?n.route.action:n.route.loader;if(m)[u]=await Promise.all([h(m),r]);else if(f==="action"){let g=new URL(t.url),x=g.pathname+g.search;throw to(405,{method:t.method,pathname:x,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(p)u=await h(p);else{let m=new URL(t.url),g=m.pathname+m.search;throw to(404,{pathname:g})}}catch(p){return{type:"error",result:p}}finally{s&&t.signal.removeEventListener("abort",s)}return u}async function wN(t){var r,a,o,u,s,c;let{result:n,type:e}=t;if(FS(n)){let f;try{let h=n.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?n.body==null?f=null:f=await n.json():f=await n.text()}catch(h){return{type:"error",error:h}}return e==="error"?{type:"error",error:new lp(n.status,n.statusText,f),statusCode:n.status,headers:n.headers}:{type:"data",data:f,statusCode:n.status,headers:n.headers}}return e==="error"?f2(n)?n.data instanceof Error?{type:"error",error:n.data,statusCode:(r=n.init)==null?void 0:r.status,headers:(a=n.init)!=null&&a.headers?new Headers(n.init.headers):void 0}:{type:"error",error:new lp(((o=n.init)==null?void 0:o.status)||500,void 0,n.data),statusCode:Hf(n)?n.status:void 0,headers:(u=n.init)!=null&&u.headers?new Headers(n.init.headers):void 0}:{type:"error",error:n,statusCode:Hf(n)?n.status:void 0}:f2(n)?{type:"data",data:n.data,statusCode:(s=n.init)==null?void 0:s.status,headers:(c=n.init)!=null&&c.headers?new Headers(n.init.headers):void 0}:{type:"data",data:n}}function EN(t,n,e,r,a){let o=t.headers.get("Location");if(Xt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!l0.test(o)){let u=r.slice(0,r.findIndex(s=>s.route.id===e)+1);o=hy(new URL(n.url),u,a,o),t.headers.set("Location",o)}return t}function o2(t,n,e){if(l0.test(t)){let r=t,a=r.startsWith("//")?new URL(n.protocol+r):new URL(r),o=oo(a.pathname,e)!=null;if(a.origin===n.origin&&o)return a.pathname+a.search+a.hash}return t}function Hl(t,n,e,r){let a=t.createURL(IS(n)).toString(),o={signal:e};if(r&&Fa(r.formMethod)){let{formMethod:u,formEncType:s}=r;o.method=u.toUpperCase(),s==="application/json"?(o.headers=new Headers({"Content-Type":s}),o.body=JSON.stringify(r.json)):s==="text/plain"?o.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?o.body=my(r.formData):o.body=r.formData}return new Request(a,o)}function my(t){let n=new URLSearchParams;for(let[e,r]of t.entries())n.append(e,typeof r=="string"?r:r.name);return n}function i2(t){let n=new FormData;for(let[e,r]of t.entries())n.append(e,r);return n}function SN(t,n,e,r=!1,a=!1){let o={},u=null,s,c=!1,f={},h=e&&Ia(e[1])?e[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in n))return;let m=p.route.id,g=n[m];if(Xt(!Cs(g),"Cannot handle redirect results in processLoaderData"),Ia(g)){let x=g.error;if(h!==void 0&&(x=h,h=void 0),u=u||{},a)u[m]=x;else{let E=Ss(t,m);u[E.route.id]==null&&(u[E.route.id]=x)}r||(o[m]=TS),c||(c=!0,s=Hf(g.error)?g.error.status:500),g.headers&&(f[m]=g.headers)}else o[m]=g.data,g.statusCode&&g.statusCode!==200&&!c&&(s=g.statusCode),g.headers&&(f[m]=g.headers)}),h!==void 0&&e&&(u={[e[0]]:h},e[2]&&(o[e[2]]=void 0)),{loaderData:o,errors:u,statusCode:s||200,loaderHeaders:f}}function u2(t,n,e,r,a,o){let{loaderData:u,errors:s}=SN(n,e,r);return a.filter(c=>!c.matches||c.matches.some(f=>f.shouldLoad)).forEach(c=>{let{key:f,match:h,controller:p}=c,m=o[f];if(Xt(m,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(Ia(m)){let g=Ss(t.matches,h==null?void 0:h.route.id);s&&s[g.route.id]||(s={...s,[g.route.id]:m.error}),t.fetchers.delete(f)}else if(Cs(m))Xt(!1,"Unhandled fetcher revalidation redirect");else{let g=Ou(m.data);t.fetchers.set(f,g)}}),{loaderData:u,errors:s}}function s2(t,n,e,r){let a=Object.entries(n).filter(([,o])=>o!==TS).reduce((o,[u,s])=>(o[u]=s,o),{});for(let o of e){let u=o.route.id;if(!n.hasOwnProperty(u)&&t.hasOwnProperty(u)&&o.route.loader&&(a[u]=t[u]),r&&r.hasOwnProperty(u))break}return a}function l2(t){return t?Ia(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ss(t,n){return(n?t.slice(0,t.findIndex(r=>r.route.id===n)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function c2(t){let n=t.length===1?t[0]:t.find(e=>e.index||!e.path||e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:n}],route:n}}function to(t,{pathname:n,routeId:e,method:r,type:a,message:o}={}){let u="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(u="Bad Request",r&&n&&e?s=`You made a ${r} request to "${n}" but did not provide a \`loader\` for route "${e}", so there is no way to handle the request.`:a==="invalid-body"&&(s="Unable to encode submission body")):t===403?(u="Forbidden",s=`Route "${e}" does not match URL "${n}"`):t===404?(u="Not Found",s=`No route matches URL "${n}"`):t===405&&(u="Method Not Allowed",r&&n&&e?s=`You made a ${r.toUpperCase()} request to "${n}" but did not provide an \`action\` for route "${e}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new lp(t||500,u,new Error(s),!0)}function Dh(t){let n=Object.entries(t);for(let e=n.length-1;e>=0;e--){let[r,a]=n[e];if(Cs(a))return{key:r,result:a}}}function IS(t){let n=typeof t=="string"?$u(t):t;return ju({...n,hash:""})}function _N(t,n){return t.pathname!==n.pathname||t.search!==n.search?!1:t.hash===""?n.hash!=="":t.hash===n.hash?!0:n.hash!==""}function CN(t){return FS(t.result)&&lN.has(t.result.status)}function Ia(t){return t.type==="error"}function Cs(t){return(t&&t.type)==="redirect"}function f2(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function FS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function RN(t){return sN.has(t.toUpperCase())}function Fa(t){return iN.has(t.toUpperCase())}function c0(t){return new URLSearchParams(t).getAll("index").some(n=>n==="")}function Of(t,n){let e=typeof n=="string"?$u(n).search:n.search;if(t[t.length-1].route.index&&c0(e||""))return t[t.length-1];let r=CS(t);return r[r.length-1]}function d2(t){let{formMethod:n,formAction:e,formEncType:r,text:a,formData:o,json:u}=t;if(!(!n||!e||!r)){if(a!=null)return{formMethod:n,formAction:e,formEncType:r,formData:void 0,json:void 0,text:a};if(o!=null)return{formMethod:n,formAction:e,formEncType:r,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:n,formAction:e,formEncType:r,formData:void 0,json:u,text:void 0}}}function wg(t,n){return n?{state:"loading",location:t,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function AN(t,n){return{state:"submitting",location:t,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}}function _f(t,n){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:n}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function TN(t,n){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:n?n.data:void 0}}function Ou(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function DN(t,n){try{let e=t.sessionStorage.getItem(AS);if(e){let r=JSON.parse(e);for(let[a,o]of Object.entries(r||{}))o&&Array.isArray(o)&&n.set(a,new Set(o||[]))}}catch{}}function NN(t,n){if(n.size>0){let e={};for(let[r,a]of n)e[r]=[...a];try{t.sessionStorage.setItem(AS,JSON.stringify(e))}catch(r){or(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function kN(){let t,n,e=new Promise((r,a)=>{t=async o=>{r(o);try{await e}catch{}},n=async o=>{a(o);try{await e}catch{}}});return{promise:e,resolve:t,reject:n}}var js=F.createContext(null);js.displayName="DataRouter";var ed=F.createContext(null);ed.displayName="DataRouterState";var f0=F.createContext({isTransitioning:!1});f0.displayName="ViewTransition";var BS=F.createContext(new Map);BS.displayName="Fetchers";var ON=F.createContext(null);ON.displayName="Await";var Zo=F.createContext(null);Zo.displayName="Navigation";var qp=F.createContext(null);qp.displayName="Location";var Jo=F.createContext({outlet:null,matches:[],isDataRoute:!1});Jo.displayName="Route";var d0=F.createContext(null);d0.displayName="RouteError";function MN(t,{relative:n}={}){Xt(td(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:r}=F.useContext(Zo),{hash:a,pathname:o,search:u}=nd(t,{relative:n}),s=o;return e!=="/"&&(s=o==="/"?e:qo([e,o])),r.createHref({pathname:s,search:u,hash:a})}function td(){return F.useContext(qp)!=null}function ei(){return Xt(td(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(qp).location}var PS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LS(t){F.useContext(Zo).static||F.useLayoutEffect(t)}function $p(){let{isDataRoute:t}=F.useContext(Jo);return t?KN():IN()}function IN(){Xt(td(),"useNavigate() may be used only in the context of a <Router> component.");let t=F.useContext(js),{basename:n,navigator:e}=F.useContext(Zo),{matches:r}=F.useContext(Jo),{pathname:a}=ei(),o=JSON.stringify(u0(r)),u=F.useRef(!1);return LS(()=>{u.current=!0}),F.useCallback((c,f={})=>{if(or(u.current,PS),!u.current)return;if(typeof c=="number"){e.go(c);return}let h=s0(c,JSON.parse(o),a,f.relative==="path");t==null&&n!=="/"&&(h.pathname=h.pathname==="/"?n:qo([n,h.pathname])),(f.replace?e.replace:e.push)(h,f.state,f)},[n,e,o,a,t])}var FN=F.createContext(null);function BN(t){let n=F.useContext(Jo).outlet;return n&&F.createElement(FN.Provider,{value:t},n)}function nd(t,{relative:n}={}){let{matches:e}=F.useContext(Jo),{pathname:r}=ei(),a=JSON.stringify(u0(e));return F.useMemo(()=>s0(t,JSON.parse(a),r,n==="path"),[t,a,r,n])}function PN(t,n,e,r){Xt(td(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=F.useContext(Zo),{matches:o}=F.useContext(Jo),u=o[o.length-1],s=u?u.params:{},c=u?u.pathname:"/",f=u?u.pathnameBase:"/",h=u&&u.route;{let _=h&&h.path||"";US(c,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=ei(),m;m=p;let g=m.pathname||"/",x=g;if(f!=="/"){let _=f.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=Mu(t,{pathname:x});return or(h||E!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),or(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),HN(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},s,_.params),pathname:qo([f,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:qo([f,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,e,r)}function LN(){let t=GN(),n=Hf(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:o},"ErrorBoundary")," or"," ",F.createElement("code",{style:o},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},n),e?F.createElement("pre",{style:a},e):null,u)}var UN=F.createElement(LN,null),zN=class extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?F.createElement(Jo.Provider,{value:this.props.routeContext},F.createElement(d0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jN({routeContext:t,match:n,children:e}){let r=F.useContext(js);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Jo.Provider,{value:t},e)}function HN(t,n=[],e=null,r=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(n.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let a=t,o=e==null?void 0:e.errors;if(o!=null){let c=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Xt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let u=!1,s=-1;if(e)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(s=c),f.route.id){let{loaderData:h,errors:p}=e,m=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||m){u=!0,s>=0?a=a.slice(0,s+1):a=[a[0]];break}}}return a.reduceRight((c,f,h)=>{let p,m=!1,g=null,x=null;e&&(p=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||UN,u&&(s<0&&h===0?(US("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,x=null):s===h&&(m=!0,x=f.route.hydrateFallbackElement||null)));let E=n.concat(a.slice(0,h+1)),S=()=>{let _;return p?_=g:m?_=x:f.route.Component?_=F.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,F.createElement(jN,{match:f,routeContext:{outlet:c,matches:E,isDataRoute:e!=null},children:_})};return e&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?F.createElement(zN,{location:e.location,revalidation:e.revalidation,component:g,error:p,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function h0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VN(t){let n=F.useContext(js);return Xt(n,h0(t)),n}function WN(t){let n=F.useContext(ed);return Xt(n,h0(t)),n}function qN(t){let n=F.useContext(Jo);return Xt(n,h0(t)),n}function p0(t){let n=qN(t),e=n.matches[n.matches.length-1];return Xt(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function $N(){return p0("useRouteId")}function GN(){var r;let t=F.useContext(d0),n=WN("useRouteError"),e=p0("useRouteError");return t!==void 0?t:(r=n.errors)==null?void 0:r[e]}function KN(){let{router:t}=VN("useNavigate"),n=p0("useNavigate"),e=F.useRef(!1);return LS(()=>{e.current=!0}),F.useCallback(async(a,o={})=>{or(e.current,PS),e.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:n,...o}))},[t,n])}var h2={};function US(t,n,e){!n&&!h2[t]&&(h2[t]=!0,or(!1,e))}var p2={};function v2(t,n){!t&&!p2[n]&&(p2[n]=!0,console.warn(n))}function XN(t){let n={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&or(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(n,{element:F.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&or(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(n,{hydrateFallbackElement:F.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&or(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(n,{errorElement:F.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),n}var YN=["HydrateFallback","hydrateFallbackElement"],QN=class{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=e=>{this.status==="pending"&&(this.status="resolved",t(e))},this.reject=e=>{this.status==="pending"&&(this.status="rejected",n(e))}})}};function ZN({router:t,flushSync:n}){let[e,r]=F.useState(t.state),[a,o]=F.useState(),[u,s]=F.useState({isTransitioning:!1}),[c,f]=F.useState(),[h,p]=F.useState(),[m,g]=F.useState(),x=F.useRef(new Map),E=F.useCallback((T,{deletedFetchers:N,flushSync:D,viewTransitionOpts:k})=>{T.fetchers.forEach((H,U)=>{H.data!==void 0&&x.current.set(U,H.data)}),N.forEach(H=>x.current.delete(H)),v2(D===!1||n!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let P=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(v2(k==null||P,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!k||!P){n&&D?n(()=>r(T)):F.startTransition(()=>r(T));return}if(n&&D){n(()=>{h&&(c&&c.resolve(),h.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let H=t.window.document.startViewTransition(()=>{n(()=>r(T))});H.finished.finally(()=>{n(()=>{f(void 0),p(void 0),o(void 0),s({isTransitioning:!1})})}),n(()=>p(H));return}h?(c&&c.resolve(),h.skipTransition(),g({state:T,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(o(T),s({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[t.window,n,h,c]);F.useLayoutEffect(()=>t.subscribe(E),[t,E]),F.useEffect(()=>{u.isTransitioning&&!u.flushSync&&f(new QN)},[u]),F.useEffect(()=>{if(c&&a&&t.window){let T=a,N=c.promise,D=t.window.document.startViewTransition(async()=>{F.startTransition(()=>r(T)),await N});D.finished.finally(()=>{f(void 0),p(void 0),o(void 0),s({isTransitioning:!1})}),p(D)}},[a,c,t.window]),F.useEffect(()=>{c&&a&&e.location.key===a.location.key&&c.resolve()},[c,h,e.location,a]),F.useEffect(()=>{!u.isTransitioning&&m&&(o(m.state),s({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))},[u.isTransitioning,m]);let S=F.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:T=>t.navigate(T),push:(T,N,D)=>t.navigate(T,{state:N,preventScrollReset:D==null?void 0:D.preventScrollReset}),replace:(T,N,D)=>t.navigate(T,{replace:!0,state:N,preventScrollReset:D==null?void 0:D.preventScrollReset})}),[t]),_=t.basename||"/",A=F.useMemo(()=>({router:t,navigator:S,static:!1,basename:_}),[t,S,_]);return F.createElement(F.Fragment,null,F.createElement(js.Provider,{value:A},F.createElement(ed.Provider,{value:e},F.createElement(BS.Provider,{value:x.current},F.createElement(f0.Provider,{value:u},F.createElement(tk,{basename:_,location:e.location,navigationType:e.historyAction,navigator:S},F.createElement(JN,{routes:t.routes,future:t.future,state:e})))))),null)}var JN=F.memo(ek);function ek({routes:t,future:n,state:e}){return PN(t,void 0,e,n)}function zS(t){return BN(t.context)}function tk({basename:t="/",children:n=null,location:e,navigationType:r="POP",navigator:a,static:o=!1}){Xt(!td(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),s=F.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof e=="string"&&(e=$u(e));let{pathname:c="/",search:f="",hash:h="",state:p=null,key:m="default"}=e,g=F.useMemo(()=>{let x=oo(c,u);return x==null?null:{location:{pathname:x,search:f,hash:h,state:p,key:m},navigationType:r}},[u,c,f,h,p,m,r]);return or(g!=null,`<Router basename="${u}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:F.createElement(Zo.Provider,{value:s},F.createElement(qp.Provider,{children:n,value:g}))}var Qh="get",Zh="application/x-www-form-urlencoded";function Gp(t){return t!=null&&typeof t.tagName=="string"}function nk(t){return Gp(t)&&t.tagName.toLowerCase()==="button"}function rk(t){return Gp(t)&&t.tagName.toLowerCase()==="form"}function ak(t){return Gp(t)&&t.tagName.toLowerCase()==="input"}function ok(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ik(t,n){return t.button===0&&(!n||n==="_self")&&!ok(t)}var Nh=null;function uk(){if(Nh===null)try{new FormData(document.createElement("form"),0),Nh=!1}catch{Nh=!0}return Nh}var sk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Eg(t){return t!=null&&!sk.has(t)?(or(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zh}"`),null):t}function lk(t,n){let e,r,a,o,u;if(rk(t)){let s=t.getAttribute("action");r=s?oo(s,n):null,e=t.getAttribute("method")||Qh,a=Eg(t.getAttribute("enctype"))||Zh,o=new FormData(t)}else if(nk(t)||ak(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||s.getAttribute("action");if(r=c?oo(c,n):null,e=t.getAttribute("formmethod")||s.getAttribute("method")||Qh,a=Eg(t.getAttribute("formenctype"))||Eg(s.getAttribute("enctype"))||Zh,o=new FormData(s,t),!uk()){let{name:f,type:h,value:p}=t;if(h==="image"){let m=f?`${f}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else f&&o.append(f,p)}}else{if(Gp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Qh,r=null,a=Zh,u=t}return o&&a==="text/plain"&&(u=o,o=void 0),{action:r,method:e.toLowerCase(),encType:a,formData:o,body:u}}function v0(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}async function ck(t,n){if(t.id in n)return n[t.id];try{let e=await import(t.module);return n[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function dk(t,n,e){let r=await Promise.all(t.map(async a=>{let o=n.routes[a.route.id];if(o){let u=await ck(o,e);return u.links?u.links():[]}return[]}));return mk(r.flat(1).filter(fk).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function m2(t,n,e,r,a,o){let u=(c,f)=>e[f]?c.route.id!==e[f].route.id:!0,s=(c,f)=>{var h;return e[f].pathname!==c.pathname||((h=e[f].route.path)==null?void 0:h.endsWith("*"))&&e[f].params["*"]!==c.params["*"]};return o==="assets"?n.filter((c,f)=>u(c,f)||s(c,f)):o==="data"?n.filter((c,f)=>{var p;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(u(c,f)||s(c,f))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=e[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function hk(t,n,{includeHydrateFallback:e}={}){return pk(t.map(r=>{let a=n.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function pk(t){return[...new Set(t)]}function vk(t){let n={},e=Object.keys(t).sort();for(let r of e)n[r]=t[r];return n}function mk(t,n){let e=new Set;return new Set(n),t.reduce((r,a)=>{let o=JSON.stringify(vk(a));return e.has(o)||(e.add(o),r.push({key:o,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gk=new Set([100,101,204,205]);function yk(t,n){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":n&&oo(e.pathname,n)==="/"?e.pathname=`${n.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function jS(){let t=F.useContext(js);return v0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function bk(){let t=F.useContext(ed);return v0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var m0=F.createContext(void 0);m0.displayName="FrameworkContext";function HS(){let t=F.useContext(m0);return v0(t,"You must render this element inside a <HydratedRouter> element"),t}function xk(t,n){let e=F.useContext(m0),[r,a]=F.useState(!1),[o,u]=F.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:p}=n,m=F.useRef(null);F.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let E=_=>{_.forEach(A=>{u(A.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[t]),F.useEffect(()=>{if(r){let E=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(E)}}},[r]);let g=()=>{a(!0)},x=()=>{a(!1),u(!1)};return e?t!=="intent"?[o,m,{}]:[o,m,{onFocus:Cf(s,g),onBlur:Cf(c,x),onMouseEnter:Cf(f,g),onMouseLeave:Cf(h,x),onTouchStart:Cf(p,g)}]:[!1,m,{}]}function Cf(t,n){return e=>{t&&t(e),e.defaultPrevented||n(e)}}function wk({page:t,...n}){let{router:e}=jS(),r=F.useMemo(()=>Mu(e.routes,t,e.basename),[e.routes,t,e.basename]);return r?F.createElement(Sk,{page:t,matches:r,...n}):null}function Ek(t){let{manifest:n,routeModules:e}=HS(),[r,a]=F.useState([]);return F.useEffect(()=>{let o=!1;return dk(t,n,e).then(u=>{o||a(u)}),()=>{o=!0}},[t,n,e]),r}function Sk({page:t,matches:n,...e}){let r=ei(),{manifest:a,routeModules:o}=HS(),{basename:u}=jS(),{loaderData:s,matches:c}=bk(),f=F.useMemo(()=>m2(t,n,c,a,r,"data"),[t,n,c,a,r]),h=F.useMemo(()=>m2(t,n,c,a,r,"assets"),[t,n,c,a,r]),p=F.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,E=!1;if(n.forEach(_=>{var T;let A=a.routes[_.route.id];!A||!A.hasLoader||(!f.some(N=>N.route.id===_.route.id)&&_.route.id in s&&((T=o[_.route.id])!=null&&T.shouldRevalidate)||A.hasClientLoader?E=!0:x.add(_.route.id))}),x.size===0)return[];let S=yk(t,u);return E&&x.size>0&&S.searchParams.set("_routes",n.filter(_=>x.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[u,s,r,a,f,n,t,o]),m=F.useMemo(()=>hk(h,a),[h,a]),g=Ek(h);return F.createElement(F.Fragment,null,p.map(x=>F.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...e})),m.map(x=>F.createElement("link",{key:x,rel:"modulepreload",href:x,...e})),g.map(({key:x,link:E})=>F.createElement("link",{key:x,...E})))}function _k(...t){return n=>{t.forEach(e=>{typeof e=="function"?e(n):e!=null&&(e.current=n)})}}var VS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VS&&(window.__reactRouterVersion="7.6.1")}catch{}function Ck(t,n){return hN({basename:n==null?void 0:n.basename,unstable_getContext:n==null?void 0:n.unstable_getContext,future:n==null?void 0:n.future,history:ID({window:n==null?void 0:n.window}),hydrationData:Rk(),routes:t,mapRouteProperties:XN,hydrationRouteProperties:YN,dataStrategy:n==null?void 0:n.dataStrategy,patchRoutesOnNavigation:n==null?void 0:n.patchRoutesOnNavigation,window:n==null?void 0:n.window}).initialize()}function Rk(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:Ak(t.errors)}),t}function Ak(t){if(!t)return null;let n=Object.entries(t),e={};for(let[r,a]of n)if(a&&a.__type==="RouteErrorResponse")e[r]=new lp(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let o=window[a.__subType];if(typeof o=="function")try{let u=new o(a.message);u.stack="",e[r]=u}catch{}}if(e[r]==null){let o=new Error(a.message);o.stack="",e[r]=o}}else e[r]=a;return e}var WS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g0=F.forwardRef(function({onClick:n,discover:e="render",prefetch:r="none",relative:a,reloadDocument:o,replace:u,state:s,target:c,to:f,preventScrollReset:h,viewTransition:p,...m},g){let{basename:x}=F.useContext(Zo),E=typeof f=="string"&&WS.test(f),S,_=!1;if(typeof f=="string"&&E&&(S=f,VS))try{let U=new URL(window.location.href),j=f.startsWith("//")?new URL(U.protocol+f):new URL(f),G=oo(j.pathname,x);j.origin===U.origin&&G!=null?f=G+j.search+j.hash:_=!0}catch{or(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=MN(f,{relative:a}),[T,N,D]=xk(r,m),k=kk(f,{replace:u,state:s,target:c,preventScrollReset:h,relative:a,viewTransition:p});function P(U){n&&n(U),U.defaultPrevented||k(U)}let H=F.createElement("a",{...m,...D,href:S||A,onClick:_||o?n:P,ref:_k(g,N),target:c,"data-discover":!E&&e==="render"?"true":void 0});return T&&!E?F.createElement(F.Fragment,null,H,F.createElement(wk,{page:A})):H});g0.displayName="Link";var Tk=F.forwardRef(function({"aria-current":n="page",caseSensitive:e=!1,className:r="",end:a=!1,style:o,to:u,viewTransition:s,children:c,...f},h){let p=nd(u,{relative:f.relative}),m=ei(),g=F.useContext(ed),{navigator:x,basename:E}=F.useContext(Zo),S=g!=null&&Bk(p)&&s===!0,_=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,A=m.pathname,T=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;e||(A=A.toLowerCase(),T=T?T.toLowerCase():null,_=_.toLowerCase()),T&&E&&(T=oo(T,E)||T);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=A===_||!a&&A.startsWith(_)&&A.charAt(N)==="/",k=T!=null&&(T===_||!a&&T.startsWith(_)&&T.charAt(_.length)==="/"),P={isActive:D,isPending:k,isTransitioning:S},H=D?n:void 0,U;typeof r=="function"?U=r(P):U=[r,D?"active":null,k?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(P):o;return F.createElement(g0,{...f,"aria-current":H,className:U,ref:h,style:j,to:u,viewTransition:s},typeof c=="function"?c(P):c)});Tk.displayName="NavLink";var Dk=F.forwardRef(({discover:t="render",fetcherKey:n,navigate:e,reloadDocument:r,replace:a,state:o,method:u=Qh,action:s,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:p,...m},g)=>{let x=Ik(),E=Fk(s,{relative:f}),S=u.toLowerCase()==="get"?"get":"post",_=typeof s=="string"&&WS.test(s),A=T=>{if(c&&c(T),T.defaultPrevented)return;T.preventDefault();let N=T.nativeEvent.submitter,D=(N==null?void 0:N.getAttribute("formmethod"))||u;x(N||T.currentTarget,{fetcherKey:n,method:D,navigate:e,replace:a,state:o,relative:f,preventScrollReset:h,viewTransition:p})};return F.createElement("form",{ref:g,method:S,action:E,onSubmit:r?c:A,...m,"data-discover":!_&&t==="render"?"true":void 0})});Dk.displayName="Form";function Nk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qS(t){let n=F.useContext(js);return Xt(n,Nk(t)),n}function kk(t,{target:n,replace:e,state:r,preventScrollReset:a,relative:o,viewTransition:u}={}){let s=$p(),c=ei(),f=nd(t,{relative:o});return F.useCallback(h=>{if(ik(h,n)){h.preventDefault();let p=e!==void 0?e:ju(c)===ju(f);s(t,{replace:p,state:r,preventScrollReset:a,relative:o,viewTransition:u})}},[c,s,f,e,r,n,t,a,o,u])}var Ok=0,Mk=()=>`__${String(++Ok)}__`;function Ik(){let{router:t}=qS("useSubmit"),{basename:n}=F.useContext(Zo),e=$N();return F.useCallback(async(r,a={})=>{let{action:o,method:u,encType:s,formData:c,body:f}=lk(r,n);if(a.navigate===!1){let h=a.fetcherKey||Mk();await t.fetch(h,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||u,formEncType:a.encType||s,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||u,formEncType:a.encType||s,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,n,e])}function Fk(t,{relative:n}={}){let{basename:e}=F.useContext(Zo),r=F.useContext(Jo);Xt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...nd(t||".",{relative:n})},u=ei();if(t==null){o.search=u.search;let s=new URLSearchParams(o.search),c=s.getAll("index");if(c.some(h=>h==="")){s.delete("index"),c.filter(p=>p).forEach(p=>s.append("index",p));let h=s.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:qo([e,o.pathname])),ju(o)}function Bk(t,n={}){let e=F.useContext(f0);Xt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qS("useViewTransitionState"),a=nd(t,{relative:n.relative});if(!e.isTransitioning)return!1;let o=oo(e.currentLocation.pathname,r)||e.currentLocation.pathname,u=oo(e.nextLocation.pathname,r)||e.nextLocation.pathname;return sp(a.pathname,u)!=null||sp(a.pathname,o)!=null}[...gk];var Fi=xS();/**
 * react-router v7.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pk(t){return F.createElement(ZN,{flushSync:Fi.flushSync,...t})}let Lk={data:""},Uk=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Lk,zk=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,jk=/\/\*[^]*?\*\/|  +/g,g2=/\n+/g,Iu=(t,n)=>{let e="",r="",a="";for(let o in t){let u=t[o];o[0]=="@"?o[1]=="i"?e=o+" "+u+";":r+=o[1]=="f"?Iu(u,o):o+"{"+Iu(u,o[1]=="k"?"":n)+"}":typeof u=="object"?r+=Iu(u,n?n.replace(/([^,])+/g,s=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,s):s?s+" "+c:c)):o):u!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Iu.p?Iu.p(o,u):o+":"+u+";")}return e+(n&&a?n+"{"+a+"}":a)+r},Ni={},$S=t=>{if(typeof t=="object"){let n="";for(let e in t)n+=e+$S(t[e]);return n}return t},Hk=(t,n,e,r,a)=>{let o=$S(t),u=Ni[o]||(Ni[o]=(c=>{let f=0,h=11;for(;f<c.length;)h=101*h+c.charCodeAt(f++)>>>0;return"go"+h})(o));if(!Ni[u]){let c=o!==t?t:(f=>{let h,p,m=[{}];for(;h=zk.exec(f.replace(jk,""));)h[4]?m.shift():h[3]?(p=h[3].replace(g2," ").trim(),m.unshift(m[0][p]=m[0][p]||{})):m[0][h[1]]=h[2].replace(g2," ").trim();return m[0]})(t);Ni[u]=Iu(a?{["@keyframes "+u]:c}:c,e?"":"."+u)}let s=e&&Ni.g?Ni.g:null;return e&&(Ni.g=Ni[u]),((c,f,h,p)=>{p?f.data=f.data.replace(p,c):f.data.indexOf(c)===-1&&(f.data=h?c+f.data:f.data+c)})(Ni[u],n,r,s),u},Vk=(t,n,e)=>t.reduce((r,a,o)=>{let u=n[o];if(u&&u.call){let s=u(e),c=s&&s.props&&s.props.className||/^go/.test(s)&&s;u=c?"."+c:s&&typeof s=="object"?s.props?"":Iu(s,""):s===!1?"":s}return r+a+(u??"")},"");function Kp(t){let n=this||{},e=t.call?t(n.p):t;return Hk(e.unshift?e.raw?Vk(e,[].slice.call(arguments,1),n.p):e.reduce((r,a)=>Object.assign(r,a&&a.call?a(n.p):a),{}):e,Uk(n.target),n.g,n.o,n.k)}let GS,gy,yy;Kp.bind({g:1});let Bi=Kp.bind({k:1});function Wk(t,n,e,r){Iu.p=n,GS=t,gy=e,yy=r}function Gu(t,n){let e=this||{};return function(){let r=arguments;function a(o,u){let s=Object.assign({},o),c=s.className||a.className;e.p=Object.assign({theme:gy&&gy()},s),e.o=/ *go\d+/.test(c),s.className=Kp.apply(e,r)+(c?" "+c:"");let f=t;return t[0]&&(f=s.as||t,delete s.as),yy&&f[0]&&yy(s),GS(f,s)}return a}}var qk=t=>typeof t=="function",fp=(t,n)=>qk(t)?t(n):t,$k=(()=>{let t=0;return()=>(++t).toString()})(),KS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");t=!n||n.matches}return t}})(),Gk=20,XS=(t,n)=>{switch(n.type){case 0:return{...t,toasts:[n.toast,...t.toasts].slice(0,Gk)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===n.toast.id?{...o,...n.toast}:o)};case 2:let{toast:e}=n;return XS(t,{type:t.toasts.find(o=>o.id===e.id)?1:0,toast:e});case 3:let{toastId:r}=n;return{...t,toasts:t.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return n.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==n.toastId)};case 5:return{...t,pausedAt:n.time};case 6:let a=n.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},Jh=[],Rs={toasts:[],pausedAt:void 0},Hs=t=>{Rs=XS(Rs,t),Jh.forEach(n=>{n(Rs)})},Kk={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Xk=(t={})=>{let[n,e]=F.useState(Rs),r=F.useRef(Rs);F.useEffect(()=>(r.current!==Rs&&e(Rs),Jh.push(e),()=>{let o=Jh.indexOf(e);o>-1&&Jh.splice(o,1)}),[]);let a=n.toasts.map(o=>{var u,s,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((u=t[o.type])==null?void 0:u.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((s=t[o.type])==null?void 0:s.duration)||(t==null?void 0:t.duration)||Kk[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:a}},Yk=(t,n="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...e,id:(e==null?void 0:e.id)||$k()}),rd=t=>(n,e)=>{let r=Yk(n,t,e);return Hs({type:2,toast:r}),r.id},la=(t,n)=>rd("blank")(t,n);la.error=rd("error");la.success=rd("success");la.loading=rd("loading");la.custom=rd("custom");la.dismiss=t=>{Hs({type:3,toastId:t})};la.remove=t=>Hs({type:4,toastId:t});la.promise=(t,n,e)=>{let r=la.loading(n.loading,{...e,...e==null?void 0:e.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let o=n.success?fp(n.success,a):void 0;return o?la.success(o,{id:r,...e,...e==null?void 0:e.success}):la.dismiss(r),a}).catch(a=>{let o=n.error?fp(n.error,a):void 0;o?la.error(o,{id:r,...e,...e==null?void 0:e.error}):la.dismiss(r)}),t};var Qk=(t,n)=>{Hs({type:1,toast:{id:t,height:n}})},Zk=()=>{Hs({type:5,time:Date.now()})},Ff=new Map,Jk=1e3,eO=(t,n=Jk)=>{if(Ff.has(t))return;let e=setTimeout(()=>{Ff.delete(t),Hs({type:4,toastId:t})},n);Ff.set(t,e)},tO=t=>{let{toasts:n,pausedAt:e}=Xk(t);F.useEffect(()=>{if(e)return;let o=Date.now(),u=n.map(s=>{if(s.duration===1/0)return;let c=(s.duration||0)+s.pauseDuration-(o-s.createdAt);if(c<0){s.visible&&la.dismiss(s.id);return}return setTimeout(()=>la.dismiss(s.id),c)});return()=>{u.forEach(s=>s&&clearTimeout(s))}},[n,e]);let r=F.useCallback(()=>{e&&Hs({type:6,time:Date.now()})},[e]),a=F.useCallback((o,u)=>{let{reverseOrder:s=!1,gutter:c=8,defaultPosition:f}=u||{},h=n.filter(g=>(g.position||f)===(o.position||f)&&g.height),p=h.findIndex(g=>g.id===o.id),m=h.filter((g,x)=>x<p&&g.visible).length;return h.filter(g=>g.visible).slice(...s?[m+1]:[0,m]).reduce((g,x)=>g+(x.height||0)+c,0)},[n]);return F.useEffect(()=>{n.forEach(o=>{if(o.dismissed)eO(o.id,o.removeDelay);else{let u=Ff.get(o.id);u&&(clearTimeout(u),Ff.delete(o.id))}})},[n]),{toasts:n,handlers:{updateHeight:Qk,startPause:Zk,endPause:r,calculateOffset:a}}},nO=Bi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,rO=Bi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,aO=Bi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,oO=Gu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${nO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${rO} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${aO} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,iO=Bi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,uO=Gu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${iO} 1s linear infinite;
`,sO=Bi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,lO=Bi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,cO=Gu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${lO} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fO=Gu("div")`
  position: absolute;
`,dO=Gu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,hO=Bi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pO=Gu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${hO} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vO=({toast:t})=>{let{icon:n,type:e,iconTheme:r}=t;return n!==void 0?typeof n=="string"?F.createElement(pO,null,n):n:e==="blank"?null:F.createElement(dO,null,F.createElement(uO,{...r}),e!=="loading"&&F.createElement(fO,null,e==="error"?F.createElement(oO,{...r}):F.createElement(cO,{...r})))},mO=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,gO=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,yO="0%{opacity:0;} 100%{opacity:1;}",bO="0%{opacity:1;} 100%{opacity:0;}",xO=Gu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,wO=Gu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,EO=(t,n)=>{let e=t.includes("top")?1:-1,[r,a]=KS()?[yO,bO]:[mO(e),gO(e)];return{animation:n?`${Bi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Bi(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},SO=F.memo(({toast:t,position:n,style:e,children:r})=>{let a=t.height?EO(t.position||n||"top-center",t.visible):{opacity:0},o=F.createElement(vO,{toast:t}),u=F.createElement(wO,{...t.ariaProps},fp(t.message,t));return F.createElement(xO,{className:t.className,style:{...a,...e,...t.style}},typeof r=="function"?r({icon:o,message:u}):F.createElement(F.Fragment,null,o,u))});Wk(F.createElement);var _O=({id:t,className:n,style:e,onHeightUpdate:r,children:a})=>{let o=F.useCallback(u=>{if(u){let s=()=>{let c=u.getBoundingClientRect().height;r(t,c)};s(),new MutationObserver(s).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return F.createElement("div",{ref:o,className:n,style:e},a)},CO=(t,n)=>{let e=t.includes("top"),r=e?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:KS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${n*(e?1:-1)}px)`,...r,...a}},RO=Kp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,kh=16,AO=({reverseOrder:t,position:n="top-center",toastOptions:e,gutter:r,children:a,containerStyle:o,containerClassName:u})=>{let{toasts:s,handlers:c}=tO(e);return F.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:kh,left:kh,right:kh,bottom:kh,pointerEvents:"none",...o},className:u,onMouseEnter:c.startPause,onMouseLeave:c.endPause},s.map(f=>{let h=f.position||n,p=c.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:n}),m=CO(h,p);return F.createElement(_O,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?RO:"",style:m},f.type==="custom"?fp(f.message,f):a?a(f):F.createElement(SO,{toast:f,position:h}))}))},jt=la;function TO(){const t=$p(),{pathname:n}=ei();return Q.jsxs("div",{className:"w-full h-[100vh] py-2 flex flex-col items-center justify-center bg-neutral-800 text-neutral-50",children:[Q.jsx("div",{className:"flex items-center justify-center gap-2",children:n==="/mark-attendance"&&Q.jsx("button",{onClick:()=>t("/"),className:"px-2 py-1 bg-cyan-900 rounded cursor-pointer shadow",children:"Back to Home"})}),Q.jsx("div",{className:"w-full h-full flex items-center justify-center ",children:Q.jsx(zS,{})})]})}const YS=typeof document<"u"?On.useLayoutEffect:()=>{};function DO(t){const n=F.useRef(null);return YS(()=>{n.current=t},[t]),F.useCallback((...e)=>{const r=n.current;return r==null?void 0:r(...e)},[])}const Ku=t=>{var n;return(n=t==null?void 0:t.ownerDocument)!==null&&n!==void 0?n:document},As=t=>t&&"window"in t&&t.window===t?t:Ku(t).defaultView||window;function NO(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function kO(t){return NO(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let OO=!1;function y0(){return OO}function QS(t,n){if(!y0())return n&&t?t.contains(n):!1;if(!t||!n)return!1;let e=n;for(;e!==null;){if(e===t)return!0;e.tagName==="SLOT"&&e.assignedSlot?e=e.assignedSlot.parentNode:kO(e)?e=e.host:e=e.parentNode}return!1}const by=(t=document)=>{var n;if(!y0())return t.activeElement;let e=t.activeElement;for(;e&&"shadowRoot"in e&&(!((n=e.shadowRoot)===null||n===void 0)&&n.activeElement);)e=e.shadowRoot.activeElement;return e};function ZS(t){return y0()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function MO(t){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(e=>t.test(e.brand)))||t.test(window.navigator.userAgent)}function IO(t){var n;return typeof window<"u"&&window.navigator!=null?t.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function JS(t){let n=null;return()=>(n==null&&(n=t()),n)}const FO=JS(function(){return IO(/^Mac/i)}),BO=JS(function(){return MO(/Android/i)});function e_(){let t=F.useRef(new Map),n=F.useCallback((a,o,u,s)=>{let c=s!=null&&s.once?(...f)=>{t.current.delete(u),u(...f)}:u;t.current.set(u,{type:o,eventTarget:a,fn:c,options:s}),a.addEventListener(o,c,s)},[]),e=F.useCallback((a,o,u,s)=>{var c;let f=((c=t.current.get(u))===null||c===void 0?void 0:c.fn)||u;a.removeEventListener(o,f,s),t.current.delete(u)},[]),r=F.useCallback(()=>{t.current.forEach((a,o)=>{e(a.eventTarget,a.type,o,a.options)})},[e]);return F.useEffect(()=>r,[r]),{addGlobalListener:n,removeGlobalListener:e,removeAllGlobalListeners:r}}function PO(t){return t.mozInputSource===0&&t.isTrusted?!0:BO()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function t_(t){let n=t;return n.nativeEvent=t,n.isDefaultPrevented=()=>n.defaultPrevented,n.isPropagationStopped=()=>n.cancelBubble,n.persist=()=>{},n}function LO(t,n){Object.defineProperty(t,"target",{value:n}),Object.defineProperty(t,"currentTarget",{value:n})}function n_(t){let n=F.useRef({isFocused:!1,observer:null});YS(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let e=DO(r=>{t==null||t(r)});return F.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let a=r.target,o=u=>{if(n.current.isFocused=!1,a.disabled){let s=t_(u);e(s)}n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};a.addEventListener("focusout",o,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&a.disabled){var u;(u=n.current.observer)===null||u===void 0||u.disconnect();let s=a===document.activeElement?null:document.activeElement;a.dispatchEvent(new FocusEvent("blur",{relatedTarget:s})),a.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:s}))}}),n.current.observer.observe(a,{attributes:!0,attributeFilter:["disabled"]})}},[e])}let UO=!1,ad=null,xy=new Set,Bf=new Map,Fs=!1,wy=!1;const zO={Tab:!0,Escape:!0};function b0(t,n){for(let e of xy)e(t,n)}function jO(t){return!(t.metaKey||!FO()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function dp(t){Fs=!0,jO(t)&&(ad="keyboard",b0("keyboard",t))}function Xl(t){ad="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Fs=!0,b0("pointer",t))}function r_(t){PO(t)&&(Fs=!0,ad="virtual")}function a_(t){t.target===window||t.target===document||UO||!t.isTrusted||(!Fs&&!wy&&(ad="virtual",b0("virtual",t)),Fs=!1,wy=!1)}function o_(){Fs=!1,wy=!0}function Ey(t){if(typeof window>"u"||typeof document>"u"||Bf.get(As(t)))return;const n=As(t),e=Ku(t);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){Fs=!0,r.apply(this,arguments)},e.addEventListener("keydown",dp,!0),e.addEventListener("keyup",dp,!0),e.addEventListener("click",r_,!0),n.addEventListener("focus",a_,!0),n.addEventListener("blur",o_,!1),typeof PointerEvent<"u"&&(e.addEventListener("pointerdown",Xl,!0),e.addEventListener("pointermove",Xl,!0),e.addEventListener("pointerup",Xl,!0)),n.addEventListener("beforeunload",()=>{i_(t)},{once:!0}),Bf.set(n,{focus:r})}const i_=(t,n)=>{const e=As(t),r=Ku(t);n&&r.removeEventListener("DOMContentLoaded",n),Bf.has(e)&&(e.HTMLElement.prototype.focus=Bf.get(e).focus,r.removeEventListener("keydown",dp,!0),r.removeEventListener("keyup",dp,!0),r.removeEventListener("click",r_,!0),e.removeEventListener("focus",a_,!0),e.removeEventListener("blur",o_,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",Xl,!0),r.removeEventListener("pointermove",Xl,!0),r.removeEventListener("pointerup",Xl,!0)),Bf.delete(e))};function HO(t){const n=Ku(t);let e;return n.readyState!=="loading"?Ey(t):(e=()=>{Ey(t)},n.addEventListener("DOMContentLoaded",e)),()=>i_(t,e)}typeof document<"u"&&HO();function u_(){return ad!=="pointer"}const VO=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function WO(t,n,e){let r=Ku(e==null?void 0:e.target);const a=typeof window<"u"?As(e==null?void 0:e.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?As(e==null?void 0:e.target).HTMLTextAreaElement:HTMLTextAreaElement,u=typeof window<"u"?As(e==null?void 0:e.target).HTMLElement:HTMLElement,s=typeof window<"u"?As(e==null?void 0:e.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof a&&!VO.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof u&&r.activeElement.isContentEditable,!(t&&n==="keyboard"&&e instanceof s&&!zO[e.key])}function qO(t,n,e){Ey(),F.useEffect(()=>{let r=(a,o)=>{WO(!!(e!=null&&e.isTextInput),a,o)&&t(u_())};return xy.add(r),()=>{xy.delete(r)}},n)}function $O(t){let{isDisabled:n,onFocus:e,onBlur:r,onFocusChange:a}=t;const o=F.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),a&&a(!1),!0},[r,a]),u=n_(o),s=F.useCallback(c=>{const f=Ku(c.target),h=f?by(f):by();c.target===c.currentTarget&&h===ZS(c.nativeEvent)&&(e&&e(c),a&&a(!0),u(c))},[a,e,u]);return{focusProps:{onFocus:!n&&(e||a||r)?s:void 0,onBlur:!n&&(r||a)?o:void 0}}}function GO(t){let{isDisabled:n,onBlurWithin:e,onFocusWithin:r,onFocusWithinChange:a}=t,o=F.useRef({isFocusWithin:!1}),{addGlobalListener:u,removeAllGlobalListeners:s}=e_(),c=F.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,s(),e&&e(p),a&&a(!1))},[e,a,o,s]),f=n_(c),h=F.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const m=Ku(p.target),g=by(m);if(!o.current.isFocusWithin&&g===ZS(p.nativeEvent)){r&&r(p),a&&a(!0),o.current.isFocusWithin=!0,f(p);let x=p.currentTarget;u(m,"focus",E=>{if(o.current.isFocusWithin&&!QS(x,E.target)){let S=new m.defaultView.FocusEvent("blur",{relatedTarget:E.target});LO(S,x);let _=t_(S);c(_)}},{capture:!0})}},[r,a,f,u,c]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let Sy=!1,Sg=0;function KO(){Sy=!0,setTimeout(()=>{Sy=!1},50)}function y2(t){t.pointerType==="touch"&&KO()}function XO(){if(!(typeof document>"u"))return typeof PointerEvent<"u"&&document.addEventListener("pointerup",y2),Sg++,()=>{Sg--,!(Sg>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",y2)}}function s_(t){let{onHoverStart:n,onHoverChange:e,onHoverEnd:r,isDisabled:a}=t,[o,u]=F.useState(!1),s=F.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;F.useEffect(XO,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=e_(),{hoverProps:h,triggerHoverEnd:p}=F.useMemo(()=>{let m=(E,S)=>{if(s.pointerType=S,a||S==="touch"||s.isHovered||!E.currentTarget.contains(E.target))return;s.isHovered=!0;let _=E.currentTarget;s.target=_,c(Ku(E.target),"pointerover",A=>{s.isHovered&&s.target&&!QS(s.target,A.target)&&g(A,A.pointerType)},{capture:!0}),n&&n({type:"hoverstart",target:_,pointerType:S}),e&&e(!0),u(!0)},g=(E,S)=>{let _=s.target;s.pointerType="",s.target=null,!(S==="touch"||!s.isHovered||!_)&&(s.isHovered=!1,f(),r&&r({type:"hoverend",target:_,pointerType:S}),e&&e(!1),u(!1))},x={};return typeof PointerEvent<"u"&&(x.onPointerEnter=E=>{Sy&&E.pointerType==="mouse"||m(E,E.pointerType)},x.onPointerLeave=E=>{!a&&E.currentTarget.contains(E.target)&&g(E,E.pointerType)}),{hoverProps:x,triggerHoverEnd:g}},[n,e,r,a,s,c,f]);return F.useEffect(()=>{a&&p({currentTarget:s.target},s.pointerType)},[a]),{hoverProps:h,isHovered:o}}function l_(t={}){let{autoFocus:n=!1,isTextInput:e,within:r}=t,a=F.useRef({isFocused:!1,isFocusVisible:n||u_()}),[o,u]=F.useState(!1),[s,c]=F.useState(()=>a.current.isFocused&&a.current.isFocusVisible),f=F.useCallback(()=>c(a.current.isFocused&&a.current.isFocusVisible),[]),h=F.useCallback(g=>{a.current.isFocused=g,u(g),f()},[f]);qO(g=>{a.current.isFocusVisible=g,f()},[],{isTextInput:e});let{focusProps:p}=$O({isDisabled:r,onFocusChange:h}),{focusWithinProps:m}=GO({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:s,focusProps:r?m:p}}var YO=Object.defineProperty,QO=(t,n,e)=>n in t?YO(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,_g=(t,n,e)=>(QO(t,typeof n!="symbol"?n+"":n,e),e);let ZO=class{constructor(){_g(this,"current",this.detect()),_g(this,"handoffState","pending"),_g(this,"currentId",0)}set(n){this.current!==n&&(this.handoffState="pending",this.currentId=0,this.current=n)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Os=new ZO;function Vs(t){var n,e;return Os.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(e=(n=t.current)==null?void 0:n.ownerDocument)!=null?e:document:null:document}function c_(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(n=>setTimeout(()=>{throw n}))}function io(){let t=[],n={addEventListener(e,r,a,o){return e.addEventListener(r,a,o),n.add(()=>e.removeEventListener(r,a,o))},requestAnimationFrame(...e){let r=requestAnimationFrame(...e);return n.add(()=>cancelAnimationFrame(r))},nextFrame(...e){return n.requestAnimationFrame(()=>n.requestAnimationFrame(...e))},setTimeout(...e){let r=setTimeout(...e);return n.add(()=>clearTimeout(r))},microTask(...e){let r={current:!0};return c_(()=>{r.current&&e[0]()}),n.add(()=>{r.current=!1})},style(e,r,a){let o=e.style.getPropertyValue(r);return Object.assign(e.style,{[r]:a}),this.add(()=>{Object.assign(e.style,{[r]:o})})},group(e){let r=io();return e(r),this.add(()=>r.dispose())},add(e){return t.includes(e)||t.push(e),()=>{let r=t.indexOf(e);if(r>=0)for(let a of t.splice(r,1))a()}},dispose(){for(let e of t.splice(0))e()}};return n}function Xp(){let[t]=F.useState(io);return F.useEffect(()=>()=>t.dispose(),[t]),t}let ir=(t,n)=>{Os.isServer?F.useEffect(t,n):F.useLayoutEffect(t,n)};function od(t){let n=F.useRef(t);return ir(()=>{n.current=t},[t]),n}let nn=function(t){let n=od(t);return On.useCallback((...e)=>n.current(...e),[n])};function JO(t){let n=t.width/2,e=t.height/2;return{top:t.clientY-e,right:t.clientX+n,bottom:t.clientY+e,left:t.clientX-n}}function e3(t,n){return!(!t||!n||t.right<n.left||t.left>n.right||t.bottom<n.top||t.top>n.bottom)}function f_({disabled:t=!1}={}){let n=F.useRef(null),[e,r]=F.useState(!1),a=Xp(),o=nn(()=>{n.current=null,r(!1),a.dispose()}),u=nn(s=>{if(a.dispose(),n.current===null){n.current=s.currentTarget,r(!0);{let c=Vs(s.currentTarget);a.addEventListener(c,"pointerup",o,!1),a.addEventListener(c,"pointermove",f=>{if(n.current){let h=JO(f);r(e3(h,n.current.getBoundingClientRect()))}},!1),a.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:e,pressProps:t?{}:{onPointerDown:u,onPointerUp:o,onClick:o}}}let t3=F.createContext(void 0);function d_(){return F.useContext(t3)}function b2(...t){return Array.from(new Set(t.flatMap(n=>typeof n=="string"?n.split(" "):[]))).filter(Boolean).join(" ")}function Li(t,n,...e){if(t in n){let a=n[t];return typeof a=="function"?a(...e):a}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(n).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Li),r}var Vf=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Vf||{}),n3=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(n3||{});function fa(){let t=a3();return F.useCallback(n=>r3({mergeRefs:t,...n}),[t])}function r3({ourProps:t,theirProps:n,slot:e,defaultTag:r,features:a,visible:o=!0,name:u,mergeRefs:s}){s=s??o3;let c=h_(n,t);if(o)return Oh(c,e,r,u,s);let f=a??0;if(f&2){let{static:h=!1,...p}=c;if(h)return Oh(p,e,r,u,s)}if(f&1){let{unmount:h=!0,...p}=c;return Li(h?0:1,{0(){return null},1(){return Oh({...p,hidden:!0,style:{display:"none"}},e,r,u,s)}})}return Oh(c,e,r,u,s)}function Oh(t,n={},e,r,a){let{as:o=e,children:u,refName:s="ref",...c}=Cg(t,["unmount","static"]),f=t.ref!==void 0?{[s]:t.ref}:{},h=typeof u=="function"?u(n):u;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(n)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(n){let m=!1,g=[];for(let[x,E]of Object.entries(n))typeof E=="boolean"&&(m=!0),E===!0&&g.push(x.replace(/([A-Z])/g,S=>`-${S.toLowerCase()}`));if(m){p["data-headlessui-state"]=g.join(" ");for(let x of g)p[`data-${x}`]=""}}if(o===F.Fragment&&(Object.keys(Pl(c)).length>0||Object.keys(Pl(p)).length>0))if(!F.isValidElement(h)||Array.isArray(h)&&h.length>1){if(Object.keys(Pl(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Pl(c)).concat(Object.keys(Pl(p))).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`))}else{let m=h.props,g=m==null?void 0:m.className,x=typeof g=="function"?(..._)=>b2(g(..._),c.className):b2(g,c.className),E=x?{className:x}:{},S=h_(h.props,Pl(Cg(c,["ref"])));for(let _ in p)_ in S&&delete p[_];return F.cloneElement(h,Object.assign({},S,p,f,{ref:a(i3(h),f.ref)},E))}return F.createElement(o,Object.assign({},Cg(c,["ref"]),o!==F.Fragment&&f,o!==F.Fragment&&p),h)}function a3(){let t=F.useRef([]),n=F.useCallback(e=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(e):r.current=e)},[]);return(...e)=>{if(!e.every(r=>r==null))return t.current=e,n}}function o3(...t){return t.every(n=>n==null)?void 0:n=>{for(let e of t)e!=null&&(typeof e=="function"?e(n):e.current=n)}}function h_(...t){if(t.length===0)return{};if(t.length===1)return t[0];let n={},e={};for(let r of t)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(e[a]!=null||(e[a]=[]),e[a].push(r[a])):n[a]=r[a];if(n.disabled||n["aria-disabled"])for(let r in e)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(e[r]=[a=>{var o;return(o=a==null?void 0:a.preventDefault)==null?void 0:o.call(a)}]);for(let r in e)Object.assign(n,{[r](a,...o){let u=e[r];for(let s of u){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;s(a,...o)}}});return n}function hp(...t){if(t.length===0)return{};if(t.length===1)return t[0];let n={},e={};for(let r of t)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(e[a]!=null||(e[a]=[]),e[a].push(r[a])):n[a]=r[a];for(let r in e)Object.assign(n,{[r](...a){let o=e[r];for(let u of o)u==null||u(...a)}});return n}function da(t){var n;return Object.assign(F.forwardRef(t),{displayName:(n=t.displayName)!=null?n:t.name})}function Pl(t){let n=Object.assign({},t);for(let e in n)n[e]===void 0&&delete n[e];return n}function Cg(t,n=[]){let e=Object.assign({},t);for(let r of n)r in e&&delete e[r];return e}function i3(t){return On.version.split(".")[0]>="19"?t.props.ref:t.ref}let u3=F.createContext(void 0);function s3(){return F.useContext(u3)}function x0(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function Yp(t){return x0(t)&&"tagName"in t}function Ui(t){return Yp(t)&&"accessKey"in t}function Ii(t){return Yp(t)&&"tabIndex"in t}function l3(t){return Yp(t)&&"style"in t}function c3(t){return Ui(t)&&t.nodeName==="IFRAME"}function p_(t){return Ui(t)&&t.nodeName==="INPUT"}function x2(t){return Ui(t)&&t.nodeName==="LABEL"}function f3(t){return Ui(t)&&t.nodeName==="FIELDSET"}function v_(t){return Ui(t)&&t.nodeName==="LEGEND"}function d3(t){return Yp(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function m_(t){let n=t.parentElement,e=null;for(;n&&!f3(n);)v_(n)&&(e=n),n=n.parentElement;let r=(n==null?void 0:n.getAttribute("disabled"))==="";return r&&h3(e)?!1:r}function h3(t){if(!t)return!1;let n=t.previousElementSibling;for(;n!==null;){if(v_(n))return!1;n=n.previousElementSibling}return!0}let g_=Symbol();function y_(t,n=!0){return Object.assign(t,{[g_]:n})}function uo(...t){let n=F.useRef(t);F.useEffect(()=>{n.current=t},[t]);let e=nn(r=>{for(let a of n.current)a!=null&&(typeof a=="function"?a(r):a.current=r)});return t.every(r=>r==null||(r==null?void 0:r[g_]))?void 0:e}let w0=F.createContext(null);w0.displayName="DescriptionContext";function b_(){let t=F.useContext(w0);if(t===null){let n=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,b_),n}return t}function p3(){let[t,n]=F.useState([]);return[t.length>0?t.join(" "):void 0,F.useMemo(()=>function(e){let r=nn(o=>(n(u=>[...u,o]),()=>n(u=>{let s=u.slice(),c=s.indexOf(o);return c!==-1&&s.splice(c,1),s}))),a=F.useMemo(()=>({register:r,slot:e.slot,name:e.name,props:e.props,value:e.value}),[r,e.slot,e.name,e.props,e.value]);return On.createElement(w0.Provider,{value:a},e.children)},[n])]}let v3="p";function m3(t,n){let e=F.useId(),r=d_(),{id:a=`headlessui-description-${e}`,...o}=t,u=b_(),s=uo(n);ir(()=>u.register(a),[a,u.register]);let c=r||!1,f=F.useMemo(()=>({...u.slot,disabled:c}),[u.slot,c]),h={ref:s,...u.props,id:a};return fa()({ourProps:h,theirProps:o,slot:f,defaultTag:v3,name:u.name||"Description"})}let g3=da(m3);Object.assign(g3,{});var Vn=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Vn||{});let Qp=F.createContext(null);Qp.displayName="LabelContext";function E0(){let t=F.useContext(Qp);if(t===null){let n=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,E0),n}return t}function y3(t){var n,e,r;let a=(e=(n=F.useContext(Qp))==null?void 0:n.value)!=null?e:void 0;return((r=void 0)!=null?r:0)>0?[a,...t].filter(Boolean).join(" "):a}function x_({inherit:t=!1}={}){let n=y3(),[e,r]=F.useState([]),a=t?[n,...e].filter(Boolean):e;return[a.length>0?a.join(" "):void 0,F.useMemo(()=>function(o){let u=nn(c=>(r(f=>[...f,c]),()=>r(f=>{let h=f.slice(),p=h.indexOf(c);return p!==-1&&h.splice(p,1),h}))),s=F.useMemo(()=>({register:u,slot:o.slot,name:o.name,props:o.props,value:o.value}),[u,o.slot,o.name,o.props,o.value]);return On.createElement(Qp.Provider,{value:s},o.children)},[r])]}let b3="label";function x3(t,n){var e;let r=F.useId(),a=E0(),o=s3(),u=d_(),{id:s=`headlessui-label-${r}`,htmlFor:c=o??((e=a.props)==null?void 0:e.htmlFor),passive:f=!1,...h}=t,p=uo(n);ir(()=>a.register(s),[s,a.register]);let m=nn(S=>{let _=S.currentTarget;if(!(S.target!==S.currentTarget&&d3(S.target))&&(x2(_)&&S.preventDefault(),a.props&&"onClick"in a.props&&typeof a.props.onClick=="function"&&a.props.onClick(S),x2(_))){let A=document.getElementById(_.htmlFor);if(A){let T=A.getAttribute("disabled");if(T==="true"||T==="")return;let N=A.getAttribute("aria-disabled");if(N==="true"||N==="")return;(p_(A)&&(A.type==="file"||A.type==="radio"||A.type==="checkbox")||A.role==="radio"||A.role==="checkbox"||A.role==="switch")&&A.click(),A.focus({preventScroll:!0})}}}),g=u||!1,x=F.useMemo(()=>({...a.slot,disabled:g}),[a.slot,g]),E={ref:p,...a.props,id:s,htmlFor:c,onClick:m};return f&&("onClick"in E&&(delete E.htmlFor,delete E.onClick),"onClick"in h&&delete h.onClick),fa()({ourProps:E,theirProps:h,slot:x,defaultTag:c?b3:"div",name:a.name||"Label"})}let w3=da(x3);Object.assign(w3,{});let E3=F.createContext(()=>{});function S3({value:t,children:n}){return On.createElement(E3.Provider,{value:t},n)}function _3(t){if(t===null)return{width:0,height:0};let{width:n,height:e}=t.getBoundingClientRect();return{width:n,height:e}}function C3(t,n=!1){let[e,r]=F.useReducer(()=>({}),{}),a=F.useMemo(()=>_3(t),[t,e]);return ir(()=>{if(!t)return;let o=new ResizeObserver(r);return o.observe(t),()=>{o.disconnect()}},[t]),n?{width:`${a.width}px`,height:`${a.height}px`}:a}let w_=class extends Map{constructor(n){super(),this.factory=n}get(n){let e=super.get(n);return e===void 0&&(e=this.factory(n),this.set(n,e)),e}};var R3=Object.defineProperty,A3=(t,n,e)=>n in t?R3(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,T3=(t,n,e)=>(A3(t,n+"",e),e),E_=(t,n,e)=>{if(!n.has(t))throw TypeError("Cannot "+e)},eo=(t,n,e)=>(E_(t,n,"read from private field"),e?e.call(t):n.get(t)),Rg=(t,n,e)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,e)},w2=(t,n,e,r)=>(E_(t,n,"write to private field"),n.set(t,e),e),Lo,Mf,If;let S_=class{constructor(n){Rg(this,Lo,{}),Rg(this,Mf,new w_(()=>new Set)),Rg(this,If,new Set),T3(this,"disposables",io()),w2(this,Lo,n)}dispose(){this.disposables.dispose()}get state(){return eo(this,Lo)}subscribe(n,e){let r={selector:n,callback:e,current:n(eo(this,Lo))};return eo(this,If).add(r),this.disposables.add(()=>{eo(this,If).delete(r)})}on(n,e){return eo(this,Mf).get(n).add(e),this.disposables.add(()=>{eo(this,Mf).get(n).delete(e)})}send(n){let e=this.reduce(eo(this,Lo),n);if(e!==eo(this,Lo)){w2(this,Lo,e);for(let r of eo(this,If)){let a=r.selector(eo(this,Lo));__(r.current,a)||(r.current=a,r.callback(a))}for(let r of eo(this,Mf).get(n.type))r(eo(this,Lo),n)}}};Lo=new WeakMap,Mf=new WeakMap,If=new WeakMap;function __(t,n){return Object.is(t,n)?!0:typeof t!="object"||t===null||typeof n!="object"||n===null?!1:Array.isArray(t)&&Array.isArray(n)?t.length!==n.length?!1:Ag(t[Symbol.iterator](),n[Symbol.iterator]()):t instanceof Map&&n instanceof Map||t instanceof Set&&n instanceof Set?t.size!==n.size?!1:Ag(t.entries(),n.entries()):E2(t)&&E2(n)?Ag(Object.entries(t)[Symbol.iterator](),Object.entries(n)[Symbol.iterator]()):!1}function Ag(t,n){do{let e=t.next(),r=n.next();if(e.done&&r.done)return!0;if(e.done||r.done||!Object.is(e.value,r.value))return!1}while(!0)}function E2(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let n=Object.getPrototypeOf(t);return n===null||Object.getPrototypeOf(n)===null}function S2(t){let[n,e]=t(),r=io();return(...a)=>{n(...a),r.dispose(),r.microTask(e)}}var D3=Object.defineProperty,N3=(t,n,e)=>n in t?D3(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,_2=(t,n,e)=>(N3(t,typeof n!="symbol"?n+"":n,e),e),C_=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(C_||{});let k3={0(t,n){let e=n.id,r=t.stack,a=t.stack.indexOf(e);if(a!==-1){let o=t.stack.slice();return o.splice(a,1),o.push(e),r=o,{...t,stack:r}}return{...t,stack:[...t.stack,e]}},1(t,n){let e=n.id,r=t.stack.indexOf(e);if(r===-1)return t;let a=t.stack.slice();return a.splice(r,1),{...t,stack:a}}},O3=class R_ extends S_{constructor(){super(...arguments),_2(this,"actions",{push:n=>this.send({type:0,id:n}),pop:n=>this.send({type:1,id:n})}),_2(this,"selectors",{isTop:(n,e)=>n.stack[n.stack.length-1]===e,inStack:(n,e)=>n.stack.includes(e)})}static new(){return new R_({stack:[]})}reduce(n,e){return Li(e.type,k3,n,e)}};const S0=new w_(()=>O3.new());var Tg={exports:{}},Dg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function M3(){if(C2)return Dg;C2=1;var t=Wp();function n(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var e=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,a=t.useRef,o=t.useEffect,u=t.useMemo,s=t.useDebugValue;return Dg.useSyncExternalStoreWithSelector=function(c,f,h,p,m){var g=a(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=u(function(){function S(D){if(!_){if(_=!0,A=D,D=p(D),m!==void 0&&x.hasValue){var k=x.value;if(m(k,D))return T=k}return T=D}if(k=T,e(A,D))return k;var P=p(D);return m!==void 0&&m(k,P)?(A=D,k):(A=D,T=P)}var _=!1,A,T,N=h===void 0?null:h;return[function(){return S(f())},N===null?void 0:function(){return S(N())}]},[f,h,p,m]);var E=r(c,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=E},[E]),s(E),E},Dg}var R2;function I3(){return R2||(R2=1,Tg.exports=M3()),Tg.exports}var F3=I3();function Vo(t,n,e=__){return F3.useSyncExternalStoreWithSelector(nn(r=>t.subscribe(B3,r)),nn(()=>t.state),nn(()=>t.state),nn(n),e)}function B3(t){return t}function A_(t,n){let e=F.useId(),r=S0.get(n),[a,o]=Vo(r,F.useCallback(u=>[r.selectors.isTop(u,e),r.selectors.inStack(u,e)],[r,e]));return ir(()=>{if(t)return r.actions.push(e),()=>r.actions.pop(e)},[r,t,e]),t?o?a:!0:!1}let _y=new Map,Pf=new Map;function A2(t){var n;let e=(n=Pf.get(t))!=null?n:0;return Pf.set(t,e+1),e!==0?()=>T2(t):(_y.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>T2(t))}function T2(t){var n;let e=(n=Pf.get(t))!=null?n:1;if(e===1?Pf.delete(t):Pf.set(t,e-1),e!==1)return;let r=_y.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,_y.delete(t))}function P3(t,{allowed:n,disallowed:e}={}){let r=A_(t,"inert-others");ir(()=>{var a,o;if(!r)return;let u=io();for(let c of(a=e==null?void 0:e())!=null?a:[])c&&u.add(A2(c));let s=(o=n==null?void 0:n())!=null?o:[];for(let c of s){if(!c)continue;let f=Vs(c);if(!f)continue;let h=c.parentElement;for(;h&&h!==f.body;){for(let p of h.children)s.some(m=>p.contains(m))||u.add(A2(p));h=h.parentElement}}return u.dispose},[r,n,e])}function L3(t,n,e){let r=od(a=>{let o=a.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&e()});F.useEffect(()=>{if(!t)return;let a=n===null?null:Ui(n)?n:n.current;if(!a)return;let o=io();if(typeof ResizeObserver<"u"){let u=new ResizeObserver(()=>r.current(a));u.observe(a),o.add(()=>u.disconnect())}if(typeof IntersectionObserver<"u"){let u=new IntersectionObserver(()=>r.current(a));u.observe(a),o.add(()=>u.disconnect())}return()=>o.dispose()},[n,r,t])}let Cy=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),U3=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Ry=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Ry||{}),z3=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(z3||{}),j3=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(j3||{});function T_(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Cy)).sort((n,e)=>Math.sign((n.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}function H3(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(U3)).sort((n,e)=>Math.sign((n.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}var _0=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(_0||{});function C0(t,n=0){var e;return t===((e=Vs(t))==null?void 0:e.body)?!1:Li(n,{0(){return t.matches(Cy)},1(){let r=t;for(;r!==null;){if(r.matches(Cy))return!0;r=r.parentElement}return!1}})}function D_(t){let n=Vs(t);io().nextFrame(()=>{n&&Ii(n.activeElement)&&!C0(n.activeElement,0)&&W3(t)})}var V3=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(V3||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function W3(t){t==null||t.focus({preventScroll:!0})}let q3=["textarea","input"].join(",");function $3(t){var n,e;return(e=(n=t==null?void 0:t.matches)==null?void 0:n.call(t,q3))!=null?e:!1}function N_(t,n=e=>e){return t.slice().sort((e,r)=>{let a=n(e),o=n(r);if(a===null||o===null)return 0;let u=a.compareDocumentPosition(o);return u&Node.DOCUMENT_POSITION_FOLLOWING?-1:u&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function G3(t,n){return K3(T_(),n,{relativeTo:t})}function K3(t,n,{sorted:e=!0,relativeTo:r=null,skipElements:a=[]}={}){let o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,u=Array.isArray(t)?e?N_(t):t:n&64?H3(t):T_(t);a.length>0&&u.length>1&&(u=u.filter(g=>!a.some(x=>x!=null&&"current"in x?(x==null?void 0:x.current)===g:x===g))),r=r??o.activeElement;let s=(()=>{if(n&5)return 1;if(n&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(n&1)return 0;if(n&2)return Math.max(0,u.indexOf(r))-1;if(n&4)return Math.max(0,u.indexOf(r))+1;if(n&8)return u.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=n&32?{preventScroll:!0}:{},h=0,p=u.length,m;do{if(h>=p||h+p<=0)return 0;let g=c+h;if(n&16)g=(g+p)%p;else{if(g<0)return 3;if(g>=p)return 1}m=u[g],m==null||m.focus(f),h+=s}while(m!==o.activeElement);return n&6&&$3(m)&&m.select(),2}function k_(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function X3(){return/Android/gi.test(window.navigator.userAgent)}function D2(){return k_()||X3()}function Gl(t,n,e,r){let a=od(e);F.useEffect(()=>{if(!t)return;function o(u){a.current(u)}return document.addEventListener(n,o,r),()=>document.removeEventListener(n,o,r)},[t,n,r])}function Y3(t,n,e,r){let a=od(e);F.useEffect(()=>{if(!t)return;function o(u){a.current(u)}return window.addEventListener(n,o,r),()=>window.removeEventListener(n,o,r)},[t,n,r])}const N2=30;function Q3(t,n,e){let r=od(e),a=F.useCallback(function(s,c){if(s.defaultPrevented)return;let f=c(s);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=function p(m){return typeof m=="function"?p(m()):Array.isArray(m)||m instanceof Set?m:[m]}(n);for(let p of h)if(p!==null&&(p.contains(f)||s.composed&&s.composedPath().includes(p)))return;return!C0(f,_0.Loose)&&f.tabIndex!==-1&&s.preventDefault(),r.current(s,f)},[r,n]),o=F.useRef(null);Gl(t,"pointerdown",s=>{var c,f;D2()||(o.current=((f=(c=s.composedPath)==null?void 0:c.call(s))==null?void 0:f[0])||s.target)},!0),Gl(t,"pointerup",s=>{if(D2()||!o.current)return;let c=o.current;return o.current=null,a(s,()=>c)},!0);let u=F.useRef({x:0,y:0});Gl(t,"touchstart",s=>{u.current.x=s.touches[0].clientX,u.current.y=s.touches[0].clientY},!0),Gl(t,"touchend",s=>{let c={x:s.changedTouches[0].clientX,y:s.changedTouches[0].clientY};if(!(Math.abs(c.x-u.current.x)>=N2||Math.abs(c.y-u.current.y)>=N2))return a(s,()=>Ii(s.target)?s.target:null)},!0),Y3(t,"blur",s=>a(s,()=>c3(window.document.activeElement)?window.document.activeElement:null),!0)}function Ay(...t){return F.useMemo(()=>Vs(...t),[...t])}var Z3=(t=>(t[t.Ignore=0]="Ignore",t[t.Select=1]="Select",t[t.Close=2]="Close",t))(Z3||{});const Mh={Ignore:{kind:0},Select:t=>({kind:1,target:t}),Close:{kind:2}},J3=200;function eM(t,{trigger:n,action:e,close:r,select:a}){let o=F.useRef(null);Gl(t&&n!==null,"pointerdown",u=>{x0(u==null?void 0:u.target)&&n!=null&&n.contains(u.target)&&(o.current=new Date)}),Gl(t&&n!==null,"pointerup",u=>{if(o.current===null||!Ii(u.target))return;let s=e(u),c=new Date().getTime()-o.current.getTime();switch(o.current=null,s.kind){case 0:return;case 1:{c>J3&&(a(s.target),r());break}case 2:{r();break}}},{capture:!0})}function O_(t,n){return F.useMemo(()=>{var e;if(t.type)return t.type;let r=(e=t.as)!=null?e:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(n==null?void 0:n.tagName)==="BUTTON"&&!n.hasAttribute("type"))return"button"},[t.type,t.as,n])}function tM(t){return F.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function nM(t,n){let e=t(),r=new Set;return{getSnapshot(){return e},subscribe(a){return r.add(a),()=>r.delete(a)},dispatch(a,...o){let u=n[a].call(e,...o);u&&(e=u,r.forEach(s=>s()))}}}function rM(){let t;return{before({doc:n}){var e;let r=n.documentElement,a=(e=n.defaultView)!=null?e:window;t=Math.max(0,a.innerWidth-r.clientWidth)},after({doc:n,d:e}){let r=n.documentElement,a=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,t-a);e.style(r,"paddingRight",`${o}px`)}}}function aM(){return k_()?{before({doc:t,d:n,meta:e}){function r(a){return e.containers.flatMap(o=>o()).some(o=>o.contains(a))}n.microTask(()=>{var a;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let s=io();s.style(t.documentElement,"scrollBehavior","auto"),n.add(()=>n.microTask(()=>s.dispose()))}let o=(a=window.scrollY)!=null?a:window.pageYOffset,u=null;n.addEventListener(t,"click",s=>{if(Ii(s.target))try{let c=s.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),h=t.querySelector(f);Ii(h)&&!r(h)&&(u=h)}catch{}},!0),n.addEventListener(t,"touchstart",s=>{if(Ii(s.target)&&l3(s.target))if(r(s.target)){let c=s.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;n.style(c,"overscrollBehavior","contain")}else n.style(s.target,"touchAction","none")}),n.addEventListener(t,"touchmove",s=>{if(Ii(s.target)){if(p_(s.target))return;if(r(s.target)){let c=s.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&s.preventDefault()}else s.preventDefault()}},{passive:!1}),n.add(()=>{var s;let c=(s=window.scrollY)!=null?s:window.pageYOffset;o!==c&&window.scrollTo(0,o),u&&u.isConnected&&(u.scrollIntoView({block:"nearest"}),u=null)})})}}:{}}function oM(){return{before({doc:t,d:n}){n.style(t.documentElement,"overflow","hidden")}}}function iM(t){let n={};for(let e of t)Object.assign(n,e(n));return n}let Ts=nM(()=>new Map,{PUSH(t,n){var e;let r=(e=this.get(t))!=null?e:{doc:t,count:0,d:io(),meta:new Set};return r.count++,r.meta.add(n),this.set(t,r),this},POP(t,n){let e=this.get(t);return e&&(e.count--,e.meta.delete(n)),this},SCROLL_PREVENT({doc:t,d:n,meta:e}){let r={doc:t,d:n,meta:iM(e)},a=[aM(),rM(),oM()];a.forEach(({before:o})=>o==null?void 0:o(r)),a.forEach(({after:o})=>o==null?void 0:o(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Ts.subscribe(()=>{let t=Ts.getSnapshot(),n=new Map;for(let[e]of t)n.set(e,e.documentElement.style.overflow);for(let e of t.values()){let r=n.get(e.doc)==="hidden",a=e.count!==0;(a&&!r||!a&&r)&&Ts.dispatch(e.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",e),e.count===0&&Ts.dispatch("TEARDOWN",e)}});function uM(t,n,e=()=>({containers:[]})){let r=tM(Ts),a=n?r.get(n):void 0,o=a?a.count>0:!1;return ir(()=>{if(!(!n||!t))return Ts.dispatch("PUSH",n,e),()=>Ts.dispatch("POP",n,e)},[t,n]),o}function sM(t,n,e=()=>[document.body]){let r=A_(t,"scroll-lock");uM(r,n,a=>{var o;return{containers:[...(o=a.containers)!=null?o:[],e]}})}function k2(t){return[t.screenX,t.screenY]}function lM(){let t=F.useRef([-1,-1]);return{wasMoved(n){let e=k2(n);return t.current[0]===e[0]&&t.current[1]===e[1]?!1:(t.current=e,!0)},update(n){t.current=k2(n)}}}function cM(t=0){let[n,e]=F.useState(t),r=F.useCallback(c=>e(c),[n]),a=F.useCallback(c=>e(f=>f|c),[n]),o=F.useCallback(c=>(n&c)===c,[n]),u=F.useCallback(c=>e(f=>f&~c),[e]),s=F.useCallback(c=>e(f=>f^c),[e]);return{flags:n,setFlag:r,addFlag:a,hasFlag:o,removeFlag:u,toggleFlag:s}}var fM={},O2,M2;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((O2=process==null?void 0:fM)==null?void 0:O2.NODE_ENV)==="test"&&typeof((M2=Element==null?void 0:Element.prototype)==null?void 0:M2.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var dM=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(dM||{});function M_(t){let n={};for(let e in t)t[e]===!0&&(n[`data-${e}`]="");return n}function I_(t,n,e,r){let[a,o]=F.useState(e),{hasFlag:u,addFlag:s,removeFlag:c}=cM(t&&a?3:0),f=F.useRef(!1),h=F.useRef(!1),p=Xp();return ir(()=>{var m;if(t){if(e&&o(!0),!n){e&&s(3);return}return(m=void 0)==null||m.call(r,e),hM(n,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(e?(s(3),c(4)):(s(4),c(2)))},run(){h.current?e?(c(3),s(4)):(c(4),s(3)):e?c(1):s(1)},done(){var g;h.current&&typeof n.getAnimations=="function"&&n.getAnimations().length>0||(f.current=!1,c(7),e||o(!1),(g=void 0)==null||g.call(r,e))}})}},[t,e,n,p]),t?[a,{closed:u(1),enter:u(2),leave:u(4),transition:u(2)||u(4)}]:[e,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function hM(t,{prepare:n,run:e,done:r,inFlight:a}){let o=io();return vM(t,{prepare:n,inFlight:a}),o.nextFrame(()=>{e(),o.requestAnimationFrame(()=>{o.add(pM(t,r))})}),o.dispose}function pM(t,n){var e,r;let a=io();if(!t)return a.dispose;let o=!1;a.add(()=>{o=!0});let u=(r=(e=t.getAnimations)==null?void 0:e.call(t).filter(s=>s instanceof CSSTransition))!=null?r:[];return u.length===0?(n(),a.dispose):(Promise.allSettled(u.map(s=>s.finished)).then(()=>{o||n()}),a.dispose)}function vM(t,{inFlight:n,prepare:e}){if(n!=null&&n.current){e();return}let r=t.style.transition;t.style.transition="none",e(),t.offsetHeight,t.style.transition=r}function mM(t,{container:n,accept:e,walk:r}){let a=F.useRef(e),o=F.useRef(r);F.useEffect(()=>{a.current=e,o.current=r},[e,r]),ir(()=>{if(!n||!t)return;let u=Vs(n);if(!u)return;let s=a.current,c=o.current,f=Object.assign(p=>s(p),{acceptNode:s}),h=u.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,f,!1);for(;h.nextNode();)c(h.currentNode)},[n,t,a,o])}function Zp(){return typeof window<"u"}function cc(t){return F_(t)?(t.nodeName||"").toLowerCase():"#document"}function ja(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function ti(t){var n;return(n=(F_(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function F_(t){return Zp()?t instanceof Node||t instanceof ja(t).Node:!1}function ca(t){return Zp()?t instanceof Element||t instanceof ja(t).Element:!1}function Yo(t){return Zp()?t instanceof HTMLElement||t instanceof ja(t).HTMLElement:!1}function I2(t){return!Zp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ja(t).ShadowRoot}function id(t){const{overflow:n,overflowX:e,overflowY:r,display:a}=bo(t);return/auto|scroll|overlay|hidden|clip/.test(n+r+e)&&!["inline","contents"].includes(a)}function gM(t){return["table","td","th"].includes(cc(t))}function Jp(t){return[":popover-open",":modal"].some(n=>{try{return t.matches(n)}catch{return!1}})}function R0(t){const n=A0(),e=ca(t)?bo(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>e[r]?e[r]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!n&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!n&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(e.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(e.contain||"").includes(r))}function yM(t){let n=Hu(t);for(;Yo(n)&&!oc(n);){if(R0(n))return n;if(Jp(n))return null;n=Hu(n)}return null}function A0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oc(t){return["html","body","#document"].includes(cc(t))}function bo(t){return ja(t).getComputedStyle(t)}function ev(t){return ca(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Hu(t){if(cc(t)==="html")return t;const n=t.assignedSlot||t.parentNode||I2(t)&&t.host||ti(t);return I2(n)?n.host:n}function B_(t){const n=Hu(t);return oc(n)?t.ownerDocument?t.ownerDocument.body:t.body:Yo(n)&&id(n)?n:B_(n)}function Wf(t,n,e){var r;n===void 0&&(n=[]),e===void 0&&(e=!0);const a=B_(t),o=a===((r=t.ownerDocument)==null?void 0:r.body),u=ja(a);if(o){const s=Ty(u);return n.concat(u,u.visualViewport||[],id(a)?a:[],s&&e?Wf(s):[])}return n.concat(a,Wf(a,[],e))}function Ty(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function bM(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(n=>{let{brand:e,version:r}=n;return e+"/"+r}).join(" "):navigator.userAgent}const Bs=Math.min,Qr=Math.max,qf=Math.round,Ih=Math.floor,$o=t=>({x:t,y:t}),xM={left:"right",right:"left",bottom:"top",top:"bottom"},wM={start:"end",end:"start"};function F2(t,n,e){return Qr(t,Bs(n,e))}function fc(t,n){return typeof t=="function"?t(n):t}function Vu(t){return t.split("-")[0]}function ud(t){return t.split("-")[1]}function P_(t){return t==="x"?"y":"x"}function L_(t){return t==="y"?"height":"width"}function Pu(t){return["top","bottom"].includes(Vu(t))?"y":"x"}function U_(t){return P_(Pu(t))}function EM(t,n,e){e===void 0&&(e=!1);const r=ud(t),a=U_(t),o=L_(a);let u=a==="x"?r===(e?"end":"start")?"right":"left":r==="start"?"bottom":"top";return n.reference[o]>n.floating[o]&&(u=pp(u)),[u,pp(u)]}function SM(t){const n=pp(t);return[Dy(t),n,Dy(n)]}function Dy(t){return t.replace(/start|end/g,n=>wM[n])}function _M(t,n,e){const r=["left","right"],a=["right","left"],o=["top","bottom"],u=["bottom","top"];switch(t){case"top":case"bottom":return e?n?a:r:n?r:a;case"left":case"right":return n?o:u;default:return[]}}function CM(t,n,e,r){const a=ud(t);let o=_M(Vu(t),e==="start",r);return a&&(o=o.map(u=>u+"-"+a),n&&(o=o.concat(o.map(Dy)))),o}function pp(t){return t.replace(/left|right|bottom|top/g,n=>xM[n])}function RM(t){return{top:0,right:0,bottom:0,left:0,...t}}function AM(t){return typeof t!="number"?RM(t):{top:t,right:t,bottom:t,left:t}}function vp(t){const{x:n,y:e,width:r,height:a}=t;return{width:r,height:a,top:e,left:n,right:n+r,bottom:e+a,x:n,y:e}}function B2(t,n,e){let{reference:r,floating:a}=t;const o=Pu(n),u=U_(n),s=L_(u),c=Vu(n),f=o==="y",h=r.x+r.width/2-a.width/2,p=r.y+r.height/2-a.height/2,m=r[s]/2-a[s]/2;let g;switch(c){case"top":g={x:h,y:r.y-a.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:p};break;case"left":g={x:r.x-a.width,y:p};break;default:g={x:r.x,y:r.y}}switch(ud(n)){case"start":g[u]-=m*(e&&f?-1:1);break;case"end":g[u]+=m*(e&&f?-1:1);break}return g}const TM=async(t,n,e)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:u}=e,s=o.filter(Boolean),c=await(u.isRTL==null?void 0:u.isRTL(n));let f=await u.getElementRects({reference:t,floating:n,strategy:a}),{x:h,y:p}=B2(f,r,c),m=r,g={},x=0;for(let E=0;E<s.length;E++){const{name:S,fn:_}=s[E],{x:A,y:T,data:N,reset:D}=await _({x:h,y:p,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:f,platform:u,elements:{reference:t,floating:n}});h=A??h,p=T??p,g={...g,[S]:{...g[S],...N}},D&&x<=50&&(x++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(f=D.rects===!0?await u.getElementRects({reference:t,floating:n,strategy:a}):D.rects),{x:h,y:p}=B2(f,m,c)),E=-1)}return{x:h,y:p,placement:m,strategy:a,middlewareData:g}};async function tv(t,n){var e;n===void 0&&(n={});const{x:r,y:a,platform:o,rects:u,elements:s,strategy:c}=t,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:m=!1,padding:g=0}=fc(n,t),x=AM(g),S=s[m?p==="floating"?"reference":"floating":p],_=vp(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(S)))==null||e?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:f,rootBoundary:h,strategy:c})),A=p==="floating"?{x:r,y:a,width:u.floating.width,height:u.floating.height}:u.reference,T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),N=await(o.isElement==null?void 0:o.isElement(T))?await(o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},D=vp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:A,offsetParent:T,strategy:c}):A);return{top:(_.top-D.top+x.top)/N.y,bottom:(D.bottom-_.bottom+x.bottom)/N.y,left:(_.left-D.left+x.left)/N.x,right:(D.right-_.right+x.right)/N.x}}const DM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var e,r;const{placement:a,middlewareData:o,rects:u,initialPlacement:s,platform:c,elements:f}=n,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:E=!0,...S}=fc(t,n);if((e=o.arrow)!=null&&e.alignmentOffset)return{};const _=Vu(a),A=Pu(s),T=Vu(s)===s,N=await(c.isRTL==null?void 0:c.isRTL(f.floating)),D=m||(T||!E?[pp(s)]:SM(s)),k=x!=="none";!m&&k&&D.push(...CM(s,E,x,N));const P=[s,...D],H=await tv(n,S),U=[];let j=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&U.push(H[_]),p){const he=EM(a,u,N);U.push(H[he[0]],H[he[1]])}if(j=[...j,{placement:a,overflows:U}],!U.every(he=>he<=0)){var G,K;const he=(((G=o.flip)==null?void 0:G.index)||0)+1,q=P[he];if(q){var be;const ee=p==="alignment"?A!==Pu(q):!1,J=((be=j[0])==null?void 0:be.overflows[0])>0;if(!ee||J)return{data:{index:he,overflows:j},reset:{placement:q}}}let ne=(K=j.filter(ee=>ee.overflows[0]<=0).sort((ee,J)=>ee.overflows[1]-J.overflows[1])[0])==null?void 0:K.placement;if(!ne)switch(g){case"bestFit":{var pe;const ee=(pe=j.filter(J=>{if(k){const L=Pu(J.placement);return L===A||L==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(L=>L>0).reduce((L,se)=>L+se,0)]).sort((J,L)=>J[1]-L[1])[0])==null?void 0:pe[0];ee&&(ne=ee);break}case"initialPlacement":ne=s;break}if(a!==ne)return{reset:{placement:ne}}}return{}}}};async function NM(t,n){const{placement:e,platform:r,elements:a}=t,o=await(r.isRTL==null?void 0:r.isRTL(a.floating)),u=Vu(e),s=ud(e),c=Pu(e)==="y",f=["left","top"].includes(u)?-1:1,h=o&&c?-1:1,p=fc(n,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return s&&typeof x=="number"&&(g=s==="end"?x*-1:x),c?{x:g*h,y:m*f}:{x:m*f,y:g*h}}const kM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var e,r;const{x:a,y:o,placement:u,middlewareData:s}=n,c=await NM(n,t);return u===((e=s.offset)==null?void 0:e.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:u}}}}},OM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:e,y:r,placement:a}=n,{mainAxis:o=!0,crossAxis:u=!1,limiter:s={fn:S=>{let{x:_,y:A}=S;return{x:_,y:A}}},...c}=fc(t,n),f={x:e,y:r},h=await tv(n,c),p=Pu(Vu(a)),m=P_(p);let g=f[m],x=f[p];if(o){const S=m==="y"?"top":"left",_=m==="y"?"bottom":"right",A=g+h[S],T=g-h[_];g=F2(A,g,T)}if(u){const S=p==="y"?"top":"left",_=p==="y"?"bottom":"right",A=x+h[S],T=x-h[_];x=F2(A,x,T)}const E=s.fn({...n,[m]:g,[p]:x});return{...E,data:{x:E.x-e,y:E.y-r,enabled:{[m]:o,[p]:u}}}}}},MM=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){var e,r;const{placement:a,rects:o,platform:u,elements:s}=n,{apply:c=()=>{},...f}=fc(t,n),h=await tv(n,f),p=Vu(a),m=ud(a),g=Pu(a)==="y",{width:x,height:E}=o.floating;let S,_;p==="top"||p==="bottom"?(S=p,_=m===(await(u.isRTL==null?void 0:u.isRTL(s.floating))?"start":"end")?"left":"right"):(_=p,S=m==="end"?"top":"bottom");const A=E-h.top-h.bottom,T=x-h.left-h.right,N=Bs(E-h[S],A),D=Bs(x-h[_],T),k=!n.middlewareData.shift;let P=N,H=D;if((e=n.middlewareData.shift)!=null&&e.enabled.x&&(H=T),(r=n.middlewareData.shift)!=null&&r.enabled.y&&(P=A),k&&!m){const j=Qr(h.left,0),G=Qr(h.right,0),K=Qr(h.top,0),be=Qr(h.bottom,0);g?H=x-2*(j!==0||G!==0?j+G:Qr(h.left,h.right)):P=E-2*(K!==0||be!==0?K+be:Qr(h.top,h.bottom))}await c({...n,availableWidth:H,availableHeight:P});const U=await u.getDimensions(s.floating);return x!==U.width||E!==U.height?{reset:{rects:!0}}:{}}}};function z_(t){const n=bo(t);let e=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const a=Yo(t),o=a?t.offsetWidth:e,u=a?t.offsetHeight:r,s=qf(e)!==o||qf(r)!==u;return s&&(e=o,r=u),{width:e,height:r,$:s}}function T0(t){return ca(t)?t:t.contextElement}function Yl(t){const n=T0(t);if(!Yo(n))return $o(1);const e=n.getBoundingClientRect(),{width:r,height:a,$:o}=z_(n);let u=(o?qf(e.width):e.width)/r,s=(o?qf(e.height):e.height)/a;return(!u||!Number.isFinite(u))&&(u=1),(!s||!Number.isFinite(s))&&(s=1),{x:u,y:s}}const IM=$o(0);function j_(t){const n=ja(t);return!A0()||!n.visualViewport?IM:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function FM(t,n,e){return n===void 0&&(n=!1),!e||n&&e!==ja(t)?!1:n}function Ps(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=!1);const a=t.getBoundingClientRect(),o=T0(t);let u=$o(1);n&&(r?ca(r)&&(u=Yl(r)):u=Yl(t));const s=FM(o,e,r)?j_(o):$o(0);let c=(a.left+s.x)/u.x,f=(a.top+s.y)/u.y,h=a.width/u.x,p=a.height/u.y;if(o){const m=ja(o),g=r&&ca(r)?ja(r):r;let x=m,E=Ty(x);for(;E&&r&&g!==x;){const S=Yl(E),_=E.getBoundingClientRect(),A=bo(E),T=_.left+(E.clientLeft+parseFloat(A.paddingLeft))*S.x,N=_.top+(E.clientTop+parseFloat(A.paddingTop))*S.y;c*=S.x,f*=S.y,h*=S.x,p*=S.y,c+=T,f+=N,x=ja(E),E=Ty(x)}}return vp({width:h,height:p,x:c,y:f})}function D0(t,n){const e=ev(t).scrollLeft;return n?n.left+e:Ps(ti(t)).left+e}function H_(t,n,e){e===void 0&&(e=!1);const r=t.getBoundingClientRect(),a=r.left+n.scrollLeft-(e?0:D0(t,r)),o=r.top+n.scrollTop;return{x:a,y:o}}function BM(t){let{elements:n,rect:e,offsetParent:r,strategy:a}=t;const o=a==="fixed",u=ti(r),s=n?Jp(n.floating):!1;if(r===u||s&&o)return e;let c={scrollLeft:0,scrollTop:0},f=$o(1);const h=$o(0),p=Yo(r);if((p||!p&&!o)&&((cc(r)!=="body"||id(u))&&(c=ev(r)),Yo(r))){const g=Ps(r);f=Yl(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const m=u&&!p&&!o?H_(u,c,!0):$o(0);return{width:e.width*f.x,height:e.height*f.y,x:e.x*f.x-c.scrollLeft*f.x+h.x+m.x,y:e.y*f.y-c.scrollTop*f.y+h.y+m.y}}function PM(t){return Array.from(t.getClientRects())}function LM(t){const n=ti(t),e=ev(t),r=t.ownerDocument.body,a=Qr(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),o=Qr(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let u=-e.scrollLeft+D0(t);const s=-e.scrollTop;return bo(r).direction==="rtl"&&(u+=Qr(n.clientWidth,r.clientWidth)-a),{width:a,height:o,x:u,y:s}}function UM(t,n){const e=ja(t),r=ti(t),a=e.visualViewport;let o=r.clientWidth,u=r.clientHeight,s=0,c=0;if(a){o=a.width,u=a.height;const f=A0();(!f||f&&n==="fixed")&&(s=a.offsetLeft,c=a.offsetTop)}return{width:o,height:u,x:s,y:c}}function zM(t,n){const e=Ps(t,!0,n==="fixed"),r=e.top+t.clientTop,a=e.left+t.clientLeft,o=Yo(t)?Yl(t):$o(1),u=t.clientWidth*o.x,s=t.clientHeight*o.y,c=a*o.x,f=r*o.y;return{width:u,height:s,x:c,y:f}}function P2(t,n,e){let r;if(n==="viewport")r=UM(t,e);else if(n==="document")r=LM(ti(t));else if(ca(n))r=zM(n,e);else{const a=j_(t);r={x:n.x-a.x,y:n.y-a.y,width:n.width,height:n.height}}return vp(r)}function V_(t,n){const e=Hu(t);return e===n||!ca(e)||oc(e)?!1:bo(e).position==="fixed"||V_(e,n)}function jM(t,n){const e=n.get(t);if(e)return e;let r=Wf(t,[],!1).filter(s=>ca(s)&&cc(s)!=="body"),a=null;const o=bo(t).position==="fixed";let u=o?Hu(t):t;for(;ca(u)&&!oc(u);){const s=bo(u),c=R0(u);!c&&s.position==="fixed"&&(a=null),(o?!c&&!a:!c&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||id(u)&&!c&&V_(t,u))?r=r.filter(h=>h!==u):a=s,u=Hu(u)}return n.set(t,r),r}function HM(t){let{element:n,boundary:e,rootBoundary:r,strategy:a}=t;const u=[...e==="clippingAncestors"?Jp(n)?[]:jM(n,this._c):[].concat(e),r],s=u[0],c=u.reduce((f,h)=>{const p=P2(n,h,a);return f.top=Qr(p.top,f.top),f.right=Bs(p.right,f.right),f.bottom=Bs(p.bottom,f.bottom),f.left=Qr(p.left,f.left),f},P2(n,s,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function VM(t){const{width:n,height:e}=z_(t);return{width:n,height:e}}function WM(t,n,e){const r=Yo(n),a=ti(n),o=e==="fixed",u=Ps(t,!0,o,n);let s={scrollLeft:0,scrollTop:0};const c=$o(0);function f(){c.x=D0(a)}if(r||!r&&!o)if((cc(n)!=="body"||id(a))&&(s=ev(n)),r){const g=Ps(n,!0,o,n);c.x=g.x+n.clientLeft,c.y=g.y+n.clientTop}else a&&f();o&&!r&&a&&f();const h=a&&!r&&!o?H_(a,s):$o(0),p=u.left+s.scrollLeft-c.x-h.x,m=u.top+s.scrollTop-c.y-h.y;return{x:p,y:m,width:u.width,height:u.height}}function Ng(t){return bo(t).position==="static"}function L2(t,n){if(!Yo(t)||bo(t).position==="fixed")return null;if(n)return n(t);let e=t.offsetParent;return ti(t)===e&&(e=e.ownerDocument.body),e}function W_(t,n){const e=ja(t);if(Jp(t))return e;if(!Yo(t)){let a=Hu(t);for(;a&&!oc(a);){if(ca(a)&&!Ng(a))return a;a=Hu(a)}return e}let r=L2(t,n);for(;r&&gM(r)&&Ng(r);)r=L2(r,n);return r&&oc(r)&&Ng(r)&&!R0(r)?e:r||yM(t)||e}const qM=async function(t){const n=this.getOffsetParent||W_,e=this.getDimensions,r=await e(t.floating);return{reference:WM(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $M(t){return bo(t).direction==="rtl"}const GM={convertOffsetParentRelativeRectToViewportRelativeRect:BM,getDocumentElement:ti,getClippingRect:HM,getOffsetParent:W_,getElementRects:qM,getClientRects:PM,getDimensions:VM,getScale:Yl,isElement:ca,isRTL:$M};function q_(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function KM(t,n){let e=null,r;const a=ti(t);function o(){var s;clearTimeout(r),(s=e)==null||s.disconnect(),e=null}function u(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),o();const f=t.getBoundingClientRect(),{left:h,top:p,width:m,height:g}=f;if(s||n(),!m||!g)return;const x=Ih(p),E=Ih(a.clientWidth-(h+m)),S=Ih(a.clientHeight-(p+g)),_=Ih(h),T={rootMargin:-x+"px "+-E+"px "+-S+"px "+-_+"px",threshold:Qr(0,Bs(1,c))||1};let N=!0;function D(k){const P=k[0].intersectionRatio;if(P!==c){if(!N)return u();P?u(!1,P):r=setTimeout(()=>{u(!1,1e-7)},1e3)}P===1&&!q_(f,t.getBoundingClientRect())&&u(),N=!1}try{e=new IntersectionObserver(D,{...T,root:a.ownerDocument})}catch{e=new IntersectionObserver(D,T)}e.observe(t)}return u(!0),o}function XM(t,n,e,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=T0(t),h=a||o?[...f?Wf(f):[],...Wf(n)]:[];h.forEach(_=>{a&&_.addEventListener("scroll",e,{passive:!0}),o&&_.addEventListener("resize",e)});const p=f&&s?KM(f,e):null;let m=-1,g=null;u&&(g=new ResizeObserver(_=>{let[A]=_;A&&A.target===f&&g&&(g.unobserve(n),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var T;(T=g)==null||T.observe(n)})),e()}),f&&!c&&g.observe(f),g.observe(n));let x,E=c?Ps(t):null;c&&S();function S(){const _=Ps(t);E&&!q_(E,_)&&e(),E=_,x=requestAnimationFrame(S)}return e(),()=>{var _;h.forEach(A=>{a&&A.removeEventListener("scroll",e),o&&A.removeEventListener("resize",e)}),p==null||p(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const kg=tv,YM=kM,QM=OM,ZM=DM,JM=MM,e4=(t,n,e)=>{const r=new Map,a={platform:GM,...e},o={...a.platform,_c:r};return TM(t,n,{...a,platform:o})};var ep=typeof document<"u"?F.useLayoutEffect:F.useEffect;function mp(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(typeof t=="function"&&t.toString()===n.toString())return!0;let e,r,a;if(t&&n&&typeof t=="object"){if(Array.isArray(t)){if(e=t.length,e!==n.length)return!1;for(r=e;r--!==0;)if(!mp(t[r],n[r]))return!1;return!0}if(a=Object.keys(t),e=a.length,e!==Object.keys(n).length)return!1;for(r=e;r--!==0;)if(!{}.hasOwnProperty.call(n,a[r]))return!1;for(r=e;r--!==0;){const o=a[r];if(!(o==="_owner"&&t.$$typeof)&&!mp(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}function $_(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function U2(t,n){const e=$_(t);return Math.round(n*e)/e}function Og(t){const n=F.useRef(t);return ep(()=>{n.current=t}),n}function t4(t){t===void 0&&(t={});const{placement:n="bottom",strategy:e="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:u}={},transform:s=!0,whileElementsMounted:c,open:f}=t,[h,p]=F.useState({x:0,y:0,strategy:e,placement:n,middlewareData:{},isPositioned:!1}),[m,g]=F.useState(r);mp(m,r)||g(r);const[x,E]=F.useState(null),[S,_]=F.useState(null),A=F.useCallback(ee=>{ee!==k.current&&(k.current=ee,E(ee))},[]),T=F.useCallback(ee=>{ee!==P.current&&(P.current=ee,_(ee))},[]),N=o||x,D=u||S,k=F.useRef(null),P=F.useRef(null),H=F.useRef(h),U=c!=null,j=Og(c),G=Og(a),K=Og(f),be=F.useCallback(()=>{if(!k.current||!P.current)return;const ee={placement:n,strategy:e,middleware:m};G.current&&(ee.platform=G.current),e4(k.current,P.current,ee).then(J=>{const L={...J,isPositioned:K.current!==!1};pe.current&&!mp(H.current,L)&&(H.current=L,Fi.flushSync(()=>{p(L)}))})},[m,n,e,G,K]);ep(()=>{f===!1&&H.current.isPositioned&&(H.current.isPositioned=!1,p(ee=>({...ee,isPositioned:!1})))},[f]);const pe=F.useRef(!1);ep(()=>(pe.current=!0,()=>{pe.current=!1}),[]),ep(()=>{if(N&&(k.current=N),D&&(P.current=D),N&&D){if(j.current)return j.current(N,D,be);be()}},[N,D,be,j,U]);const he=F.useMemo(()=>({reference:k,floating:P,setReference:A,setFloating:T}),[A,T]),q=F.useMemo(()=>({reference:N,floating:D}),[N,D]),ne=F.useMemo(()=>{const ee={position:e,left:0,top:0};if(!q.floating)return ee;const J=U2(q.floating,h.x),L=U2(q.floating,h.y);return s?{...ee,transform:"translate("+J+"px, "+L+"px)",...$_(q.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:J,top:L}},[e,s,q.floating,h.x,h.y]);return F.useMemo(()=>({...h,update:be,refs:he,elements:q,floatingStyles:ne}),[h,be,he,q,ne])}const G_=(t,n)=>({...YM(t),options:[t,n]}),n4=(t,n)=>({...QM(t),options:[t,n]}),r4=(t,n)=>({...ZM(t),options:[t,n]}),a4=(t,n)=>({...JM(t),options:[t,n]}),K_={...dy},o4=K_.useInsertionEffect,i4=o4||(t=>t());function X_(t){const n=F.useRef(()=>{});return i4(()=>{n.current=t}),F.useCallback(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n.current==null?void 0:n.current(...r)},[])}var Ny=typeof document<"u"?F.useLayoutEffect:F.useEffect;let z2=!1,u4=0;const j2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+u4++;function s4(){const[t,n]=F.useState(()=>z2?j2():void 0);return Ny(()=>{t==null&&n(j2())},[]),F.useEffect(()=>{z2=!0},[]),t}const l4=K_.useId,c4=l4||s4;function f4(){const t=new Map;return{emit(n,e){var r;(r=t.get(n))==null||r.forEach(a=>a(e))},on(n,e){t.set(n,[...t.get(n)||[],e])},off(n,e){var r;t.set(n,((r=t.get(n))==null?void 0:r.filter(a=>a!==e))||[])}}}const d4=F.createContext(null),h4=F.createContext(null),p4=()=>{var t;return((t=F.useContext(d4))==null?void 0:t.id)||null},v4=()=>F.useContext(h4),m4="data-floating-ui-focusable";function g4(t){const{open:n=!1,onOpenChange:e,elements:r}=t,a=c4(),o=F.useRef({}),[u]=F.useState(()=>f4()),s=p4()!=null,[c,f]=F.useState(r.reference),h=X_((g,x,E)=>{o.current.openEvent=g?x:void 0,u.emit("openchange",{open:g,event:x,reason:E,nested:s}),e==null||e(g,x,E)}),p=F.useMemo(()=>({setPositionReference:f}),[]),m=F.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return F.useMemo(()=>({dataRef:o,open:n,onOpenChange:h,elements:m,events:u,floatingId:a,refs:p}),[n,h,m,u,a,p])}function y4(t){t===void 0&&(t={});const{nodeId:n}=t,e=g4({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||e,a=r.elements,[o,u]=F.useState(null),[s,c]=F.useState(null),h=(a==null?void 0:a.domReference)||o,p=F.useRef(null),m=v4();Ny(()=>{h&&(p.current=h)},[h]);const g=t4({...t,elements:{...a,...s&&{reference:s}}}),x=F.useCallback(T=>{const N=ca(T)?{getBoundingClientRect:()=>T.getBoundingClientRect(),contextElement:T}:T;c(N),g.refs.setReference(N)},[g.refs]),E=F.useCallback(T=>{(ca(T)||T===null)&&(p.current=T,u(T)),(ca(g.refs.reference.current)||g.refs.reference.current===null||T!==null&&!ca(T))&&g.refs.setReference(T)},[g.refs]),S=F.useMemo(()=>({...g.refs,setReference:E,setPositionReference:x,domReference:p}),[g.refs,E,x]),_=F.useMemo(()=>({...g.elements,domReference:h}),[g.elements,h]),A=F.useMemo(()=>({...g,...r,refs:S,elements:_,nodeId:n}),[g,S,_,n,r]);return Ny(()=>{r.dataRef.current.floatingContext=A;const T=m==null?void 0:m.nodesRef.current.find(N=>N.id===n);T&&(T.context=A)}),F.useMemo(()=>({...g,context:A,refs:S,elements:_}),[g,S,_,A])}const H2="active",V2="selected";function Mg(t,n,e){const r=new Map,a=e==="item";let o=t;if(a&&t){const{[H2]:u,[V2]:s,...c}=t;o=c}return{...e==="floating"&&{tabIndex:-1,[m4]:""},...o,...n.map(u=>{const s=u?u[e]:null;return typeof s=="function"?t?s(t):null:s}).concat(t).reduce((u,s)=>(s&&Object.entries(s).forEach(c=>{let[f,h]=c;if(!(a&&[H2,V2].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof h=="function"){var p;(p=r.get(f))==null||p.push(h),u[f]=function(){for(var m,g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];return(m=r.get(f))==null?void 0:m.map(S=>S(...x)).find(S=>S!==void 0)}}}else u[f]=h}),u),{})}}function b4(t){t===void 0&&(t=[]);const n=t.map(s=>s==null?void 0:s.reference),e=t.map(s=>s==null?void 0:s.floating),r=t.map(s=>s==null?void 0:s.item),a=F.useCallback(s=>Mg(s,t,"reference"),n),o=F.useCallback(s=>Mg(s,t,"floating"),e),u=F.useCallback(s=>Mg(s,t,"item"),r);return F.useMemo(()=>({getReferenceProps:a,getFloatingProps:o,getItemProps:u}),[a,o,u])}function W2(t,n){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:n}}}}const x4=t=>({name:"inner",options:t,async fn(n){const{listRef:e,overflowRef:r,onFallbackChange:a,offset:o=0,index:u=0,minItemsVisible:s=4,referenceOverflowThreshold:c=0,scrollRef:f,...h}=fc(t,n),{rects:p,elements:{floating:m}}=n,g=e.current[u],x=(f==null?void 0:f.current)||m,E=m.clientTop||x.clientTop,S=m.clientTop!==0,_=x.clientTop!==0,A=m===x;if(!g)return{};const T={...n,...await G_(-g.offsetTop-m.clientTop-p.reference.height/2-g.offsetHeight/2-o).fn(n)},N=await kg(W2(T,x.scrollHeight+E+m.clientTop),h),D=await kg(T,{...h,elementContext:"reference"}),k=Qr(0,N.top),P=T.y+k,j=(x.scrollHeight>x.clientHeight?G=>G:qf)(Qr(0,x.scrollHeight+(S&&A||_?E*2:0)-k-Qr(0,N.bottom)));if(x.style.maxHeight=j+"px",x.scrollTop=k,a){const G=x.offsetHeight<g.offsetHeight*Bs(s,e.current.length)-1||D.top>=-c||D.bottom>=-c;Fi.flushSync(()=>a(G))}return r&&(r.current=await kg(W2({...T,y:P},x.offsetHeight+E+m.clientTop),h)),{y:P}}});function w4(t,n){const{open:e,elements:r}=t,{enabled:a=!0,overflowRef:o,scrollRef:u,onChange:s}=n,c=X_(s),f=F.useRef(!1),h=F.useRef(null),p=F.useRef(null);F.useEffect(()=>{if(!a)return;function g(E){if(E.ctrlKey||!x||o.current==null)return;const S=E.deltaY,_=o.current.top>=-.5,A=o.current.bottom>=-.5,T=x.scrollHeight-x.clientHeight,N=S<0?-1:1,D=S<0?"max":"min";x.scrollHeight<=x.clientHeight||(!_&&S>0||!A&&S<0?(E.preventDefault(),Fi.flushSync(()=>{c(k=>k+Math[D](S,T*N))})):/firefox/i.test(bM())&&(x.scrollTop+=S))}const x=(u==null?void 0:u.current)||r.floating;if(e&&x)return x.addEventListener("wheel",g),requestAnimationFrame(()=>{h.current=x.scrollTop,o.current!=null&&(p.current={...o.current})}),()=>{h.current=null,p.current=null,x.removeEventListener("wheel",g)}},[a,e,r.floating,o,u,c]);const m=F.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const g=(u==null?void 0:u.current)||r.floating;if(!(!o.current||!g||!f.current)){if(h.current!==null){const x=g.scrollTop-h.current;(o.current.bottom<-.5&&x<-1||o.current.top<-.5&&x>1)&&Fi.flushSync(()=>c(E=>E+x))}requestAnimationFrame(()=>{h.current=g.scrollTop})}}}),[r.floating,c,o,u]);return F.useMemo(()=>a?{floating:m}:{},[a,m])}let dc=F.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});dc.displayName="FloatingContext";let N0=F.createContext(null);N0.displayName="PlacementContext";function E4(t){return F.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function S4(){return F.useContext(dc).setReference}function _4(){return F.useContext(dc).getReferenceProps}function C4(){let{getFloatingProps:t,slot:n}=F.useContext(dc);return F.useCallback((...e)=>Object.assign({},t(...e),{"data-anchor":n.anchor}),[t,n])}function R4(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let n=F.useContext(N0),e=F.useMemo(()=>t,[JSON.stringify(t,(a,o)=>{var u;return(u=o==null?void 0:o.outerHTML)!=null?u:o})]);ir(()=>{n==null||n(e??null)},[n,e]);let r=F.useContext(dc);return F.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let q2=4;function A4({children:t,enabled:n=!0}){let[e,r]=F.useState(null),[a,o]=F.useState(0),u=F.useRef(null),[s,c]=F.useState(null);T4(s);let f=n&&e!==null&&s!==null,{to:h="bottom",gap:p=0,offset:m=0,padding:g=0,inner:x}=D4(e,s),[E,S="center"]=h.split(" ");ir(()=>{f&&o(0)},[f]);let{refs:_,floatingStyles:A,context:T}=y4({open:f,placement:E==="selection"?S==="center"?"bottom":`bottom-${S}`:S==="center"?`${E}`:`${E}-${S}`,strategy:"absolute",transform:!1,middleware:[G_({mainAxis:E==="selection"?0:p,crossAxis:m}),n4({padding:g}),E!=="selection"&&r4({padding:g}),E==="selection"&&x?x4({...x,padding:g,overflowRef:u,offset:a,minItemsVisible:q2,referenceOverflowThreshold:g,onFallbackChange(G){var K,be;if(!G)return;let pe=T.elements.floating;if(!pe)return;let he=parseFloat(getComputedStyle(pe).scrollPaddingBottom)||0,q=Math.min(q2,pe.childElementCount),ne=0,ee=0;for(let J of(be=(K=T.elements.floating)==null?void 0:K.childNodes)!=null?be:[])if(Ui(J)){let L=J.offsetTop,se=L+J.clientHeight+he,Re=pe.scrollTop,Se=Re+pe.clientHeight;if(L>=Re&&se<=Se)q--;else{ee=Math.max(0,Math.min(se,Se)-Math.max(L,Re)),ne=J.clientHeight;break}}q>=1&&o(J=>{let L=ne*q-ee+he;return J>=L?J:L})}}):null,a4({padding:g,apply({availableWidth:G,availableHeight:K,elements:be}){Object.assign(be.floating.style,{overflow:"auto",maxWidth:`${G}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${K}px)`})}})].filter(Boolean),whileElementsMounted:XM}),[N=E,D=S]=T.placement.split("-");E==="selection"&&(N="selection");let k=F.useMemo(()=>({anchor:[N,D].filter(Boolean).join(" ")}),[N,D]),P=w4(T,{overflowRef:u,onChange:o}),{getReferenceProps:H,getFloatingProps:U}=b4([P]),j=nn(G=>{c(G),_.setFloating(G)});return F.createElement(N0.Provider,{value:r},F.createElement(dc.Provider,{value:{setFloating:j,setReference:_.setReference,styles:A,getReferenceProps:H,getFloatingProps:U,slot:k}},t))}function T4(t){ir(()=>{if(!t)return;let n=new MutationObserver(()=>{let e=window.getComputedStyle(t).maxHeight,r=parseFloat(e);if(isNaN(r))return;let a=parseInt(e);isNaN(a)||r!==a&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return n.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{n.disconnect()}},[t])}function D4(t,n){var e,r,a;let o=Ig((e=t==null?void 0:t.gap)!=null?e:"var(--anchor-gap, 0)",n),u=Ig((r=t==null?void 0:t.offset)!=null?r:"var(--anchor-offset, 0)",n),s=Ig((a=t==null?void 0:t.padding)!=null?a:"var(--anchor-padding, 0)",n);return{...t,gap:o,offset:u,padding:s}}function Ig(t,n,e=void 0){let r=Xp(),a=nn((c,f)=>{if(c==null)return[e,null];if(typeof c=="number")return[c,null];if(typeof c=="string"){if(!f)return[e,null];let h=$2(c,f);return[h,p=>{let m=Y_(c);{let g=m.map(x=>window.getComputedStyle(f).getPropertyValue(x));r.requestAnimationFrame(function x(){r.nextFrame(x);let E=!1;for(let[_,A]of m.entries()){let T=window.getComputedStyle(f).getPropertyValue(A);if(g[_]!==T){g[_]=T,E=!0;break}}if(!E)return;let S=$2(c,f);h!==S&&(p(S),h=S)})}return r.dispose}]}return[e,null]}),o=F.useMemo(()=>a(t,n)[0],[t,n]),[u=o,s]=F.useState();return ir(()=>{let[c,f]=a(t,n);if(s(c),!!f)return f(s)},[t,n]),u}function Y_(t){let n=/var\((.*)\)/.exec(t);if(n){let e=n[1].indexOf(",");if(e===-1)return[n[1]];let r=n[1].slice(0,e).trim(),a=n[1].slice(e+1).trim();return a?[r,...Y_(a)]:[r]}return[]}function $2(t,n){let e=document.createElement("div");n.appendChild(e),e.style.setProperty("margin-top","0px","important"),e.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(e).marginTop)||0;return n.removeChild(e),r}let nv=F.createContext(null);nv.displayName="OpenClosedContext";var Pi=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Pi||{});function Q_(){return F.useContext(nv)}function Z_({value:t,children:n}){return On.createElement(nv.Provider,{value:t},n)}function N4({children:t}){return On.createElement(nv.Provider,{value:null},t)}function k4(t){throw new Error("Unexpected object: "+t)}var Yn=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Yn||{});function Fh(t,n){let e=n.resolveItems();if(e.length<=0)return null;let r=n.resolveActiveIndex(),a=r??-1;switch(t.focus){case 0:{for(let o=0;o<e.length;++o)if(!n.resolveDisabled(e[o],o,e))return o;return r}case 1:{a===-1&&(a=e.length);for(let o=a-1;o>=0;--o)if(!n.resolveDisabled(e[o],o,e))return o;return r}case 2:{for(let o=a+1;o<e.length;++o)if(!n.resolveDisabled(e[o],o,e))return o;return r}case 3:{for(let o=e.length-1;o>=0;--o)if(!n.resolveDisabled(e[o],o,e))return o;return r}case 4:{for(let o=0;o<e.length;++o)if(n.resolveId(e[o],o,e)===t.id)return o;return r}case 5:return null;default:k4(t)}}function J_(t){let n=nn(t),e=F.useRef(!1);F.useEffect(()=>(e.current=!1,()=>{e.current=!0,c_(()=>{e.current&&n()})}),[n])}function O4(){let t=typeof document>"u";return"useSyncExternalStore"in dy?(n=>n.useSyncExternalStore)(dy)(()=>()=>{},()=>!1,()=>!t):!1}function M4(){let t=O4(),[n,e]=F.useState(Os.isHandoffComplete);return n&&Os.isHandoffComplete===!1&&e(!1),F.useEffect(()=>{n!==!0&&e(!0)},[n]),F.useEffect(()=>Os.handoff(),[]),t?!1:n}let I4=F.createContext(!1);function F4(){return F.useContext(I4)}function B4(t){let n=F4(),e=F.useContext(tC),[r,a]=F.useState(()=>{var o;if(!n&&e!==null)return(o=e.current)!=null?o:null;if(Os.isServer)return null;let u=t==null?void 0:t.getElementById("headlessui-portal-root");if(u)return u;if(t===null)return null;let s=t.createElement("div");return s.setAttribute("id","headlessui-portal-root"),t.body.appendChild(s)});return F.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),F.useEffect(()=>{n||e!==null&&a(e.current)},[e,a,n]),r}let eC=F.Fragment,P4=da(function(t,n){let{ownerDocument:e=null,...r}=t,a=F.useRef(null),o=uo(y_(g=>{a.current=g}),n),u=Ay(a),s=e??u,c=B4(s),[f]=F.useState(()=>{var g;return Os.isServer?null:(g=s==null?void 0:s.createElement("div"))!=null?g:null}),h=F.useContext(j4),p=M4();ir(()=>{!c||!f||c.contains(f)||(f.setAttribute("data-headlessui-portal",""),c.appendChild(f))},[c,f]),ir(()=>{if(f&&h)return h.register(f)},[h,f]),J_(()=>{var g;!c||!f||(x0(f)&&c.contains(f)&&c.removeChild(f),c.childNodes.length<=0&&((g=c.parentElement)==null||g.removeChild(c)))});let m=fa();return p?!c||!f?null:Fi.createPortal(m({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:eC,name:"Portal"}),f):null});function L4(t,n){let e=uo(n),{enabled:r=!0,ownerDocument:a,...o}=t,u=fa();return r?On.createElement(P4,{...o,ownerDocument:a,ref:e}):u({ourProps:{ref:e},theirProps:o,slot:{},defaultTag:eC,name:"Portal"})}let U4=F.Fragment,tC=F.createContext(null);function z4(t,n){let{target:e,...r}=t,a={ref:uo(n)},o=fa();return On.createElement(tC.Provider,{value:e},o({ourProps:a,theirProps:r,defaultTag:U4,name:"Popover.Group"}))}let j4=F.createContext(null),H4=da(L4),V4=da(z4),W4=Object.assign(H4,{Group:V4});var G2;let q4=(G2=On.startTransition)!=null?G2:function(t){t()};var $4=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))($4||{}),G4=(t=>(t[t.ToggleDisclosure=0]="ToggleDisclosure",t[t.CloseDisclosure=1]="CloseDisclosure",t[t.SetButtonId=2]="SetButtonId",t[t.SetPanelId=3]="SetPanelId",t[t.SetButtonElement=4]="SetButtonElement",t[t.SetPanelElement=5]="SetPanelElement",t))(G4||{});let K4={0:t=>({...t,disclosureState:Li(t.disclosureState,{0:1,1:0})}),1:t=>t.disclosureState===1?t:{...t,disclosureState:1},2(t,n){return t.buttonId===n.buttonId?t:{...t,buttonId:n.buttonId}},3(t,n){return t.panelId===n.panelId?t:{...t,panelId:n.panelId}},4(t,n){return t.buttonElement===n.element?t:{...t,buttonElement:n.element}},5(t,n){return t.panelElement===n.element?t:{...t,panelElement:n.element}}},k0=F.createContext(null);k0.displayName="DisclosureContext";function O0(t){let n=F.useContext(k0);if(n===null){let e=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,O0),e}return n}let M0=F.createContext(null);M0.displayName="DisclosureAPIContext";function nC(t){let n=F.useContext(M0);if(n===null){let e=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,nC),e}return n}let I0=F.createContext(null);I0.displayName="DisclosurePanelContext";function X4(){return F.useContext(I0)}function Y4(t,n){return Li(n.type,K4,t,n)}let Q4=F.Fragment;function Z4(t,n){let{defaultOpen:e=!1,...r}=t,a=F.useRef(null),o=uo(n,y_(E=>{a.current=E},t.as===void 0||t.as===F.Fragment)),u=F.useReducer(Y4,{disclosureState:e?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:s,buttonId:c},f]=u,h=nn(E=>{f({type:1});let S=Vs(a);if(!S||!c)return;let _=E?Ii(E)?E:"current"in E&&Ii(E.current)?E.current:S.getElementById(c):S.getElementById(c);_==null||_.focus()}),p=F.useMemo(()=>({close:h}),[h]),m=F.useMemo(()=>({open:s===0,close:h}),[s,h]),g={ref:o},x=fa();return On.createElement(k0.Provider,{value:u},On.createElement(M0.Provider,{value:p},On.createElement(S3,{value:h},On.createElement(Z_,{value:Li(s,{0:Pi.Open,1:Pi.Closed})},x({ourProps:g,theirProps:r,slot:m,defaultTag:Q4,name:"Disclosure"})))))}let J4="button";function eI(t,n){let e=F.useId(),{id:r=`headlessui-disclosure-button-${e}`,disabled:a=!1,autoFocus:o=!1,...u}=t,[s,c]=O0("Disclosure.Button"),f=X4(),h=f===null?!1:f===s.panelId,p=F.useRef(null),m=uo(p,n,nn(U=>{if(!h)return c({type:4,element:U})}));F.useEffect(()=>{if(!h)return c({type:2,buttonId:r}),()=>{c({type:2,buttonId:null})}},[r,c,h]);let g=nn(U=>{var j;if(h){if(s.disclosureState===1)return;switch(U.key){case Vn.Space:case Vn.Enter:U.preventDefault(),U.stopPropagation(),c({type:0}),(j=s.buttonElement)==null||j.focus();break}}else switch(U.key){case Vn.Space:case Vn.Enter:U.preventDefault(),U.stopPropagation(),c({type:0});break}}),x=nn(U=>{switch(U.key){case Vn.Space:U.preventDefault();break}}),E=nn(U=>{var j;m_(U.currentTarget)||a||(h?(c({type:0}),(j=s.buttonElement)==null||j.focus()):c({type:0}))}),{isFocusVisible:S,focusProps:_}=l_({autoFocus:o}),{isHovered:A,hoverProps:T}=s_({isDisabled:a}),{pressed:N,pressProps:D}=f_({disabled:a}),k=F.useMemo(()=>({open:s.disclosureState===0,hover:A,active:N,disabled:a,focus:S,autofocus:o}),[s,A,N,S,a,o]),P=O_(t,s.buttonElement),H=hp(h?{ref:m,type:P,disabled:a||void 0,autoFocus:o,onKeyDown:g,onClick:E}:{ref:m,id:r,type:P,"aria-expanded":s.disclosureState===0,"aria-controls":s.panelElement?s.panelId:void 0,disabled:a||void 0,autoFocus:o,onKeyDown:g,onKeyUp:x,onClick:E},_,T,D);return fa()({ourProps:H,theirProps:u,slot:k,defaultTag:J4,name:"Disclosure.Button"})}let tI="div",nI=Vf.RenderStrategy|Vf.Static;function rI(t,n){let e=F.useId(),{id:r=`headlessui-disclosure-panel-${e}`,transition:a=!1,...o}=t,[u,s]=O0("Disclosure.Panel"),{close:c}=nC("Disclosure.Panel"),[f,h]=F.useState(null),p=uo(n,nn(A=>{q4(()=>s({type:5,element:A}))}),h);F.useEffect(()=>(s({type:3,panelId:r}),()=>{s({type:3,panelId:null})}),[r,s]);let m=Q_(),[g,x]=I_(a,f,m!==null?(m&Pi.Open)===Pi.Open:u.disclosureState===0),E=F.useMemo(()=>({open:u.disclosureState===0,close:c}),[u.disclosureState,c]),S={ref:p,id:r,...M_(x)},_=fa();return On.createElement(N4,null,On.createElement(I0.Provider,{value:u.panelId},_({ourProps:S,theirProps:o,slot:E,defaultTag:tI,features:nI,visible:g,name:"Disclosure.Panel"})))}let aI=da(Z4),tp=da(eI),rC=da(rI),oI=Object.assign(aI,{Button:tp,Panel:rC});function iI(t,n){let e=F.useRef({left:0,top:0});if(ir(()=>{if(!n)return;let a=n.getBoundingClientRect();a&&(e.current=a)},[t,n]),n==null||!t||n===document.activeElement)return!1;let r=n.getBoundingClientRect();return r.top!==e.current.top||r.left!==e.current.left}let K2=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function X2(t){var n,e;let r=(n=t.innerText)!=null?n:"",a=t.cloneNode(!0);if(!Ui(a))return r;let o=!1;for(let s of a.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),o=!0;let u=o?(e=a.innerText)!=null?e:"":r;return K2.test(u)&&(u=u.replace(K2,"")),u}function uI(t){let n=t.getAttribute("aria-label");if(typeof n=="string")return n.trim();let e=t.getAttribute("aria-labelledby");if(e){let r=e.split(" ").map(a=>{let o=document.getElementById(a);if(o){let u=o.getAttribute("aria-label");return typeof u=="string"?u.trim():X2(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return X2(t).trim()}function sI(t){let n=F.useRef(""),e=F.useRef("");return nn(()=>{let r=t.current;if(!r)return"";let a=r.innerText;if(n.current===a)return e.current;let o=uI(r).trim().toLowerCase();return n.current=a,e.current=o,o})}var lI=Object.defineProperty,cI=(t,n,e)=>n in t?lI(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,Y2=(t,n,e)=>(cI(t,typeof n!="symbol"?n+"":n,e),e),Br=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Br||{}),gp=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(gp||{}),mn=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItems=5]="RegisterItems",t[t.UnregisterItems=6]="UnregisterItems",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t[t.SortItems=9]="SortItems",t))(mn||{});function Q2(t,n=e=>e){let e=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,r=N_(n(t.items.slice()),o=>o.dataRef.current.domRef.current),a=e?r.indexOf(e):null;return a===-1&&(a=null),{items:r,activeItemIndex:a}}let fI={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,pendingFocus:{focus:Yn.Nothing},menuState:1}},0(t,n){return t.menuState===0?t:{...t,__demoMode:!1,pendingFocus:n.focus,menuState:0}},2:(t,n)=>{var e,r,a,o,u;if(t.menuState===1)return t;let s={...t,searchQuery:"",activationTrigger:(e=n.trigger)!=null?e:1,__demoMode:!1};if(n.focus===Yn.Nothing)return{...s,activeItemIndex:null};if(n.focus===Yn.Specific)return{...s,activeItemIndex:t.items.findIndex(h=>h.id===n.id)};if(n.focus===Yn.Previous){let h=t.activeItemIndex;if(h!==null){let p=t.items[h].dataRef.current.domRef,m=Fh(n,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:g=>g.id,resolveDisabled:g=>g.dataRef.current.disabled});if(m!==null){let g=t.items[m].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===g.current||((a=g.current)==null?void 0:a.previousElementSibling)===null)return{...s,activeItemIndex:m}}}}else if(n.focus===Yn.Next){let h=t.activeItemIndex;if(h!==null){let p=t.items[h].dataRef.current.domRef,m=Fh(n,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:g=>g.id,resolveDisabled:g=>g.dataRef.current.disabled});if(m!==null){let g=t.items[m].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===g.current||((u=g.current)==null?void 0:u.nextElementSibling)===null)return{...s,activeItemIndex:m}}}}let c=Q2(t),f=Fh(n,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...s,...c,activeItemIndex:f}},3:(t,n)=>{let e=t.searchQuery!==""?0:1,r=t.searchQuery+n.value.toLowerCase(),a=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+e).concat(t.items.slice(0,t.activeItemIndex+e)):t.items).find(u=>{var s;return((s=u.dataRef.current.textValue)==null?void 0:s.startsWith(r))&&!u.dataRef.current.disabled}),o=a?t.items.indexOf(a):-1;return o===-1||o===t.activeItemIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,n)=>{let e=t.items.concat(n.items.map(a=>a)),r=t.activeItemIndex;return t.pendingFocus.focus!==Yn.Nothing&&(r=Fh(t.pendingFocus,{resolveItems:()=>e,resolveActiveIndex:()=>t.activeItemIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled})),{...t,items:e,activeItemIndex:r,pendingFocus:{focus:Yn.Nothing},pendingShouldSort:!0}},6:(t,n)=>{let e=t.items,r=[],a=new Set(n.items);for(let[o,u]of e.entries())if(a.has(u.id)&&(r.push(o),a.delete(u.id),a.size===0))break;if(r.length>0){e=e.slice();for(let o of r.reverse())e.splice(o,1)}return{...t,items:e,activationTrigger:1}},7:(t,n)=>t.buttonElement===n.element?t:{...t,buttonElement:n.element},8:(t,n)=>t.itemsElement===n.element?t:{...t,itemsElement:n.element},9:t=>t.pendingShouldSort?{...t,...Q2(t),pendingShouldSort:!1}:t},dI=class aC extends S_{constructor(n){super(n),Y2(this,"actions",{registerItem:S2(()=>{let e=[],r=new Set;return[(a,o)=>{r.has(o)||(r.add(o),e.push({id:a,dataRef:o}))},()=>(r.clear(),this.send({type:5,items:e.splice(0)}))]}),unregisterItem:S2(()=>{let e=[];return[r=>e.push(r),()=>this.send({type:6,items:e.splice(0)})]})}),Y2(this,"selectors",{activeDescendantId(e){var r;let a=e.activeItemIndex,o=e.items;return a===null||(r=o[a])==null?void 0:r.id},isActive(e,r){var a;let o=e.activeItemIndex,u=e.items;return o!==null?((a=u[o])==null?void 0:a.id)===r:!1},shouldScrollIntoView(e,r){return e.__demoMode||e.menuState!==0||e.activationTrigger===0?!1:this.isActive(e,r)}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let e=this.state.id,r=S0.get(null);this.disposables.add(r.on(C_.Push,a=>{!r.selectors.isTop(a,e)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(e)),this.on(1,()=>r.actions.pop(e))}}static new({id:n,__demoMode:e=!1}){return new aC({id:n,__demoMode:e,menuState:e?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Yn.Nothing}})}reduce(n,e){return Li(e.type,fI,n,e)}};const oC=F.createContext(null);function F0(t){let n=F.useContext(oC);if(n===null){let e=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,iC),e}return n}function iC({id:t,__demoMode:n=!1}){let e=F.useMemo(()=>dI.new({id:t,__demoMode:n}),[]);return J_(()=>e.dispose()),e}let hI=F.Fragment;function pI(t,n){let e=F.useId(),{__demoMode:r=!1,...a}=t,o=iC({id:e,__demoMode:r}),[u,s,c]=Vo(o,S=>[S.menuState,S.itemsElement,S.buttonElement]),f=uo(n),h=S0.get(null),p=Vo(h,F.useCallback(S=>h.selectors.isTop(S,e),[h,e]));Q3(p,[c,s],(S,_)=>{var A;o.send({type:mn.CloseMenu}),C0(_,_0.Loose)||(S.preventDefault(),(A=o.state.buttonElement)==null||A.focus())});let m=nn(()=>{o.send({type:mn.CloseMenu})}),g=F.useMemo(()=>({open:u===Br.Open,close:m}),[u,m]),x={ref:f},E=fa();return On.createElement(A4,null,On.createElement(oC.Provider,{value:o},On.createElement(Z_,{value:Li(u,{[Br.Open]:Pi.Open,[Br.Closed]:Pi.Closed})},E({ourProps:x,theirProps:a,slot:g,defaultTag:hI,name:"Menu"}))))}let vI="button";function mI(t,n){let e=F0("Menu.Button"),r=F.useId(),{id:a=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:u=!1,...s}=t,c=F.useRef(null),f=_4(),h=uo(n,c,S4(),nn(j=>e.send({type:mn.SetButtonElement,element:j}))),p=nn(j=>{switch(j.key){case Vn.Space:case Vn.Enter:case Vn.ArrowDown:j.preventDefault(),j.stopPropagation(),e.send({type:mn.OpenMenu,focus:{focus:Yn.First}});break;case Vn.ArrowUp:j.preventDefault(),j.stopPropagation(),e.send({type:mn.OpenMenu,focus:{focus:Yn.Last}});break}}),m=nn(j=>{switch(j.key){case Vn.Space:j.preventDefault();break}}),[g,x,E]=Vo(e,j=>[j.menuState,j.buttonElement,j.itemsElement]),S=g===Br.Open;eM(S,{trigger:x,action:F.useCallback(j=>{if(x!=null&&x.contains(j.target))return Mh.Ignore;let G=j.target.closest('[role="menuitem"]:not([data-disabled])');return Ui(G)?Mh.Select(G):E!=null&&E.contains(j.target)?Mh.Ignore:Mh.Close},[x,E]),close:F.useCallback(()=>e.send({type:mn.CloseMenu}),[]),select:F.useCallback(j=>j.click(),[])});let _=nn(j=>{var G;if(j.button===0){if(m_(j.currentTarget))return j.preventDefault();o||(g===Br.Open?(Fi.flushSync(()=>e.send({type:mn.CloseMenu})),(G=c.current)==null||G.focus({preventScroll:!0})):(j.preventDefault(),e.send({type:mn.OpenMenu,focus:{focus:Yn.Nothing},trigger:gp.Pointer})))}}),{isFocusVisible:A,focusProps:T}=l_({autoFocus:u}),{isHovered:N,hoverProps:D}=s_({isDisabled:o}),{pressed:k,pressProps:P}=f_({disabled:o}),H=F.useMemo(()=>({open:g===Br.Open,active:k||g===Br.Open,disabled:o,hover:N,focus:A,autofocus:u}),[g,N,A,k,o,u]),U=hp(f(),{ref:h,id:a,type:O_(t,c.current),"aria-haspopup":"menu","aria-controls":E==null?void 0:E.id,"aria-expanded":g===Br.Open,disabled:o||void 0,autoFocus:u,onKeyDown:p,onKeyUp:m,onPointerDown:_},T,D,P);return fa()({ourProps:U,theirProps:s,slot:H,defaultTag:vI,name:"Menu.Button"})}let gI="div",yI=Vf.RenderStrategy|Vf.Static;function bI(t,n){let e=F.useId(),{id:r=`headlessui-menu-items-${e}`,anchor:a,portal:o=!1,modal:u=!0,transition:s=!1,...c}=t,f=E4(a),h=F0("Menu.Items"),[p,m]=R4(f),g=C4(),[x,E]=F.useState(null),S=uo(n,f?p:null,nn(J=>h.send({type:mn.SetItemsElement,element:J})),E),[_,A]=Vo(h,J=>[J.menuState,J.buttonElement]),T=Ay(A),N=Ay(x);f&&(o=!0);let D=Q_(),[k,P]=I_(s,x,D!==null?(D&Pi.Open)===Pi.Open:_===Br.Open);L3(k,A,()=>{h.send({type:mn.CloseMenu})});let H=Vo(h,J=>J.__demoMode),U=H?!1:u&&_===Br.Open;sM(U,N);let j=H?!1:u&&_===Br.Open;P3(j,{allowed:F.useCallback(()=>[A,x],[A,x])});let G=_!==Br.Open,K=iI(G,A)?!1:k;F.useEffect(()=>{let J=x;J&&_===Br.Open&&J!==(N==null?void 0:N.activeElement)&&J.focus({preventScroll:!0})},[_,x,N]),mM(_===Br.Open,{container:x,accept(J){return J.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:J.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(J){J.setAttribute("role","none")}});let be=Xp(),pe=nn(J=>{var L,se,Re;switch(be.dispose(),J.key){case Vn.Space:if(h.state.searchQuery!=="")return J.preventDefault(),J.stopPropagation(),h.send({type:mn.Search,value:J.key});case Vn.Enter:if(J.preventDefault(),J.stopPropagation(),h.state.activeItemIndex!==null){let{dataRef:Se}=h.state.items[h.state.activeItemIndex];(se=(L=Se.current)==null?void 0:L.domRef.current)==null||se.click()}h.send({type:mn.CloseMenu}),D_(h.state.buttonElement);break;case Vn.ArrowDown:return J.preventDefault(),J.stopPropagation(),h.send({type:mn.GoToItem,focus:Yn.Next});case Vn.ArrowUp:return J.preventDefault(),J.stopPropagation(),h.send({type:mn.GoToItem,focus:Yn.Previous});case Vn.Home:case Vn.PageUp:return J.preventDefault(),J.stopPropagation(),h.send({type:mn.GoToItem,focus:Yn.First});case Vn.End:case Vn.PageDown:return J.preventDefault(),J.stopPropagation(),h.send({type:mn.GoToItem,focus:Yn.Last});case Vn.Escape:J.preventDefault(),J.stopPropagation(),Fi.flushSync(()=>h.send({type:mn.CloseMenu})),(Re=h.state.buttonElement)==null||Re.focus({preventScroll:!0});break;case Vn.Tab:J.preventDefault(),J.stopPropagation(),Fi.flushSync(()=>h.send({type:mn.CloseMenu})),G3(h.state.buttonElement,J.shiftKey?Ry.Previous:Ry.Next);break;default:J.key.length===1&&(h.send({type:mn.Search,value:J.key}),be.setTimeout(()=>h.send({type:mn.ClearSearch}),350));break}}),he=nn(J=>{switch(J.key){case Vn.Space:J.preventDefault();break}}),q=F.useMemo(()=>({open:_===Br.Open}),[_]),ne=hp(f?g():{},{"aria-activedescendant":Vo(h,h.selectors.activeDescendantId),"aria-labelledby":Vo(h,J=>{var L;return(L=J.buttonElement)==null?void 0:L.id}),id:r,onKeyDown:pe,onKeyUp:he,role:"menu",tabIndex:_===Br.Open?0:void 0,ref:S,style:{...c.style,...m,"--button-width":C3(A,!0).width},...M_(P)}),ee=fa();return On.createElement(W4,{enabled:o?t.static||k:!1,ownerDocument:T},ee({ourProps:ne,theirProps:c,slot:q,defaultTag:gI,features:yI,visible:K,name:"Menu.Items"}))}let xI=F.Fragment;function wI(t,n){let e=F.useId(),{id:r=`headlessui-menu-item-${e}`,disabled:a=!1,...o}=t,u=F0("Menu.Item"),s=Vo(u,G=>u.selectors.isActive(G,r)),c=F.useRef(null),f=uo(n,c),h=Vo(u,G=>u.selectors.shouldScrollIntoView(G,r));ir(()=>{if(h)return io().requestAnimationFrame(()=>{var G,K;(K=(G=c.current)==null?void 0:G.scrollIntoView)==null||K.call(G,{block:"nearest"})})},[h,c]);let p=sI(c),m=F.useRef({disabled:a,domRef:c,get textValue(){return p()}});ir(()=>{m.current.disabled=a},[m,a]),ir(()=>(u.actions.registerItem(r,m),()=>u.actions.unregisterItem(r)),[m,r]);let g=nn(()=>{u.send({type:mn.CloseMenu})}),x=nn(G=>{if(a)return G.preventDefault();u.send({type:mn.CloseMenu}),D_(u.state.buttonElement)}),E=nn(()=>{if(a)return u.send({type:mn.GoToItem,focus:Yn.Nothing});u.send({type:mn.GoToItem,focus:Yn.Specific,id:r})}),S=lM(),_=nn(G=>{S.update(G),!a&&(s||u.send({type:mn.GoToItem,focus:Yn.Specific,id:r,trigger:gp.Pointer}))}),A=nn(G=>{S.wasMoved(G)&&(a||s||u.send({type:mn.GoToItem,focus:Yn.Specific,id:r,trigger:gp.Pointer}))}),T=nn(G=>{S.wasMoved(G)&&(a||s&&u.send({type:mn.GoToItem,focus:Yn.Nothing}))}),[N,D]=x_(),[k,P]=p3(),H=F.useMemo(()=>({active:s,focus:s,disabled:a,close:g}),[s,a,g]),U={id:r,ref:f,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":N,"aria-describedby":k,disabled:void 0,onClick:x,onFocus:E,onPointerEnter:_,onMouseEnter:_,onPointerMove:A,onMouseMove:A,onPointerLeave:T,onMouseLeave:T},j=fa();return On.createElement(D,null,On.createElement(P,null,j({ourProps:U,theirProps:o,slot:H,defaultTag:xI,name:"Menu.Item"})))}let EI="div";function SI(t,n){let[e,r]=x_(),a=t,o={ref:n,"aria-labelledby":e,role:"group"},u=fa();return On.createElement(r,null,u({ourProps:o,theirProps:a,slot:{},defaultTag:EI,name:"Menu.Section"}))}let _I="header";function CI(t,n){let e=F.useId(),{id:r=`headlessui-menu-heading-${e}`,...a}=t,o=E0();ir(()=>o.register(r),[r,o.register]);let u={id:r,ref:n,role:"presentation",...o.props};return fa()({ourProps:u,theirProps:a,slot:{},defaultTag:_I,name:"Menu.Heading"})}let RI="div";function AI(t,n){let e=t,r={ref:n,role:"separator"};return fa()({ourProps:r,theirProps:e,slot:{},defaultTag:RI,name:"Menu.Separator"})}let TI=da(pI),uC=da(mI),sC=da(bI),lC=da(wI),DI=da(SI),NI=da(CI),kI=da(AI),OI=Object.assign(TI,{Button:uC,Items:sC,Item:lC,Section:DI,Heading:NI,Separator:kI});function MI({title:t,titleId:n,...e},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},e),t?F.createElement("title",{id:n},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const II=F.forwardRef(MI);function FI({title:t,titleId:n,...e},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},e),t?F.createElement("title",{id:n},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Z2=F.forwardRef(FI);function BI({title:t,titleId:n,...e},r){return F.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},e),t?F.createElement("title",{id:n},t):null,F.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const PI=F.forwardRef(BI);var np={exports:{}},LI=np.exports,J2;function UI(){return J2||(J2=1,function(t,n){(function(e,r){t.exports=r()})(LI,function(){var e=function(y,w){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,O){R.__proto__=O}||function(R,O){for(var I in O)Object.prototype.hasOwnProperty.call(O,I)&&(R[I]=O[I])})(y,w)},r=function(){return(r=Object.assign||function(y){for(var w,R=1,O=arguments.length;R<O;R++)for(var I in w=arguments[R])Object.prototype.hasOwnProperty.call(w,I)&&(y[I]=w[I]);return y}).apply(this,arguments)};function a(y,w,R){for(var O,I=0,B=w.length;I<B;I++)!O&&I in w||((O=O||Array.prototype.slice.call(w,0,I))[I]=w[I]);return y.concat(O||Array.prototype.slice.call(w))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:wD,u=Object.keys,s=Array.isArray;function c(y,w){return typeof w!="object"||u(w).forEach(function(R){y[R]=w[R]}),y}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var f=Object.getPrototypeOf,h={}.hasOwnProperty;function p(y,w){return h.call(y,w)}function m(y,w){typeof w=="function"&&(w=w(f(y))),(typeof Reflect>"u"?u:Reflect.ownKeys)(w).forEach(function(R){x(y,R,w[R])})}var g=Object.defineProperty;function x(y,w,R,O){g(y,w,c(R&&p(R,"get")&&typeof R.get=="function"?{get:R.get,set:R.set,configurable:!0}:{value:R,configurable:!0,writable:!0},O))}function E(y){return{from:function(w){return y.prototype=Object.create(w.prototype),x(y.prototype,"constructor",y),{extend:m.bind(null,y.prototype)}}}}var S=Object.getOwnPropertyDescriptor,_=[].slice;function A(y,w,R){return _.call(y,w,R)}function T(y,w){return w(y)}function N(y){if(!y)throw new Error("Assertion Failed")}function D(y){o.setImmediate?setImmediate(y):setTimeout(y,0)}function k(y,w){if(typeof w=="string"&&p(y,w))return y[w];if(!w)return y;if(typeof w!="string"){for(var R=[],O=0,I=w.length;O<I;++O){var B=k(y,w[O]);R.push(B)}return R}var W=w.indexOf(".");if(W!==-1){var X=y[w.substr(0,W)];return X==null?void 0:k(X,w.substr(W+1))}}function P(y,w,R){if(y&&w!==void 0&&!("isFrozen"in Object&&Object.isFrozen(y)))if(typeof w!="string"&&"length"in w){N(typeof R!="string"&&"length"in R);for(var O=0,I=w.length;O<I;++O)P(y,w[O],R[O])}else{var B,W,X=w.indexOf(".");X!==-1?(B=w.substr(0,X),(W=w.substr(X+1))===""?R===void 0?s(y)&&!isNaN(parseInt(B))?y.splice(B,1):delete y[B]:y[B]=R:P(X=!(X=y[B])||!p(y,B)?y[B]={}:X,W,R)):R===void 0?s(y)&&!isNaN(parseInt(w))?y.splice(w,1):delete y[w]:y[w]=R}}function H(y){var w,R={};for(w in y)p(y,w)&&(R[w]=y[w]);return R}var U=[].concat;function j(y){return U.apply([],y)}var _n="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map(function(y){return["Int","Uint","Float"].map(function(w){return w+y+"Array"})}))).filter(function(y){return o[y]}),G=new Set(_n.map(function(y){return o[y]})),K=null;function be(y){return K=new WeakMap,y=function w(R){if(!R||typeof R!="object")return R;var O=K.get(R);if(O)return O;if(s(R)){O=[],K.set(R,O);for(var I=0,B=R.length;I<B;++I)O.push(w(R[I]))}else if(G.has(R.constructor))O=R;else{var W,X=f(R);for(W in O=X===Object.prototype?{}:Object.create(X),K.set(R,O),R)p(R,W)&&(O[W]=w(R[W]))}return O}(y),K=null,y}var pe={}.toString;function he(y){return pe.call(y).slice(8,-1)}var q=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof q=="symbol"?function(y){var w;return y!=null&&(w=y[q])&&w.apply(y)}:function(){return null};function ee(y,w){return w=y.indexOf(w),0<=w&&y.splice(w,1),0<=w}var J={};function L(y){var w,R,O,I;if(arguments.length===1){if(s(y))return y.slice();if(this===J&&typeof y=="string")return[y];if(I=ne(y)){for(R=[];!(O=I.next()).done;)R.push(O.value);return R}if(y==null)return[y];if(typeof(w=y.length)!="number")return[y];for(R=new Array(w);w--;)R[w]=y[w];return R}for(w=arguments.length,R=new Array(w);w--;)R[w]=arguments[w];return R}var se=typeof Symbol<"u"?function(y){return y[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},$n=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ua=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat($n),Re={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Se(y,w){this.name=y,this.message=w}function je(y,w){return y+". Errors: "+Object.keys(w).map(function(R){return w[R].toString()}).filter(function(R,O,I){return I.indexOf(R)===O}).join(`
`)}function Xe(y,w,R,O){this.failures=w,this.failedKeys=O,this.successCount=R,this.message=je(y,w)}function Ve(y,w){this.name="BulkError",this.failures=Object.keys(w).map(function(R){return w[R]}),this.failuresByPos=w,this.message=je(y,this.failures)}E(Se).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(Xe).from(Se),E(Ve).from(Se);var yt=ua.reduce(function(y,w){return y[w]=w+"Error",y},{}),ot=Se,He=ua.reduce(function(y,w){var R=w+"Error";function O(I,B){this.name=R,I?typeof I=="string"?(this.message="".concat(I).concat(B?`
 `+B:""),this.inner=B||null):typeof I=="object"&&(this.message="".concat(I.name," ").concat(I.message),this.inner=I):(this.message=Re[w]||R,this.inner=null)}return E(O).from(ot),y[w]=O,y},{});He.Syntax=SyntaxError,He.Type=TypeError,He.Range=RangeError;var kt=$n.reduce(function(y,w){return y[w+"Error"]=He[w],y},{}),wt=ua.reduce(function(y,w){return["Syntax","Type","Range"].indexOf(w)===-1&&(y[w+"Error"]=He[w]),y},{});function it(){}function It(y){return y}function Qt(y,w){return y==null||y===It?w:function(R){return w(y(R))}}function Jt(y,w){return function(){y.apply(this,arguments),w.apply(this,arguments)}}function cn(y,w){return y===it?w:function(){var R=y.apply(this,arguments);R!==void 0&&(arguments[0]=R);var O=this.onsuccess,I=this.onerror;this.onsuccess=null,this.onerror=null;var B=w.apply(this,arguments);return O&&(this.onsuccess=this.onsuccess?Jt(O,this.onsuccess):O),I&&(this.onerror=this.onerror?Jt(I,this.onerror):I),B!==void 0?B:R}}function Sn(y,w){return y===it?w:function(){y.apply(this,arguments);var R=this.onsuccess,O=this.onerror;this.onsuccess=this.onerror=null,w.apply(this,arguments),R&&(this.onsuccess=this.onsuccess?Jt(R,this.onsuccess):R),O&&(this.onerror=this.onerror?Jt(O,this.onerror):O)}}function Ur(y,w){return y===it?w:function(R){var O=y.apply(this,arguments);c(R,O);var I=this.onsuccess,B=this.onerror;return this.onsuccess=null,this.onerror=null,R=w.apply(this,arguments),I&&(this.onsuccess=this.onsuccess?Jt(I,this.onsuccess):I),B&&(this.onerror=this.onerror?Jt(B,this.onerror):B),O===void 0?R===void 0?void 0:R:c(O,R)}}function Zn(y,w){return y===it?w:function(){return w.apply(this,arguments)!==!1&&y.apply(this,arguments)}}function aa(y,w){return y===it?w:function(){var R=y.apply(this,arguments);if(R&&typeof R.then=="function"){for(var O=this,I=arguments.length,B=new Array(I);I--;)B[I]=arguments[I];return R.then(function(){return w.apply(O,B)})}return w.apply(this,arguments)}}wt.ModifyError=Xe,wt.DexieError=Se,wt.BulkError=Ve;var gn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qn(y){gn=y}var Mn={},ha=100,_n=typeof Promise>"u"?[]:function(){var y=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[y,f(y),y];var w=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[w,f(w),y]}(),$n=_n[0],ua=_n[1],_n=_n[2],ua=ua&&ua.then,Vt=$n&&$n.constructor,Cn=!!_n,yn=function(y,w){jr.push([y,w]),Dr&&(queueMicrotask(Ju),Dr=!1)},ii=!0,Dr=!0,pa=[],zr=[],oa=It,Un={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:it,pgp:!1,env:{},finalize:it},rt=Un,jr=[],Va=0,lo=[];function Ze(y){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var w=this._PSD=rt;if(typeof y!="function"){if(y!==Mn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$i(this,this._value))}this._state=null,this._value=null,++w.ref,function R(O,I){try{I(function(B){if(O._state===null){if(B===O)throw new TypeError("A promise cannot be resolved with itself.");var W=O._lib&&te();B&&typeof B.then=="function"?R(O,function(X,oe){B instanceof Ze?B._then(X,oe):B.then(X,oe)}):(O._state=!0,O._value=B,Co(O)),W&&ge()}},$i.bind(null,O))}catch(B){$i(O,B)}}(this,y)}var So={get:function(){var y=rt,w=dt;function R(O,I){var B=this,W=!y.global&&(y!==rt||w!==dt),X=W&&!Ft(),oe=new Ze(function(ue,de){co(B,new _o(gr(O,y,W,X),gr(I,y,W,X),ue,de,y))});return this._consoleTask&&(oe._consoleTask=this._consoleTask),oe}return R.prototype=Mn,R},set:function(y){x(this,"then",y&&y.prototype===Mn?So:{get:function(){return y},set:So.set})}};function _o(y,w,R,O,I){this.onFulfilled=typeof y=="function"?y:null,this.onRejected=typeof w=="function"?w:null,this.resolve=R,this.reject=O,this.psd=I}function $i(y,w){var R,O;zr.push(w),y._state===null&&(R=y._lib&&te(),w=oa(w),y._state=!1,y._value=w,O=y,pa.some(function(I){return I._value===O._value})||pa.push(O),Co(y),R&&ge())}function Co(y){var w=y._listeners;y._listeners=[];for(var R=0,O=w.length;R<O;++R)co(y,w[R]);var I=y._PSD;--I.ref||I.finalize(),Va===0&&(++Va,yn(function(){--Va==0&&Ce()},[]))}function co(y,w){if(y._state!==null){var R=y._state?w.onFulfilled:w.onRejected;if(R===null)return(y._state?w.resolve:w.reject)(y._value);++w.psd.ref,++Va,yn(Zu,[R,y,w])}else y._listeners.push(w)}function Zu(y,w,R){try{var O,I=w._value;!w._state&&zr.length&&(zr=[]),O=gn&&w._consoleTask?w._consoleTask.run(function(){return y(I)}):y(I),w._state||zr.indexOf(I)!==-1||function(B){for(var W=pa.length;W;)if(pa[--W]._value===B._value)return pa.splice(W,1)}(w),R.resolve(O)}catch(B){R.reject(B)}finally{--Va==0&&Ce(),--R.psd.ref||R.psd.finalize()}}function Ju(){Hr(Un,function(){te()&&ge()})}function te(){var y=ii;return Dr=ii=!1,y}function ge(){var y,w,R;do for(;0<jr.length;)for(y=jr,jr=[],R=y.length,w=0;w<R;++w){var O=y[w];O[0].apply(null,O[1])}while(0<jr.length);Dr=ii=!0}function Ce(){var y=pa;pa=[],y.forEach(function(O){O._PSD.onunhandled.call(null,O._value,O)});for(var w=lo.slice(0),R=w.length;R;)w[--R]()}function Pe(y){return new Ze(Mn,!1,y)}function Le(y,w){var R=rt;return function(){var O=te(),I=rt;try{return Lt(R,!0),y.apply(this,arguments)}catch(B){w&&w(B)}finally{Lt(I,!1),O&&ge()}}}m(Ze.prototype,{then:So,_then:function(y,w){co(this,new _o(null,null,y,w,rt))},catch:function(y){if(arguments.length===1)return this.then(null,y);var w=y,R=arguments[1];return typeof w=="function"?this.then(null,function(O){return(O instanceof w?R:Pe)(O)}):this.then(null,function(O){return(O&&O.name===w?R:Pe)(O)})},finally:function(y){return this.then(function(w){return Ze.resolve(y()).then(function(){return w})},function(w){return Ze.resolve(y()).then(function(){return Pe(w)})})},timeout:function(y,w){var R=this;return y<1/0?new Ze(function(O,I){var B=setTimeout(function(){return I(new He.Timeout(w))},y);R.then(O,I).finally(clearTimeout.bind(null,B))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&x(Ze.prototype,Symbol.toStringTag,"Dexie.Promise"),Un.env=Wt(),m(Ze,{all:function(){var y=L.apply(null,arguments).map(sn);return new Ze(function(w,R){y.length===0&&w([]);var O=y.length;y.forEach(function(I,B){return Ze.resolve(I).then(function(W){y[B]=W,--O||w(y)},R)})})},resolve:function(y){return y instanceof Ze?y:y&&typeof y.then=="function"?new Ze(function(w,R){y.then(w,R)}):new Ze(Mn,!0,y)},reject:Pe,race:function(){var y=L.apply(null,arguments).map(sn);return new Ze(function(w,R){y.map(function(O){return Ze.resolve(O).then(w,R)})})},PSD:{get:function(){return rt},set:function(y){return rt=y}},totalEchoes:{get:function(){return dt}},newPSD:at,usePSD:Hr,scheduler:{get:function(){return yn},set:function(y){yn=y}},rejectionMapper:{get:function(){return oa},set:function(y){oa=y}},follow:function(y,w){return new Ze(function(R,O){return at(function(I,B){var W=rt;W.unhandleds=[],W.onunhandled=B,W.finalize=Jt(function(){var X,oe=this;X=function(){oe.unhandleds.length===0?I():B(oe.unhandleds[0])},lo.push(function ue(){X(),lo.splice(lo.indexOf(ue),1)}),++Va,yn(function(){--Va==0&&Ce()},[])},W.finalize),y()},w,R,O)})}}),Vt&&(Vt.allSettled&&x(Ze,"allSettled",function(){var y=L.apply(null,arguments).map(sn);return new Ze(function(w){y.length===0&&w([]);var R=y.length,O=new Array(R);y.forEach(function(I,B){return Ze.resolve(I).then(function(W){return O[B]={status:"fulfilled",value:W}},function(W){return O[B]={status:"rejected",reason:W}}).then(function(){return--R||w(O)})})})}),Vt.any&&typeof AggregateError<"u"&&x(Ze,"any",function(){var y=L.apply(null,arguments).map(sn);return new Ze(function(w,R){y.length===0&&R(new AggregateError([]));var O=y.length,I=new Array(O);y.forEach(function(B,W){return Ze.resolve(B).then(function(X){return w(X)},function(X){I[W]=X,--O||R(new AggregateError(I))})})})}),Vt.withResolvers&&(Ze.withResolvers=Vt.withResolvers));var Ye={awaits:0,echoes:0,id:0},xt=0,et=[],ft=0,dt=0,Et=0;function at(y,w,R,O){var I=rt,B=Object.create(I);return B.parent=I,B.ref=0,B.global=!1,B.id=++Et,Un.env,B.env=Cn?{Promise:Ze,PromiseProp:{value:Ze,configurable:!0,writable:!0},all:Ze.all,race:Ze.race,allSettled:Ze.allSettled,any:Ze.any,resolve:Ze.resolve,reject:Ze.reject}:{},w&&c(B,w),++I.ref,B.finalize=function(){--this.parent.ref||this.parent.finalize()},O=Hr(B,y,R,O),B.ref===0&&B.finalize(),O}function bt(){return Ye.id||(Ye.id=++xt),++Ye.awaits,Ye.echoes+=ha,Ye.id}function Ft(){return!!Ye.awaits&&(--Ye.awaits==0&&(Ye.id=0),Ye.echoes=Ye.awaits*ha,!0)}function sn(y){return Ye.echoes&&y&&y.constructor===Vt?(bt(),y.then(function(w){return Ft(),w},function(w){return Ft(),Zt(w)})):y}function Tn(){var y=et[et.length-1];et.pop(),Lt(y,!1)}function Lt(y,w){var R,O=rt;(w?!Ye.echoes||ft++&&y===rt:!ft||--ft&&y===rt)||queueMicrotask(w?(function(I){++dt,Ye.echoes&&--Ye.echoes!=0||(Ye.echoes=Ye.awaits=Ye.id=0),et.push(rt),Lt(I,!0)}).bind(null,y):Tn),y!==rt&&(rt=y,O===Un&&(Un.env=Wt()),Cn&&(R=Un.env.Promise,w=y.env,(O.global||y.global)&&(Object.defineProperty(o,"Promise",w.PromiseProp),R.all=w.all,R.race=w.race,R.resolve=w.resolve,R.reject=w.reject,w.allSettled&&(R.allSettled=w.allSettled),w.any&&(R.any=w.any))))}function Wt(){var y=o.Promise;return Cn?{Promise:y,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:y.all,race:y.race,allSettled:y.allSettled,any:y.any,resolve:y.resolve,reject:y.reject}:{}}function Hr(y,w,R,O,I){var B=rt;try{return Lt(y,!0),w(R,O,I)}finally{Lt(B,!1)}}function gr(y,w,R,O){return typeof y!="function"?y:function(){var I=rt;R&&bt(),Lt(w,!0);try{return y.apply(this,arguments)}finally{Lt(I,!1),O&&queueMicrotask(Ft)}}}function Vr(y){Promise===Vt&&Ye.echoes===0?ft===0?y():enqueueNativeMicroTask(y):setTimeout(y,0)}(""+ua).indexOf("[native code]")===-1&&(bt=Ft=it);var Zt=Ze.reject,Wr="",yr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Gi="String expected.",ur=[],va="__dbnames",Bt="readonly",Jn="readwrite";function sr(y,w){return y?w?function(){return y.apply(this,arguments)&&w.apply(this,arguments)}:y:w}var ma={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wa(y){return typeof y!="string"||/\./.test(y)?function(w){return w}:function(w){return w[y]===void 0&&y in w&&delete(w=be(w))[y],w}}function bn(){throw He.Type()}function Ot(y,w){try{var R=Ki(y),O=Ki(w);if(R!==O)return R==="Array"?1:O==="Array"?-1:R==="binary"?1:O==="binary"?-1:R==="string"?1:O==="string"?-1:R==="Date"?1:O!=="Date"?NaN:-1;switch(R){case"number":case"Date":case"string":return w<y?1:y<w?-1:0;case"binary":return function(I,B){for(var W=I.length,X=B.length,oe=W<X?W:X,ue=0;ue<oe;++ue)if(I[ue]!==B[ue])return I[ue]<B[ue]?-1:1;return W===X?0:W<X?-1:1}(Nr(y),Nr(w));case"Array":return function(I,B){for(var W=I.length,X=B.length,oe=W<X?W:X,ue=0;ue<oe;++ue){var de=Ot(I[ue],B[ue]);if(de!==0)return de}return W===X?0:W<X?-1:1}(y,w)}}catch{}return NaN}function Ki(y){var w=typeof y;return w!="object"?w:ArrayBuffer.isView(y)?"binary":(y=he(y),y==="ArrayBuffer"?"binary":y)}function Nr(y){return y instanceof Uint8Array?y:ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y)}var gc=(xn.prototype._trans=function(y,w,R){var O=this._tx||rt.trans,I=this.name,B=gn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(y==="readonly"?"read":"write"," ").concat(this.name));function W(ue,de,Z){if(!Z.schema[I])throw new He.NotFound("Table "+I+" not part of transaction");return w(Z.idbtrans,Z)}var X=te();try{var oe=O&&O.db._novip===this.db._novip?O===rt.trans?O._promise(y,W,R):at(function(){return O._promise(y,W,R)},{trans:O,transless:rt.transless||rt}):function ue(de,Z,me,ae){if(de.idbdb&&(de._state.openComplete||rt.letThrough||de._vip)){var fe=de._createTransaction(Z,me,de._dbSchema);try{fe.create(),de._state.PR1398_maxLoop=3}catch(ye){return ye.name===yt.InvalidState&&de.isOpen()&&0<--de._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),de.close({disableAutoOpen:!1}),de.open().then(function(){return ue(de,Z,me,ae)})):Zt(ye)}return fe._promise(Z,function(ye,le){return at(function(){return rt.trans=fe,ae(ye,le,fe)})}).then(function(ye){if(Z==="readwrite")try{fe.idbtrans.commit()}catch{}return Z==="readonly"?ye:fe._completion.then(function(){return ye})})}if(de._state.openComplete)return Zt(new He.DatabaseClosed(de._state.dbOpenError));if(!de._state.isBeingOpened){if(!de._state.autoOpen)return Zt(new He.DatabaseClosed);de.open().catch(it)}return de._state.dbReadyPromise.then(function(){return ue(de,Z,me,ae)})}(this.db,y,[this.name],W);return B&&(oe._consoleTask=B,oe=oe.catch(function(ue){return console.trace(ue),Zt(ue)})),oe}finally{X&&ge()}},xn.prototype.get=function(y,w){var R=this;return y&&y.constructor===Object?this.where(y).first(w):y==null?Zt(new He.Type("Invalid argument to Table.get()")):this._trans("readonly",function(O){return R.core.get({trans:O,key:y}).then(function(I){return R.hook.reading.fire(I)})}).then(w)},xn.prototype.where=function(y){if(typeof y=="string")return new this.db.WhereClause(this,y);if(s(y))return new this.db.WhereClause(this,"[".concat(y.join("+"),"]"));var w=u(y);if(w.length===1)return this.where(w[0]).equals(y[w[0]]);var R=this.schema.indexes.concat(this.schema.primKey).filter(function(X){if(X.compound&&w.every(function(ue){return 0<=X.keyPath.indexOf(ue)})){for(var oe=0;oe<w.length;++oe)if(w.indexOf(X.keyPath[oe])===-1)return!1;return!0}return!1}).sort(function(X,oe){return X.keyPath.length-oe.keyPath.length})[0];if(R&&this.db._maxKey!==Wr){var B=R.keyPath.slice(0,w.length);return this.where(B).equals(B.map(function(oe){return y[oe]}))}!R&&gn&&console.warn("The query ".concat(JSON.stringify(y)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(w.join("+"),"]"));var O=this.schema.idxByName;function I(X,oe){return Ot(X,oe)===0}var W=w.reduce(function(Z,oe){var ue=Z[0],de=Z[1],Z=O[oe],me=y[oe];return[ue||Z,ue||!Z?sr(de,Z&&Z.multi?function(ae){return ae=k(ae,oe),s(ae)&&ae.some(function(fe){return I(me,fe)})}:function(ae){return I(me,k(ae,oe))}):de]},[null,null]),B=W[0],W=W[1];return B?this.where(B.name).equals(y[B.keyPath]).filter(W):R?this.filter(W):this.where(w).equals("")},xn.prototype.filter=function(y){return this.toCollection().and(y)},xn.prototype.count=function(y){return this.toCollection().count(y)},xn.prototype.offset=function(y){return this.toCollection().offset(y)},xn.prototype.limit=function(y){return this.toCollection().limit(y)},xn.prototype.each=function(y){return this.toCollection().each(y)},xn.prototype.toArray=function(y){return this.toCollection().toArray(y)},xn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xn.prototype.orderBy=function(y){return new this.db.Collection(new this.db.WhereClause(this,s(y)?"[".concat(y.join("+"),"]"):y))},xn.prototype.reverse=function(){return this.toCollection().reverse()},xn.prototype.mapToClass=function(y){var w,R=this.db,O=this.name;function I(){return w!==null&&w.apply(this,arguments)||this}(this.schema.mappedClass=y).prototype instanceof bn&&(function(oe,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function de(){this.constructor=oe}e(oe,ue),oe.prototype=ue===null?Object.create(ue):(de.prototype=ue.prototype,new de)}(I,w=y),Object.defineProperty(I.prototype,"db",{get:function(){return R},enumerable:!1,configurable:!0}),I.prototype.table=function(){return O},y=I);for(var B=new Set,W=y.prototype;W;W=f(W))Object.getOwnPropertyNames(W).forEach(function(oe){return B.add(oe)});function X(oe){if(!oe)return oe;var ue,de=Object.create(y.prototype);for(ue in oe)if(!B.has(ue))try{de[ue]=oe[ue]}catch{}return de}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=X,this.hook("reading",X),y},xn.prototype.defineClass=function(){return this.mapToClass(function(y){c(this,y)})},xn.prototype.add=function(y,w){var R=this,O=this.schema.primKey,I=O.auto,B=O.keyPath,W=y;return B&&I&&(W=Wa(B)(y)),this._trans("readwrite",function(X){return R.core.mutate({trans:X,type:"add",keys:w!=null?[w]:null,values:[W]})}).then(function(X){return X.numFailures?Ze.reject(X.failures[0]):X.lastResult}).then(function(X){if(B)try{P(y,B,X)}catch{}return X})},xn.prototype.update=function(y,w){return typeof y!="object"||s(y)?this.where(":id").equals(y).modify(w):(y=k(y,this.schema.primKey.keyPath),y===void 0?Zt(new He.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(y).modify(w))},xn.prototype.put=function(y,w){var R=this,O=this.schema.primKey,I=O.auto,B=O.keyPath,W=y;return B&&I&&(W=Wa(B)(y)),this._trans("readwrite",function(X){return R.core.mutate({trans:X,type:"put",values:[W],keys:w!=null?[w]:null})}).then(function(X){return X.numFailures?Ze.reject(X.failures[0]):X.lastResult}).then(function(X){if(B)try{P(y,B,X)}catch{}return X})},xn.prototype.delete=function(y){var w=this;return this._trans("readwrite",function(R){return w.core.mutate({trans:R,type:"delete",keys:[y]})}).then(function(R){return R.numFailures?Ze.reject(R.failures[0]):void 0})},xn.prototype.clear=function(){var y=this;return this._trans("readwrite",function(w){return y.core.mutate({trans:w,type:"deleteRange",range:ma})}).then(function(w){return w.numFailures?Ze.reject(w.failures[0]):void 0})},xn.prototype.bulkGet=function(y){var w=this;return this._trans("readonly",function(R){return w.core.getMany({keys:y,trans:R}).then(function(O){return O.map(function(I){return w.hook.reading.fire(I)})})})},xn.prototype.bulkAdd=function(y,w,R){var O=this,I=Array.isArray(w)?w:void 0,B=(R=R||(I?void 0:w))?R.allKeys:void 0;return this._trans("readwrite",function(W){var ue=O.schema.primKey,X=ue.auto,ue=ue.keyPath;if(ue&&I)throw new He.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(I&&I.length!==y.length)throw new He.InvalidArgument("Arguments objects and keys must have the same length");var oe=y.length,ue=ue&&X?y.map(Wa(ue)):y;return O.core.mutate({trans:W,type:"add",keys:I,values:ue,wantResults:B}).then(function(fe){var Z=fe.numFailures,me=fe.results,ae=fe.lastResult,fe=fe.failures;if(Z===0)return B?me:ae;throw new Ve("".concat(O.name,".bulkAdd(): ").concat(Z," of ").concat(oe," operations failed"),fe)})})},xn.prototype.bulkPut=function(y,w,R){var O=this,I=Array.isArray(w)?w:void 0,B=(R=R||(I?void 0:w))?R.allKeys:void 0;return this._trans("readwrite",function(W){var ue=O.schema.primKey,X=ue.auto,ue=ue.keyPath;if(ue&&I)throw new He.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(I&&I.length!==y.length)throw new He.InvalidArgument("Arguments objects and keys must have the same length");var oe=y.length,ue=ue&&X?y.map(Wa(ue)):y;return O.core.mutate({trans:W,type:"put",keys:I,values:ue,wantResults:B}).then(function(fe){var Z=fe.numFailures,me=fe.results,ae=fe.lastResult,fe=fe.failures;if(Z===0)return B?me:ae;throw new Ve("".concat(O.name,".bulkPut(): ").concat(Z," of ").concat(oe," operations failed"),fe)})})},xn.prototype.bulkUpdate=function(y){var w=this,R=this.core,O=y.map(function(W){return W.key}),I=y.map(function(W){return W.changes}),B=[];return this._trans("readwrite",function(W){return R.getMany({trans:W,keys:O,cache:"clone"}).then(function(X){var oe=[],ue=[];y.forEach(function(Z,me){var ae=Z.key,fe=Z.changes,ye=X[me];if(ye){for(var le=0,Ee=Object.keys(fe);le<Ee.length;le++){var De=Ee[le],Ne=fe[De];if(De===w.schema.primKey.keyPath){if(Ot(Ne,ae)!==0)throw new He.Constraint("Cannot update primary key in bulkUpdate()")}else P(ye,De,Ne)}B.push(me),oe.push(ae),ue.push(ye)}});var de=oe.length;return R.mutate({trans:W,type:"put",keys:oe,values:ue,updates:{keys:O,changeSpecs:I}}).then(function(Z){var me=Z.numFailures,ae=Z.failures;if(me===0)return de;for(var fe=0,ye=Object.keys(ae);fe<ye.length;fe++){var le,Ee=ye[fe],De=B[Number(Ee)];De!=null&&(le=ae[Ee],delete ae[Ee],ae[De]=le)}throw new Ve("".concat(w.name,".bulkUpdate(): ").concat(me," of ").concat(de," operations failed"),ae)})})})},xn.prototype.bulkDelete=function(y){var w=this,R=y.length;return this._trans("readwrite",function(O){return w.core.mutate({trans:O,type:"delete",keys:y})}).then(function(W){var I=W.numFailures,B=W.lastResult,W=W.failures;if(I===0)return B;throw new Ve("".concat(w.name,".bulkDelete(): ").concat(I," of ").concat(R," operations failed"),W)})},xn);function xn(){}function Ro(y){function w(W,X){if(X){for(var oe=arguments.length,ue=new Array(oe-1);--oe;)ue[oe-1]=arguments[oe];return R[W].subscribe.apply(null,ue),y}if(typeof W=="string")return R[W]}var R={};w.addEventType=B;for(var O=1,I=arguments.length;O<I;++O)B(arguments[O]);return w;function B(W,X,oe){if(typeof W!="object"){var ue;X=X||Zn;var de={subscribers:[],fire:oe=oe||it,subscribe:function(Z){de.subscribers.indexOf(Z)===-1&&(de.subscribers.push(Z),de.fire=X(de.fire,Z))},unsubscribe:function(Z){de.subscribers=de.subscribers.filter(function(me){return me!==Z}),de.fire=de.subscribers.reduce(X,oe)}};return R[W]=w[W]=de}u(ue=W).forEach(function(Z){var me=ue[Z];if(s(me))B(Z,ue[Z][0],ue[Z][1]);else{if(me!=="asap")throw new He.InvalidArgument("Invalid event config");var ae=B(Z,It,function(){for(var fe=arguments.length,ye=new Array(fe);fe--;)ye[fe]=arguments[fe];ae.subscribers.forEach(function(le){D(function(){le.apply(null,ye)})})})}})}}function Xi(y,w){return E(w).from({prototype:y}),w}function fo(y,w){return!(y.filter||y.algorithm||y.or)&&(w?y.justLimit:!y.replayFilter)}function yc(y,w){y.filter=sr(y.filter,w)}function qr(y,w,R){var O=y.replayFilter;y.replayFilter=O?function(){return sr(O(),w())}:w,y.justLimit=R&&!O}function Yi(y,w){if(y.isPrimKey)return w.primaryKey;var R=w.getIndexByKeyPath(y.index);if(!R)throw new He.Schema("KeyPath "+y.index+" on object store "+w.name+" is not indexed");return R}function bc(y,w,R){var O=Yi(y,w.schema);return w.openCursor({trans:R,values:!y.keysOnly,reverse:y.dir==="prev",unique:!!y.unique,query:{index:O,range:y.range}})}function Qi(y,w,R,O){var I=y.replayFilter?sr(y.filter,y.replayFilter()):y.filter;if(y.or){var B={},W=function(X,oe,ue){var de,Z;I&&!I(oe,ue,function(me){return oe.stop(me)},function(me){return oe.fail(me)})||((Z=""+(de=oe.primaryKey))=="[object ArrayBuffer]"&&(Z=""+new Uint8Array(de)),p(B,Z)||(B[Z]=!0,w(X,oe,ue)))};return Promise.all([y.or._iterate(W,R),ui(bc(y,O,R),y.algorithm,W,!y.keysOnly&&y.valueMapper)])}return ui(bc(y,O,R),sr(y.algorithm,I),w,!y.keysOnly&&y.valueMapper)}function ui(y,w,R,O){var I=Le(O?function(B,W,X){return R(O(B),W,X)}:R);return y.then(function(B){if(B)return B.start(function(){var W=function(){return B.continue()};w&&!w(B,function(X){return W=X},function(X){B.stop(X),W=it},function(X){B.fail(X),W=it})||I(B.value,B,function(X){return W=X}),W()})})}var Zi=(xc.prototype.execute=function(y){var w=this["@@propmod"];if(w.add!==void 0){var R=w.add;if(s(R))return a(a([],s(y)?y:[],!0),R).sort();if(typeof R=="number")return(Number(y)||0)+R;if(typeof R=="bigint")try{return BigInt(y)+R}catch{return BigInt(0)+R}throw new TypeError("Invalid term ".concat(R))}if(w.remove!==void 0){var O=w.remove;if(s(O))return s(y)?y.filter(function(I){return!O.includes(I)}).sort():[];if(typeof O=="number")return Number(y)-O;if(typeof O=="bigint")try{return BigInt(y)-O}catch{return BigInt(0)-O}throw new TypeError("Invalid subtrahend ".concat(O))}return R=(R=w.replacePrefix)===null||R===void 0?void 0:R[0],R&&typeof y=="string"&&y.startsWith(R)?w.replacePrefix[1]+y.substring(R.length):y},xc);function xc(y){this["@@propmod"]=y}var Ji=(en.prototype._read=function(y,w){var R=this._ctx;return R.error?R.table._trans(null,Zt.bind(null,R.error)):R.table._trans("readonly",y).then(w)},en.prototype._write=function(y){var w=this._ctx;return w.error?w.table._trans(null,Zt.bind(null,w.error)):w.table._trans("readwrite",y,"locked")},en.prototype._addAlgorithm=function(y){var w=this._ctx;w.algorithm=sr(w.algorithm,y)},en.prototype._iterate=function(y,w){return Qi(this._ctx,y,w,this._ctx.table.core)},en.prototype.clone=function(y){var w=Object.create(this.constructor.prototype),R=Object.create(this._ctx);return y&&c(R,y),w._ctx=R,w},en.prototype.raw=function(){return this._ctx.valueMapper=null,this},en.prototype.each=function(y){var w=this._ctx;return this._read(function(R){return Qi(w,y,R,w.table.core)})},en.prototype.count=function(y){var w=this;return this._read(function(R){var O=w._ctx,I=O.table.core;if(fo(O,!0))return I.count({trans:R,query:{index:Yi(O,I.schema),range:O.range}}).then(function(W){return Math.min(W,O.limit)});var B=0;return Qi(O,function(){return++B,!1},R,I).then(function(){return B})}).then(y)},en.prototype.sortBy=function(y,w){var R=y.split(".").reverse(),O=R[0],I=R.length-1;function B(oe,ue){return ue?B(oe[R[ue]],ue-1):oe[O]}var W=this._ctx.dir==="next"?1:-1;function X(oe,ue){return Ot(B(oe,I),B(ue,I))*W}return this.toArray(function(oe){return oe.sort(X)}).then(w)},en.prototype.toArray=function(y){var w=this;return this._read(function(R){var O=w._ctx;if(O.dir==="next"&&fo(O,!0)&&0<O.limit){var I=O.valueMapper,B=Yi(O,O.table.core.schema);return O.table.core.query({trans:R,limit:O.limit,values:!0,query:{index:B,range:O.range}}).then(function(X){return X=X.result,I?X.map(I):X})}var W=[];return Qi(O,function(X){return W.push(X)},R,O.table.core).then(function(){return W})},y)},en.prototype.offset=function(y){var w=this._ctx;return y<=0||(w.offset+=y,fo(w)?qr(w,function(){var R=y;return function(O,I){return R===0||(R===1?--R:I(function(){O.advance(R),R=0}),!1)}}):qr(w,function(){var R=y;return function(){return--R<0}})),this},en.prototype.limit=function(y){return this._ctx.limit=Math.min(this._ctx.limit,y),qr(this._ctx,function(){var w=y;return function(R,O,I){return--w<=0&&O(I),0<=w}},!0),this},en.prototype.until=function(y,w){return yc(this._ctx,function(R,O,I){return!y(R.value)||(O(I),w)}),this},en.prototype.first=function(y){return this.limit(1).toArray(function(w){return w[0]}).then(y)},en.prototype.last=function(y){return this.reverse().first(y)},en.prototype.filter=function(y){var w;return yc(this._ctx,function(R){return y(R.value)}),(w=this._ctx).isMatch=sr(w.isMatch,y),this},en.prototype.and=function(y){return this.filter(y)},en.prototype.or=function(y){return new this.db.WhereClause(this._ctx.table,y,this)},en.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},en.prototype.desc=function(){return this.reverse()},en.prototype.eachKey=function(y){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(R,O){y(O.key,O)})},en.prototype.eachUniqueKey=function(y){return this._ctx.unique="unique",this.eachKey(y)},en.prototype.eachPrimaryKey=function(y){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(R,O){y(O.primaryKey,O)})},en.prototype.keys=function(y){var w=this._ctx;w.keysOnly=!w.isMatch;var R=[];return this.each(function(O,I){R.push(I.key)}).then(function(){return R}).then(y)},en.prototype.primaryKeys=function(y){var w=this._ctx;if(w.dir==="next"&&fo(w,!0)&&0<w.limit)return this._read(function(O){var I=Yi(w,w.table.core.schema);return w.table.core.query({trans:O,values:!1,limit:w.limit,query:{index:I,range:w.range}})}).then(function(O){return O.result}).then(y);w.keysOnly=!w.isMatch;var R=[];return this.each(function(O,I){R.push(I.primaryKey)}).then(function(){return R}).then(y)},en.prototype.uniqueKeys=function(y){return this._ctx.unique="unique",this.keys(y)},en.prototype.firstKey=function(y){return this.limit(1).keys(function(w){return w[0]}).then(y)},en.prototype.lastKey=function(y){return this.reverse().firstKey(y)},en.prototype.distinct=function(){var y=this._ctx,y=y.index&&y.table.schema.idxByName[y.index];if(!y||!y.multi)return this;var w={};return yc(this._ctx,function(I){var O=I.primaryKey.toString(),I=p(w,O);return w[O]=!0,!I}),this},en.prototype.modify=function(y){var w=this,R=this._ctx;return this._write(function(O){var I,B,W;W=typeof y=="function"?y:(I=u(y),B=I.length,function(le){for(var Ee=!1,De=0;De<B;++De){var Ne=I[De],Ie=y[Ne],$e=k(le,Ne);Ie instanceof Zi?(P(le,Ne,Ie.execute($e)),Ee=!0):$e!==Ie&&(P(le,Ne,Ie),Ee=!0)}return Ee});var X=R.table.core,Z=X.schema.primaryKey,oe=Z.outbound,ue=Z.extractKey,de=200,Z=w.db._options.modifyChunkSize;Z&&(de=typeof Z=="object"?Z[X.name]||Z["*"]||200:Z);function me(le,Ne){var De=Ne.failures,Ne=Ne.numFailures;fe+=le-Ne;for(var Ie=0,$e=u(De);Ie<$e.length;Ie++){var Ke=$e[Ie];ae.push(De[Ke])}}var ae=[],fe=0,ye=[];return w.clone().primaryKeys().then(function(le){function Ee(Ne){var Ie=Math.min(de,le.length-Ne);return X.getMany({trans:O,keys:le.slice(Ne,Ne+Ie),cache:"immutable"}).then(function($e){for(var Ke=[],We=[],Ge=oe?[]:null,Qe=[],qe=0;qe<Ie;++qe){var tt=$e[qe],gt={value:be(tt),primKey:le[Ne+qe]};W.call(gt,gt.value,gt)!==!1&&(gt.value==null?Qe.push(le[Ne+qe]):oe||Ot(ue(tt),ue(gt.value))===0?(We.push(gt.value),oe&&Ge.push(le[Ne+qe])):(Qe.push(le[Ne+qe]),Ke.push(gt.value)))}return Promise.resolve(0<Ke.length&&X.mutate({trans:O,type:"add",values:Ke}).then(function(St){for(var Dt in St.failures)Qe.splice(parseInt(Dt),1);me(Ke.length,St)})).then(function(){return(0<We.length||De&&typeof y=="object")&&X.mutate({trans:O,type:"put",keys:Ge,values:We,criteria:De,changeSpec:typeof y!="function"&&y,isAdditionalChunk:0<Ne}).then(function(St){return me(We.length,St)})}).then(function(){return(0<Qe.length||De&&y===Xs)&&X.mutate({trans:O,type:"delete",keys:Qe,criteria:De,isAdditionalChunk:0<Ne}).then(function(St){return me(Qe.length,St)})}).then(function(){return le.length>Ne+Ie&&Ee(Ne+de)})})}var De=fo(R)&&R.limit===1/0&&(typeof y!="function"||y===Xs)&&{index:R.index,range:R.range};return Ee(0).then(function(){if(0<ae.length)throw new Xe("Error modifying one or more objects",ae,fe,ye);return le.length})})})},en.prototype.delete=function(){var y=this._ctx,w=y.range;return fo(y)&&(y.isPrimKey||w.type===3)?this._write(function(R){var O=y.table.core.schema.primaryKey,I=w;return y.table.core.count({trans:R,query:{index:O,range:I}}).then(function(B){return y.table.core.mutate({trans:R,type:"deleteRange",range:I}).then(function(W){var X=W.failures;if(W.lastResult,W.results,W=W.numFailures,W)throw new Xe("Could not delete some values",Object.keys(X).map(function(oe){return X[oe]}),B-W);return B-W})})}):this.modify(Xs)},en);function en(){}var Xs=function(y,w){return w.value=null};function xd(y,w){return y<w?-1:y===w?0:1}function wc(y,w){return w<y?-1:y===w?0:1}function ia(y,w,R){return y=y instanceof li?new y.Collection(y):y,y._ctx.error=new(R||TypeError)(w),y}function eu(y){return new y.Collection(y,function(){return Ys("")}).limit(0)}function si(y,w,R,O){var I,B,W,X,oe,ue,de,Z=R.length;if(!R.every(function(fe){return typeof fe=="string"}))return ia(y,Gi);function me(fe){I=fe==="next"?function(le){return le.toUpperCase()}:function(le){return le.toLowerCase()},B=fe==="next"?function(le){return le.toLowerCase()}:function(le){return le.toUpperCase()},W=fe==="next"?xd:wc;var ye=R.map(function(le){return{lower:B(le),upper:I(le)}}).sort(function(le,Ee){return W(le.lower,Ee.lower)});X=ye.map(function(le){return le.upper}),oe=ye.map(function(le){return le.lower}),de=(ue=fe)==="next"?"":O}me("next"),y=new y.Collection(y,function(){return qa(X[0],oe[Z-1]+O)}),y._ondirectionchange=function(fe){me(fe)};var ae=0;return y._addAlgorithm(function(fe,ye,le){var Ee=fe.key;if(typeof Ee!="string")return!1;var De=B(Ee);if(w(De,oe,ae))return!0;for(var Ne=null,Ie=ae;Ie<Z;++Ie){var $e=function(Ke,We,Ge,Qe,qe,tt){for(var gt=Math.min(Ke.length,Qe.length),St=-1,Dt=0;Dt<gt;++Dt){var kr=We[Dt];if(kr!==Qe[Dt])return qe(Ke[Dt],Ge[Dt])<0?Ke.substr(0,Dt)+Ge[Dt]+Ge.substr(Dt+1):qe(Ke[Dt],Qe[Dt])<0?Ke.substr(0,Dt)+Qe[Dt]+Ge.substr(Dt+1):0<=St?Ke.substr(0,St)+We[St]+Ge.substr(St+1):null;qe(Ke[Dt],kr)<0&&(St=Dt)}return gt<Qe.length&&tt==="next"?Ke+Ge.substr(Ke.length):gt<Ke.length&&tt==="prev"?Ke.substr(0,Ge.length):St<0?null:Ke.substr(0,St)+Qe[St]+Ge.substr(St+1)}(Ee,De,X[Ie],oe[Ie],W,ue);$e===null&&Ne===null?ae=Ie+1:(Ne===null||0<W(Ne,$e))&&(Ne=$e)}return ye(Ne!==null?function(){fe.continue(Ne+de)}:le),!1}),y}function qa(y,w,R,O){return{type:2,lower:y,upper:w,lowerOpen:R,upperOpen:O}}function Ys(y){return{type:1,lower:y,upper:y}}var li=(Object.defineProperty(Dn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Dn.prototype.between=function(y,w,R,O){R=R!==!1,O=O===!0;try{return 0<this._cmp(y,w)||this._cmp(y,w)===0&&(R||O)&&(!R||!O)?eu(this):new this.Collection(this,function(){return qa(y,w,!R,!O)})}catch{return ia(this,yr)}},Dn.prototype.equals=function(y){return y==null?ia(this,yr):new this.Collection(this,function(){return Ys(y)})},Dn.prototype.above=function(y){return y==null?ia(this,yr):new this.Collection(this,function(){return qa(y,void 0,!0)})},Dn.prototype.aboveOrEqual=function(y){return y==null?ia(this,yr):new this.Collection(this,function(){return qa(y,void 0,!1)})},Dn.prototype.below=function(y){return y==null?ia(this,yr):new this.Collection(this,function(){return qa(void 0,y,!1,!0)})},Dn.prototype.belowOrEqual=function(y){return y==null?ia(this,yr):new this.Collection(this,function(){return qa(void 0,y)})},Dn.prototype.startsWith=function(y){return typeof y!="string"?ia(this,Gi):this.between(y,y+Wr,!0,!0)},Dn.prototype.startsWithIgnoreCase=function(y){return y===""?this.startsWith(y):si(this,function(w,R){return w.indexOf(R[0])===0},[y],Wr)},Dn.prototype.equalsIgnoreCase=function(y){return si(this,function(w,R){return w===R[0]},[y],"")},Dn.prototype.anyOfIgnoreCase=function(){var y=L.apply(J,arguments);return y.length===0?eu(this):si(this,function(w,R){return R.indexOf(w)!==-1},y,"")},Dn.prototype.startsWithAnyOfIgnoreCase=function(){var y=L.apply(J,arguments);return y.length===0?eu(this):si(this,function(w,R){return R.some(function(O){return w.indexOf(O)===0})},y,Wr)},Dn.prototype.anyOf=function(){var y=this,w=L.apply(J,arguments),R=this._cmp;try{w.sort(R)}catch{return ia(this,yr)}if(w.length===0)return eu(this);var O=new this.Collection(this,function(){return qa(w[0],w[w.length-1])});O._ondirectionchange=function(B){R=B==="next"?y._ascending:y._descending,w.sort(R)};var I=0;return O._addAlgorithm(function(B,W,X){for(var oe=B.key;0<R(oe,w[I]);)if(++I===w.length)return W(X),!1;return R(oe,w[I])===0||(W(function(){B.continue(w[I])}),!1)}),O},Dn.prototype.notEqual=function(y){return this.inAnyRange([[-1/0,y],[y,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Dn.prototype.noneOf=function(){var y=L.apply(J,arguments);if(y.length===0)return new this.Collection(this);try{y.sort(this._ascending)}catch{return ia(this,yr)}var w=y.reduce(function(R,O){return R?R.concat([[R[R.length-1][1],O]]):[[-1/0,O]]},null);return w.push([y[y.length-1],this.db._maxKey]),this.inAnyRange(w,{includeLowers:!1,includeUppers:!1})},Dn.prototype.inAnyRange=function(Ee,w){var R=this,O=this._cmp,I=this._ascending,B=this._descending,W=this._min,X=this._max;if(Ee.length===0)return eu(this);if(!Ee.every(function(De){return De[0]!==void 0&&De[1]!==void 0&&I(De[0],De[1])<=0}))return ia(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",He.InvalidArgument);var oe=!w||w.includeLowers!==!1,ue=w&&w.includeUppers===!0,de,Z=I;function me(De,Ne){return Z(De[0],Ne[0])}try{(de=Ee.reduce(function(De,Ne){for(var Ie=0,$e=De.length;Ie<$e;++Ie){var Ke=De[Ie];if(O(Ne[0],Ke[1])<0&&0<O(Ne[1],Ke[0])){Ke[0]=W(Ke[0],Ne[0]),Ke[1]=X(Ke[1],Ne[1]);break}}return Ie===$e&&De.push(Ne),De},[])).sort(me)}catch{return ia(this,yr)}var ae=0,fe=ue?function(De){return 0<I(De,de[ae][1])}:function(De){return 0<=I(De,de[ae][1])},ye=oe?function(De){return 0<B(De,de[ae][0])}:function(De){return 0<=B(De,de[ae][0])},le=fe,Ee=new this.Collection(this,function(){return qa(de[0][0],de[de.length-1][1],!oe,!ue)});return Ee._ondirectionchange=function(De){Z=De==="next"?(le=fe,I):(le=ye,B),de.sort(me)},Ee._addAlgorithm(function(De,Ne,Ie){for(var $e,Ke=De.key;le(Ke);)if(++ae===de.length)return Ne(Ie),!1;return!fe($e=Ke)&&!ye($e)||(R._cmp(Ke,de[ae][1])===0||R._cmp(Ke,de[ae][0])===0||Ne(function(){Z===I?De.continue(de[ae][0]):De.continue(de[ae][1])}),!1)}),Ee},Dn.prototype.startsWithAnyOf=function(){var y=L.apply(J,arguments);return y.every(function(w){return typeof w=="string"})?y.length===0?eu(this):this.inAnyRange(y.map(function(w){return[w,w+Wr]})):ia(this,"startsWithAnyOf() only works with strings")},Dn);function Dn(){}function Aa(y){return Le(function(w){return ci(w),y(w.target.error),!1})}function ci(y){y.stopPropagation&&y.stopPropagation(),y.preventDefault&&y.preventDefault()}var tu="storagemutated",fi="x-storagemutated-1",br=Ro(null,tu),Ec=($r.prototype._lock=function(){return N(!rt.global),++this._reculock,this._reculock!==1||rt.global||(rt.lockOwnerFor=this),this},$r.prototype._unlock=function(){if(N(!rt.global),--this._reculock==0)for(rt.global||(rt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var y=this._blockedFuncs.shift();try{Hr(y[1],y[0])}catch{}}return this},$r.prototype._locked=function(){return this._reculock&&rt.lockOwnerFor!==this},$r.prototype.create=function(y){var w=this;if(!this.mode)return this;var R=this.db.idbdb,O=this.db._state.dbOpenError;if(N(!this.idbtrans),!y&&!R)switch(O&&O.name){case"DatabaseClosedError":throw new He.DatabaseClosed(O);case"MissingAPIError":throw new He.MissingAPI(O.message,O);default:throw new He.OpenFailed(O)}if(!this.active)throw new He.TransactionInactive;return N(this._completion._state===null),(y=this.idbtrans=y||(this.db.core||R).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Le(function(I){ci(I),w._reject(y.error)}),y.onabort=Le(function(I){ci(I),w.active&&w._reject(new He.Abort(y.error)),w.active=!1,w.on("abort").fire(I)}),y.oncomplete=Le(function(){w.active=!1,w._resolve(),"mutatedParts"in y&&br.storagemutated.fire(y.mutatedParts)}),this},$r.prototype._promise=function(y,w,R){var O=this;if(y==="readwrite"&&this.mode!=="readwrite")return Zt(new He.ReadOnly("Transaction is readonly"));if(!this.active)return Zt(new He.TransactionInactive);if(this._locked())return new Ze(function(B,W){O._blockedFuncs.push([function(){O._promise(y,w,R).then(B,W)},rt])});if(R)return at(function(){var B=new Ze(function(W,X){O._lock();var oe=w(W,X,O);oe&&oe.then&&oe.then(W,X)});return B.finally(function(){return O._unlock()}),B._lib=!0,B});var I=new Ze(function(B,W){var X=w(B,W,O);X&&X.then&&X.then(B,W)});return I._lib=!0,I},$r.prototype._root=function(){return this.parent?this.parent._root():this},$r.prototype.waitFor=function(y){var w,R=this._root(),O=Ze.resolve(y);R._waitingFor?R._waitingFor=R._waitingFor.then(function(){return O}):(R._waitingFor=O,R._waitingQueue=[],w=R.idbtrans.objectStore(R.storeNames[0]),function B(){for(++R._spinCount;R._waitingQueue.length;)R._waitingQueue.shift()();R._waitingFor&&(w.get(-1/0).onsuccess=B)}());var I=R._waitingFor;return new Ze(function(B,W){O.then(function(X){return R._waitingQueue.push(Le(B.bind(null,X)))},function(X){return R._waitingQueue.push(Le(W.bind(null,X)))}).finally(function(){R._waitingFor===I&&(R._waitingFor=null)})})},$r.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new He.Abort))},$r.prototype.table=function(y){var w=this._memoizedTables||(this._memoizedTables={});if(p(w,y))return w[y];var R=this.schema[y];if(!R)throw new He.NotFound("Table "+y+" not part of transaction");return R=new this.db.Table(y,R,this),R.core=this.db.core.table(y),w[y]=R},$r);function $r(){}function $a(y,w,R,O,I,B,W){return{name:y,keyPath:w,unique:R,multi:O,auto:I,compound:B,src:(R&&!W?"&":"")+(O?"*":"")+(I?"++":"")+Qs(w)}}function Qs(y){return typeof y=="string"?y:y?"["+[].join.call(y,"+")+"]":""}function nu(y,w,R){return{name:y,primKey:w,indexes:R,mappedClass:null,idxByName:(O=function(I){return[I.name,I]},R.reduce(function(I,B,W){return W=O(B,W),W&&(I[W[0]]=W[1]),I},{}))};var O}var ru=function(y){try{return y.only([[]]),ru=function(){return[[]]},[[]]}catch{return ru=function(){return Wr},Wr}};function au(y){return y==null?function(){}:typeof y=="string"?(w=y).split(".").length===1?function(R){return R[w]}:function(R){return k(R,w)}:function(R){return k(R,y)};var w}function es(y){return[].slice.call(y)}var wd=0;function er(y){return y==null?":id":typeof y=="string"?y:"[".concat(y.join("+"),"]")}function di(y,w,oe){function O(le){if(le.type===3)return null;if(le.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ae=le.lower,fe=le.upper,ye=le.lowerOpen,le=le.upperOpen;return ae===void 0?fe===void 0?null:w.upperBound(fe,!!le):fe===void 0?w.lowerBound(ae,!!ye):w.bound(ae,fe,!!ye,!!le)}function I(me){var ae,fe=me.name;return{name:fe,schema:me,mutate:function(ye){var le=ye.trans,Ee=ye.type,De=ye.keys,Ne=ye.values,Ie=ye.range;return new Promise(function($e,Ke){$e=Le($e);var We=le.objectStore(fe),Ge=We.keyPath==null,Qe=Ee==="put"||Ee==="add";if(!Qe&&Ee!=="delete"&&Ee!=="deleteRange")throw new Error("Invalid operation type: "+Ee);var qe,tt=(De||Ne||{length:1}).length;if(De&&Ne&&De.length!==Ne.length)throw new Error("Given keys array must have same length as given values array.");if(tt===0)return $e({numFailures:0,failures:{},results:[],lastResult:void 0});function gt(wr){++kr,ci(wr)}var St=[],Dt=[],kr=0;if(Ee==="deleteRange"){if(Ie.type===4)return $e({numFailures:kr,failures:Dt,results:[],lastResult:void 0});Ie.type===3?St.push(qe=We.clear()):St.push(qe=We.delete(O(Ie)))}else{var Ge=Qe?Ge?[Ne,De]:[Ne,null]:[De,null],Rt=Ge[0],Gn=Ge[1];if(Qe)for(var tr=0;tr<tt;++tr)St.push(qe=Gn&&Gn[tr]!==void 0?We[Ee](Rt[tr],Gn[tr]):We[Ee](Rt[tr])),qe.onerror=gt;else for(tr=0;tr<tt;++tr)St.push(qe=We[Ee](Rt[tr])),qe.onerror=gt}function ho(wr){wr=wr.target.result,St.forEach(function(Ka,No){return Ka.error!=null&&(Dt[No]=Ka.error)}),$e({numFailures:kr,failures:Dt,results:Ee==="delete"?De:St.map(function(Ka){return Ka.result}),lastResult:wr})}qe.onerror=function(wr){gt(wr),ho(wr)},qe.onsuccess=ho})},getMany:function(ye){var le=ye.trans,Ee=ye.keys;return new Promise(function(De,Ne){De=Le(De);for(var Ie,$e=le.objectStore(fe),Ke=Ee.length,We=new Array(Ke),Ge=0,Qe=0,qe=function(St){St=St.target,We[St._pos]=St.result,++Qe===Ge&&De(We)},tt=Aa(Ne),gt=0;gt<Ke;++gt)Ee[gt]!=null&&((Ie=$e.get(Ee[gt]))._pos=gt,Ie.onsuccess=qe,Ie.onerror=tt,++Ge);Ge===0&&De(We)})},get:function(ye){var le=ye.trans,Ee=ye.key;return new Promise(function(De,Ne){De=Le(De);var Ie=le.objectStore(fe).get(Ee);Ie.onsuccess=function($e){return De($e.target.result)},Ie.onerror=Aa(Ne)})},query:(ae=ue,function(ye){return new Promise(function(le,Ee){le=Le(le);var De,Ne,Ie,Ge=ye.trans,$e=ye.values,Ke=ye.limit,qe=ye.query,We=Ke===1/0?void 0:Ke,Qe=qe.index,qe=qe.range,Ge=Ge.objectStore(fe),Qe=Qe.isPrimaryKey?Ge:Ge.index(Qe.name),qe=O(qe);if(Ke===0)return le({result:[]});ae?((We=$e?Qe.getAll(qe,We):Qe.getAllKeys(qe,We)).onsuccess=function(tt){return le({result:tt.target.result})},We.onerror=Aa(Ee)):(De=0,Ne=!$e&&"openKeyCursor"in Qe?Qe.openKeyCursor(qe):Qe.openCursor(qe),Ie=[],Ne.onsuccess=function(tt){var gt=Ne.result;return gt?(Ie.push($e?gt.value:gt.primaryKey),++De===Ke?le({result:Ie}):void gt.continue()):le({result:Ie})},Ne.onerror=Aa(Ee))})}),openCursor:function(ye){var le=ye.trans,Ee=ye.values,De=ye.query,Ne=ye.reverse,Ie=ye.unique;return new Promise(function($e,Ke){$e=Le($e);var Qe=De.index,We=De.range,Ge=le.objectStore(fe),Ge=Qe.isPrimaryKey?Ge:Ge.index(Qe.name),Qe=Ne?Ie?"prevunique":"prev":Ie?"nextunique":"next",qe=!Ee&&"openKeyCursor"in Ge?Ge.openKeyCursor(O(We),Qe):Ge.openCursor(O(We),Qe);qe.onerror=Aa(Ke),qe.onsuccess=Le(function(tt){var gt,St,Dt,kr,Rt=qe.result;Rt?(Rt.___id=++wd,Rt.done=!1,gt=Rt.continue.bind(Rt),St=(St=Rt.continuePrimaryKey)&&St.bind(Rt),Dt=Rt.advance.bind(Rt),kr=function(){throw new Error("Cursor not stopped")},Rt.trans=le,Rt.stop=Rt.continue=Rt.continuePrimaryKey=Rt.advance=function(){throw new Error("Cursor not started")},Rt.fail=Le(Ke),Rt.next=function(){var Gn=this,tr=1;return this.start(function(){return tr--?Gn.continue():Gn.stop()}).then(function(){return Gn})},Rt.start=function(Gn){function tr(){if(qe.result)try{Gn()}catch(wr){Rt.fail(wr)}else Rt.done=!0,Rt.start=function(){throw new Error("Cursor behind last entry")},Rt.stop()}var ho=new Promise(function(wr,Ka){wr=Le(wr),qe.onerror=Aa(Ka),Rt.fail=Ka,Rt.stop=function(No){Rt.stop=Rt.continue=Rt.continuePrimaryKey=Rt.advance=kr,wr(No)}});return qe.onsuccess=Le(function(wr){qe.onsuccess=tr,tr()}),Rt.continue=gt,Rt.continuePrimaryKey=St,Rt.advance=Dt,tr(),ho},$e(Rt)):$e(null)},Ke)})},count:function(ye){var le=ye.query,Ee=ye.trans,De=le.index,Ne=le.range;return new Promise(function(Ie,$e){var Ke=Ee.objectStore(fe),We=De.isPrimaryKey?Ke:Ke.index(De.name),Ke=O(Ne),We=Ke?We.count(Ke):We.count();We.onsuccess=Le(function(Ge){return Ie(Ge.target.result)}),We.onerror=Aa($e)})}}}var B,W,X,de=(W=oe,X=es((B=y).objectStoreNames),{schema:{name:B.name,tables:X.map(function(me){return W.objectStore(me)}).map(function(me){var ae=me.keyPath,le=me.autoIncrement,fe=s(ae),ye={},le={name:me.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ae==null,compound:fe,keyPath:ae,autoIncrement:le,unique:!0,extractKey:au(ae)},indexes:es(me.indexNames).map(function(Ee){return me.index(Ee)}).map(function(Ie){var De=Ie.name,Ne=Ie.unique,$e=Ie.multiEntry,Ie=Ie.keyPath,$e={name:De,compound:s(Ie),keyPath:Ie,unique:Ne,multiEntry:$e,extractKey:au(Ie)};return ye[er(Ie)]=$e}),getIndexByKeyPath:function(Ee){return ye[er(Ee)]}};return ye[":id"]=le.primaryKey,ae!=null&&(ye[er(ae)]=le.primaryKey),le})},hasGetAll:0<X.length&&"getAll"in W.objectStore(X[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),oe=de.schema,ue=de.hasGetAll,de=oe.tables.map(I),Z={};return de.forEach(function(me){return Z[me.name]=me}),{stack:"dbcore",transaction:y.transaction.bind(y),table:function(me){if(!Z[me])throw new Error("Table '".concat(me,"' not found"));return Z[me]},MIN_KEY:-1/0,MAX_KEY:ru(w),schema:oe}}function Zs(y,w,R,O){var I=R.IDBKeyRange;return R.indexedDB,{dbcore:(O=di(w,I,O),y.dbcore.reduce(function(B,W){return W=W.create,r(r({},B),W(B))},O))}}function Ao(y,O){var R=O.db,O=Zs(y._middlewares,R,y._deps,O);y.core=O.dbcore,y.tables.forEach(function(I){var B=I.name;y.core.schema.tables.some(function(W){return W.name===B})&&(I.core=y.core.table(B),y[B]instanceof y.Table&&(y[B].core=I.core))})}function Js(y,w,R,O){R.forEach(function(I){var B=O[I];w.forEach(function(W){var X=function oe(ue,de){return S(ue,de)||(ue=f(ue))&&oe(ue,de)}(W,I);(!X||"value"in X&&X.value===void 0)&&(W===y.Transaction.prototype||W instanceof y.Transaction?x(W,I,{get:function(){return this.table(I)},set:function(oe){g(this,I,{value:oe,writable:!0,configurable:!0,enumerable:!0})}}):W[I]=new y.Table(I,B))})})}function ts(y,w){w.forEach(function(R){for(var O in R)R[O]instanceof y.Table&&delete R[O]})}function Sc(y,w){return y._cfg.version-w._cfg.version}function ns(y,w,R,O){var I=y._dbSchema;R.objectStoreNames.contains("$meta")&&!I.$meta&&(I.$meta=nu("$meta",Sd("")[0],[]),y._storeNames.push("$meta"));var B=y._createTransaction("readwrite",y._storeNames,I);B.create(R),B._completion.catch(O);var W=B._reject.bind(B),X=rt.transless||rt;at(function(){return rt.trans=B,rt.transless=X,w!==0?(Ao(y,R),ue=w,((oe=B).storeNames.includes("$meta")?oe.table("$meta").get("version").then(function(de){return de??ue}):Ze.resolve(ue)).then(function(de){return me=de,ae=B,fe=R,ye=[],de=(Z=y)._versions,le=Z._dbSchema=ou(0,Z.idbdb,fe),(de=de.filter(function(Ee){return Ee._cfg.version>=me})).length!==0?(de.forEach(function(Ee){ye.push(function(){var De=le,Ne=Ee._cfg.dbschema;rl(Z,De,fe),rl(Z,Ne,fe),le=Z._dbSchema=Ne;var Ie=tl(De,Ne);Ie.add.forEach(function(Qe){_c(fe,Qe[0],Qe[1].primKey,Qe[1].indexes)}),Ie.change.forEach(function(Qe){if(Qe.recreate)throw new He.Upgrade("Not yet support for changing primary key");var qe=fe.objectStore(Qe.name);Qe.add.forEach(function(tt){return nl(qe,tt)}),Qe.change.forEach(function(tt){qe.deleteIndex(tt.name),nl(qe,tt)}),Qe.del.forEach(function(tt){return qe.deleteIndex(tt)})});var $e=Ee._cfg.contentUpgrade;if($e&&Ee._cfg.version>me){Ao(Z,fe),ae._memoizedTables={};var Ke=H(Ne);Ie.del.forEach(function(Qe){Ke[Qe]=De[Qe]}),ts(Z,[Z.Transaction.prototype]),Js(Z,[Z.Transaction.prototype],u(Ke),Ke),ae.schema=Ke;var We,Ge=se($e);return Ge&&bt(),Ie=Ze.follow(function(){var Qe;(We=$e(ae))&&Ge&&(Qe=Ft.bind(null,null),We.then(Qe,Qe))}),We&&typeof We.then=="function"?Ze.resolve(We):Ie.then(function(){return We})}}),ye.push(function(De){var Ne,Ie,$e=Ee._cfg.dbschema;Ne=$e,Ie=De,[].slice.call(Ie.db.objectStoreNames).forEach(function(Ke){return Ne[Ke]==null&&Ie.db.deleteObjectStore(Ke)}),ts(Z,[Z.Transaction.prototype]),Js(Z,[Z.Transaction.prototype],Z._storeNames,Z._dbSchema),ae.schema=Z._dbSchema}),ye.push(function(De){Z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Z.idbdb.version/10)===Ee._cfg.version?(Z.idbdb.deleteObjectStore("$meta"),delete Z._dbSchema.$meta,Z._storeNames=Z._storeNames.filter(function(Ne){return Ne!=="$meta"})):De.objectStore("$meta").put(Ee._cfg.version,"version"))})}),function Ee(){return ye.length?Ze.resolve(ye.shift()(ae.idbtrans)).then(Ee):Ze.resolve()}().then(function(){Ed(le,fe)})):Ze.resolve();var Z,me,ae,fe,ye,le}).catch(W)):(u(I).forEach(function(de){_c(R,de,I[de].primKey,I[de].indexes)}),Ao(y,R),void Ze.follow(function(){return y.on.populate.fire(B)}).catch(W));var oe,ue})}function el(y,w){Ed(y._dbSchema,w),w.db.version%10!=0||w.objectStoreNames.contains("$meta")||w.db.createObjectStore("$meta").add(Math.ceil(w.db.version/10-1),"version");var R=ou(0,y.idbdb,w);rl(y,y._dbSchema,w);for(var O=0,I=tl(R,y._dbSchema).change;O<I.length;O++){var B=function(W){if(W.change.length||W.recreate)return console.warn("Unable to patch indexes of table ".concat(W.name," because it has changes on the type of index or primary key.")),{value:void 0};var X=w.objectStore(W.name);W.add.forEach(function(oe){gn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(W.name,".").concat(oe.src)),nl(X,oe)})}(I[O]);if(typeof B=="object")return B.value}}function tl(y,w){var R,O={del:[],add:[],change:[]};for(R in y)w[R]||O.del.push(R);for(R in w){var I=y[R],B=w[R];if(I){var W={name:R,def:B,recreate:!1,del:[],add:[],change:[]};if(""+(I.primKey.keyPath||"")!=""+(B.primKey.keyPath||"")||I.primKey.auto!==B.primKey.auto)W.recreate=!0,O.change.push(W);else{var X=I.idxByName,oe=B.idxByName,ue=void 0;for(ue in X)oe[ue]||W.del.push(ue);for(ue in oe){var de=X[ue],Z=oe[ue];de?de.src!==Z.src&&W.change.push(Z):W.add.push(Z)}(0<W.del.length||0<W.add.length||0<W.change.length)&&O.change.push(W)}}else O.add.push([R,B])}return O}function _c(y,w,R,O){var I=y.db.createObjectStore(w,R.keyPath?{keyPath:R.keyPath,autoIncrement:R.auto}:{autoIncrement:R.auto});return O.forEach(function(B){return nl(I,B)}),I}function Ed(y,w){u(y).forEach(function(R){w.db.objectStoreNames.contains(R)||(gn&&console.debug("Dexie: Creating missing table",R),_c(w,R,y[R].primKey,y[R].indexes))})}function nl(y,w){y.createIndex(w.name,w.keyPath,{unique:w.unique,multiEntry:w.multi})}function ou(y,w,R){var O={};return A(w.objectStoreNames,0).forEach(function(I){for(var B=R.objectStore(I),W=$a(Qs(ue=B.keyPath),ue||"",!0,!1,!!B.autoIncrement,ue&&typeof ue!="string",!0),X=[],oe=0;oe<B.indexNames.length;++oe){var de=B.index(B.indexNames[oe]),ue=de.keyPath,de=$a(de.name,ue,!!de.unique,!!de.multiEntry,!1,ue&&typeof ue!="string",!1);X.push(de)}O[I]=nu(I,W,X)}),O}function rl(y,w,R){for(var O=R.db.objectStoreNames,I=0;I<O.length;++I){var B=O[I],W=R.objectStore(B);y._hasGetAll="getAll"in W;for(var X=0;X<W.indexNames.length;++X){var oe=W.indexNames[X],ue=W.index(oe).keyPath,de=typeof ue=="string"?ue:"["+A(ue).join("+")+"]";!w[B]||(ue=w[B].idxByName[de])&&(ue.name=oe,delete w[B].idxByName[de],w[B].idxByName[oe]=ue)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(y._hasGetAll=!1)}function Sd(y){return y.split(",").map(function(w,R){var O=(w=w.trim()).replace(/([&*]|\+\+)/g,""),I=/^\[/.test(O)?O.match(/^\[(.*)\]$/)[1].split("+"):O;return $a(O,I||null,/\&/.test(w),/\*/.test(w),/\+\+/.test(w),s(I),R===0)})}var Rv=(al.prototype._parseStoresSpec=function(y,w){u(y).forEach(function(R){if(y[R]!==null){var O=Sd(y[R]),I=O.shift();if(I.unique=!0,I.multi)throw new He.Schema("Primary key cannot be multi-valued");O.forEach(function(B){if(B.auto)throw new He.Schema("Only primary key can be marked as autoIncrement (++)");if(!B.keyPath)throw new He.Schema("Index must have a name and cannot be an empty string")}),w[R]=nu(R,I,O)}})},al.prototype.stores=function(R){var w=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,R):R;var R=w._versions,O={},I={};return R.forEach(function(B){c(O,B._cfg.storesSource),I=B._cfg.dbschema={},B._parseStoresSpec(O,I)}),w._dbSchema=I,ts(w,[w._allTables,w,w.Transaction.prototype]),Js(w,[w._allTables,w,w.Transaction.prototype,this._cfg.tables],u(I),I),w._storeNames=u(I),this},al.prototype.upgrade=function(y){return this._cfg.contentUpgrade=aa(this._cfg.contentUpgrade||it,y),this},al);function al(){}function Cc(y,w){var R=y._dbNamesDB;return R||(R=y._dbNamesDB=new Ga(va,{addons:[],indexedDB:y,IDBKeyRange:w})).version(1).stores({dbnames:"name"}),R.table("dbnames")}function ol(y){return y&&typeof y.databases=="function"}function Rc(y){return at(function(){return rt.letThrough=!0,y()})}function Ac(y){return!("from"in y)}var xr=function(y,w){if(!this){var R=new xr;return y&&"d"in y&&c(R,y),R}c(this,arguments.length?{d:1,from:y,to:1<arguments.length?w:y}:{d:0})};function rs(y,w,R){var O=Ot(w,R);if(!isNaN(O)){if(0<O)throw RangeError();if(Ac(y))return c(y,{from:w,to:R,d:1});var I=y.l,O=y.r;if(Ot(R,y.from)<0)return I?rs(I,w,R):y.l={from:w,to:R,d:1,l:null,r:null},Cd(y);if(0<Ot(w,y.to))return O?rs(O,w,R):y.r={from:w,to:R,d:1,l:null,r:null},Cd(y);Ot(w,y.from)<0&&(y.from=w,y.l=null,y.d=O?O.d+1:1),0<Ot(R,y.to)&&(y.to=R,y.r=null,y.d=y.l?y.l.d+1:1),R=!y.r,I&&!y.l&&hi(y,I),O&&R&&hi(y,O)}}function hi(y,w){Ac(w)||function R(O,oe){var B=oe.from,W=oe.to,X=oe.l,oe=oe.r;rs(O,B,W),X&&R(O,X),oe&&R(O,oe)}(y,w)}function _d(y,w){var R=il(w),O=R.next();if(O.done)return!1;for(var I=O.value,B=il(y),W=B.next(I.from),X=W.value;!O.done&&!W.done;){if(Ot(X.from,I.to)<=0&&0<=Ot(X.to,I.from))return!0;Ot(I.from,X.from)<0?I=(O=R.next(X.from)).value:X=(W=B.next(I.from)).value}return!1}function il(y){var w=Ac(y)?null:{s:0,n:y};return{next:function(R){for(var O=0<arguments.length;w;)switch(w.s){case 0:if(w.s=1,O)for(;w.n.l&&Ot(R,w.n.from)<0;)w={up:w,n:w.n.l,s:1};else for(;w.n.l;)w={up:w,n:w.n.l,s:1};case 1:if(w.s=2,!O||Ot(R,w.n.to)<=0)return{value:w.n,done:!1};case 2:if(w.n.r){w.s=3,w={up:w,n:w.n.r,s:0};continue}case 3:w=w.up}return{done:!0}}}}function Cd(y){var w,R,O=(((w=y.r)===null||w===void 0?void 0:w.d)||0)-(((R=y.l)===null||R===void 0?void 0:R.d)||0),I=1<O?"r":O<-1?"l":"";I&&(w=I=="r"?"l":"r",R=r({},y),O=y[I],y.from=O.from,y.to=O.to,y[I]=O[I],R[I]=O[w],(y[w]=R).d=Tc(R)),y.d=Tc(y)}function Tc(R){var w=R.r,R=R.l;return(w?R?Math.max(w.d,R.d):w.d:R?R.d:0)+1}function ul(y,w){return u(w).forEach(function(R){y[R]?hi(y[R],w[R]):y[R]=function O(I){var B,W,X={};for(B in I)p(I,B)&&(W=I[B],X[B]=!W||typeof W!="object"||G.has(W.constructor)?W:O(W));return X}(w[R])}),y}function Dc(y,w){return y.all||w.all||Object.keys(y).some(function(R){return w[R]&&_d(w[R],y[R])})}m(xr.prototype,((ua={add:function(y){return hi(this,y),this},addKey:function(y){return rs(this,y,y),this},addKeys:function(y){var w=this;return y.forEach(function(R){return rs(w,R,R)}),this},hasKey:function(y){var w=il(this).next(y).value;return w&&Ot(w.from,y)<=0&&0<=Ot(w.to,y)}})[q]=function(){return il(this)},ua));var pi={},Nc={},kc=!1;function sl(y){ul(Nc,y),kc||(kc=!0,setTimeout(function(){kc=!1,Oc(Nc,!(Nc={}))},0))}function Oc(y,w){w===void 0&&(w=!1);var R=new Set;if(y.all)for(var O=0,I=Object.values(pi);O<I.length;O++)Rd(W=I[O],y,R,w);else for(var B in y){var W,X=/^idb\:\/\/(.*)\/(.*)\//.exec(B);X&&(B=X[1],X=X[2],(W=pi["idb://".concat(B,"/").concat(X)])&&Rd(W,y,R,w))}R.forEach(function(oe){return oe()})}function Rd(y,w,R,O){for(var I=[],B=0,W=Object.entries(y.queries.query);B<W.length;B++){for(var X=W[B],oe=X[0],ue=[],de=0,Z=X[1];de<Z.length;de++){var me=Z[de];Dc(w,me.obsSet)?me.subscribers.forEach(function(le){return R.add(le)}):O&&ue.push(me)}O&&I.push([oe,ue])}if(O)for(var ae=0,fe=I;ae<fe.length;ae++){var ye=fe[ae],oe=ye[0],ue=ye[1];y.queries.query[oe]=ue}}function Av(y){var w=y._state,R=y._deps.indexedDB;if(w.isBeingOpened||y.idbdb)return w.dbReadyPromise.then(function(){return w.dbOpenError?Zt(w.dbOpenError):y});w.isBeingOpened=!0,w.dbOpenError=null,w.openComplete=!1;var O=w.openCanceller,I=Math.round(10*y.verno),B=!1;function W(){if(w.openCanceller!==O)throw new He.DatabaseClosed("db.open() was cancelled")}function X(){return new Ze(function(me,ae){if(W(),!R)throw new He.MissingAPI;var fe=y.name,ye=w.autoSchema||!I?R.open(fe):R.open(fe,I);if(!ye)throw new He.MissingAPI;ye.onerror=Aa(ae),ye.onblocked=Le(y._fireOnBlocked),ye.onupgradeneeded=Le(function(le){var Ee;de=ye.transaction,w.autoSchema&&!y._options.allowEmptyDB?(ye.onerror=ci,de.abort(),ye.result.close(),(Ee=R.deleteDatabase(fe)).onsuccess=Ee.onerror=Le(function(){ae(new He.NoSuchDatabase("Database ".concat(fe," doesnt exist")))})):(de.onerror=Aa(ae),le=le.oldVersion>Math.pow(2,62)?0:le.oldVersion,Z=le<1,y.idbdb=ye.result,B&&el(y,de),ns(y,le/10,de,ae))},ae),ye.onsuccess=Le(function(){de=null;var le,Ee,De,Ne,Ie,$e=y.idbdb=ye.result,Ke=A($e.objectStoreNames);if(0<Ke.length)try{var We=$e.transaction((Ne=Ke).length===1?Ne[0]:Ne,"readonly");if(w.autoSchema)Ee=$e,De=We,(le=y).verno=Ee.version/10,De=le._dbSchema=ou(0,Ee,De),le._storeNames=A(Ee.objectStoreNames,0),Js(le,[le._allTables],u(De),De);else if(rl(y,y._dbSchema,We),((Ie=tl(ou(0,(Ie=y).idbdb,We),Ie._dbSchema)).add.length||Ie.change.some(function(Ge){return Ge.add.length||Ge.change.length}))&&!B)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),$e.close(),I=$e.version+1,B=!0,me(X());Ao(y,We)}catch{}ur.push(y),$e.onversionchange=Le(function(Ge){w.vcFired=!0,y.on("versionchange").fire(Ge)}),$e.onclose=Le(function(Ge){y.on("close").fire(Ge)}),Z&&(Ie=y._deps,We=fe,$e=Ie.indexedDB,Ie=Ie.IDBKeyRange,ol($e)||We===va||Cc($e,Ie).put({name:We}).catch(it)),me()},ae)}).catch(function(me){switch(me==null?void 0:me.name){case"UnknownError":if(0<w.PR1398_maxLoop)return w.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),X();break;case"VersionError":if(0<I)return I=0,X()}return Ze.reject(me)})}var oe,ue=w.dbReadyResolve,de=null,Z=!1;return Ze.race([O,(typeof navigator>"u"?Ze.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(me){function ae(){return indexedDB.databases().finally(me)}oe=setInterval(ae,100),ae()}).finally(function(){return clearInterval(oe)}):Promise.resolve()).then(X)]).then(function(){return W(),w.onReadyBeingFired=[],Ze.resolve(Rc(function(){return y.on.ready.fire(y.vip)})).then(function me(){if(0<w.onReadyBeingFired.length){var ae=w.onReadyBeingFired.reduce(aa,it);return w.onReadyBeingFired=[],Ze.resolve(Rc(function(){return ae(y.vip)})).then(me)}})}).finally(function(){w.openCanceller===O&&(w.onReadyBeingFired=null,w.isBeingOpened=!1)}).catch(function(me){w.dbOpenError=me;try{de&&de.abort()}catch{}return O===w.openCanceller&&y._close(),Zt(me)}).finally(function(){w.openComplete=!0,ue()}).then(function(){var me;return Z&&(me={},y.tables.forEach(function(ae){ae.schema.indexes.forEach(function(fe){fe.name&&(me["idb://".concat(y.name,"/").concat(ae.name,"/").concat(fe.name)]=new xr(-1/0,[[[]]]))}),me["idb://".concat(y.name,"/").concat(ae.name,"/")]=me["idb://".concat(y.name,"/").concat(ae.name,"/:dels")]=new xr(-1/0,[[[]]])}),br(tu).fire(me),Oc(me,!0)),y})}function as(y){function w(B){return y.next(B)}var R=I(w),O=I(function(B){return y.throw(B)});function I(B){return function(oe){var X=B(oe),oe=X.value;return X.done?oe:oe&&typeof oe.then=="function"?oe.then(R,O):s(oe)?Promise.all(oe).then(R,O):R(oe)}}return I(w)()}function To(y,w,R){for(var O=s(y)?y.slice():[y],I=0;I<R;++I)O.push(w);return O}var Tv={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(y){return r(r({},y),{table:function(w){var R=y.table(w),O=R.schema,I={},B=[];function W(Z,me,ae){var fe=er(Z),ye=I[fe]=I[fe]||[],le=Z==null?0:typeof Z=="string"?1:Z.length,Ee=0<me,Ee=r(r({},ae),{name:Ee?"".concat(fe,"(virtual-from:").concat(ae.name,")"):ae.name,lowLevelIndex:ae,isVirtual:Ee,keyTail:me,keyLength:le,extractKey:au(Z),unique:!Ee&&ae.unique});return ye.push(Ee),Ee.isPrimaryKey||B.push(Ee),1<le&&W(le===2?Z[0]:Z.slice(0,le-1),me+1,ae),ye.sort(function(De,Ne){return De.keyTail-Ne.keyTail}),Ee}w=W(O.primaryKey.keyPath,0,O.primaryKey),I[":id"]=[w];for(var X=0,oe=O.indexes;X<oe.length;X++){var ue=oe[X];W(ue.keyPath,0,ue)}function de(Z){var me,ae=Z.query.index;return ae.isVirtual?r(r({},Z),{query:{index:ae.lowLevelIndex,range:(me=Z.query.range,ae=ae.keyTail,{type:me.type===1?2:me.type,lower:To(me.lower,me.lowerOpen?y.MAX_KEY:y.MIN_KEY,ae),lowerOpen:!0,upper:To(me.upper,me.upperOpen?y.MIN_KEY:y.MAX_KEY,ae),upperOpen:!0})}}):Z}return r(r({},R),{schema:r(r({},O),{primaryKey:w,indexes:B,getIndexByKeyPath:function(Z){return(Z=I[er(Z)])&&Z[0]}}),count:function(Z){return R.count(de(Z))},query:function(Z){return R.query(de(Z))},openCursor:function(Z){var me=Z.query.index,ae=me.keyTail,fe=me.isVirtual,ye=me.keyLength;return fe?R.openCursor(de(Z)).then(function(Ee){return Ee&&le(Ee)}):R.openCursor(Z);function le(Ee){return Object.create(Ee,{continue:{value:function(De){De!=null?Ee.continue(To(De,Z.reverse?y.MAX_KEY:y.MIN_KEY,ae)):Z.unique?Ee.continue(Ee.key.slice(0,ye).concat(Z.reverse?y.MIN_KEY:y.MAX_KEY,ae)):Ee.continue()}},continuePrimaryKey:{value:function(De,Ne){Ee.continuePrimaryKey(To(De,y.MAX_KEY,ae),Ne)}},primaryKey:{get:function(){return Ee.primaryKey}},key:{get:function(){var De=Ee.key;return ye===1?De[0]:De.slice(0,ye)}},value:{get:function(){return Ee.value}}})}}})}})}};function ll(y,w,R,O){return R=R||{},O=O||"",u(y).forEach(function(I){var B,W,X;p(w,I)?(B=y[I],W=w[I],typeof B=="object"&&typeof W=="object"&&B&&W?(X=he(B))!==he(W)?R[O+I]=w[I]:X==="Object"?ll(B,W,R,O+I+"."):B!==W&&(R[O+I]=w[I]):B!==W&&(R[O+I]=w[I])):R[O+I]=void 0}),u(w).forEach(function(I){p(y,I)||(R[O+I]=w[I])}),R}function cl(y,w){return w.type==="delete"?w.keys:w.keys||w.values.map(y.extractKey)}var Ad={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(y){return r(r({},y),{table:function(w){var R=y.table(w),O=R.schema.primaryKey;return r(r({},R),{mutate:function(I){var B=rt.trans,W=B.table(w).hook,X=W.deleting,oe=W.creating,ue=W.updating;switch(I.type){case"add":if(oe.fire===it)break;return B._promise("readwrite",function(){return de(I)},!0);case"put":if(oe.fire===it&&ue.fire===it)break;return B._promise("readwrite",function(){return de(I)},!0);case"delete":if(X.fire===it)break;return B._promise("readwrite",function(){return de(I)},!0);case"deleteRange":if(X.fire===it)break;return B._promise("readwrite",function(){return function Z(me,ae,fe){return R.query({trans:me,values:!1,query:{index:O,range:ae},limit:fe}).then(function(ye){var le=ye.result;return de({type:"delete",keys:le,trans:me}).then(function(Ee){return 0<Ee.numFailures?Promise.reject(Ee.failures[0]):le.length<fe?{failures:[],numFailures:0,lastResult:void 0}:Z(me,r(r({},ae),{lower:le[le.length-1],lowerOpen:!0}),fe)})})}(I.trans,I.range,1e4)},!0)}return R.mutate(I);function de(Z){var me,ae,fe,ye=rt.trans,le=Z.keys||cl(O,Z);if(!le)throw new Error("Keys missing");return(Z=Z.type==="add"||Z.type==="put"?r(r({},Z),{keys:le}):r({},Z)).type!=="delete"&&(Z.values=a([],Z.values)),Z.keys&&(Z.keys=a([],Z.keys)),me=R,fe=le,((ae=Z).type==="add"?Promise.resolve([]):me.getMany({trans:ae.trans,keys:fe,cache:"immutable"})).then(function(Ee){var De=le.map(function(Ne,Ie){var $e,Ke,We,Ge=Ee[Ie],Qe={onerror:null,onsuccess:null};return Z.type==="delete"?X.fire.call(Qe,Ne,Ge,ye):Z.type==="add"||Ge===void 0?($e=oe.fire.call(Qe,Ne,Z.values[Ie],ye),Ne==null&&$e!=null&&(Z.keys[Ie]=Ne=$e,O.outbound||P(Z.values[Ie],O.keyPath,Ne))):($e=ll(Ge,Z.values[Ie]),(Ke=ue.fire.call(Qe,$e,Ne,Ge,ye))&&(We=Z.values[Ie],Object.keys(Ke).forEach(function(qe){p(We,qe)?We[qe]=Ke[qe]:P(We,qe,Ke[qe])}))),Qe});return R.mutate(Z).then(function(Ne){for(var Ie=Ne.failures,$e=Ne.results,Ke=Ne.numFailures,Ne=Ne.lastResult,We=0;We<le.length;++We){var Ge=($e||le)[We],Qe=De[We];Ge==null?Qe.onerror&&Qe.onerror(Ie[We]):Qe.onsuccess&&Qe.onsuccess(Z.type==="put"&&Ee[We]?Z.values[We]:Ge)}return{failures:Ie,results:$e,numFailures:Ke,lastResult:Ne}}).catch(function(Ne){return De.forEach(function(Ie){return Ie.onerror&&Ie.onerror(Ne)}),Promise.reject(Ne)})})}}})}})}};function Mc(y,w,R){try{if(!w||w.keys.length<y.length)return null;for(var O=[],I=0,B=0;I<w.keys.length&&B<y.length;++I)Ot(w.keys[I],y[B])===0&&(O.push(R?be(w.values[I]):w.values[I]),++B);return O.length===y.length?O:null}catch{return null}}var Td={stack:"dbcore",level:-1,create:function(y){return{table:function(w){var R=y.table(w);return r(r({},R),{getMany:function(O){if(!O.cache)return R.getMany(O);var I=Mc(O.keys,O.trans._cache,O.cache==="clone");return I?Ze.resolve(I):R.getMany(O).then(function(B){return O.trans._cache={keys:O.keys,values:O.cache==="clone"?be(B):B},B})},mutate:function(O){return O.type!=="add"&&(O.trans._cache=null),R.mutate(O)}})}}}};function vi(y,w){return y.trans.mode==="readonly"&&!!y.subscr&&!y.trans.explicit&&y.trans.db._options.cache!=="disabled"&&!w.schema.primaryKey.outbound}function Dd(y,w){switch(y){case"query":return w.values&&!w.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Dv={stack:"dbcore",level:0,name:"Observability",create:function(y){var w=y.schema.name,R=new xr(y.MIN_KEY,y.MAX_KEY);return r(r({},y),{transaction:function(O,I,B){if(rt.subscr&&I!=="readonly")throw new He.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(rt.querier));return y.transaction(O,I,B)},table:function(O){var I=y.table(O),B=I.schema,W=B.primaryKey,Z=B.indexes,X=W.extractKey,oe=W.outbound,ue=W.autoIncrement&&Z.filter(function(ae){return ae.compound&&ae.keyPath.includes(W.keyPath)}),de=r(r({},I),{mutate:function(ae){function fe(qe){return qe="idb://".concat(w,"/").concat(O,"/").concat(qe),Ne[qe]||(Ne[qe]=new xr)}var ye,le,Ee,De=ae.trans,Ne=ae.mutatedParts||(ae.mutatedParts={}),Ie=fe(""),$e=fe(":dels"),Ke=ae.type,Qe=ae.type==="deleteRange"?[ae.range]:ae.type==="delete"?[ae.keys]:ae.values.length<50?[cl(W,ae).filter(function(qe){return qe}),ae.values]:[],We=Qe[0],Ge=Qe[1],Qe=ae.trans._cache;return s(We)?(Ie.addKeys(We),(Qe=Ke==="delete"||We.length===Ge.length?Mc(We,Qe):null)||$e.addKeys(We),(Qe||Ge)&&(ye=fe,le=Qe,Ee=Ge,B.indexes.forEach(function(qe){var tt=ye(qe.name||"");function gt(Dt){return Dt!=null?qe.extractKey(Dt):null}function St(Dt){return qe.multiEntry&&s(Dt)?Dt.forEach(function(kr){return tt.addKey(kr)}):tt.addKey(Dt)}(le||Ee).forEach(function(Dt,Gn){var Rt=le&&gt(le[Gn]),Gn=Ee&&gt(Ee[Gn]);Ot(Rt,Gn)!==0&&(Rt!=null&&St(Rt),Gn!=null&&St(Gn))})}))):We?(Ge={from:(Ge=We.lower)!==null&&Ge!==void 0?Ge:y.MIN_KEY,to:(Ge=We.upper)!==null&&Ge!==void 0?Ge:y.MAX_KEY},$e.add(Ge),Ie.add(Ge)):(Ie.add(R),$e.add(R),B.indexes.forEach(function(qe){return fe(qe.name).add(R)})),I.mutate(ae).then(function(qe){return!We||ae.type!=="add"&&ae.type!=="put"||(Ie.addKeys(qe.results),ue&&ue.forEach(function(tt){for(var gt=ae.values.map(function(Rt){return tt.extractKey(Rt)}),St=tt.keyPath.findIndex(function(Rt){return Rt===W.keyPath}),Dt=0,kr=qe.results.length;Dt<kr;++Dt)gt[Dt][St]=qe.results[Dt];fe(tt.name).addKeys(gt)})),De.mutatedParts=ul(De.mutatedParts||{},Ne),qe})}}),Z=function(fe){var ye=fe.query,fe=ye.index,ye=ye.range;return[fe,new xr((fe=ye.lower)!==null&&fe!==void 0?fe:y.MIN_KEY,(ye=ye.upper)!==null&&ye!==void 0?ye:y.MAX_KEY)]},me={get:function(ae){return[W,new xr(ae.key)]},getMany:function(ae){return[W,new xr().addKeys(ae.keys)]},count:Z,query:Z,openCursor:Z};return u(me).forEach(function(ae){de[ae]=function(fe){var ye=rt.subscr,le=!!ye,Ee=vi(rt,I)&&Dd(ae,fe)?fe.obsSet={}:ye;if(le){var De=function(Ge){return Ge="idb://".concat(w,"/").concat(O,"/").concat(Ge),Ee[Ge]||(Ee[Ge]=new xr)},Ne=De(""),Ie=De(":dels"),ye=me[ae](fe),le=ye[0],ye=ye[1];if((ae==="query"&&le.isPrimaryKey&&!fe.values?Ie:De(le.name||"")).add(ye),!le.isPrimaryKey){if(ae!=="count"){var $e=ae==="query"&&oe&&fe.values&&I.query(r(r({},fe),{values:!1}));return I[ae].apply(this,arguments).then(function(Ge){if(ae==="query"){if(oe&&fe.values)return $e.then(function(gt){return gt=gt.result,Ne.addKeys(gt),Ge});var Qe=fe.values?Ge.result.map(X):Ge.result;(fe.values?Ne:Ie).addKeys(Qe)}else if(ae==="openCursor"){var qe=Ge,tt=fe.values;return qe&&Object.create(qe,{key:{get:function(){return Ie.addKey(qe.primaryKey),qe.key}},primaryKey:{get:function(){var gt=qe.primaryKey;return Ie.addKey(gt),gt}},value:{get:function(){return tt&&Ne.addKey(qe.primaryKey),qe.value}}})}return Ge})}Ie.add(R)}}return I[ae].apply(this,arguments)}}),de}})}};function Nd(y,w,R){if(R.numFailures===0)return w;if(w.type==="deleteRange")return null;var O=w.keys?w.keys.length:"values"in w&&w.values?w.values.length:1;return R.numFailures===O?null:(w=r({},w),s(w.keys)&&(w.keys=w.keys.filter(function(I,B){return!(B in R.failures)})),"values"in w&&s(w.values)&&(w.values=w.values.filter(function(I,B){return!(B in R.failures)})),w)}function fl(y,w){return R=y,((O=w).lower===void 0||(O.lowerOpen?0<Ot(R,O.lower):0<=Ot(R,O.lower)))&&(y=y,(w=w).upper===void 0||(w.upperOpen?Ot(y,w.upper)<0:Ot(y,w.upper)<=0));var R,O}function Ic(y,w,me,O,I,B){if(!me||me.length===0)return y;var W=w.query.index,X=W.multiEntry,oe=w.query.range,ue=O.schema.primaryKey.extractKey,de=W.extractKey,Z=(W.lowLevelIndex||W).extractKey,me=me.reduce(function(ae,fe){var ye=ae,le=[];if(fe.type==="add"||fe.type==="put")for(var Ee=new xr,De=fe.values.length-1;0<=De;--De){var Ne,Ie=fe.values[De],$e=ue(Ie);Ee.hasKey($e)||(Ne=de(Ie),(X&&s(Ne)?Ne.some(function(qe){return fl(qe,oe)}):fl(Ne,oe))&&(Ee.addKey($e),le.push(Ie)))}switch(fe.type){case"add":var Ke=new xr().addKeys(w.values?ae.map(function(tt){return ue(tt)}):ae),ye=ae.concat(w.values?le.filter(function(tt){return tt=ue(tt),!Ke.hasKey(tt)&&(Ke.addKey(tt),!0)}):le.map(function(tt){return ue(tt)}).filter(function(tt){return!Ke.hasKey(tt)&&(Ke.addKey(tt),!0)}));break;case"put":var We=new xr().addKeys(fe.values.map(function(tt){return ue(tt)}));ye=ae.filter(function(tt){return!We.hasKey(w.values?ue(tt):tt)}).concat(w.values?le:le.map(function(tt){return ue(tt)}));break;case"delete":var Ge=new xr().addKeys(fe.keys);ye=ae.filter(function(tt){return!Ge.hasKey(w.values?ue(tt):tt)});break;case"deleteRange":var Qe=fe.range;ye=ae.filter(function(tt){return!fl(ue(tt),Qe)})}return ye},y);return me===y?y:(me.sort(function(ae,fe){return Ot(Z(ae),Z(fe))||Ot(ue(ae),ue(fe))}),w.limit&&w.limit<1/0&&(me.length>w.limit?me.length=w.limit:y.length===w.limit&&me.length<w.limit&&(I.dirty=!0)),B?Object.freeze(me):me)}function iu(y,w){return Ot(y.lower,w.lower)===0&&Ot(y.upper,w.upper)===0&&!!y.lowerOpen==!!w.lowerOpen&&!!y.upperOpen==!!w.upperOpen}function os(y,w){return function(R,O,I,B){if(R===void 0)return O!==void 0?-1:0;if(O===void 0)return 1;if((O=Ot(R,O))===0){if(I&&B)return 0;if(I)return 1;if(B)return-1}return O}(y.lower,w.lower,y.lowerOpen,w.lowerOpen)<=0&&0<=function(R,O,I,B){if(R===void 0)return O!==void 0?1:0;if(O===void 0)return-1;if((O=Ot(R,O))===0){if(I&&B)return 0;if(I)return-1;if(B)return 1}return O}(y.upper,w.upper,y.upperOpen,w.upperOpen)}function Nv(y,w,R,O){y.subscribers.add(R),O.addEventListener("abort",function(){var I,B;y.subscribers.delete(R),y.subscribers.size===0&&(I=y,B=w,setTimeout(function(){I.subscribers.size===0&&ee(B,I)},3e3))})}var dl={stack:"dbcore",level:0,name:"Cache",create:function(y){var w=y.schema.name;return r(r({},y),{transaction:function(R,O,I){var B,W,X=y.transaction(R,O,I);return O==="readwrite"&&(W=(B=new AbortController).signal,I=function(oe){return function(){if(B.abort(),O==="readwrite"){for(var ue=new Set,de=0,Z=R;de<Z.length;de++){var me=Z[de],ae=pi["idb://".concat(w,"/").concat(me)];if(ae){var fe=y.table(me),ye=ae.optimisticOps.filter(function(tt){return tt.trans===X});if(X._explicit&&oe&&X.mutatedParts)for(var le=0,Ee=Object.values(ae.queries.query);le<Ee.length;le++)for(var De=0,Ne=(Ke=Ee[le]).slice();De<Ne.length;De++)Dc((We=Ne[De]).obsSet,X.mutatedParts)&&(ee(Ke,We),We.subscribers.forEach(function(tt){return ue.add(tt)}));else if(0<ye.length){ae.optimisticOps=ae.optimisticOps.filter(function(tt){return tt.trans!==X});for(var Ie=0,$e=Object.values(ae.queries.query);Ie<$e.length;Ie++)for(var Ke,We,Ge,Qe=0,qe=(Ke=$e[Ie]).slice();Qe<qe.length;Qe++)(We=qe[Qe]).res!=null&&X.mutatedParts&&(oe&&!We.dirty?(Ge=Object.isFrozen(We.res),Ge=Ic(We.res,We.req,ye,fe,We,Ge),We.dirty?(ee(Ke,We),We.subscribers.forEach(function(tt){return ue.add(tt)})):Ge!==We.res&&(We.res=Ge,We.promise=Ze.resolve({result:Ge}))):(We.dirty&&ee(Ke,We),We.subscribers.forEach(function(tt){return ue.add(tt)})))}}}ue.forEach(function(tt){return tt()})}}},X.addEventListener("abort",I(!1),{signal:W}),X.addEventListener("error",I(!1),{signal:W}),X.addEventListener("complete",I(!0),{signal:W})),X},table:function(R){var O=y.table(R),I=O.schema.primaryKey;return r(r({},O),{mutate:function(B){var W=rt.trans;if(I.outbound||W.db._options.cache==="disabled"||W.explicit||W.idbtrans.mode!=="readwrite")return O.mutate(B);var X=pi["idb://".concat(w,"/").concat(R)];return X?(W=O.mutate(B),B.type!=="add"&&B.type!=="put"||!(50<=B.values.length||cl(I,B).some(function(oe){return oe==null}))?(X.optimisticOps.push(B),B.mutatedParts&&sl(B.mutatedParts),W.then(function(oe){0<oe.numFailures&&(ee(X.optimisticOps,B),(oe=Nd(0,B,oe))&&X.optimisticOps.push(oe),B.mutatedParts&&sl(B.mutatedParts))}),W.catch(function(){ee(X.optimisticOps,B),B.mutatedParts&&sl(B.mutatedParts)})):W.then(function(oe){var ue=Nd(0,r(r({},B),{values:B.values.map(function(de,Z){var me;return oe.failures[Z]?de:(de=(me=I.keyPath)!==null&&me!==void 0&&me.includes(".")?be(de):r({},de),P(de,I.keyPath,oe.results[Z]),de)})}),oe);X.optimisticOps.push(ue),queueMicrotask(function(){return B.mutatedParts&&sl(B.mutatedParts)})}),W):O.mutate(B)},query:function(B){if(!vi(rt,O)||!Dd("query",B))return O.query(B);var W=((ue=rt.trans)===null||ue===void 0?void 0:ue.db._options.cache)==="immutable",Z=rt,X=Z.requery,oe=Z.signal,ue=function(fe,ye,le,Ee){var De=pi["idb://".concat(fe,"/").concat(ye)];if(!De)return[];if(!(ye=De.queries[le]))return[null,!1,De,null];var Ne=ye[(Ee.query?Ee.query.index.name:null)||""];if(!Ne)return[null,!1,De,null];switch(le){case"query":var Ie=Ne.find(function($e){return $e.req.limit===Ee.limit&&$e.req.values===Ee.values&&iu($e.req.query.range,Ee.query.range)});return Ie?[Ie,!0,De,Ne]:[Ne.find(function($e){return("limit"in $e.req?$e.req.limit:1/0)>=Ee.limit&&(!Ee.values||$e.req.values)&&os($e.req.query.range,Ee.query.range)}),!1,De,Ne];case"count":return Ie=Ne.find(function($e){return iu($e.req.query.range,Ee.query.range)}),[Ie,!!Ie,De,Ne]}}(w,R,"query",B),de=ue[0],Z=ue[1],me=ue[2],ae=ue[3];return de&&Z?de.obsSet=B.obsSet:(Z=O.query(B).then(function(fe){var ye=fe.result;if(de&&(de.res=ye),W){for(var le=0,Ee=ye.length;le<Ee;++le)Object.freeze(ye[le]);Object.freeze(ye)}else fe.result=be(ye);return fe}).catch(function(fe){return ae&&de&&ee(ae,de),Promise.reject(fe)}),de={obsSet:B.obsSet,promise:Z,subscribers:new Set,type:"query",req:B,dirty:!1},ae?ae.push(de):(ae=[de],(me=me||(pi["idb://".concat(w,"/").concat(R)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[B.query.index.name||""]=ae)),Nv(de,ae,X,oe),de.promise.then(function(fe){return{result:Ic(fe.result,B,me==null?void 0:me.optimisticOps,O,de,W)}})}})}})}};function is(y,w){return new Proxy(y,{get:function(R,O,I){return O==="db"?w:Reflect.get(R,O,I)}})}var Ga=(Nn.prototype.version=function(y){if(isNaN(y)||y<.1)throw new He.Type("Given version is not a positive number");if(y=Math.round(10*y)/10,this.idbdb||this._state.isBeingOpened)throw new He.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,y);var w=this._versions,R=w.filter(function(O){return O._cfg.version===y})[0];return R||(R=new this.Version(y),w.push(R),w.sort(Sc),R.stores({}),this._state.autoSchema=!1,R)},Nn.prototype._whenReady=function(y){var w=this;return this.idbdb&&(this._state.openComplete||rt.letThrough||this._vip)?y():new Ze(function(R,O){if(w._state.openComplete)return O(new He.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return void O(new He.DatabaseClosed);w.open().catch(it)}w._state.dbReadyPromise.then(R,O)}).then(y)},Nn.prototype.use=function(y){var w=y.stack,R=y.create,O=y.level,I=y.name;return I&&this.unuse({stack:w,name:I}),y=this._middlewares[w]||(this._middlewares[w]=[]),y.push({stack:w,create:R,level:O??10,name:I}),y.sort(function(B,W){return B.level-W.level}),this},Nn.prototype.unuse=function(y){var w=y.stack,R=y.name,O=y.create;return w&&this._middlewares[w]&&(this._middlewares[w]=this._middlewares[w].filter(function(I){return O?I.create!==O:!!R&&I.name!==R})),this},Nn.prototype.open=function(){var y=this;return Hr(Un,function(){return Av(y)})},Nn.prototype._close=function(){var y=this._state,w=ur.indexOf(this);if(0<=w&&ur.splice(w,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}y.isBeingOpened||(y.dbReadyPromise=new Ze(function(R){y.dbReadyResolve=R}),y.openCanceller=new Ze(function(R,O){y.cancelOpen=O}))},Nn.prototype.close=function(R){var w=(R===void 0?{disableAutoOpen:!0}:R).disableAutoOpen,R=this._state;w?(R.isBeingOpened&&R.cancelOpen(new He.DatabaseClosed),this._close(),R.autoOpen=!1,R.dbOpenError=new He.DatabaseClosed):(this._close(),R.autoOpen=this._options.autoOpen||R.isBeingOpened,R.openComplete=!1,R.dbOpenError=null)},Nn.prototype.delete=function(y){var w=this;y===void 0&&(y={disableAutoOpen:!0});var R=0<arguments.length&&typeof arguments[0]!="object",O=this._state;return new Ze(function(I,B){function W(){w.close(y);var X=w._deps.indexedDB.deleteDatabase(w.name);X.onsuccess=Le(function(){var oe,ue,de;oe=w._deps,ue=w.name,de=oe.indexedDB,oe=oe.IDBKeyRange,ol(de)||ue===va||Cc(de,oe).delete(ue).catch(it),I()}),X.onerror=Aa(B),X.onblocked=w._fireOnBlocked}if(R)throw new He.InvalidArgument("Invalid closeOptions argument to db.delete()");O.isBeingOpened?O.dbReadyPromise.then(W):W()})},Nn.prototype.backendDB=function(){return this.idbdb},Nn.prototype.isOpen=function(){return this.idbdb!==null},Nn.prototype.hasBeenClosed=function(){var y=this._state.dbOpenError;return y&&y.name==="DatabaseClosed"},Nn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Nn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Nn.prototype,"tables",{get:function(){var y=this;return u(this._allTables).map(function(w){return y._allTables[w]})},enumerable:!1,configurable:!0}),Nn.prototype.transaction=function(){var y=(function(w,R,O){var I=arguments.length;if(I<2)throw new He.InvalidArgument("Too few arguments");for(var B=new Array(I-1);--I;)B[I-1]=arguments[I];return O=B.pop(),[w,j(B),O]}).apply(this,arguments);return this._transaction.apply(this,y)},Nn.prototype._transaction=function(y,w,R){var O=this,I=rt.trans;I&&I.db===this&&y.indexOf("!")===-1||(I=null);var B,W,X=y.indexOf("?")!==-1;y=y.replace("!","").replace("?","");try{if(W=w.map(function(ue){if(ue=ue instanceof O.Table?ue.name:ue,typeof ue!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ue}),y=="r"||y===Bt)B=Bt;else{if(y!="rw"&&y!=Jn)throw new He.InvalidArgument("Invalid transaction mode: "+y);B=Jn}if(I){if(I.mode===Bt&&B===Jn){if(!X)throw new He.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");I=null}I&&W.forEach(function(ue){if(I&&I.storeNames.indexOf(ue)===-1){if(!X)throw new He.SubTransaction("Table "+ue+" not included in parent transaction.");I=null}}),X&&I&&!I.active&&(I=null)}}catch(ue){return I?I._promise(null,function(de,Z){Z(ue)}):Zt(ue)}var oe=(function ue(de,Z,me,ae,fe){return Ze.resolve().then(function(){var ye=rt.transless||rt,le=de._createTransaction(Z,me,de._dbSchema,ae);if(le.explicit=!0,ye={trans:le,transless:ye},ae)le.idbtrans=ae.idbtrans;else try{le.create(),le.idbtrans._explicit=!0,de._state.PR1398_maxLoop=3}catch(Ne){return Ne.name===yt.InvalidState&&de.isOpen()&&0<--de._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),de.close({disableAutoOpen:!1}),de.open().then(function(){return ue(de,Z,me,null,fe)})):Zt(Ne)}var Ee,De=se(fe);return De&&bt(),ye=Ze.follow(function(){var Ne;(Ee=fe.call(le,le))&&(De?(Ne=Ft.bind(null,null),Ee.then(Ne,Ne)):typeof Ee.next=="function"&&typeof Ee.throw=="function"&&(Ee=as(Ee)))},ye),(Ee&&typeof Ee.then=="function"?Ze.resolve(Ee).then(function(Ne){return le.active?Ne:Zt(new He.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ye.then(function(){return Ee})).then(function(Ne){return ae&&le._resolve(),le._completion.then(function(){return Ne})}).catch(function(Ne){return le._reject(Ne),Zt(Ne)})})}).bind(null,this,B,W,I,R);return I?I._promise(B,oe,"lock"):rt.trans?Hr(rt.transless,function(){return O._whenReady(oe)}):this._whenReady(oe)},Nn.prototype.table=function(y){if(!p(this._allTables,y))throw new He.InvalidTable("Table ".concat(y," does not exist"));return this._allTables[y]},Nn);function Nn(y,w){var R=this;this._middlewares={},this.verno=0;var O=Nn.dependencies;this._options=w=r({addons:Nn.addons,autoOpen:!0,indexedDB:O.indexedDB,IDBKeyRange:O.IDBKeyRange,cache:"cloned"},w),this._deps={indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange},O=w.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var I,B,W,X,oe,ue={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:it,dbReadyPromise:null,cancelOpen:it,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:w.autoOpen};ue.dbReadyPromise=new Ze(function(Z){ue.dbReadyResolve=Z}),ue.openCanceller=new Ze(function(Z,me){ue.cancelOpen=me}),this._state=ue,this.name=y,this.on=Ro(this,"populate","blocked","versionchange","close",{ready:[aa,it]}),this.on.ready.subscribe=T(this.on.ready.subscribe,function(Z){return function(me,ae){Nn.vip(function(){var fe,ye=R._state;ye.openComplete?(ye.dbOpenError||Ze.resolve().then(me),ae&&Z(me)):ye.onReadyBeingFired?(ye.onReadyBeingFired.push(me),ae&&Z(me)):(Z(me),fe=R,ae||Z(function le(){fe.on.ready.unsubscribe(me),fe.on.ready.unsubscribe(le)}))})}}),this.Collection=(I=this,Xi(Ji.prototype,function(Ee,le){this.db=I;var ae=ma,fe=null;if(le)try{ae=le()}catch(De){fe=De}var ye=Ee._ctx,le=ye.table,Ee=le.hook.reading.fire;this._ctx={table:le,index:ye.index,isPrimKey:!ye.index||le.schema.primKey.keyPath&&ye.index===le.schema.primKey.name,range:ae,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:fe,or:ye.or,valueMapper:Ee!==It?Ee:null}})),this.Table=(B=this,Xi(gc.prototype,function(Z,me,ae){this.db=B,this._tx=ae,this.name=Z,this.schema=me,this.hook=B._allTables[Z]?B._allTables[Z].hook:Ro(null,{creating:[cn,it],reading:[Qt,It],updating:[Ur,it],deleting:[Sn,it]})})),this.Transaction=(W=this,Xi(Ec.prototype,function(Z,me,ae,fe,ye){var le=this;this.db=W,this.mode=Z,this.storeNames=me,this.schema=ae,this.chromeTransactionDurability=fe,this.idbtrans=null,this.on=Ro(this,"complete","error","abort"),this.parent=ye||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ze(function(Ee,De){le._resolve=Ee,le._reject=De}),this._completion.then(function(){le.active=!1,le.on.complete.fire()},function(Ee){var De=le.active;return le.active=!1,le.on.error.fire(Ee),le.parent?le.parent._reject(Ee):De&&le.idbtrans&&le.idbtrans.abort(),Zt(Ee)})})),this.Version=(X=this,Xi(Rv.prototype,function(Z){this.db=X,this._cfg={version:Z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(oe=this,Xi(li.prototype,function(Z,me,ae){if(this.db=oe,this._ctx={table:Z,index:me===":id"?null:me,or:ae},this._cmp=this._ascending=Ot,this._descending=function(fe,ye){return Ot(ye,fe)},this._max=function(fe,ye){return 0<Ot(fe,ye)?fe:ye},this._min=function(fe,ye){return Ot(fe,ye)<0?fe:ye},this._IDBKeyRange=oe._deps.IDBKeyRange,!this._IDBKeyRange)throw new He.MissingAPI})),this.on("versionchange",function(Z){0<Z.newVersion?console.warn("Another connection wants to upgrade database '".concat(R.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(R.name,"'. Closing db now to resume the delete request.")),R.close({disableAutoOpen:!1})}),this.on("blocked",function(Z){!Z.newVersion||Z.newVersion<Z.oldVersion?console.warn("Dexie.delete('".concat(R.name,"') was blocked")):console.warn("Upgrade '".concat(R.name,"' blocked by other connection holding version ").concat(Z.oldVersion/10))}),this._maxKey=ru(w.IDBKeyRange),this._createTransaction=function(Z,me,ae,fe){return new R.Transaction(Z,me,ae,R._options.chromeTransactionDurability,fe)},this._fireOnBlocked=function(Z){R.on("blocked").fire(Z),ur.filter(function(me){return me.name===R.name&&me!==R&&!me._state.vcFired}).map(function(me){return me.on("versionchange").fire(Z)})},this.use(Td),this.use(dl),this.use(Dv),this.use(Tv),this.use(Ad);var de=new Proxy(this,{get:function(Z,me,ae){if(me==="_vip")return!0;if(me==="table")return function(ye){return is(R.table(ye),de)};var fe=Reflect.get(Z,me,ae);return fe instanceof gc?is(fe,de):me==="tables"?fe.map(function(ye){return is(ye,de)}):me==="_createTransaction"?function(){return is(fe.apply(this,arguments),de)}:fe}});this.vip=de,O.forEach(function(Z){return Z(R)})}var uu,ua=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kd=(hl.prototype.subscribe=function(y,w,R){return this._subscribe(y&&typeof y!="function"?y:{next:y,error:w,complete:R})},hl.prototype[ua]=function(){return this},hl);function hl(y){this._subscribe=y}try{uu={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{uu={indexedDB:null,IDBKeyRange:null}}function Od(y){var w,R=!1,O=new kd(function(I){var B=se(y),W,X=!1,oe={},ue={},de={get closed(){return X},unsubscribe:function(){X||(X=!0,W&&W.abort(),Z&&br.storagemutated.unsubscribe(ae))}};I.start&&I.start(de);var Z=!1,me=function(){return Vr(fe)},ae=function(ye){ul(oe,ye),Dc(ue,oe)&&me()},fe=function(){var ye,le,Ee;!X&&uu.indexedDB&&(oe={},ye={},W&&W.abort(),W=new AbortController,Ee=function(De){var Ne=te();try{B&&bt();var Ie=at(y,De);return Ie=B?Ie.finally(Ft):Ie}finally{Ne&&ge()}}(le={subscr:ye,signal:W.signal,requery:me,querier:y,trans:null}),Promise.resolve(Ee).then(function(De){R=!0,w=De,X||le.signal.aborted||(oe={},function(Ne){for(var Ie in Ne)if(p(Ne,Ie))return;return 1}(ue=ye)||Z||(br(tu,ae),Z=!0),Vr(function(){return!X&&I.next&&I.next(De)}))},function(De){R=!1,["DatabaseClosedError","AbortError"].includes(De==null?void 0:De.name)||X||Vr(function(){X||I.error&&I.error(De)})}))};return setTimeout(me,0),de});return O.hasValue=function(){return R},O.getValue=function(){return w},O}var mi=Ga;function Fc(y){var w=Do;try{Do=!0,br.storagemutated.fire(y),Oc(y,!0)}finally{Do=w}}m(mi,r(r({},wt),{delete:function(y){return new mi(y,{addons:[]}).delete()},exists:function(y){return new mi(y,{addons:[]}).open().then(function(w){return w.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(y){try{return w=mi.dependencies,R=w.indexedDB,w=w.IDBKeyRange,(ol(R)?Promise.resolve(R.databases()).then(function(O){return O.map(function(I){return I.name}).filter(function(I){return I!==va})}):Cc(R,w).toCollection().primaryKeys()).then(y)}catch{return Zt(new He.MissingAPI)}var w,R},defineClass:function(){return function(y){c(this,y)}},ignoreTransaction:function(y){return rt.trans?Hr(rt.transless,y):y()},vip:Rc,async:function(y){return function(){try{var w=as(y.apply(this,arguments));return w&&typeof w.then=="function"?w:Ze.resolve(w)}catch(R){return Zt(R)}}},spawn:function(y,w,R){try{var O=as(y.apply(R,w||[]));return O&&typeof O.then=="function"?O:Ze.resolve(O)}catch(I){return Zt(I)}},currentTransaction:{get:function(){return rt.trans||null}},waitFor:function(y,w){return w=Ze.resolve(typeof y=="function"?mi.ignoreTransaction(y):y).timeout(w||6e4),rt.trans?rt.trans.waitFor(w):w},Promise:Ze,debug:{get:function(){return gn},set:function(y){qn(y)}},derive:E,extend:c,props:m,override:T,Events:Ro,on:br,liveQuery:Od,extendObservabilitySet:ul,getByKeyPath:k,setByKeyPath:P,delByKeyPath:function(y,w){typeof w=="string"?P(y,w,void 0):"length"in w&&[].map.call(w,function(R){P(y,R,void 0)})},shallowClone:H,deepClone:be,getObjectDiff:ll,cmp:Ot,asap:D,minKey:-1/0,addons:[],connections:ur,errnames:yt,dependencies:uu,cache:pi,semVer:"4.0.11",version:"4.0.11".split(".").map(function(y){return parseInt(y)}).reduce(function(y,w,R){return y+w/Math.pow(10,2*R)})})),mi.maxKey=ru(mi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(br(tu,function(y){Do||(y=new CustomEvent(fi,{detail:y}),Do=!0,dispatchEvent(y),Do=!1)}),addEventListener(fi,function(y){y=y.detail,Do||Fc(y)}));var su,Do=!1,Gr=function(){};return typeof BroadcastChannel<"u"&&((Gr=function(){(su=new BroadcastChannel(fi)).onmessage=function(y){return y.data&&Fc(y.data)}})(),typeof su.unref=="function"&&su.unref(),br(tu,function(y){Do||su.postMessage(y)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(y){if(!Ga.disableBfCache&&y.persisted){gn&&console.debug("Dexie: handling persisted pagehide"),su!=null&&su.close();for(var w=0,R=ur;w<R.length;w++)R[w].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(y){!Ga.disableBfCache&&y.persisted&&(gn&&console.debug("Dexie: handling persisted pageshow"),Gr(),Fc({all:new xr(-1/0,[[]])}))})),Ze.rejectionMapper=function(y,w){return!y||y instanceof Se||y instanceof TypeError||y instanceof SyntaxError||!y.name||!kt[y.name]?y:(w=new kt[y.name](w||y.message,y),"stack"in y&&x(w,"stack",{get:function(){return this.inner.stack}}),w)},qn(gn),r(Ga,Object.freeze({__proto__:null,Dexie:Ga,liveQuery:Od,Entity:bn,cmp:Ot,PropModification:Zi,replacePrefix:function(y,w){return new Zi({replacePrefix:[y,w]})},add:function(y){return new Zi({add:y})},remove:function(y){return new Zi({remove:y})},default:Ga,RangeSet:xr,mergeRanges:hi,rangesOverlap:_d}),{default:Ga}),Ga})}(np)),np.exports}var zI=UI();const ky=bS(zI),eE=Symbol.for("Dexie"),yp=globalThis[eE]||(globalThis[eE]=ky);if(ky.semVer!==yp.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ky.semVer} and ${yp.semVer}`);const{liveQuery:r8,mergeRanges:a8,rangesOverlap:o8,RangeSet:i8,cmp:u8,Entity:s8,PropModification:l8,replacePrefix:c8,add:f8,remove:d8}=yp,Wn=new yp("aiits-fras");Wn.version(1).stores({users:"++id,name, aadhaar, aadhaarVerified, descriptor, createdAt",attendance:"++id, userId,user,signInAt",models:"name",syncUserQueue:"++id, operation, data",syncAttendanceQueue:"++id, operation, data"});function cC(t,n){return function(){return t.apply(n,arguments)}}const{toString:jI}=Object.prototype,{getPrototypeOf:B0}=Object,{iterator:rv,toStringTag:fC}=Symbol,av=(t=>n=>{const e=jI.call(n);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),xo=t=>(t=t.toLowerCase(),n=>av(n)===t),ov=t=>n=>typeof n===t,{isArray:hc}=Array,$f=ov("undefined");function HI(t){return t!==null&&!$f(t)&&t.constructor!==null&&!$f(t.constructor)&&Ea(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dC=xo("ArrayBuffer");function VI(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&dC(t.buffer),n}const WI=ov("string"),Ea=ov("function"),hC=ov("number"),iv=t=>t!==null&&typeof t=="object",qI=t=>t===!0||t===!1,rp=t=>{if(av(t)!=="object")return!1;const n=B0(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(fC in t)&&!(rv in t)},$I=xo("Date"),GI=xo("File"),KI=xo("Blob"),XI=xo("FileList"),YI=t=>iv(t)&&Ea(t.pipe),QI=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Ea(t.append)&&((n=av(t))==="formdata"||n==="object"&&Ea(t.toString)&&t.toString()==="[object FormData]"))},ZI=xo("URLSearchParams"),[JI,eF,tF,nF]=["ReadableStream","Request","Response","Headers"].map(xo),rF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sd(t,n,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),hc(t))for(r=0,a=t.length;r<a;r++)n.call(null,t[r],r,t);else{const o=e?Object.getOwnPropertyNames(t):Object.keys(t),u=o.length;let s;for(r=0;r<u;r++)s=o[r],n.call(null,t[s],s,t)}}function pC(t,n){n=n.toLowerCase();const e=Object.keys(t);let r=e.length,a;for(;r-- >0;)if(a=e[r],n===a.toLowerCase())return a;return null}const Ds=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vC=t=>!$f(t)&&t!==Ds;function Oy(){const{caseless:t}=vC(this)&&this||{},n={},e=(r,a)=>{const o=t&&pC(n,a)||a;rp(n[o])&&rp(r)?n[o]=Oy(n[o],r):rp(r)?n[o]=Oy({},r):hc(r)?n[o]=r.slice():n[o]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&sd(arguments[r],e);return n}const aF=(t,n,e,{allOwnKeys:r}={})=>(sd(n,(a,o)=>{e&&Ea(a)?t[o]=cC(a,e):t[o]=a},{allOwnKeys:r}),t),oF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),iF=(t,n,e,r)=>{t.prototype=Object.create(n.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),e&&Object.assign(t.prototype,e)},uF=(t,n,e,r)=>{let a,o,u;const s={};if(n=n||{},t==null)return n;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)u=a[o],(!r||r(u,t,n))&&!s[u]&&(n[u]=t[u],s[u]=!0);t=e!==!1&&B0(t)}while(t&&(!e||e(t,n))&&t!==Object.prototype);return n},sF=(t,n,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=n.length;const r=t.indexOf(n,e);return r!==-1&&r===e},lF=t=>{if(!t)return null;if(hc(t))return t;let n=t.length;if(!hC(n))return null;const e=new Array(n);for(;n-- >0;)e[n]=t[n];return e},cF=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&B0(Uint8Array)),fF=(t,n)=>{const r=(t&&t[rv]).call(t);let a;for(;(a=r.next())&&!a.done;){const o=a.value;n.call(t,o[0],o[1])}},dF=(t,n)=>{let e;const r=[];for(;(e=t.exec(n))!==null;)r.push(e);return r},hF=xo("HTMLFormElement"),pF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,r,a){return r.toUpperCase()+a}),tE=(({hasOwnProperty:t})=>(n,e)=>t.call(n,e))(Object.prototype),vF=xo("RegExp"),mC=(t,n)=>{const e=Object.getOwnPropertyDescriptors(t),r={};sd(e,(a,o)=>{let u;(u=n(a,o,t))!==!1&&(r[o]=u||a)}),Object.defineProperties(t,r)},mF=t=>{mC(t,(n,e)=>{if(Ea(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const r=t[e];if(Ea(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},gF=(t,n)=>{const e={},r=a=>{a.forEach(o=>{e[o]=!0})};return hc(t)?r(t):r(String(t).split(n)),e},yF=()=>{},bF=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function xF(t){return!!(t&&Ea(t.append)&&t[fC]==="FormData"&&t[rv])}const wF=t=>{const n=new Array(10),e=(r,a)=>{if(iv(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[a]=r;const o=hc(r)?[]:{};return sd(r,(u,s)=>{const c=e(u,a+1);!$f(c)&&(o[s]=c)}),n[a]=void 0,o}}return r};return e(t,0)},EF=xo("AsyncFunction"),SF=t=>t&&(iv(t)||Ea(t))&&Ea(t.then)&&Ea(t.catch),gC=((t,n)=>t?setImmediate:n?((e,r)=>(Ds.addEventListener("message",({source:a,data:o})=>{a===Ds&&o===e&&r.length&&r.shift()()},!1),a=>{r.push(a),Ds.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ea(Ds.postMessage)),_F=typeof queueMicrotask<"u"?queueMicrotask.bind(Ds):typeof process<"u"&&process.nextTick||gC,CF=t=>t!=null&&Ea(t[rv]),Oe={isArray:hc,isArrayBuffer:dC,isBuffer:HI,isFormData:QI,isArrayBufferView:VI,isString:WI,isNumber:hC,isBoolean:qI,isObject:iv,isPlainObject:rp,isReadableStream:JI,isRequest:eF,isResponse:tF,isHeaders:nF,isUndefined:$f,isDate:$I,isFile:GI,isBlob:KI,isRegExp:vF,isFunction:Ea,isStream:YI,isURLSearchParams:ZI,isTypedArray:cF,isFileList:XI,forEach:sd,merge:Oy,extend:aF,trim:rF,stripBOM:oF,inherits:iF,toFlatObject:uF,kindOf:av,kindOfTest:xo,endsWith:sF,toArray:lF,forEachEntry:fF,matchAll:dF,isHTMLForm:hF,hasOwnProperty:tE,hasOwnProp:tE,reduceDescriptors:mC,freezeMethods:mF,toObjectSet:gF,toCamelCase:pF,noop:yF,toFiniteNumber:bF,findKey:pC,global:Ds,isContextDefined:vC,isSpecCompliantForm:xF,toJSONObject:wF,isAsyncFn:EF,isThenable:SF,setImmediate:gC,asap:_F,isIterable:CF};function Pt(t,n,e,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),e&&(this.config=e),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}Oe.inherits(Pt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Oe.toJSONObject(this.config),code:this.code,status:this.status}}});const yC=Pt.prototype,bC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bC[t]={value:t}});Object.defineProperties(Pt,bC);Object.defineProperty(yC,"isAxiosError",{value:!0});Pt.from=(t,n,e,r,a,o)=>{const u=Object.create(yC);return Oe.toFlatObject(t,u,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),Pt.call(u,t.message,n,e,r,a),u.cause=t,u.name=t.name,o&&Object.assign(u,o),u};const RF=null;function My(t){return Oe.isPlainObject(t)||Oe.isArray(t)}function xC(t){return Oe.endsWith(t,"[]")?t.slice(0,-2):t}function nE(t,n,e){return t?t.concat(n).map(function(a,o){return a=xC(a),!e&&o?"["+a+"]":a}).join(e?".":""):n}function AF(t){return Oe.isArray(t)&&!t.some(My)}const TF=Oe.toFlatObject(Oe,{},null,function(n){return/^is[A-Z]/.test(n)});function uv(t,n,e){if(!Oe.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,e=Oe.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,S){return!Oe.isUndefined(S[E])});const r=e.metaTokens,a=e.visitor||h,o=e.dots,u=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&Oe.isSpecCompliantForm(n);if(!Oe.isFunction(a))throw new TypeError("visitor must be a function");function f(x){if(x===null)return"";if(Oe.isDate(x))return x.toISOString();if(!c&&Oe.isBlob(x))throw new Pt("Blob is not supported. Use a Buffer instead.");return Oe.isArrayBuffer(x)||Oe.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,E,S){let _=x;if(x&&!S&&typeof x=="object"){if(Oe.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Oe.isArray(x)&&AF(x)||(Oe.isFileList(x)||Oe.endsWith(E,"[]"))&&(_=Oe.toArray(x)))return E=xC(E),_.forEach(function(T,N){!(Oe.isUndefined(T)||T===null)&&n.append(u===!0?nE([E],N,o):u===null?E:E+"[]",f(T))}),!1}return My(x)?!0:(n.append(nE(S,E,o),f(x)),!1)}const p=[],m=Object.assign(TF,{defaultVisitor:h,convertValue:f,isVisitable:My});function g(x,E){if(!Oe.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Oe.forEach(x,function(_,A){(!(Oe.isUndefined(_)||_===null)&&a.call(n,_,Oe.isString(A)?A.trim():A,E,m))===!0&&g(_,E?E.concat(A):[A])}),p.pop()}}if(!Oe.isObject(t))throw new TypeError("data must be an object");return g(t),n}function rE(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function P0(t,n){this._pairs=[],t&&uv(t,this,n)}const wC=P0.prototype;wC.append=function(n,e){this._pairs.push([n,e])};wC.toString=function(n){const e=n?function(r){return n.call(this,r,rE)}:rE;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function DF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function EC(t,n,e){if(!n)return t;const r=e&&e.encode||DF;Oe.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let o;if(a?o=a(n,e):o=Oe.isURLSearchParams(n)?n.toString():new P0(n,e).toString(r),o){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class aE{constructor(){this.handlers=[]}use(n,e,r){return this.handlers.push({fulfilled:n,rejected:e,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Oe.forEach(this.handlers,function(r){r!==null&&n(r)})}}const SC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},NF=typeof URLSearchParams<"u"?URLSearchParams:P0,kF=typeof FormData<"u"?FormData:null,OF=typeof Blob<"u"?Blob:null,MF={isBrowser:!0,classes:{URLSearchParams:NF,FormData:kF,Blob:OF},protocols:["http","https","file","blob","url","data"]},L0=typeof window<"u"&&typeof document<"u",Iy=typeof navigator=="object"&&navigator||void 0,IF=L0&&(!Iy||["ReactNative","NativeScript","NS"].indexOf(Iy.product)<0),FF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",BF=L0&&window.location.href||"http://localhost",PF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:L0,hasStandardBrowserEnv:IF,hasStandardBrowserWebWorkerEnv:FF,navigator:Iy,origin:BF},Symbol.toStringTag,{value:"Module"})),Jr={...PF,...MF};function LF(t,n){return uv(t,new Jr.classes.URLSearchParams,Object.assign({visitor:function(e,r,a,o){return Jr.isNode&&Oe.isBuffer(e)?(this.append(r,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},n))}function UF(t){return Oe.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function zF(t){const n={},e=Object.keys(t);let r;const a=e.length;let o;for(r=0;r<a;r++)o=e[r],n[o]=t[o];return n}function _C(t){function n(e,r,a,o){let u=e[o++];if(u==="__proto__")return!0;const s=Number.isFinite(+u),c=o>=e.length;return u=!u&&Oe.isArray(a)?a.length:u,c?(Oe.hasOwnProp(a,u)?a[u]=[a[u],r]:a[u]=r,!s):((!a[u]||!Oe.isObject(a[u]))&&(a[u]=[]),n(e,r,a[u],o)&&Oe.isArray(a[u])&&(a[u]=zF(a[u])),!s)}if(Oe.isFormData(t)&&Oe.isFunction(t.entries)){const e={};return Oe.forEachEntry(t,(r,a)=>{n(UF(r),a,e,0)}),e}return null}function jF(t,n,e){if(Oe.isString(t))try{return(n||JSON.parse)(t),Oe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(e||JSON.stringify)(t)}const ld={transitional:SC,adapter:["xhr","http","fetch"],transformRequest:[function(n,e){const r=e.getContentType()||"",a=r.indexOf("application/json")>-1,o=Oe.isObject(n);if(o&&Oe.isHTMLForm(n)&&(n=new FormData(n)),Oe.isFormData(n))return a?JSON.stringify(_C(n)):n;if(Oe.isArrayBuffer(n)||Oe.isBuffer(n)||Oe.isStream(n)||Oe.isFile(n)||Oe.isBlob(n)||Oe.isReadableStream(n))return n;if(Oe.isArrayBufferView(n))return n.buffer;if(Oe.isURLSearchParams(n))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return LF(n,this.formSerializer).toString();if((s=Oe.isFileList(n))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return uv(s?{"files[]":n}:n,c&&new c,this.formSerializer)}}return o||a?(e.setContentType("application/json",!1),jF(n)):n}],transformResponse:[function(n){const e=this.transitional||ld.transitional,r=e&&e.forcedJSONParsing,a=this.responseType==="json";if(Oe.isResponse(n)||Oe.isReadableStream(n))return n;if(n&&Oe.isString(n)&&(r&&!this.responseType||a)){const u=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(n)}catch(s){if(u)throw s.name==="SyntaxError"?Pt.from(s,Pt.ERR_BAD_RESPONSE,this,null,this.response):s}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jr.classes.FormData,Blob:Jr.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Oe.forEach(["delete","get","head","post","put","patch"],t=>{ld.headers[t]={}});const HF=Oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VF=t=>{const n={};let e,r,a;return t&&t.split(`
`).forEach(function(u){a=u.indexOf(":"),e=u.substring(0,a).trim().toLowerCase(),r=u.substring(a+1).trim(),!(!e||n[e]&&HF[e])&&(e==="set-cookie"?n[e]?n[e].push(r):n[e]=[r]:n[e]=n[e]?n[e]+", "+r:r)}),n},oE=Symbol("internals");function Rf(t){return t&&String(t).trim().toLowerCase()}function ap(t){return t===!1||t==null?t:Oe.isArray(t)?t.map(ap):String(t)}function WF(t){const n=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=e.exec(t);)n[r[1]]=r[2];return n}const qF=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Fg(t,n,e,r,a){if(Oe.isFunction(r))return r.call(this,n,e);if(a&&(n=e),!!Oe.isString(n)){if(Oe.isString(r))return n.indexOf(r)!==-1;if(Oe.isRegExp(r))return r.test(n)}}function $F(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,e,r)=>e.toUpperCase()+r)}function GF(t,n){const e=Oe.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+e,{value:function(a,o,u){return this[r].call(this,n,a,o,u)},configurable:!0})})}let Sa=class{constructor(n){n&&this.set(n)}set(n,e,r){const a=this;function o(s,c,f){const h=Rf(c);if(!h)throw new Error("header name must be a non-empty string");const p=Oe.findKey(a,h);(!p||a[p]===void 0||f===!0||f===void 0&&a[p]!==!1)&&(a[p||c]=ap(s))}const u=(s,c)=>Oe.forEach(s,(f,h)=>o(f,h,c));if(Oe.isPlainObject(n)||n instanceof this.constructor)u(n,e);else if(Oe.isString(n)&&(n=n.trim())&&!qF(n))u(VF(n),e);else if(Oe.isObject(n)&&Oe.isIterable(n)){let s={},c,f;for(const h of n){if(!Oe.isArray(h))throw TypeError("Object iterator must return a key-value pair");s[f=h[0]]=(c=s[f])?Oe.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}u(s,e)}else n!=null&&o(e,n,r);return this}get(n,e){if(n=Rf(n),n){const r=Oe.findKey(this,n);if(r){const a=this[r];if(!e)return a;if(e===!0)return WF(a);if(Oe.isFunction(e))return e.call(this,a,r);if(Oe.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,e){if(n=Rf(n),n){const r=Oe.findKey(this,n);return!!(r&&this[r]!==void 0&&(!e||Fg(this,this[r],r,e)))}return!1}delete(n,e){const r=this;let a=!1;function o(u){if(u=Rf(u),u){const s=Oe.findKey(r,u);s&&(!e||Fg(r,r[s],s,e))&&(delete r[s],a=!0)}}return Oe.isArray(n)?n.forEach(o):o(n),a}clear(n){const e=Object.keys(this);let r=e.length,a=!1;for(;r--;){const o=e[r];(!n||Fg(this,this[o],o,n,!0))&&(delete this[o],a=!0)}return a}normalize(n){const e=this,r={};return Oe.forEach(this,(a,o)=>{const u=Oe.findKey(r,o);if(u){e[u]=ap(a),delete e[o];return}const s=n?$F(o):String(o).trim();s!==o&&delete e[o],e[s]=ap(a),r[s]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const e=Object.create(null);return Oe.forEach(this,(r,a)=>{r!=null&&r!==!1&&(e[a]=n&&Oe.isArray(r)?r.join(", "):r)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,e])=>n+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...e){const r=new this(n);return e.forEach(a=>r.set(a)),r}static accessor(n){const r=(this[oE]=this[oE]={accessors:{}}).accessors,a=this.prototype;function o(u){const s=Rf(u);r[s]||(GF(a,u),r[s]=!0)}return Oe.isArray(n)?n.forEach(o):o(n),this}};Sa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Oe.reduceDescriptors(Sa.prototype,({value:t},n)=>{let e=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(r){this[e]=r}}});Oe.freezeMethods(Sa);function Bg(t,n){const e=this||ld,r=n||e,a=Sa.from(r.headers);let o=r.data;return Oe.forEach(t,function(s){o=s.call(e,o,a.normalize(),n?n.status:void 0)}),a.normalize(),o}function CC(t){return!!(t&&t.__CANCEL__)}function pc(t,n,e){Pt.call(this,t??"canceled",Pt.ERR_CANCELED,n,e),this.name="CanceledError"}Oe.inherits(pc,Pt,{__CANCEL__:!0});function RC(t,n,e){const r=e.config.validateStatus;!e.status||!r||r(e.status)?t(e):n(new Pt("Request failed with status code "+e.status,[Pt.ERR_BAD_REQUEST,Pt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function KF(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function XF(t,n){t=t||10;const e=new Array(t),r=new Array(t);let a=0,o=0,u;return n=n!==void 0?n:1e3,function(c){const f=Date.now(),h=r[o];u||(u=f),e[a]=c,r[a]=f;let p=o,m=0;for(;p!==a;)m+=e[p++],p=p%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),f-u<n)return;const g=h&&f-h;return g?Math.round(m*1e3/g):void 0}}function YF(t,n){let e=0,r=1e3/n,a,o;const u=(f,h=Date.now())=>{e=h,a=null,o&&(clearTimeout(o),o=null),t.apply(null,f)};return[(...f)=>{const h=Date.now(),p=h-e;p>=r?u(f,h):(a=f,o||(o=setTimeout(()=>{o=null,u(a)},r-p)))},()=>a&&u(a)]}const bp=(t,n,e=3)=>{let r=0;const a=XF(50,250);return YF(o=>{const u=o.loaded,s=o.lengthComputable?o.total:void 0,c=u-r,f=a(c),h=u<=s;r=u;const p={loaded:u,total:s,progress:s?u/s:void 0,bytes:c,rate:f||void 0,estimated:f&&s&&h?(s-u)/f:void 0,event:o,lengthComputable:s!=null,[n?"download":"upload"]:!0};t(p)},e)},iE=(t,n)=>{const e=t!=null;return[r=>n[0]({lengthComputable:e,total:t,loaded:r}),n[1]]},uE=t=>(...n)=>Oe.asap(()=>t(...n)),QF=Jr.hasStandardBrowserEnv?((t,n)=>e=>(e=new URL(e,Jr.origin),t.protocol===e.protocol&&t.host===e.host&&(n||t.port===e.port)))(new URL(Jr.origin),Jr.navigator&&/(msie|trident)/i.test(Jr.navigator.userAgent)):()=>!0,ZF=Jr.hasStandardBrowserEnv?{write(t,n,e,r,a,o){const u=[t+"="+encodeURIComponent(n)];Oe.isNumber(e)&&u.push("expires="+new Date(e).toGMTString()),Oe.isString(r)&&u.push("path="+r),Oe.isString(a)&&u.push("domain="+a),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JF(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function eB(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function AC(t,n,e){let r=!JF(n);return t&&(r||e==!1)?eB(t,n):n}const sE=t=>t instanceof Sa?{...t}:t;function Ls(t,n){n=n||{};const e={};function r(f,h,p,m){return Oe.isPlainObject(f)&&Oe.isPlainObject(h)?Oe.merge.call({caseless:m},f,h):Oe.isPlainObject(h)?Oe.merge({},h):Oe.isArray(h)?h.slice():h}function a(f,h,p,m){if(Oe.isUndefined(h)){if(!Oe.isUndefined(f))return r(void 0,f,p,m)}else return r(f,h,p,m)}function o(f,h){if(!Oe.isUndefined(h))return r(void 0,h)}function u(f,h){if(Oe.isUndefined(h)){if(!Oe.isUndefined(f))return r(void 0,f)}else return r(void 0,h)}function s(f,h,p){if(p in n)return r(f,h);if(p in t)return r(void 0,f)}const c={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s,headers:(f,h,p)=>a(sE(f),sE(h),p,!0)};return Oe.forEach(Object.keys(Object.assign({},t,n)),function(h){const p=c[h]||a,m=p(t[h],n[h],h);Oe.isUndefined(m)&&p!==s||(e[h]=m)}),e}const TC=t=>{const n=Ls({},t);let{data:e,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:o,headers:u,auth:s}=n;n.headers=u=Sa.from(u),n.url=EC(AC(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&u.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let c;if(Oe.isFormData(e)){if(Jr.hasStandardBrowserEnv||Jr.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((c=u.getContentType())!==!1){const[f,...h]=c?c.split(";").map(p=>p.trim()).filter(Boolean):[];u.setContentType([f||"multipart/form-data",...h].join("; "))}}if(Jr.hasStandardBrowserEnv&&(r&&Oe.isFunction(r)&&(r=r(n)),r||r!==!1&&QF(n.url))){const f=a&&o&&ZF.read(o);f&&u.set(a,f)}return n},tB=typeof XMLHttpRequest<"u",nB=tB&&function(t){return new Promise(function(e,r){const a=TC(t);let o=a.data;const u=Sa.from(a.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:f}=a,h,p,m,g,x;function E(){g&&g(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let S=new XMLHttpRequest;S.open(a.method.toUpperCase(),a.url,!0),S.timeout=a.timeout;function _(){if(!S)return;const T=Sa.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),D={data:!s||s==="text"||s==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:T,config:t,request:S};RC(function(P){e(P),E()},function(P){r(P),E()},D),S=null}"onloadend"in S?S.onloadend=_:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(_)},S.onabort=function(){S&&(r(new Pt("Request aborted",Pt.ECONNABORTED,t,S)),S=null)},S.onerror=function(){r(new Pt("Network Error",Pt.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const D=a.transitional||SC;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),r(new Pt(N,D.clarifyTimeoutError?Pt.ETIMEDOUT:Pt.ECONNABORTED,t,S)),S=null},o===void 0&&u.setContentType(null),"setRequestHeader"in S&&Oe.forEach(u.toJSON(),function(N,D){S.setRequestHeader(D,N)}),Oe.isUndefined(a.withCredentials)||(S.withCredentials=!!a.withCredentials),s&&s!=="json"&&(S.responseType=a.responseType),f&&([m,x]=bp(f,!0),S.addEventListener("progress",m)),c&&S.upload&&([p,g]=bp(c),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(h=T=>{S&&(r(!T||T.type?new pc(null,t,S):T),S.abort(),S=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const A=KF(a.url);if(A&&Jr.protocols.indexOf(A)===-1){r(new Pt("Unsupported protocol "+A+":",Pt.ERR_BAD_REQUEST,t));return}S.send(o||null)})},rB=(t,n)=>{const{length:e}=t=t?t.filter(Boolean):[];if(n||e){let r=new AbortController,a;const o=function(f){if(!a){a=!0,s();const h=f instanceof Error?f:this.reason;r.abort(h instanceof Pt?h:new pc(h instanceof Error?h.message:h))}};let u=n&&setTimeout(()=>{u=null,o(new Pt(`timeout ${n} of ms exceeded`,Pt.ETIMEDOUT))},n);const s=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),t=null)};t.forEach(f=>f.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>Oe.asap(s),c}},aB=function*(t,n){let e=t.byteLength;if(e<n){yield t;return}let r=0,a;for(;r<e;)a=r+n,yield t.slice(r,a),r=a},oB=async function*(t,n){for await(const e of iB(t))yield*aB(e,n)},iB=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:e,value:r}=await n.read();if(e)break;yield r}}finally{await n.cancel()}},lE=(t,n,e,r)=>{const a=oB(t,n);let o=0,u,s=c=>{u||(u=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:f,value:h}=await a.next();if(f){s(),c.close();return}let p=h.byteLength;if(e){let m=o+=p;e(m)}c.enqueue(new Uint8Array(h))}catch(f){throw s(f),f}},cancel(c){return s(c),a.return()}},{highWaterMark:2})},sv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",DC=sv&&typeof ReadableStream=="function",uB=sv&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),NC=(t,...n)=>{try{return!!t(...n)}catch{return!1}},sB=DC&&NC(()=>{let t=!1;const n=new Request(Jr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),cE=64*1024,Fy=DC&&NC(()=>Oe.isReadableStream(new Response("").body)),xp={stream:Fy&&(t=>t.body)};sv&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!xp[n]&&(xp[n]=Oe.isFunction(t[n])?e=>e[n]():(e,r)=>{throw new Pt(`Response type '${n}' is not supported`,Pt.ERR_NOT_SUPPORT,r)})})})(new Response);const lB=async t=>{if(t==null)return 0;if(Oe.isBlob(t))return t.size;if(Oe.isSpecCompliantForm(t))return(await new Request(Jr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Oe.isArrayBufferView(t)||Oe.isArrayBuffer(t))return t.byteLength;if(Oe.isURLSearchParams(t)&&(t=t+""),Oe.isString(t))return(await uB(t)).byteLength},cB=async(t,n)=>{const e=Oe.toFiniteNumber(t.getContentLength());return e??lB(n)},fB=sv&&(async t=>{let{url:n,method:e,data:r,signal:a,cancelToken:o,timeout:u,onDownloadProgress:s,onUploadProgress:c,responseType:f,headers:h,withCredentials:p="same-origin",fetchOptions:m}=TC(t);f=f?(f+"").toLowerCase():"text";let g=rB([a,o&&o.toAbortSignal()],u),x;const E=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let S;try{if(c&&sB&&e!=="get"&&e!=="head"&&(S=await cB(h,r))!==0){let D=new Request(n,{method:"POST",body:r,duplex:"half"}),k;if(Oe.isFormData(r)&&(k=D.headers.get("content-type"))&&h.setContentType(k),D.body){const[P,H]=iE(S,bp(uE(c)));r=lE(D.body,cE,P,H)}}Oe.isString(p)||(p=p?"include":"omit");const _="credentials"in Request.prototype;x=new Request(n,{...m,signal:g,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:_?p:void 0});let A=await fetch(x);const T=Fy&&(f==="stream"||f==="response");if(Fy&&(s||T&&E)){const D={};["status","statusText","headers"].forEach(U=>{D[U]=A[U]});const k=Oe.toFiniteNumber(A.headers.get("content-length")),[P,H]=s&&iE(k,bp(uE(s),!0))||[];A=new Response(lE(A.body,cE,P,()=>{H&&H(),E&&E()}),D)}f=f||"text";let N=await xp[Oe.findKey(xp,f)||"text"](A,t);return!T&&E&&E(),await new Promise((D,k)=>{RC(D,k,{data:N,headers:Sa.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:x})})}catch(_){throw E&&E(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new Pt("Network Error",Pt.ERR_NETWORK,t,x),{cause:_.cause||_}):Pt.from(_,_&&_.code,t,x)}}),By={http:RF,xhr:nB,fetch:fB};Oe.forEach(By,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const fE=t=>`- ${t}`,dB=t=>Oe.isFunction(t)||t===null||t===!1,kC={getAdapter:t=>{t=Oe.isArray(t)?t:[t];const{length:n}=t;let e,r;const a={};for(let o=0;o<n;o++){e=t[o];let u;if(r=e,!dB(e)&&(r=By[(u=String(e)).toLowerCase()],r===void 0))throw new Pt(`Unknown adapter '${u}'`);if(r)break;a[u||"#"+o]=r}if(!r){const o=Object.entries(a).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let u=n?o.length>1?`since :
`+o.map(fE).join(`
`):" "+fE(o[0]):"as no adapter specified";throw new Pt("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:By};function Pg(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new pc(null,t)}function dE(t){return Pg(t),t.headers=Sa.from(t.headers),t.data=Bg.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),kC.getAdapter(t.adapter||ld.adapter)(t).then(function(r){return Pg(t),r.data=Bg.call(t,t.transformResponse,r),r.headers=Sa.from(r.headers),r},function(r){return CC(r)||(Pg(t),r&&r.response&&(r.response.data=Bg.call(t,t.transformResponse,r.response),r.response.headers=Sa.from(r.response.headers))),Promise.reject(r)})}const OC="1.9.0",lv={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{lv[t]=function(r){return typeof r===t||"a"+(n<1?"n ":" ")+t}});const hE={};lv.transitional=function(n,e,r){function a(o,u){return"[Axios v"+OC+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,s)=>{if(n===!1)throw new Pt(a(u," has been removed"+(e?" in "+e:"")),Pt.ERR_DEPRECATED);return e&&!hE[u]&&(hE[u]=!0,console.warn(a(u," has been deprecated since v"+e+" and will be removed in the near future"))),n?n(o,u,s):!0}};lv.spelling=function(n){return(e,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function hB(t,n,e){if(typeof t!="object")throw new Pt("options must be an object",Pt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const o=r[a],u=n[o];if(u){const s=t[o],c=s===void 0||u(s,o,t);if(c!==!0)throw new Pt("option "+o+" must be "+c,Pt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Pt("Unknown option "+o,Pt.ERR_BAD_OPTION)}}const op={assertOptions:hB,validators:lv},Bo=op.validators;let Ms=class{constructor(n){this.defaults=n||{},this.interceptors={request:new aE,response:new aE}}async request(n,e){try{return await this._request(n,e)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(n,e){typeof n=="string"?(e=e||{},e.url=n):e=n||{},e=Ls(this.defaults,e);const{transitional:r,paramsSerializer:a,headers:o}=e;r!==void 0&&op.assertOptions(r,{silentJSONParsing:Bo.transitional(Bo.boolean),forcedJSONParsing:Bo.transitional(Bo.boolean),clarifyTimeoutError:Bo.transitional(Bo.boolean)},!1),a!=null&&(Oe.isFunction(a)?e.paramsSerializer={serialize:a}:op.assertOptions(a,{encode:Bo.function,serialize:Bo.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),op.assertOptions(e,{baseUrl:Bo.spelling("baseURL"),withXsrfToken:Bo.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let u=o&&Oe.merge(o.common,o[e.method]);o&&Oe.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),e.headers=Sa.concat(u,o);const s=[];let c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(e)===!1||(c=c&&E.synchronous,s.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let h,p=0,m;if(!c){const x=[dE.bind(this),void 0];for(x.unshift.apply(x,s),x.push.apply(x,f),m=x.length,h=Promise.resolve(e);p<m;)h=h.then(x[p++],x[p++]);return h}m=s.length;let g=e;for(p=0;p<m;){const x=s[p++],E=s[p++];try{g=x(g)}catch(S){E.call(this,S);break}}try{h=dE.call(this,g)}catch(x){return Promise.reject(x)}for(p=0,m=f.length;p<m;)h=h.then(f[p++],f[p++]);return h}getUri(n){n=Ls(this.defaults,n);const e=AC(n.baseURL,n.url,n.allowAbsoluteUrls);return EC(e,n.params,n.paramsSerializer)}};Oe.forEach(["delete","get","head","options"],function(n){Ms.prototype[n]=function(e,r){return this.request(Ls(r||{},{method:n,url:e,data:(r||{}).data}))}});Oe.forEach(["post","put","patch"],function(n){function e(r){return function(o,u,s){return this.request(Ls(s||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Ms.prototype[n]=e(),Ms.prototype[n+"Form"]=e(!0)});let pB=class MC{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const r=this;this.promise.then(a=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](a);r._listeners=null}),this.promise.then=a=>{let o;const u=new Promise(s=>{r.subscribe(s),o=s}).then(a);return u.cancel=function(){r.unsubscribe(o)},u},n(function(o,u,s){r.reason||(r.reason=new pc(o,u,s),e(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const e=this._listeners.indexOf(n);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const n=new AbortController,e=r=>{n.abort(r)};return this.subscribe(e),n.signal.unsubscribe=()=>this.unsubscribe(e),n.signal}static source(){let n;return{token:new MC(function(a){n=a}),cancel:n}}};function vB(t){return function(e){return t.apply(null,e)}}function mB(t){return Oe.isObject(t)&&t.isAxiosError===!0}const Py={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Py).forEach(([t,n])=>{Py[n]=t});function IC(t){const n=new Ms(t),e=cC(Ms.prototype.request,n);return Oe.extend(e,Ms.prototype,n,{allOwnKeys:!0}),Oe.extend(e,n,null,{allOwnKeys:!0}),e.create=function(a){return IC(Ls(t,a))},e}const En=IC(ld);En.Axios=Ms;En.CanceledError=pc;En.CancelToken=pB;En.isCancel=CC;En.VERSION=OC;En.toFormData=uv;En.AxiosError=Pt;En.Cancel=En.CanceledError;En.all=function(n){return Promise.all(n)};En.spread=vB;En.isAxiosError=mB;En.mergeConfig=Ls;En.AxiosHeaders=Sa;En.formToJSON=t=>_C(Oe.isHTMLForm(t)?new FormData(t):t);En.getAdapter=kC.getAdapter;En.HttpStatusCode=Py;En.default=En;const{Axios:v8,AxiosError:m8,CanceledError:g8,isCancel:y8,CancelToken:b8,VERSION:x8,all:w8,Cancel:E8,isAxiosError:S8,spread:_8,toFormData:C8,AxiosHeaders:R8,HttpStatusCode:A8,formToJSON:T8,getAdapter:D8,mergeConfig:N8}=En;async function U0(){try{const n=(await En.get("/api/user")).data;n!=null&&n.status&&n.users?(await Wn.users.clear(),await Wn.users.bulkPut(n.users),console.log("users have been stored in indexDB from server")):console.log("can't stored users from server to IndexDB")}catch(t){console.log(t)}}async function z0(){try{const n=(await En.get("/api/attendance/todays-attendance")).data;n!=null&&n.status&&n.users?(await Wn.attendance.clear(),await Wn.attendance.bulkPut(n.users),console.log("attendances have been stored in indexDB from server")):console.log("can't stored attendances from server to IndexDB")}catch(t){console.log(t)}}async function j0(){const t=await Wn.syncUserQueue.toArray();for(const n of t)if(n)try{const{operation:e,data:r}=n,{name:a,aadhaar:o,aadhaarVerified:u,descriptor:s,addedBy:c,createdAt:f}=r;let h;switch(e){case"add":h=await En.post("/api/user/register",{name:a,aadhaar:o,aadhaarVerified:u,descriptor:s,addedBy:c,createdAt:f});break}h.data.status&&(console.log("users synced from local to server"),await Wn.syncUserQueue.delete(n.id))}catch(e){console.error("Sync failed from local to server:",e)}else return}async function H0(){const t=await Wn.syncAttendanceQueue.toArray();for(const n of t)if(n)try{const{operation:e,data:r}=n,{userId:a,signInAt:o}=r;let u;switch(e){case"add":console.log("syncing addendace local to server"),u=await En.post("/api/attendance/sign-in",{userId:a,signInAt:o});break}u.data.status&&(console.log("attendances synced from local to server"),await Wn.syncAttendanceQueue.delete(n.id))}catch(e){console.error("Sync failed:",e)}else return}function FC(){const[t,n]=F.useState(navigator.onLine);return F.useEffect(()=>{const e=()=>n(!0),r=()=>n(!1);return window.addEventListener("online",e),window.addEventListener("offline",r),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}},[]),t}const Lg={name:"Tom Cook",imageUrl:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"},pE=[{name:"Dashboard",href:"/admin/dashboard",current:!0},{name:"Users",href:"/admin/users",current:!1},{name:"Present Users",href:"/admin/present-users",current:!1},{name:"Absent users",href:"/admin/absent-users",current:!1}],vE=[{name:"Your Profile",href:"#"},{name:"Settings",href:"#"},{name:"Sign out",href:"#"}];function mE(...t){return t.filter(Boolean).join(" ")}function gB(){const t=FC(),n=$p(),{pathname:e}=ei(),r=e.split("/")[2].split("-").map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" ");return F.useEffect(()=>{t&&(async()=>{await j0(),await H0(),await U0(),await z0()})()},[t]),Q.jsx("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-neutral-800 text-neutral-50",children:Q.jsxs("div",{className:"min-h-full w-full",children:[Q.jsxs(oI,{as:"nav",className:"bg-gray-800",children:[Q.jsx("div",{className:"mx-auto w-full px-4 sm:px-6 lg:px-8",children:Q.jsxs("div",{className:"flex h-16 items-center justify-between",children:[Q.jsxs("div",{className:"flex items-center",children:[Q.jsx("div",{className:"shrink-0",children:Q.jsx("h1",{onClick:()=>n("/"),className:"cursor-pointer text-center text-2xl/9 font-bold tracking-tight text-cyan-700",children:"AIITS"})}),Q.jsx("div",{className:"hidden md:block",children:Q.jsx("div",{className:"ml-10 flex items-baseline space-x-4",children:pE.map(a=>Q.jsx(g0,{to:a.href,"aria-current":a.href===e?"page":void 0,className:mE(a.href===e?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:a.name},a.name))})})]}),Q.jsx("div",{className:"hidden md:block",children:Q.jsxs("div",{className:"ml-4 flex items-center gap-2 md:ml-6",children:[Q.jsxs("button",{onClick:()=>n("/admin/user-register"),type:"button",className:"cursor-pointer relative flex items-center border px-3 shadow rounded-full bg-gray-900 p-1 text-gray-400 hover:text-white",children:[Q.jsx("span",{className:"absolute -inset-1.5"}),Q.jsx("span",{className:"sr-only",children:"Add New"}),Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-5",children:Q.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add New"]}),Q.jsxs("button",{type:"button",className:" cursor-pointer relative rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800 focus:outline-hidden",children:[Q.jsx("span",{className:"absolute -inset-1.5"}),Q.jsx("span",{className:"sr-only",children:"View notifications"}),Q.jsx(Z2,{"aria-hidden":"true",className:"size-6"})]}),Q.jsxs(OI,{as:"div",className:"relative ml-3",children:[Q.jsx("div",{children:Q.jsxs(uC,{className:"relative flex max-w-xs items-center rounded-full bg-gray-800 text-sm focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800 focus:outline-hidden",children:[Q.jsx("span",{className:"absolute -inset-1.5"}),Q.jsx("span",{className:"sr-only",children:"Open user menu"}),Q.jsx("img",{alt:"",src:Lg.imageUrl,className:"size-8  rounded-full"})]})}),Q.jsx(sC,{transition:!0,className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black/5 transition focus:outline-hidden data-closed:scale-95 data-closed:transform data-closed:opacity-0 data-enter:duration-100 data-enter:ease-out data-leave:duration-75 data-leave:ease-in",children:vE.map(a=>Q.jsx(lC,{children:Q.jsx("a",{href:a.href,className:"block px-4 py-2 text-sm text-gray-700 data-focus:bg-gray-100 data-focus:outline-hidden",children:a.name})},a.name))})]})]})}),Q.jsx("div",{className:"-mr-2 flex md:hidden",children:Q.jsxs(tp,{className:"group relative inline-flex items-center justify-center rounded-md bg-gray-800 p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800 focus:outline-hidden",children:[Q.jsx("span",{className:"absolute -inset-0.5"}),Q.jsx("span",{className:"sr-only",children:"Open main menu"}),Q.jsx(II,{"aria-hidden":"true",className:"block size-6 group-data-open:hidden"}),Q.jsx(PI,{"aria-hidden":"true",className:"hidden size-6 group-data-open:block"})]})})]})}),Q.jsxs(rC,{className:"md:hidden",children:[Q.jsx("div",{className:"space-y-1 px-2 pt-2 pb-3 sm:px-3",children:pE.map(a=>Q.jsx(tp,{as:"a",href:a.href,"aria-current":a.current?"page":void 0,className:mE(a.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:a.name},a.name))}),Q.jsxs("div",{className:"border-t border-gray-700 pt-4 pb-3",children:[Q.jsxs("div",{className:"flex items-center px-5",children:[Q.jsx("div",{className:"shrink-0",children:Q.jsx("img",{alt:"",src:Lg.imageUrl,className:"size-10  rounded-full"})}),Q.jsx("div",{className:"ml-3",children:Q.jsx("div",{className:"text-base/5 font-medium text-white",children:Lg.name})}),Q.jsxs("button",{type:"button",className:"relative ml-auto shrink-0 rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800 focus:outline-hidden",children:[Q.jsx("span",{className:"absolute -inset-1.5"}),Q.jsx("span",{className:"sr-only",children:"View notifications"}),Q.jsx(Z2,{"aria-hidden":"true",className:"size-6"})]})]}),Q.jsx("div",{className:"mt-3 space-y-1 px-2",children:vE.map(a=>Q.jsx(tp,{as:"a",href:a.href,className:"block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white",children:a.name},a.name))})]})]})]}),Q.jsx("header",{className:"bg-white shadow-sm",children:Q.jsx("div",{className:"mx-auto max-w-7xl px-4 py-1 sm:px-6 lg:px-8",children:Q.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:r})})}),Q.jsx("main",{children:Q.jsx(zS,{})})]})})}function gE(){return Q.jsxs("div",{className:"text-center px-4",children:[Q.jsx("h1",{className:"text-9xl font-bold text-indigo-600",children:"404"}),Q.jsx("h2",{className:"text-3xl md:text-4xl font-semibold mt-4",children:"Page Not Found"}),Q.jsx("p",{className:"text-gray-600 mt-2",children:"Sorry, the page you are looking for doesn't exist or has been moved."}),Q.jsx("a",{href:"/",className:"mt-6 inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition",children:"Go Back Home"})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var BC=function(t,n){return(BC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])})(t,n)};function wo(t,n){function e(){this.constructor=t}BC(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function st(t,n,e,r){return new(e||(e=Promise))(function(a,o){function u(f){try{c(r.next(f))}catch(h){o(h)}}function s(f){try{c(r.throw(f))}catch(h){o(h)}}function c(f){f.done?a(f.value):new e(function(h){h(f.value)}).then(u,s)}c((r=r.apply(t,[])).next())})}function lt(t,n){var e,r,a,o,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(f){return function(h){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(a=2&h[0]?r.return:h[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,h[1])).done)return a;switch(r=0,a&&(h=[2&h[0],a.value]),h[0]){case 0:case 1:a=h;break;case 4:return u.label++,{value:h[1],done:!1};case 5:u.label++,r=h[1],h=[0];continue;case 7:h=u.ops.pop(),u.trys.pop();continue;default:if(!(a=(a=u.trys).length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){u=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){u.label=h[1];break}if(h[0]===6&&u.label<a[1]){u.label=a[1],a=h;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(h);break}a[2]&&u.ops.pop(),u.trys.pop();continue}h=n.call(t,u)}catch(p){h=[6,p],r=0}finally{e=a=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}}var yB=function(){function t(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(n,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},t.prototype.registerFlag=function(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){var a=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+a+"."),this.set(n,a)}},t.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},t.prototype.getNumber=function(n){return this.get(n)},t.prototype.getBool=function(n){return this.get(n)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(n,e){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)},t.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},t.prototype.setFlags=function(n){this.flags=Object.assign({},n)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,r,a=(e=this.global.location.search,r={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var u=[],s=1;s<arguments.length;s++)u[s-1]=arguments[s];return bB(r,u[0],u[1]),u.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(o){var u=o.split(":"),s=u[0],c=u[1];n.urlFlags[s]=function(f,h){if((h=h.toLowerCase())==="true"||h==="false")return h==="true";if(""+ +h===h)return+h;throw new Error("Could not parse value flag value "+h+" for flag "+f+".")}(s,c)})}},t}();function bB(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function Me(){return PC}var PC=null,wp=new Map,Ly=new Map;function LC(t,n){var e=zC(t,n);return wp.get(e)}function xB(t){return Ly.get(t)}function yE(t){for(var n=wp.entries(),e=[];;){var r=n.next(),a=r.done,o=r.value;if(a)break;var u=o[0],s=o[1];u.split("_")[0]===t&&e.push(s)}return e}function UC(t){var n=t.kernelName,e=t.backendName,r=zC(n,e);if(wp.has(r))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");wp.set(r,t)}function wB(t){var n=t.kernelName;Ly.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),Ly.set(n,t)}function zC(t,n){return n+"_"+t}function Uy(t,n,e){return Math.max(t,Math.min(n,e))}function jC(t){return t%2==0?t:t+1}function EB(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function $(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function ln(t,n,e){e===void 0&&(e=""),$(Ar(t,n),function(){return e+" Shapes "+t+" and "+n+" must match"})}function vc(t){$(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function ic(t,n,e){if(n===void 0&&(n=[]),e===void 0&&(e=!1),n==null&&(n=[]),Array.isArray(t)||Go(t)&&!e)for(var r=0;r<t.length;++r)ic(t[r],n,e);else n.push(t);return n}function ct(t){if(t.length===0)return 1;for(var n=t[0],e=1;e<t.length;e++)n*=t[e];return n}function Ar(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Qn(t){return t%1==0}function SB(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var n=Math.exp(2*t);return(n-1)/(n+1)}function zy(t){var n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function Ql(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function bE(t,n,e){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,a){var o=0,u=function(){if(t())r();else{o++;var s=n(o);e!=null&&o>=e?a():setTimeout(u,s)}};u()})}function _B(t,n){for(var e=1,r=-1,a=0;a<t.length;++a)if(t[a]>=0)e*=t[a];else if(t[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(t[a]<0)throw Error("Shapes can not be < 0. Found "+t[a]+" at dim "+a);if(r===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+t);return t}if(e===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=t.slice();return o[r]=n/e,o}function mr(t,n){var e=n.length;return $((t=t==null?n.map(function(r,a){return a}):[].concat(t)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+t}),$(t.every(function(r){return Qn(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?e+r:r})}function _s(t,n){for(var e=[],r=[],a=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||a?null:mr(n,t).sort(),u=0,s=0;s<t.length;++s){if(o!=null){if(o[u]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(o[u]==null||o[u]>s)&&t[s]===1&&(e.push(t[s]),r.push(s)),o[u]<=s&&u++}t[s]!==1&&(e.push(t[s]),r.push(s))}return{newShape:e,keptDims:r}}function Gf(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else{if(t!=="bool")throw new Error("Unknown data type "+t);e=new Uint8Array(n)}return e}function Ep(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else{if(t!=="string")throw new Error("Unknown data type "+t);e=new Array(n)}return e}function CB(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function RB(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function AB(t,n){return n!=="complex64"&&(n!=="float32"||t==="complex64")&&(n!=="int32"||t==="float32"||t==="complex64")&&(n!=="bool"||t!=="bool")}function Go(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function HC(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function TB(t){if(t==null)return 0;var n=0;return t.forEach(function(e){return n+=e.length}),n}function V0(t){return typeof t=="string"||t instanceof String}function DB(t){return typeof t=="boolean"}function NB(t){return typeof t=="number"}function cd(t){return Array.isArray(t)?cd(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":NB(t)?"float32":V0(t)?"string":DB(t)?"bool":"float32"}function jy(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Hy(t,n){for(var e=n;e<t;++e)if(t%e==0)return e;return t}function Ko(t){var n=t.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=t[n-1];for(var r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function VC(t,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ic(t)),e&&CB(t,n),function(o,u){return o instanceof Float32Array&&u==="float32"||o instanceof Int32Array&&u==="int32"||o instanceof Uint8Array&&u==="bool"}(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){for(var r=new Uint8Array(t.length),a=0;a<r.length;++a)Math.round(t[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+n)}function xE(t,n){if(t.length===0)return n[0];var e=t.reduce(function(r,a){return r*a});if(e===0)return[];if(e!==n.length)throw new Error("["+t+"] does not match the input size.");return function r(a,o,u){var s=new Array;if(o.length===1)for(var c=o[0],f=0;f<c;f++)s[f]=u[a+f];else{c=o[0];var h=o.slice(1),p=h.reduce(function(m,g){return m*g});for(f=0;f<c;f++)s[f]=r(a+f*p,h,u)}return s}(0,t,n)}function WC(t,n){for(var e=fd(t,n),r=0;r<e.length;r++)e[r]=1;return e}function fd(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+n)}function zo(){return Me().platform.now()}function qC(t){t.forEach(function(n){$(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function kB(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",Me().platform.encode(t,n)}function Sp(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",Me().platform.decode(t,n)}function wE(t,n,e){if(n===0)return 0;if(n===1)return t[0];for(var r=t[t.length-1],a=0;a<t.length-1;++a)r+=e[a]*t[a];return r}function OB(t,n,e){if(n===0)return[];if(n===1)return[t];for(var r=new Array(n),a=0;a<r.length-1;++a)r[a]=Math.floor(t/e[a]),t-=r[a]*e[a];return r[r.length-1]=t,r}var MB=function(){function t(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new IB)}return t.prototype.profileKernel=function(n,e,r){var a,o=this,u=this.backendTimer.time(function(){a=r()});return a.forEach(function(s){s.data().then(function(c){(function(f,h,p){if(h!=="float32")return!1;for(var m=0;m<f.length;m++){var g=f[m];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+p+"'"),!0}})(c,s.dtype,n),u.then(function(f){var h="";f.getExtraProfileInfo!=null&&(h=f.getExtraProfileInfo()),o.logger.logKernelProfile(n,s,c,f.kernelMs,e,h)})})}),a},t}(),IB=function(){function t(){}return t.prototype.logKernelProfile=function(n,e,r,a,o,u){var s=typeof a=="number"?Ql(a+"ms",9):a.error,c=Ql(n,25),f=e.rank,h=e.size,p=Ql(e.shape.toString(),14),m="";for(var g in o){var x=o[g].shape||e.shape,E=x.length;m+=g+": "+E+"D "+(E>0?x:"")+" "}console.log("%c"+c+"	%c"+s+"	%c"+f+"D "+p+"	%c"+h+"	%c"+m+"	%c"+u,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),EE=20,Af=3,Ug=7;function FB(t,n,e,r){var a=Ko(n),o=function(f,h,p,m){var g=ct(h),x=m[m.length-1],E=new Array(x).fill(0),S=h.length,_=p==="complex64"?Df(f):f;if(S>1)for(var A=0;A<g/x;A++)for(var T=A*x,N=0;N<x;N++)E[N]=Math.max(E[N],Tf(_[T+N],0,p).length);return E}(t,n,e,a),u=n.length,s=function f(h,p,m,g,x,E){E===void 0&&(E=!0);var S=m==="complex64"?2:1,_=p[0],A=p.length;if(A===0)return m==="complex64"?[Tf(Df(h)[0],0,m)]:m==="bool"?[$C(h[0])]:[h[0].toString()];if(A===1){if(_>EE){var T=Af*S,N=Array.from(h.slice(0,T)),D=Array.from(h.slice((_-Af)*S,_*S));return m==="complex64"&&(N=Df(N),D=Df(D)),["["+N.map(function(he,q){return Tf(he,x[q],m)}).join(", ")+", ..., "+D.map(function(he,q){return Tf(he,x[_-Af+q],m)}).join(", ")+"]"]}return["["+(m==="complex64"?Df(h):Array.from(h)).map(function(he,q){return Tf(he,x[q],m)}).join(", ")+"]"]}var k=p.slice(1),P=g.slice(1),H=g[0]*S,U=[];if(_>EE){for(var j=0;j<Af;j++){var G=(K=j*H)+H;U.push.apply(U,f(h.slice(K,G),k,m,P,x,!1))}for(U.push("..."),j=_-Af;j<_;j++)G=(K=j*H)+H,U.push.apply(U,f(h.slice(K,G),k,m,P,x,j===_-1))}else for(j=0;j<_;j++){var K;G=(K=j*H)+H,U.push.apply(U,f(h.slice(K,G),k,m,P,x,j===_-1))}var be=A===2?",":"";for(U[0]="["+U[0]+be,j=1;j<U.length-1;j++)U[j]=" "+U[j]+be;var pe=`,
`;for(j=2;j<A;j++)pe+=`
`;return U[U.length-1]=" "+U[U.length-1]+"]"+(E?"":pe),U}(t,n,e,a,o),c=["Tensor"];return r&&(c.push("  dtype: "+e),c.push("  rank: "+u),c.push("  shape: ["+n+"]"),c.push("  values:")),c.push(s.map(function(f){return"    "+f}).join(`
`)),c.join(`
`)}function Tf(t,n,e){return Ql(Array.isArray(t)?parseFloat(t[0].toFixed(Ug))+" + "+parseFloat(t[1].toFixed(Ug))+"j":V0(t)?"'"+t+"'":e==="bool"?$C(t):parseFloat(t.toFixed(Ug)).toString(),n)}function $C(t){return t===0?"false":"true"}function Df(t){for(var n=[],e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var Kf=function(){function t(n,e,r){var a=this;if(this.dtype=e,this.shape=n.slice(),this.size=ct(n),r!=null){var o=r.length;$(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+a.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ep(e,this.size),this.strides=Ko(n)}return t.prototype.set=function(n){for(var e=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),$(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=n},t.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var r=0,a=0,o=n;a<o.length;a++){var u=o[a];if(u<0||u>=this.shape[r]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var c=n[n.length-1],f=0;f<n.length-1;++f)c+=this.strides[f]*n[f];return this.values[c]},t.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e},t.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return jo().makeTensor(this.values,this.shape,this.dtype)},t}(),jo=null,ke=null,GC=null,Bn=function(){function t(n,e,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=ct(n),this.strides=Ko(n),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),$(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},t.prototype.as3D=function(n,e,r){return this.throwIfDisposed(),this.reshape([n,e,r])},t.prototype.as4D=function(n,e,r,a){return this.throwIfDisposed(),this.reshape([n,e,r,a])},t.prototype.as5D=function(n,e,r,a,o){return this.throwIfDisposed(),this.reshape([n,e,r,a,o])},t.prototype.asType=function(n){return this.throwIfDisposed(),ke.cast(this,n)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return st(this,void 0,void 0,function(){var n;return lt(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,ke.buffer(this.shape,this.dtype,n)]}})})},t.prototype.bufferSync=function(){return ke.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return st(this,void 0,void 0,function(){var n;return lt(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,xE(this.shape,n)]}})})},t.prototype.arraySync=function(){return xE(this.shape,this.dataSync())},t.prototype.data=function(){return st(this,void 0,void 0,function(){var n,e;return lt(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=jo().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:e=r.sent();try{return[2,e.map(function(a){return Sp(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var n=jo().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(e){return Sp(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},t.prototype.bytes=function(){return st(this,void 0,void 0,function(){var n;return lt(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,jo().read(this.dataId)];case 1:return n=e.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(jo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(n){return n===void 0&&(n=!1),ke.print(this,n)},t.prototype.reshape=function(n){return this.throwIfDisposed(),ke.reshape(this,n)},t.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},t.prototype.expandDims=function(n){return n===void 0&&(n=0),ke.expandDims(this,n)},t.prototype.cumsum=function(n,e,r){return n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1),ke.cumsum(this,n,e,r)},t.prototype.squeeze=function(n){return this.throwIfDisposed(),ke.squeeze(this,n)},t.prototype.clone=function(){return this.throwIfDisposed(),ke.clone(this)},t.prototype.oneHot=function(n,e,r){return this.throwIfDisposed(),ke.oneHot(this,n,e,r)},t.prototype.toString=function(n){return n===void 0&&(n=!1),FB(this.dataSync(),this.shape,this.dtype,n)},t.prototype.tile=function(n){return this.throwIfDisposed(),ke.tile(this,n)},t.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),ke.gather(this,n,e)},t.prototype.matMul=function(n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ke.matMul(this,n,e,r)},t.prototype.dot=function(n){return this.throwIfDisposed(),ke.dot(this,n)},t.prototype.norm=function(n,e,r){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),ke.norm(this,n,e,r)},t.prototype.slice=function(n,e){return this.throwIfDisposed(),ke.slice(this,n,e)},t.prototype.reverse=function(n){return this.throwIfDisposed(),ke.reverse(this,n)},t.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof t&&(n=[n]),ke.concat([this].concat(n),e)},t.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),ke.split(this,n,e)},t.prototype.stack=function(n,e){return e===void 0&&(e=0),ke.stack([this,n],e)},t.prototype.unstack=function(n){return n===void 0&&(n=0),ke.unstack(this,n)},t.prototype.pad=function(n,e){return e===void 0&&(e=0),ke.pad(this,n,e)},t.prototype.batchNormalization=function(n,e,r,a,o){return r===void 0&&(r=.001),GC("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,a,r)},t.prototype.batchNorm=function(n,e,r,a,o){return o===void 0&&(o=.001),this.throwIfDisposed(),ke.batchNorm(this,n,e,r,a,o)},t.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ke.all(this,n,e)},t.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ke.any(this,n,e)},t.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ke.logSumExp(this,n,e)},t.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ke.sum(this,n,e)},t.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ke.prod(this,n,e)},t.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ke.mean(this,n,e)},t.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ke.min(this,n,e)},t.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ke.max(this,n,e)},t.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),ke.argMin(this,n)},t.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),ke.argMax(this,n)},t.prototype.cast=function(n){return this.throwIfDisposed(),ke.cast(this,n)},t.prototype.add=function(n){return this.throwIfDisposed(),ke.add(this,n)},t.prototype.addStrict=function(n){return this.throwIfDisposed(),ke.addStrict(this,n)},t.prototype.atan2=function(n){return this.throwIfDisposed(),ke.atan2(this,n)},t.prototype.sub=function(n){return this.throwIfDisposed(),ke.sub(this,n)},t.prototype.subStrict=function(n){return this.throwIfDisposed(),ke.subStrict(this,n)},t.prototype.pow=function(n){return this.throwIfDisposed(),ke.pow(this,n)},t.prototype.powStrict=function(n){return this.throwIfDisposed(),ke.powStrict(this,n)},t.prototype.mul=function(n){return this.throwIfDisposed(),ke.mul(this,n)},t.prototype.mulStrict=function(n){return this.throwIfDisposed(),ke.mulStrict(this,n)},t.prototype.div=function(n){return this.throwIfDisposed(),ke.div(this,n)},t.prototype.divNoNan=function(n){return this.throwIfDisposed(),ke.divNoNan(this,n)},t.prototype.floorDiv=function(n){return this.throwIfDisposed(),ke.floorDiv(this,n)},t.prototype.divStrict=function(n){return this.throwIfDisposed(),ke.divStrict(this,n)},t.prototype.minimum=function(n){return this.throwIfDisposed(),ke.minimum(this,n)},t.prototype.minimumStrict=function(n){return this.throwIfDisposed(),ke.minimumStrict(this,n)},t.prototype.maximum=function(n){return this.throwIfDisposed(),ke.maximum(this,n)},t.prototype.maximumStrict=function(n){return this.throwIfDisposed(),ke.maximumStrict(this,n)},t.prototype.mod=function(n){return this.throwIfDisposed(),ke.mod(this,n)},t.prototype.modStrict=function(n){return this.throwIfDisposed(),ke.modStrict(this,n)},t.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),ke.squaredDifferenceStrict(this,n)},t.prototype.transpose=function(n){return this.throwIfDisposed(),ke.transpose(this,n)},t.prototype.notEqual=function(n){return this.throwIfDisposed(),ke.notEqual(this,n)},t.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),ke.notEqualStrict(this,n)},t.prototype.less=function(n){return this.throwIfDisposed(),ke.less(this,n)},t.prototype.lessStrict=function(n){return this.throwIfDisposed(),ke.lessStrict(this,n)},t.prototype.equal=function(n){return this.throwIfDisposed(),ke.equal(this,n)},t.prototype.equalStrict=function(n){return this.throwIfDisposed(),ke.equalStrict(this,n)},t.prototype.lessEqual=function(n){return this.throwIfDisposed(),ke.lessEqual(this,n)},t.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),ke.lessEqualStrict(this,n)},t.prototype.greater=function(n){return this.throwIfDisposed(),ke.greater(this,n)},t.prototype.greaterStrict=function(n){return this.throwIfDisposed(),ke.greaterStrict(this,n)},t.prototype.greaterEqual=function(n){return this.throwIfDisposed(),ke.greaterEqual(this,n)},t.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),ke.greaterEqualStrict(this,n)},t.prototype.logicalAnd=function(n){return this.throwIfDisposed(),ke.logicalAnd(this,n)},t.prototype.logicalOr=function(n){return this.throwIfDisposed(),ke.logicalOr(this,n)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),ke.logicalNot(this)},t.prototype.logicalXor=function(n){return this.throwIfDisposed(),ke.logicalXor(this,n)},t.prototype.where=function(n,e){return this.throwIfDisposed(),ke.where(n,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),ke.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),ke.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),ke.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),ke.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),ke.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),ke.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),ke.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),ke.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),ke.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),ke.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),ke.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),ke.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),ke.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),ke.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),ke.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),ke.abs(this)},t.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),ke.clipByValue(this,n,e)},t.prototype.relu=function(){return this.throwIfDisposed(),ke.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),ke.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),ke.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),ke.selu(this)},t.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),ke.leakyRelu(this,n)},t.prototype.prelu=function(n){return this.throwIfDisposed(),ke.prelu(this,n)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),ke.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),ke.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),ke.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),ke.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),ke.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),ke.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),ke.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),ke.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),ke.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),ke.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),ke.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),ke.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),ke.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),ke.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),ke.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),ke.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),ke.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),ke.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),ke.round(this)},t.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),ke.step(this,n)},t.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),ke.softmax(this,n)},t.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),ke.logSoftmax(this,n)},t.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),ke.image.resizeBilinear(this,n,e)},t.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),ke.image.resizeNearestNeighbor(this,n,e)},t.prototype.conv1d=function(n,e,r,a,o,u){return a===void 0&&(a="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),ke.conv1d(this,n,e,r,a,o,u)},t.prototype.conv2d=function(n,e,r,a,o,u){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ke.conv2d(this,n,e,r,a,o,u)},t.prototype.conv2dTranspose=function(n,e,r,a,o){return this.throwIfDisposed(),ke.conv2dTranspose(this,n,e,r,a,o)},t.prototype.depthwiseConv2D=function(n,e,r,a,o,u){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ke.depthwiseConv2d(this,n,e,r,a,o,u)},t.prototype.separableConv2d=function(n,e,r,a,o,u){return o===void 0&&(o=[1,1]),u===void 0&&(u="NHWC"),this.throwIfDisposed(),ke.separableConv2d(this,n,e,r,a,o,u)},t.prototype.avgPool=function(n,e,r,a){return this.throwIfDisposed(),ke.avgPool(this,n,e,r,a)},t.prototype.maxPool=function(n,e,r,a){return this.throwIfDisposed(),ke.maxPool(this,n,e,r,a)},t.prototype.localResponseNormalization=function(n,e,r,a){return n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),a===void 0&&(a=.5),ke.localResponseNormalization(this,n,e,r,a)},t.prototype.pool=function(n,e,r,a,o){return this.throwIfDisposed(),ke.pool(this,n,e,r,a,o)},t.prototype.variable=function(n,e,r){return n===void 0&&(n=!0),this.throwIfDisposed(),jo().makeVariable(this,n,e,r)},t.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),ke.unsortedSegmentSum(this,n,e)},t.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),ke.batchToSpaceND(this,n,e)},t.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),ke.spaceToBatchND(this,n,e)},t.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),ke.topk(this,n,e)},t.prototype.stridedSlice=function(n,e,r,a,o,u,s,c){return a===void 0&&(a=0),o===void 0&&(o=0),u===void 0&&(u=0),s===void 0&&(s=0),c===void 0&&(c=0),this.throwIfDisposed(),ke.stridedSlice(this,n,e,r,a,o,u,s,c)},t.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),ke.depthToSpace(this,n,e)},t.prototype.fft=function(){return this.throwIfDisposed(),ke.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),ke.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),ke.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),ke.spectral.irfft(this)},t}();Object.defineProperty(Bn,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var SE,Vy,Wy,qy,$y,uc=function(t){function n(e,r,a,o){var u=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return u.trainable=r,u.name=a,u}return wo(n,t),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Ar(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");jo().disposeTensor(this),this.dataId=e.dataId,jo().incRef(this,null)},n.prototype.dispose=function(){jo().disposeVariable(this),this.isDisposedInternal=!0},n}(Bn);Object.defineProperty(uc,Symbol.hasInstance,{value:function(t){return t instanceof Bn&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(SE||(SE={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(Vy||(Vy={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(Wy||(Wy={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(qy||(qy={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}($y||($y={}));var BB={float32:qy,int32:Vy,bool:Wy,complex64:$y};function Pr(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error("Can not upcast "+t+" with "+n)}return BB[t][n]}function zg(t){return Pr(t,"int32")}function Ln(t,n){if(t.dtype===n.dtype)return[t,n];var e=Pr(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function PB(t,n){$(t.dtype===n.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+n.dtype+") input must match"})}function KC(t){var n=[];return function e(r,a,o){if(r!=null){if(r instanceof Bn)return void a.push(r);if(u=r,!(!Array.isArray(u)&&typeof u!="object")){var u,s=r;for(var c in s){var f=s[c];o.has(f)||(o.add(f),e(f,a,o))}}}}(t,n,new Set),n}var jg,_E=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},t}(),LB=function(){function t(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new _E}return t.prototype.ready=function(){return st(this,void 0,void 0,function(){var n,e,r;return lt(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),e=0,a.label=1;case 1:return e<n.length?(r=n[e],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},t.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},t.prototype.registerBackend=function(n,e,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:r},!0)},t.prototype.setBackend=function(n){return st(this,void 0,void 0,function(){var e,r,a;return lt(this,function(o){switch(o.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return a=o.sent(),[3,3];case 2:a=r,o.label=3;case 3:if(!a)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new MB(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var n=this;yE(this.backendName).forEach(function(e){e.setupFunc!=null&&e.setupFunc(n.backendInstance)})},t.prototype.disposeRegisteredKernels=function(n){var e=this;yE(n).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(e.registry[n])})},t.prototype.initializeBackend=function(n){var e=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var o=++this.pendingBackendInitId,u=a.then(function(s){return!(o<e.pendingBackendInitId)&&(e.registry[n]=s,e.pendingBackendInit=null,!0)}).catch(function(s){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=u,{success:u,asyncInit:!0}}return this.registry[n]=a,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,r){return n.registryFactory[r].priority-n.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var r=n[e],a=this.initializeBackend(r),o=a.success,u=a.asyncInit;if(u||o)return{name:r,asyncInit:u}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(n,e){var r=this.state.tensorInfo.get(e),a=r.backend,o=this.readSync(e);a.disposeData(e),r.backend=n,n.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(n,e){var r,a=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return a.startScope(o)},function(){return a.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(n,e,r){n();try{var a=r();return e(),a}catch(o){throw e(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[e],function(a){return{x:function(){return a.toFloat()}}},[]),e},t.prototype.runKernel=function(n,e,r,a,o){return this.runKernelFunc(null,e,null,n,r,a,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(n,e,r){var a=this.backend.numDataIds(),o=0;r.forEach(function(c){o+=c.dtype==="complex64"?3:1});var u=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-e-o-u;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+n+"'")},t.prototype.runKernelFunc=function(n,e,r,a,o,u,s){var c,f=this;u===void 0&&(u=[]),s===void 0&&(s=[]);var h=[],p=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var m,g=function(A){p&&(h=A.map(function(T){return f.keep(f.clone(T))}))},x=this.state.numBytes,E=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var S,_=LC(a,this.backendName);return m=_!=null?function(){var A=f.backend.numDataIds();S=_.kernelFunc({inputs:e,attrs:o,backend:f.backend});var T=Array.isArray(S)?S:[S];f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,A,T);var N=T.map(function(k){var P=k.dataId,H=k.shape,U=k.dtype;return f.makeTensorFromDataId(P,H,U)}),D=N.filter(function(k,P){return s[P]});return g((u||[]).slice().concat(D)),N}:function(){var A=f.backend.numDataIds();S=f.tidy(function(){return n(f.backend,g)});var T=Array.isArray(S)?S:[S];return f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,A,T),T},this.scopedRun(function(){return f.state.kernelDepth++},function(){return f.state.kernelDepth--},function(){c=f.ENV.getBool("DEBUG")?f.profiler.profileKernel(a,e,function(){return m()}):m()}),p&&this.addTapeNode(a,e,c,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-x,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-E,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(A){return e[A].shape}),outputShapes:c.map(function(A){return A.shape})}),Array.isArray(S)?c:c[0]},t.prototype.makeTensor=function(n,e,r,a){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var o=n;r==="string"&&V0(n[0])&&(o=n.map(function(h){return kB(h)}));var u=a.write(o,e,r),s=new Bn(e,r,u,this.nextTensorId());if(this.incRef(s,a),r==="string"){var c=this.state.tensorInfo.get(u),f=TB(o);this.state.numBytes+=f-c.bytes,c.bytes=f}return s},t.prototype.makeTensorFromDataId=function(n,e,r,a){var o=new Bn(e,r=r||"float32",n,this.nextTensorId());return this.incRef(o,a),o},t.prototype.makeVariable=function(n,e,r,a){e===void 0&&(e=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==n.dtype&&(n=n.asType(a));var o=new uc(n,e,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(n,e){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(a=n.size*HC(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof uc||this.track(n)},t.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var e=this.state.registeredVariables[n];this.disposeVariable(e)}},t.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},t.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},t.prototype.profile=function(n){return st(this,void 0,void 0,function(){var e,r;return lt(this,function(a){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(n,e,r,a,o){var u=this,s={id:this.state.nextTapeNodeId++,kernelName:n,inputs:e,outputs:r,saved:o},c=xB(n);c!=null&&(a=c.gradFunc),a!=null&&(s.gradient=function(f){return f=f.map(function(h,p){if(h==null){var m=r[p],g=fd(m.size,m.dtype);return u.makeTensor(g,m.shape,m.dtype)}return h}),a(f.length>1?f:f[0],o)}),this.state.activeTape.push(s)},t.prototype.keep=function(n){return n.kept=!0,n},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(n){for(var e=this,r=KC(n),a=new Set(r.map(function(c){return c.id})),o=0;o<this.state.activeScope.track.length;o++){var u=this.state.activeScope.track[o];u.kept||a.has(u.id)||u.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(c){c.kept||c.scopeId!==s.id||e.track(c)})},t.prototype.gradients=function(n,e,r,a){var o=this;if(a===void 0&&(a=!1),$(e.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var u=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});$(u instanceof Bn,function(){return"The result y returned by f() must be a tensor."});var s=function(c,f,h){for(var p={},m={},g=0;g<f.length;g++)p[f[g].id]=!0;for(g=0;g<c.length;g++){var x=(k=c[g]).inputs;for(var E in x){for(var S=x[E],_=!1,A=0;A<f.length;A++)if(p[S.id]){k.outputs.forEach(function(j){return p[j.id]=!0}),_=!0,m[k.id]=!0;break}if(_)break}}var T={};T[h.id]=!0;var N={};for(g=c.length-1;g>=0;g--)for(x=(k=c[g]).inputs,A=0;A<k.outputs.length;A++)if(T[k.outputs[A].id]){for(var E in x)T[x[E].id]=!0,N[k.id]=!0;break}var D=[];for(g=0;g<c.length;g++){var k;if(m[(k=c[g]).id]&&N[k.id]){var P={};for(var E in k.inputs){var H=k.inputs[E];p[H.id]&&(P[E]=H)}var U=Object.assign({},k);U.inputs=P,U.outputs=k.outputs,D.push(U)}}return D}(this.state.activeTape,e,u);if(!a&&s.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,f,h={};h[u.id]=r??(c=u.shape,f=WC(ct(c),"float32"),ce.makeTensor(f,c,"float32")),function(m,g,x){for(var E=function(_){var A=g[_],T=[];if(A.outputs.forEach(function(P){var H=m[P.id];H!=null?T.push(H):T.push(null)}),A.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+A.kernelName+".");var N=A.gradient(T),D=function(P){if(!(P in N))throw new Error("Cannot backprop through input "+P+". Available gradients found: "+Object.keys(N)+".");var H=x(function(){return N[P]()});if(H.dtype!=="float32")throw new Error("Error in gradient for op "+A.kernelName+". The gradient of input "+P+" must have 'float32' dtype, but has '"+H.dtype+"'");var U=A.inputs[P];if(!Ar(H.shape,U.shape))throw new Error("Error in gradient for op "+A.kernelName+". The gradient of input '"+P+"' has shape '"+H.shape+"', which does not match the shape of the input '"+U.shape+"'");if(m[U.id]==null)m[U.id]=H;else{var j=m[U.id];m[U.id]=j.add(H),j.dispose()}};for(var k in A.inputs)D(k)},S=g.length-1;S>=0;S--)E(S)}(h,s,function(m){return o.tidy(m)});var p=e.map(function(m){return h[m.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(m){for(var g=0,x=m.saved;g<x.length;g++)x[g].dispose()}),o.state.activeTape=null),{value:u,grads:p}})},t.prototype.customGrad=function(n){var e=this;return $(jy(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];$(a.every(function(s){return s instanceof Bn}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var u={};return a.forEach(function(s,c){u[c]=s}),e.runKernelFunc(function(s,c){return $((r=n.apply(void 0,a.concat([c]))).value instanceof Bn,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),$(jy(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},u,function(s,c){var f=r.gradFunc(s,c),h=Array.isArray(f)?f:[f];$(h.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),$(h.every(function(m){return m instanceof Bn}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return h.forEach(function(m,g){p[g]=function(){return m}}),p})}},t.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},t.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},t.prototype.time=function(n){return st(this,void 0,void 0,function(){var e,r;return lt(this,function(a){switch(a.label){case 0:return e=zo(),[4,this.backend.time(n)];case 1:return(r=a.sent()).wallMs=zo()-e,[2,r]}})})},t.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new _E,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),ce=function(){var t=function(){if(jg==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}jg=e}return jg}();if(t._tfengine==null){var n=new yB(t);t._tfengine=new LB(n)}return function(e){PC=e}(t._tfengine.ENV),jo=function(){return t._tfengine},t._tfengine}();function XC(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ki=Me();ki.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ki.registerFlag("IS_BROWSER",function(){return XC()}),ki.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),ki.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),ki.registerFlag("PROD",function(){return!1}),ki.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return ki.getBool("DEBUG")}),ki.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),ki.registerFlag("IS_TEST",function(){return!1});var Xf,La,Pa,ws={},Hg={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function UB(t,n){ws[t]=n}function ni(t){t in ws||(ws[t]=function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete ws[e]},!1),e===1?r.getContext("webgl",Hg)||r.getContext("experimental-webgl",Hg):r.getContext("webgl2",Hg)}(t));var n=ws[t];return n.isContextLost()?(delete ws[t],ni(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),ws[t])}function cv(t,n){return[n,t]}function Lf(t){var n=ct(t);return zy(Math.ceil(n/4))}function dd(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function W0(t,n){var e,r,a,o,u,s,c,f,h,p=t;return Me().getNumber("WEBGL_VERSION")===2?(e=p.R32F,r=p.R16F,a=p.RGBA16F,o=p.RGBA32F,u=p.RED,s=4,c=1,f=p.HALF_FLOAT,h=p.FLOAT):(e=t.RGBA,r=t.RGBA,a=t.RGBA,o=p.RGBA,u=t.RGBA,s=4,c=4,f=n!=null?n.HALF_FLOAT_OES:null,h=t.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:u,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:h}}function ht(t,n,e){var r=e();return n&&function(a){var o=a.getError();if(o!==a.NO_ERROR)throw new Error("WebGL Error: "+VB(a,o))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Xf||(Xf={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(La||(La={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Pa||(Pa={}));var zB=596e-10,jB=65504;function HB(t){return!!(Me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||zB<Math.abs(t)&&Math.abs(t)<jB)}function VB(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function Bh(t,n,e){return zi(t,n,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function WB(t,n,e){var r=zi(t,n,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ht(t,n,function(){return t.shaderSource(r,e)}),ht(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function qB(t,n,e){var r=zi(t,n,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ht(t,n,function(){return t.shaderSource(r,e)}),ht(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(a,o){var u=$B.exec(o);if(u==null)return console.log("Couldn't parse line number in error: "+o),void console.log(a);for(var s=+u[1],c=a.split(`
`),f=c.length.toString().length+2,h=c.map(function(S,_){return Ql((_+1).toString(),f)+S}),p=0,m=0;m<h.length;m++)p=Math.max(h[m].length,p);var g=h.slice(0,s-1),x=h.slice(s-1,s),E=h.slice(s);console.log(g.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Ql(x[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(E.join(`
`))}(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Vg,Wg,$B=/ERROR: [0-9]+:([0-9]+):/g;function GB(t,n){return zi(t,n,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function KB(t,n,e){if(ht(t,n,function(){return t.linkProgram(e)}),t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function qg(t,n,e){if(ht(t,n,function(){return t.validateProgram(e)}),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function XB(t,n,e){var r=zi(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ht(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ht(t,n,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function YB(t,n,e){var r=zi(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ht(t,n,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),ht(t,n,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function QB(t,n){return zi(t,n,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function ZB(t,n){var e=Me().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){var r="["+t+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e)throw r="["+t+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function JB(t,n){return zi(t,n,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function CE(t,n,e,r,a,o,u,s){var c=t.getAttribLocation(e,r);return c!==-1&&(ht(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,a)}),ht(t,n,function(){return t.vertexAttribPointer(c,o,t.FLOAT,!1,u,s)}),ht(t,n,function(){return t.enableVertexAttribArray(c)}),!0)}function eP(t,n,e,r){oP(t,r),ht(t,n,function(){return t.activeTexture(t.TEXTURE0+r)}),ht(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function tP(t,n,e,r){return zi(t,n,function(){return t.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function nP(t,n,e){return t.getUniformLocation(n,e)}function rP(t,n,e,r,a,o){ht(t,n,function(){return eP(t,n,r,o)}),ht(t,n,function(){return t.uniform1i(a,o)})}function $g(t,n,e,r){ht(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),ht(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function RE(t,n,e){ht(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),ht(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Ph(t){var n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+aP(t,n))}function aP(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function zi(t,n,e,r){var a=ht(t,n,function(){return e()});if(a==null)throw new Error(r);return a}function oP(t,n){var e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function _p(t,n){return n===void 0&&(n=2),ct(t.slice(0,t.length-n))}function Cp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Gg(t){var n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[_p(t)].concat(Cp(t))),n}function iP(t,n){var e;n===void 0&&(n=!1);var r=Me().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(t=t.map(function(f,h){return h>=t.length-2?jC(t[h]):t[h]})).length===1&&(t=[2,t[0]])),t.length!==2){var a=_s(t);t=a.newShape}var o=ct(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(n){var u=_p(t),s=2,c=2;return t.length&&(s=(e=Cp(t))[0],c=e[1]),zy(o=u*(s/2)*(c/2)).map(function(f){return 2*f})}return zy(o)}function Lh(t){return t%2==0}function Uh(t,n){if(Ar(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){var e=t.slice(-1)[0],r=n.slice(-1)[0];if(e===r||Lh(e)&&Lh(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&Lh(t[0])&&Lh(n[0])}function uP(t){if(Vg==null){var n=ni(t);Vg=n.getParameter(n.MAX_TEXTURE_SIZE)}return Vg}function sP(t){if(Wg==null){var n=ni(t);Wg=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Wg)}function lP(t){if(t===0)return 0;var n=ni(t);return ao(n,"EXT_disjoint_timer_query_webgl2")&&t===2?2:ao(n,"EXT_disjoint_timer_query")?1:0}function ao(t,n){return t.getExtension(n)!=null}function AE(t){try{if(ni(t)!=null)return!0}catch{return!1}return!1}function cP(t){if(t===0)return!1;var n=ni(t);if(t===1){if(!ao(n,"OES_texture_float"))return!1}else if(!ao(n,"EXT_color_buffer_float"))return!1;return Gy(n)}function fP(t){if(t===0)return!1;var n=ni(t);if(t!==1){if(ao(n,"EXT_color_buffer_float"))return Gy(n);if(ao(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return function(r,a){var o=W0(r,a),u=r.createTexture();r.bindTexture(r.TEXTURE_2D,u),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,u,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(u),r.deleteFramebuffer(s),c}(n,e)}return!1}return!!ao(n,"OES_texture_float")&&!!ao(n,"WEBGL_color_buffer_float")&&Gy(n)}function Gy(t){var n=W0(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),a}function dP(t){return t===2&&ni(t).fenceSync!=null}var Tt=Me();function YC(t){Me().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function nt(t,n){return ce.tidy(t,n)}function _a(t){KC(t).forEach(function(n){return n.dispose()})}function hP(t){return ce.keep(t)}function Rp(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Me().getBool("IS_TEST")||console.warn.apply(console,t)}function Xu(t,n){var e=t;if(Go(t))return n==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(e)||Go(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&Me().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(o,u,s){if(s=s||[],!Array.isArray(o)&&!Go(o))return void $(u.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+u[0]+" elements"});$(u.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),$(o.length===u[0],function(){return"Element arr["+s.join("][")+"] should have "+u[0]+" elements, but has "+o.length+" elements"});for(var c=u.slice(1),f=0;f<o.length;++f)a(o[f],c,s.concat(f))}(t,r,[]),r}function TE(t,n,e,r){if(t!=null&&(t!=="numeric"&&t!==n||t==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+t+" tensor, but got "+n+" tensor")}function V(t,n,e,r){if(r===void 0&&(r="numeric"),t instanceof Bn)return TE(r,t.dtype,n,e),t;var a=cd(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),TE(r,a,n,e),t==null||!Go(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var u=Xu(t,a);Go(t)||Array.isArray(t)||(t=[t]);var s=a!=="string"?VC(t,a,Me().getBool("DEBUG")):ic(t,[],!0);return ce.makeTensor(s,u,a)}function Ap(t,n,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(a,o){return V(a,n+"["+o+"]",e)},r)}function QC(t,n){for(var e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function pP(t,n,e){for(var r=t.length+n.length,a=[],o=0,u=0,s=0;s<r;s++)e.indexOf(s)===-1?a.push(t[o++]):a.push(n[u++]);return a}function Yr(t,n){for(var e=[],r=t.length,a=0;a<r;a++)n.indexOf(a)===-1&&e.push(t[a]);return[e,n.map(function(o){return t[o]})]}function Ca(t,n){return pP(t,n.map(function(e){return 1}),n)}function Ba(t,n,e){$(QC(n,e),function(){return t+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function ri(t,n){if(QC(t,n))return null;for(var e=[],r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(function(a){return e.push(a)}),e}function q0(t){return t.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function ai(t,n){for(var e=[],r=n-t;r<n;++r)e.push(r);return e}function vP(t,n){var e=t[0].length;t.forEach(function(a,o){$(a.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),$(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=t[0];t.forEach(function(a,o){for(var u=0;u<e;u++)$(u===n||a[u]===r[u],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function sc(t,n){for(var e=t[0].slice(),r=1;r<t.length;r++)e[n]+=t[r][n];return e}function re(t){var n=Object.keys(t);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var a=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];ce.startScope(e);try{var s=r.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ce.endScope(s),s}catch(c){throw ce.endScope(null),c}};return Object.defineProperty(a,"name",{value:e,configurable:!0}),a}Tt.registerFlag("HAS_WEBGL",function(){return Tt.getNumber("WEBGL_VERSION")>0}),Tt.registerFlag("WEBGL_VERSION",function(){return AE(2)?2:AE(1)?1:0}),Tt.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Tt.get("WEBGL_VERSION")===2}),Tt.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Tt.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Tt.registerFlag("WEBGL_PACK",function(){return Tt.getBool("HAS_WEBGL")}),Tt.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_PACK_CLIP",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Tt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_PACK_REDUCE",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_CONV_IM2COL",function(){return Tt.getBool("WEBGL_PACK")}),Tt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return uP(Tt.getNumber("WEBGL_VERSION"))}),Tt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return sP(Tt.getNumber("WEBGL_VERSION"))}),Tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=Tt.getNumber("WEBGL_VERSION");return t===0?0:lP(t)}),Tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Tt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),Tt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return cP(Tt.getNumber("WEBGL_VERSION"))}),Tt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Tt.getBool("WEBGL_FORCE_F16_TEXTURES")&&Tt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Tt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return fP(Tt.getNumber("WEBGL_VERSION"))}),Tt.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return dP(Tt.getNumber("WEBGL_VERSION"))}),Tt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Tt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),GC=YC;var Fr=re({complex_:function(t,n){var e=V(t,"real","complex"),r=V(n,"imag","complex");return ln(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),ce.runKernelFunc(function(a){return a.complex(e,r)},{$real:e,$imag:r})}}),ro=re({real_:function(t){var n=V(t,"input","real");return ce.runKernelFunc(function(e){return e.real(n)},{$input:n})}}),Ho=re({imag_:function(t){var n=V(t,"input","imag");return ce.runKernelFunc(function(e){return e.imag(n)},{$input:n})}});function Lr(t,n,e){return Yu(t,n,Xu(t,e),e)}function Yu(t,n,e,r){if(r==null&&(r=cd(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Go(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){qC(n);var a=ct(n),o=ct(e);$(a===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+a+" values but has "+o});for(var u=0;u<e.length;++u){var s=e[u],c=u!==e.length-1||s!==ct(n.slice(u));$(e[u]===n[u]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "})}}return Go(t)||Array.isArray(t)||(t=[t]),n=n||e,t=r!=="string"?VC(t,r,Me().getBool("DEBUG")):ic(t,[],!0),ce.makeTensor(t,n,r)}function Je(t,n){if((Go(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&Go(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Yu(t,[],[],n)}function ar(t,n){vc(t);var e=Xu(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Yu(t,null,e,n)}function Lu(t,n,e){if(vc(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Xu(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Yu(t,n,r,e)}function $0(t,n,e){if(vc(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Xu(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Yu(t,n,r,e)}function xa(t,n,e){if(vc(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Xu(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Yu(t,n,r,e)}function mP(t,n,e){if(vc(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Xu(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Yu(t,n,r,e)}function gP(t,n,e){if(vc(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Xu(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Yu(t,n=n||r,r,e)}function yP(t,n,e,r){return n===void 0&&(n=!0),ce.makeVariable(t,n,e,r)}function mc(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=mc(t,"float32"),r=kn(t,"float32");return Fr(e,r)}var a=WC(ct(t),n);return ce.makeTensor(a,t,n)}function kn(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=kn(t,"float32"),r=kn(t,"float32");return Fr(e,r)}var a=fd(ct(t),n);return ce.makeTensor(a,t,n)}function Xo(t,n,e){return ce.runKernelFunc(function(r){return r.fill(t,n,e)},{})}function bP(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return ce.runKernelFunc(function(r){return r.linspace(t,n,e)},{})}function Tp(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(t===n||t<n&&e<0||n<t&&e>1)return kn([0],r);var a=fd(Math.abs(Math.ceil((n-t)/e)),r);n<t&&e===1&&(e=-1),a[0]=t;for(var o=1;o<a.length;o++)a[o]=a[o-1]+e;return ar(a,r)}var ZC=re({onesLike_:function(t){var n=V(t,"x","onesLike");if(n.dtype==="complex64"){var e=ZC(ro(n)),r=rn(Ho(n));return Fr(e,r)}return ce.runKernelFunc(function(a){return a.onesLike(n)},{$x:n},function(a,o){return{$x:function(){return rn(a)}}})}}),rn=re({zerosLike_:function(t){var n=V(t,"x","zerosLike");return ce.runKernelFunc(function(e){return e.zerosLike(n)},{$x:n},function(e,r){return{$x:function(){return rn(e)}}})}}),dr=re({concat_:function(t,n){n===void 0&&(n=0),$(t.length>=1,function(){return"Pass at least one tensor to concat"});var e=Ap(t,"tensors","concat");e[0].dtype==="complex64"&&e.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),n=mr(n,e[0].shape)[0];var r=sc(e.map(function(s){return s.shape}),n);if(ct(r)===0)return Lr([],r);if((e=e.filter(function(s){return s.size>0})).length===1)return e[0];var a=e.map(function(s){return s.shape});vP(a,n);var o=e,u={axis:n};return ce.runKernelFunc(function(s){return s.concat(e,n)},o,function(s){var c=a.map(function(f){return f[n]});return G0(s,c,n).map(function(f){return function(){return f}})},"Concat",u)}}),xP=re({concat1d_:function(t){return dr(t,0)}}),wP=re({concat2d_:function(t,n){return dr(t,n)}}),EP=re({concat3d_:function(t,n){return dr(t,n)}}),SP=re({concat4d_:function(t,n){return dr(t,n)}}),G0=re({split_:function(t,n,e){e===void 0&&(e=0);var r,a=V(t,"x","split");return e=mr(e,a.shape)[0],typeof n=="number"?($(a.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(a.shape[e]/n)):($(a.shape[e]===n.reduce(function(o,u){return o+u}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),ce.runKernelFunc(function(o){return o.split(a,r,e)},{$x:a},function(o){return{$x:function(){return dr(o,e)}}})}});function Ws(t,n){return t(n={exports:{}},n.exports),n.exports}var _P=Ws(function(t){(function(n,e,r){function a(s){var c,f=this,h=(c=4022871197,function(p){p=p.toString();for(var m=0;m<p.length;m++){var g=.02519603282416938*(c+=p.charCodeAt(m));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});f.next=function(){var p=2091639*f.s0+23283064365386963e-26*f.c;return f.s0=f.s1,f.s1=f.s2,f.s2=p-(f.c=0|p)},f.c=1,f.s0=h(" "),f.s1=h(" "),f.s2=h(" "),f.s0-=h(s),f.s0<0&&(f.s0+=1),f.s1-=h(s),f.s1<0&&(f.s1+=1),f.s2-=h(s),f.s2<0&&(f.s2+=1),h=null}function o(s,c){return c.c=s.c,c.s0=s.s0,c.s1=s.s1,c.s2=s.s2,c}function u(s,c){var f=new a(s),h=c&&c.state,p=f.next;return p.int32=function(){return 4294967296*f.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=u:this.alea=u})(0,t)}),CP=Ws(function(t){(function(n,e,r){function a(s){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var p=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^p^p>>>8},s===(0|s)?c.x=s:f+=s;for(var h=0;h<f.length+64;h++)c.x^=0|f.charCodeAt(h),c.next()}function o(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c}function u(s,c){var f=new a(s),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=u:this.xor128=u})(0,t)}),RP=Ws(function(t){(function(n,e,r){function a(s){var c=this,f="";c.next=function(){var p=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^p^p<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,s===(0|s)?c.x=s:f+=s;for(var h=0;h<f.length+64;h++)c.x^=0|f.charCodeAt(h),h==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function o(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c.v=s.v,c.d=s.d,c}function u(s,c){var f=new a(s),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=u:this.xorwow=u})(0,t)}),AP=Ws(function(t){(function(n,e,r){function a(s){var c=this;c.next=function(){var f,h,p=c.x,m=c.i;return f=p[m],h=(f^=f>>>7)^f<<24,h^=(f=p[m+1&7])^f>>>10,h^=(f=p[m+3&7])^f>>>3,h^=(f=p[m+4&7])^f<<7,f=p[m+7&7],h^=(f^=f<<13)^f<<9,p[m]=h,c.i=m+1&7,h},function(f,h){var p,m=[];if(h===(0|h))m[0]=h;else for(h=""+h,p=0;p<h.length;++p)m[7&p]=m[7&p]<<15^h.charCodeAt(p)+m[p+1&7]<<13;for(;m.length<8;)m.push(0);for(p=0;p<8&&m[p]===0;++p);for(p==8?m[7]=-1:m[p],f.x=m,f.i=0,p=256;p>0;--p)f.next()}(c,s)}function o(s,c){return c.x=s.x.slice(),c.i=s.i,c}function u(s,c){s==null&&(s=+new Date);var f=new a(s),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(h.x&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=u:this.xorshift7=u})(0,t)}),TP=Ws(function(t){(function(n,e,r){function a(s){var c=this;c.next=function(){var f,h,p=c.w,m=c.X,g=c.i;return c.w=p=p+1640531527|0,h=m[g+34&127],f=m[g=g+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=m[g]=h^f,c.i=g,h+(p^p>>>16)|0},function(f,h){var p,m,g,x,E,S=[],_=128;for(h===(0|h)?(m=h,h=null):(h+="\0",m=0,_=Math.max(_,h.length)),g=0,x=-32;x<_;++x)h&&(m^=h.charCodeAt((x+32)%h.length)),x===0&&(E=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,x>=0&&(E=E+1640531527|0,g=(p=S[127&x]^=m+E)==0?g+1:0);for(g>=128&&(S[127&(h&&h.length||0)]=-1),g=127,x=512;x>0;--x)m=S[g+34&127],p=S[g=g+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,S[g]=m^p;f.w=E,f.X=S,f.i=g}(c,s)}function o(s,c){return c.i=s.i,c.w=s.w,c.X=s.X.slice(),c}function u(s,c){s==null&&(s=+new Date);var f=new a(s),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(h.X&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=u:this.xor4096=u})(0,t)}),DP=Ws(function(t){(function(n,e,r){function a(s){var c=this,f="";c.next=function(){var p=c.b,m=c.c,g=c.d,x=c.a;return p=p<<25^p>>>7^m,m=m-g|0,g=g<<24^g>>>8^x,x=x-p|0,c.b=p=p<<20^p>>>12^m,c.c=m=m-g|0,c.d=g<<16^m>>>16^x,c.a=x-p|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,s===Math.floor(s)?(c.a=s/4294967296|0,c.b=0|s):f+=s;for(var h=0;h<f.length+20;h++)c.b^=0|f.charCodeAt(h),c.next()}function o(s,c){return c.a=s.a,c.b=s.b,c.c=s.c,c.d=s.d,c}function u(s,c){var f=new a(s),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=u:this.tychei=u})(0,t)}),Es=Ws(function(t){(function(n,e){var r,a=this,o=256,u=6,s="random",c=e.pow(o,u),f=e.pow(2,52),h=2*f,p=o-1;function m(_,A,T){var N=[],D=E(function H(U,j){var G,K=[],be=typeof U;if(j&&be=="object")for(G in U)try{K.push(H(U[G],j-1))}catch{}return K.length?K:be=="string"?U:U+"\0"}((A=A==1?{entropy:!0}:A||{}).entropy?[_,S(n)]:_??function(){try{var H;return r&&(H=r.randomBytes)?H=H(o):(H=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(H)),S(H)}catch{var U=a.navigator,j=U&&U.plugins;return[+new Date,a,j,a.screen,S(n)]}}(),3),N),k=new g(N),P=function(){for(var H=k.g(u),U=c,j=0;H<f;)H=(H+j)*o,U*=o,j=k.g(1);for(;H>=h;)H/=2,U/=2,j>>>=1;return(H+j)/U};return P.int32=function(){return 0|k.g(4)},P.quick=function(){return k.g(4)/4294967296},P.double=P,E(S(k.S),n),(A.pass||T||function(H,U,j,G){return G&&(G.S&&x(G,k),H.state=function(){return x(k,{})}),j?(e[s]=H,U):H})(P,D,"global"in A?A.global:this==e,A.state)}function g(_){var A,T=_.length,N=this,D=0,k=N.i=N.j=0,P=N.S=[];for(T||(_=[T++]);D<o;)P[D]=D++;for(D=0;D<o;D++)P[D]=P[k=p&k+_[D%T]+(A=P[D])],P[k]=A;(N.g=function(H){for(var U,j=0,G=N.i,K=N.j,be=N.S;H--;)U=be[G=p&G+1],j=j*o+be[p&(be[G]=be[K=p&K+U])+(be[K]=U)];return N.i=G,N.j=K,j})(o)}function x(_,A){return A.i=_.i,A.j=_.j,A.S=_.S.slice(),A}function E(_,A){for(var T,N=_+"",D=0;D<N.length;)A[p&D]=p&(T^=19*A[p&D])+N.charCodeAt(D++);return S(A)}function S(_){return String.fromCharCode.apply(0,_)}if(e["seed"+s]=m,E(e.random(),n),t.exports){t.exports=m;try{r=require("crypto")}catch{}}})([],Math)});Es.alea=_P,Es.xor128=CP,Es.xorwow=RP,Es.xorshift7=AP,Es.xor4096=TP,Es.tychei=DP;var fv=Es.alea,K0=function(){function t(n,e,r,a,o){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var u=o||Math.random();this.random=fv(u.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,r,a=!1;!a;){var o=void 0,u=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(u=2*this.random()-1)*u;while(s>=1||s===0);var c=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*c,r=this.mean+this.stdDev*u*c,this.truncated&&!this.isValidTruncated(e)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},t.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},t}(),NP=function(){function t(n,e,r,a){this.alpha=n,this.beta=1/e,this.dtype=r;var o=a||Math.random();this.randu=fv(o.toString()),this.randn=new K0(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var n,e,r,a,o,u;;){do a=this.randn.nextValue(),u=1+this.c*a;while(u<=0);if(u*=u*u,e=1-.331*(n=a*a)*n,r=.5*n+this.d*(1-u+Math.log(u)),(o=this.randu())<e||Math.log(o)<r)break}return u=1/this.beta*this.d*u,this.alpha<1&&(u*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(u)},t.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},t}(),kP=function(){function t(n,e,r,a){var o=this;if(n===void 0&&(n=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=n,this.range=e-n,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=fv(a)}return t.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Mt(t,n,e){return n===void 0&&(n="float32"),n=n||"float32",qC(t),new Kf(t,n,e)}function OP(t,n){n===void 0&&(n=!1),console.log(t.toString(n))}var JC=re({batchToSpaceND_:function(t,n,e){var r=V(t,"x","batchToSpaceND"),a=n.reduce(function(o,u){return o*u});return $(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),$(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),$(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+a}),ce.runKernelFunc(function(o){return o.batchToSpaceND(r,n,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}}),MP=re({broadcastTo_:function(t,n){var e=V(t,"broadcastTo","x"),r=e.shape;if(n.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<e.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+e.rank+".");if(n.length>e.rank){for(var a=e.shape.slice();a.length<n.length;)a.unshift(1);e=e.reshape(a)}for(var o=Array.from(n),u=n.length-1;u>=0;u--)if(e.shape[u]===n[u])o[u]=1;else if(e.shape[u]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+n+"].");var s=o.map(function(c,f){return c>1?f:-1}).filter(function(c){return c>=0});return s.length===0?e.clone():ce.runKernelFunc(function(c){return c.tile(e,o)},{input:e},function(c){return{input:function(){return c.sum(s,!0)}}})}}),IP=re({cast_:function(t,n){var e=V(t,"x","cast");if(!RB(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return ce.runKernelFunc(function(a){return a.cast(e,n)},{x:e},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),FP=re({clone_:function(t){var n=V(t,"x","clone",null);return ce.runKernelFunc(function(){return ce.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(e){return{$x:function(){return e.toFloat()}}})}}),BP=re({cumsum_:function(t,n,e,r){n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var a=V(t,"x","cumsum"),o=ri([n|=0],a.rank),u=a;o!=null&&(u=a.transpose(o));var s=ai(1,a.rank)[0],c=ce.runKernelFunc(function(f){return f.cumsum(u,s,e,r)},{permutedX:u},function(f){return{permutedX:function(){return f.cumsum(n,e,!r)}}});return o!=null&&(c=c.transpose(o)),c}}),PP=re({depthToSpace_:function(t,n,e){e===void 0&&(e="NHWC");var r=V(t,"x","depthToSpace"),a=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],u=e==="NHWC"?r.shape[3]:r.shape[1];return $(a*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),$(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+r.shape}),$(u%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+u+" for depthToSpace with input shape "+r.shape}),ce.runKernelFunc(function(s){return s.depthToSpace(r,n,e)},{$x:r})}}),no=re({expandDims_:function(t,n){n===void 0&&(n=0);var e=V(t,"x","expandDims",null);$(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return n<0&&($(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),r.splice(n,0,1),go(e,r)}}),eR=re({eye_:function(t,n,e,r){r===void 0&&(r="float32"),n==null&&(n=t);for(var a=Mt([t,n],r),o=t<=n?t:n,u=0;u<o;++u)a.set(1,u,u);var s=a.toTensor().as2D(t,n);if(e==null)return s;if(e.length===1)return Zl(no(s,0),[e[0],1,1]);if(e.length===2)return Zl(no(no(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return Zl(no(no(no(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),LP=re({multinomial_:function(t,n,e,r){r===void 0&&(r=!1);var a=V(t,"logits","multinomial"),o=a.size,u=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(u>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+u);e=e||Math.random();var s=u===1?a.as2D(1,-1):a,c=ce.runKernelFunc(function(f){return f.multinomial(s,r,n,e)},{logits2D:s});return u===1?c.as1D():c}}),Ky=re({oneHot_:function(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var a=V(t,"indices","oneHot","int32"),o=a.shape.concat([n]);return a=a.flatten(),ce.runKernelFunc(function(u){return u.oneHot(a,n,e,r)},{$indices:a},function(u){return{$indices:function(){return kn(a.shape,"float32")}}}).reshape(o)}}),qs=re({pad_:function(t,n,e){e===void 0&&(e=0);var r=V(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:n,constantValue:e};return ce.runKernelFunc(function(o){return o.pad(r,n,e)},{x:r},function(o){var u=n.map(function(s){return s[0]});return{x:function(){return o.slice(u,r.shape)}}},"PadV2",a)}}),UP=re({pad1d_:function(t,n,e){return e===void 0&&(e=0),$(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),qs(t,[n],e)}}),zP=re({pad2d_:function(t,n,e){return e===void 0&&(e=0),$(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),qs(t,n,e)}}),jP=re({pad3d_:function(t,n,e){return e===void 0&&(e=0),$(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),qs(t,n,e)}}),HP=re({pad4d_:function(t,n,e){return e===void 0&&(e=0),$(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),qs(t,n,e)}}),VP=re({rand_:function(t,n,e){var r=ct(t),a=null;if(e==null||e==="float32")a=new Float32Array(r);else if(e==="int32")a=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=n();return ce.makeTensor(a,t,e)}}),WP=re({randomNormal_:function(t,n,e,r,a){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new K0(n,e,r,!1,a),u=Mt(t,r),s=0;s<u.values.length;s++)u.values[s]=o.nextValue();return u.toTensor()}}),qP=re({randomGamma_:function(t,n,e,r,a){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new NP(n,e,r,a),u=Mt(t,r),s=0;s<u.values.length;s++)u.values[s]=o.nextValue();return u.toTensor()}}),tR=re({randomUniform_:function(t,n,e,r,a){n===void 0&&(n=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var o=Mt(t,r),u=new kP(n,e,null,a),s=0;s<o.values.length;s++)o.values[s]=u.nextValue();return o.toTensor()}}),go=re({reshape_:function(t,n){var e=V(t,"x","reshape",null);n=_B(n,e.size),$(e.size===ct(n),function(){return"new shape and old shape must have the same number of elements."});var r={shape:n};return ce.runKernelFunc(function(a){return a.reshape(e,n)},{x:e},function(a){return{x:function(){return a.reshape(e.shape)}}},"Reshape",r)}}),nR=re({spaceToBatchND_:function(t,n,e){var r=V(t,"x","spaceToBatchND");return $(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),$(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),$(r.shape.reduce(function(a,o,u){return u>0&&u<=n.length?a&&(o+e[u-1][0]+e[u-1][1])%n[u-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),ce.runKernelFunc(function(a){return a.spaceToBatchND(r,n,e)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(n,e)}}})}}),rR=re({squeeze_:function(t,n){var e=V(t,"x","squeeze");return go(e,_s(e.shape,n).newShape)}}),Ha=re({stack_:function(t,n){n===void 0&&(n=0);var e=Ap(t,"tensors","stack");if($(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(n);var r=e[0].rank,a=e[0].shape,o=e[0].dtype;$(n<=r,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(s){ln(a,s.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(s){$(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var u=e.map(function(s){return s.expandDims(n)});return dr(u,n)}}),Zl=re({tile_:function(t,n){var e=V(t,"x","tile",null);$(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."});var r=[e],a={reps:n};return ce.runKernelFunc(function(o,u){var s=o.tile(e,n);return u([e]),s},{x:e},function(o,u){var s=u[0];return{x:function(){var c=rn(s);if(s.rank===1)for(var f=0;f<n[0];++f)c=c.add(o.slice([f*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(f=0;f<n[0];++f)for(var h=0;h<n[1];++h)c=c.add(o.slice([f*s.shape[0],h*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(f=0;f<n[0];++f)for(h=0;h<n[1];++h)for(var p=0;p<n[2];++p)c=c.add(o.slice([f*s.shape[0],h*s.shape[1],p*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(f=0;f<n[0];++f)for(h=0;h<n[1];++h)for(p=0;p<n[2];++p)for(var m=0;m<n[3];++m)c=c.add(o.slice([f*s.shape[0],h*s.shape[1],p*s.shape[2],m*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return c}}},"Tile",a,r)}}),$P=re({truncatedNormal_:function(t,n,e,r,a){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new K0(n,e,r,!0,a),u=Mt(t,r),s=0;s<u.values.length;s++)u.values[s]=o.nextValue();return u.toTensor()}}),hr=re({unstack_:function(t,n){n===void 0&&(n=0),n=n||0;var e=V(t,"x","unstack");$(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length);var r={axis:n};return ce.runKernelFunc(function(a){return a.unstack(e,n)},{x:e},function(a){return{x:function(){return Ha(a,n)}}},"Unpack",r)}}),GP=function(t,n){return st(this,void 0,void 0,function(){var e,r,a,o,u,s,c,f,h,p;return lt(this,function(m){switch(m.label){case 0:return e=V(t,"x","setdiff1d"),r=V(n,"y","setdiff1d"),$(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),$(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),$(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return a=m.sent(),[4,r.data()];case 2:for(o=m.sent(),u=new Set(o),s=0,h=0;h<a.length;h++)u.has(a[h])||s++;for(c=new Kf([s],e.dtype),f=new Kf([s],"int32"),h=0,p=0;h<a.length;h++)u.has(a[h])||(c.values[p]=a[h],f.values[p]=h,p++);return[2,[c.toTensor(),f.toTensor()]]}})})};function Dp(t,n,e,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(n.slice(0))).push(t[0]/e),a=a.concat(t.slice(1));else{a=a.concat(t[0]);for(var o=n.length,u=0;u<o;++u)a=a.concat([t[u+1]/n[u],n[u]]);a=a.concat(t.slice(o+1))}return a}function Np(t,n,e){e===void 0&&(e=!0);var r=[];if(e){r.push(n);for(var a=n+1;a<t;++a)a<=2*n?(r.push(a),r.push(a-(n+1))):r.push(a)}else{var o=[],u=[];for(a=1;a<t;++a)a>=2*n+1||a%2==1?u.push(a):o.push(a);r.push.apply(r,o),r.push(0),r.push.apply(r,u)}return r}function kp(t,n,e,r){r===void 0&&(r=!0);var a=[];r?a.push(t[0]/e):a.push(t[0]*e);for(var o=1;o<t.length;++o)o<=n.length?r?a.push(n[o-1]*t[o]):a.push(t[o]/n[o-1]):a.push(t[o]);return a}function aR(t,n){for(var e=[0],r=0;r<n;++r)e.push(t[r][0]);return e}function oR(t,n,e){for(var r=t.slice(0,1),a=0;a<e;++a)r.push(t[a+1]-n[a][0]-n[a][1]);return r}function iR(t,n){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var e=n.shape,r=e[e.length-1],a=1,o=0;o<e.length-1;++o)a*=e[o];var u=t.shape,s=e.slice();s.pop();var c=1;for(o=r;o<t.rank;++o)c*=u[o],s.push(u[o]);var f=Ko(t.shape).map(function(h){return h/c}).concat([1]).slice(0,r);return[s,a,c,f]}var uR=30;function Kg(t){return t<=uR?t:Hy(t,Math.floor(Math.sqrt(t)))}function KP(t,n,e){var r=n.rank>1?n.shape[n.rank-1]:1,a=n.rank>1?n.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+n.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+a+".";if(e.rank<a)throw new Error(o+" update.rank < "+a+". ");if(t.length<r+(e.rank-a))throw new Error(o+" Output shape length < "+(r+(e.rank-a)));if(e.rank!==a+t.length-r)throw new Error(o+" update.rank != "+(a+t.length-r));for(var u=0;u<a;++u)if(e.shape[u]!==n.shape[u])throw new Error(o+" updates.shape["+u+"] ("+e.shape[u]+") != indices.shape["+u+"] ("+n.shape[u]+").");for(u=0;u<e.rank-a;++u)if(e.shape[u+a]!==t[u+r])throw new Error(o+" updates.shape["+(u+a)+"] ("+e.shape[u+a]+") != shape["+(u+a)+"] ("+t[u+a]+")")}function XP(t,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}KP(e,n,t)}function Op(t,n,e){for(var r=n.shape.length,a=r>1?n.shape[r-1]:1,o=e.length,u=1,s=a;s<o;++s)u*=e[s];var c=a<1?1:a;return{sliceRank:a,numUpdates:ct(n.shape)/c,sliceSize:u,strides:Ko(e.slice(0,a)).concat([1]),outputSize:ct(e)}}function YP(t,n,e){$(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+n+" must match the rank of the array ("+t.rank+")."}),$(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of size "+e+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){$(n[o]+e[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},a=0;a<t.rank;++a)r(a)}function DE(t){for(var n=[],e=0;t>0;)1&t&&n.push(e),t/=2,e++;return n}function X0(t,n,e){for(var r=[],a=0;a<t.length;a++)r[a]=Math.ceil((n[a]-t[a])/e[a]);return r}function QP(t,n,e,r,a){var o=n[a],u=e[a]||1;(t&1<<a||o==null)&&(o=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),o=Uy(0,o,s-1)}function ZP(t,n,e,r,a){var o=n[a],u=e[a]||1;(t&1<<a||o==null)&&(o=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),o=u>0?Uy(0,o,s):Uy(-1,o,s-1)}function sR(t,n,e){for(var r=e.length,a=0;a<e.length;a++)if(e[a]>1){r=a;break}for(a=r+1;a<e.length;a++)if(n[a]>0||e[a]!==t[a])return!1;return!0}function lR(t,n){for(var e=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}function JP(t,n){$(jy(t),function(){return"The f passed in variableGrads(f) must be a function"}),$(n==null||Array.isArray(n)&&n.every(function(h){return h instanceof uc}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=n!=null;if(!e)for(var r in n=[],ce.registeredVariables)n.push(ce.registeredVariables[r]);var a=e?n.filter(function(h){return!h.trainable}):null,o=n.length;$((n=n.filter(function(h){return h.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var u=ce.gradients(t,n,null,!0),s=u.value,c=u.grads;$(c.some(function(h){return h!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),$(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var f={};return n.forEach(function(h,p){c[p]!=null&&(f[h.name]=c[p])}),a!=null&&a.forEach(function(h){return f[h.name]=null}),{value:s,grads:f}}function dv(t){return ce.customGrad(t)}var ji=re({softmax_:function(t,n){n===void 0&&(n=-1);var e=V(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return ce.runKernelFunc(function(r,a){var o=r.softmax(e,n);return a([o]),o},{logits:e},function(r,a){var o=a[0],u=r.mul(o);return{logits:function(){return u.sub(u.sum([n],!0).mul(o))}}},"Softmax",{dim:n},[],[!0])}}),eL=re({logSoftmax_:function(t,n){n===void 0&&(n=-1);var e=V(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return dv(function(r,a){var o=r.max(n,!0),u=r.sub(o),s=u.toFloat().sub(u.exp().sum(n,!0).log());return a([s]),{value:s,gradFunc:function(c,f){var h=f[0].exp();return c.sub(c.sum(n,!0).mul(h))}}})(e)}}),cR=function(){function t(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},t.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},t.prototype.has=function(n){return this.data.has(n)},t.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),fR=function(){function t(){}return t.prototype.time=function(n){return Te("time")},t.prototype.read=function(n){return Te("read")},t.prototype.readSync=function(n){return Te("readSync")},t.prototype.numDataIds=function(){return Te("numDataIds")},t.prototype.disposeData=function(n){return Te("disposeData")},t.prototype.write=function(n,e,r){return Te("write")},t.prototype.move=function(n,e,r,a){return Te("move")},t.prototype.memory=function(){return Te("memory")},t.prototype.floatPrecision=function(){return Te("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(n,e,r,a){return Te("batchMatMul")},t.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,Te("fusedBatchMatMul")},t.prototype.slice=function(n,e,r){return Te("slice")},t.prototype.stridedSlice=function(n,e,r,a){return Te("stridedSlice")},t.prototype.unstack=function(n,e){return Te("unstack")},t.prototype.reverse=function(n,e){return Te("reverse")},t.prototype.concat=function(n,e){return Te("concat")},t.prototype.neg=function(n){return Te("neg")},t.prototype.add=function(n,e){return Te("add")},t.prototype.addN=function(n){return Te("addN")},t.prototype.subtract=function(n,e){return Te("subtract")},t.prototype.multiply=function(n,e){return Te("multiply")},t.prototype.realDivide=function(n,e){return Te("realDivide")},t.prototype.floorDiv=function(n,e){return Te("floorDiv")},t.prototype.sum=function(n,e){return Te("sum")},t.prototype.prod=function(n,e){return Te("prod")},t.prototype.unsortedSegmentSum=function(n,e,r){return Te("unsortedSegmentSum")},t.prototype.argMin=function(n,e){return Te("argMin")},t.prototype.argMax=function(n,e){return Te("argMax")},t.prototype.equal=function(n,e){return Te("equal")},t.prototype.notEqual=function(n,e){return Te("notEqual")},t.prototype.less=function(n,e){return Te("less")},t.prototype.lessEqual=function(n,e){return Te("lessEqual")},t.prototype.greater=function(n,e){return Te("greater")},t.prototype.greaterEqual=function(n,e){return Te("greaterEqual")},t.prototype.logicalNot=function(n){return Te("logicalNot")},t.prototype.logicalAnd=function(n,e){return Te("logicalAnd")},t.prototype.logicalOr=function(n,e){return Te("logicalOr")},t.prototype.where=function(n){return Te("where")},t.prototype.select=function(n,e,r){return Te("select")},t.prototype.topk=function(n,e,r){return Te("topk")},t.prototype.min=function(n,e){return Te("min")},t.prototype.minimum=function(n,e){return Te("minimum")},t.prototype.mod=function(n,e){return Te("mod")},t.prototype.max=function(n,e){return Te("max")},t.prototype.maximum=function(n,e){return Te("maximum")},t.prototype.all=function(n,e){return Te("all")},t.prototype.any=function(n,e){return Te("any")},t.prototype.squaredDifference=function(n,e){return Te("squaredDifference")},t.prototype.ceil=function(n){return Te("ceil")},t.prototype.floor=function(n){return Te("floor")},t.prototype.round=function(n){return Te("round")},t.prototype.sign=function(n){return Te("sign")},t.prototype.isNaN=function(n){return Te("isNaN")},t.prototype.isInf=function(n){return Te("isInf")},t.prototype.isFinite=function(n){return Te("isFinite")},t.prototype.pow=function(n,e){return Te("pow")},t.prototype.exp=function(n){return Te("exp")},t.prototype.expm1=function(n){return Te("expm1")},t.prototype.softmax=function(n,e){return Te("softmax")},t.prototype.log=function(n){return Te("log")},t.prototype.log1p=function(n){return Te("log1p")},t.prototype.sqrt=function(n){return Te("sqrt")},t.prototype.rsqrt=function(n){return Te("rsqrt")},t.prototype.square=function(n){return Te("square")},t.prototype.reciprocal=function(n){return Te("reciprocal")},t.prototype.relu=function(n){return Te("relu")},t.prototype.relu6=function(n){return Te("relu6")},t.prototype.prelu=function(n,e){return Te("prelu")},t.prototype.elu=function(n){return Te("elu")},t.prototype.eluDer=function(n,e){return Te("eluDer")},t.prototype.selu=function(n){return Te("selu")},t.prototype.int=function(n){return Te("int")},t.prototype.clip=function(n,e,r){return Te("clip")},t.prototype.abs=function(n){return Te("abs")},t.prototype.complexAbs=function(n){return Te("complexAbs")},t.prototype.sigmoid=function(n){return Te("sigmoid")},t.prototype.softplus=function(n){return Te("softplus")},t.prototype.sin=function(n){return Te("sin")},t.prototype.cos=function(n){return Te("cos")},t.prototype.tan=function(n){return Te("tan")},t.prototype.asin=function(n){return Te("asin")},t.prototype.acos=function(n){return Te("acos")},t.prototype.atan=function(n){return Te("atan")},t.prototype.atan2=function(n,e){return Te("atan2")},t.prototype.sinh=function(n){return Te("sinh")},t.prototype.cosh=function(n){return Te("cosh")},t.prototype.tanh=function(n){return Te("tanh")},t.prototype.asinh=function(n){return Te("asinh")},t.prototype.acosh=function(n){return Te("acosh")},t.prototype.atanh=function(n){return Te("atanh")},t.prototype.erf=function(n){return Te("erf")},t.prototype.step=function(n,e){return Te("step")},t.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,Te("fusedConv2d")},t.prototype.conv2d=function(n,e,r){return Te("conv2d")},t.prototype.conv2dDerInput=function(n,e,r){return Te("conv2dDerInput")},t.prototype.conv2dDerFilter=function(n,e,r){return Te("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,Te("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(n,e,r){return Te("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(n,e,r){return Te("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){return Te("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(n,e,r){return Te("conv3d")},t.prototype.conv3dDerInput=function(n,e,r){return Te("conv3dDerInput")},t.prototype.conv3dDerFilter=function(n,e,r){return Te("conv3dDerFilter")},t.prototype.maxPool=function(n,e){return Te("maxPool")},t.prototype.maxPoolBackprop=function(n,e,r,a){return Te("maxPoolBackprop")},t.prototype.avgPool=function(n,e){return Te("avgPool")},t.prototype.avgPoolBackprop=function(n,e,r){return Te("avgPoolBackprop")},t.prototype.avgPool3d=function(n,e){return Te("avgPool3d")},t.prototype.avgPool3dBackprop=function(n,e,r){return Te("avgPool3dBackprop")},t.prototype.maxPool3d=function(n,e){return Te("maxPool3d")},t.prototype.maxPool3dBackprop=function(n,e,r,a){return Te("maxPool3dBackprop")},t.prototype.reshape=function(n,e){return Te("reshape")},t.prototype.cast=function(n,e){return Te("cast")},t.prototype.tile=function(n,e){return Te("tile")},t.prototype.pad=function(n,e,r){return Te("pad")},t.prototype.transpose=function(n,e){return Te("transpose")},t.prototype.gather=function(n,e,r){return Te("gather")},t.prototype.gatherND=function(n,e){return Te("gatherND")},t.prototype.scatterND=function(n,e,r){return Te("scatterND")},t.prototype.batchToSpaceND=function(n,e,r){return Te("batchToSpaceND")},t.prototype.spaceToBatchND=function(n,e,r){return Te("spaceToBatchND")},t.prototype.resizeBilinear=function(n,e,r,a){return Te("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(n,e,r){return Te("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(n,e,r,a){return Te("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){return Te("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(n,e,r,a,o,u){return Te("batchNormalization")},t.prototype.localResponseNormalization4D=function(n,e,r,a,o){return Te("localResponseNormalization4D")},t.prototype.LRNGrad=function(n,e,r,a,o,u,s){return Te("LRNGrad")},t.prototype.multinomial=function(n,e,r,a){return Te("multinomial")},t.prototype.oneHot=function(n,e,r,a){return Te("oneHot")},t.prototype.cumsum=function(n,e,r,a){return Te("cumsum")},t.prototype.nonMaxSuppression=function(n,e,r,a,o){return Te("nonMaxSuppression")},t.prototype.fft=function(n){return Te("fft")},t.prototype.ifft=function(n){return Te("ifft")},t.prototype.complex=function(n,e){return Te("complex")},t.prototype.real=function(n){return Te("real")},t.prototype.imag=function(n){return Te("imag")},t.prototype.cropAndResize=function(n,e,r,a,o,u){return Te("cropAndResize")},t.prototype.depthToSpace=function(n,e,r){return Te("depthToSpace")},t.prototype.split=function(n,e,r){return Te("split")},t.prototype.sparseToDense=function(n,e,r,a){return Te("sparseToDense")},t.prototype.diag=function(n){return Te("diag")},t.prototype.fill=function(n,e,r){return Te("fill")},t.prototype.onesLike=function(n){return Te("onesLike")},t.prototype.zerosLike=function(n){return Te("zerosLike")},t.prototype.linspace=function(n,e,r){return Te("linspace")},t.prototype.dispose=function(){return Te("dispose")},t}();function Te(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Fu(t,n){for(var e=t.length,r=[],a=0;a<e;a++){var o=e-1-a,u=t[o]||1;(n[n.length-1-a]||1)>1&&u===1&&r.unshift(o)}return r}function pr(t,n){for(var e=[],r=0;r<n.length;r++){var a=t[t.length-r-1],o=n.length-r-1,u=n[o];(a==null||a===1&&u>1)&&e.unshift(o)}return e}function Yt(t,n){for(var e=[],r=Math.max(t.length,n.length),a=0;a<r;a++){var o=t[t.length-a-1];o==null&&(o=1);var u=n[n.length-a-1];if(u==null&&(u=1),o===1)e.unshift(u);else if(u===1)e.unshift(o);else{if(o!==u)throw Error("Operands could not be broadcast together with shapes "+t+" and "+n+".");e.unshift(o)}}return e}function Yf(t,n,e,r,a,o,u){u===void 0&&(u="channelsLast");var s,c=Fp(n),f=c[0],h=c[1];if(u==="channelsLast")s=[f,h,t[3],t[3]];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);s=[f,h,t[1],t[1]]}return $s(t,s,e,r,a,o,!1,u)}function Mp(t,n,e,r,a,o,u){u===void 0&&(u="NDHWC");var s,c,f=Xy(n),h=f[0],p=f[1],m=f[2];if(u==="NDHWC")c="channelsLast",s=[h,p,m,t[4],t[4]];else{if(u!=="NCDHW")throw new Error("Unknown dataFormat "+u);c="channelsFirst",s=[h,p,m,t[1],t[1]]}return Ip(t,s,e,r,a,!1,c,o)}function $s(t,n,e,r,a,o,u,s){u===void 0&&(u=!1),s===void 0&&(s="channelsLast");var c=[-1,-1,-1,-1],f=c[0],h=c[1],p=c[2],m=c[3];if(s==="channelsLast")f=t[0],h=t[1],p=t[2],m=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);f=t[0],m=t[1],h=t[2],p=t[3]}var g,x=n[0],E=n[1],S=n[3],_=Fp(e),A=_[0],T=_[1],N=Fp(r),D=N[0],k=N[1],P=Jl(x,D),H=Jl(E,k),U=function(pe,he,q,ne,ee,J,L,se){var Re,Se,je;if(typeof pe=="number"){Re={top:pe,bottom:pe,left:pe,right:pe,type:pe===0?"VALID":"NUMBER"};var Xe=function(wt,it,It,Qt,Jt){Qt==null&&(Qt=dR(wt,it,It));var cn=wt[0],Sn=wt[1],Ur=Uf((cn-it+2*Qt)/It+1,Jt);$(Qn(Ur),function(){return"The output # of rows ("+Ur+") must be an integer. Change the stride and/or zero pad parameters"});var Zn=Uf((Sn-it+2*Qt)/It+1,Jt);return $(Qn(Zn),function(){return"The output # of columns ("+Zn+") must be an integer. Change the stride and/or zero pad parameters"}),[Ur,Zn]}([he,q],J,ne,pe,se);Se=Xe[0],je=Xe[1]}else if(pe==="same"){Se=Math.ceil(he/ne),je=Math.ceil(q/ee);var Ve=Math.max(0,(Se-1)*ne+J-he),yt=Math.max(0,(je-1)*ee+L-q),ot=Math.floor(Ve/2),He=Ve-ot,kt=Math.floor(yt/2);Re={top:ot,bottom:He,left:kt,right:yt-kt,type:"SAME"}}else{if(pe!=="valid")throw Error("Unknown padding parameter: "+pe);Re={top:0,bottom:0,left:0,right:0,type:"VALID"},Se=Math.ceil((he-J+1)/ne),je=Math.ceil((q-L+1)/ee)}return{padInfo:Re,outHeight:Se,outWidth:je}}(a,h,p,A,T,P,H,o),j=U.padInfo,G=U.outHeight,K=U.outWidth,be=u?S*m:S;return s==="channelsFirst"?g=[f,be,G,K]:s==="channelsLast"&&(g=[f,G,K,be]),{batchSize:f,dataFormat:s,inHeight:h,inWidth:p,inChannels:m,outHeight:G,outWidth:K,outChannels:be,padInfo:j,strideHeight:A,strideWidth:T,filterHeight:x,filterWidth:E,effectiveFilterHeight:P,effectiveFilterWidth:H,dilationHeight:D,dilationWidth:k,inShape:t,outShape:g,filterShape:n}}function Ip(t,n,e,r,a,o,u,s){o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var c=[-1,-1,-1,-1,-1],f=c[0],h=c[1],p=c[2],m=c[3],g=c[4];if(u==="channelsLast")f=t[0],h=t[1],p=t[2],m=t[3],g=t[4];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);f=t[0],g=t[1],h=t[2],p=t[3],m=t[4]}var x,E=n[0],S=n[1],_=n[2],A=n[4],T=Xy(e),N=T[0],D=T[1],k=T[2],P=Xy(r),H=P[0],U=P[1],j=P[2],G=Jl(E,H),K=Jl(S,U),be=Jl(_,j),pe=function(L,se,Re,Se,je,Xe,Ve,yt,ot,He,kt){var wt,it,It,Qt;if(typeof L=="number"){wt={top:L,bottom:L,left:L,right:L,front:L,back:L,type:L===0?"VALID":"NUMBER"};var Jt=function(ha,$n,_n,Vt,Cn,yn){Cn==null&&(Cn=dR(ha,$n,Vt));var ii=ha[0],Dr=ha[1],pa=ha[2],zr=Uf((ii-$n+2*Cn)/Vt+1,yn);$(Qn(zr),function(){return"The output # of depths ("+zr+") must be an integer. Change the stride and/or zero pad parameters"});var oa=Uf((Dr-$n+2*Cn)/Vt+1,yn);$(Qn(oa),function(){return"The output # of rows ("+oa+") must be an integer. Change the stride and/or zero pad parameters"});var Un=Uf((pa-$n+2*Cn)/Vt+1,yn);return $(Qn(Un),function(){return"The output # of columns ("+Un+") must be an integer. Change the stride and/or zero pad parameters"}),[zr,oa,Un,_n]}([se,Re,Se,1],yt,1,je,L,kt);it=Jt[0],It=Jt[1],Qt=Jt[2]}else if(L==="same"){it=Math.ceil(se/je),It=Math.ceil(Re/Xe),Qt=Math.ceil(Se/Ve);var cn=(it-1)*je+yt-se,Sn=(It-1)*Xe+ot-Re,Ur=(Qt-1)*Ve+He-Se,Zn=Math.floor(cn/2),aa=cn-Zn,gn=Math.floor(Sn/2),qn=Sn-gn,Mn=Math.floor(Ur/2);wt={top:gn,bottom:qn,left:Mn,right:Ur-Mn,front:Zn,back:aa,type:"SAME"}}else{if(L!=="valid")throw Error("Unknown padding parameter: "+L);wt={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},it=Math.ceil((se-yt+1)/je),It=Math.ceil((Re-ot+1)/Xe),Qt=Math.ceil((Se-He+1)/Ve)}return{padInfo:wt,outDepth:it,outHeight:It,outWidth:Qt}}(a,h,p,m,N,D,k,G,K,be,s),he=pe.padInfo,q=pe.outDepth,ne=pe.outHeight,ee=pe.outWidth,J=o?A*g:A;return u==="channelsFirst"?x=[f,J,q,ne,ee]:u==="channelsLast"&&(x=[f,q,ne,ee,J]),{batchSize:f,dataFormat:u,inDepth:h,inHeight:p,inWidth:m,inChannels:g,outDepth:q,outHeight:ne,outWidth:ee,outChannels:J,padInfo:he,strideDepth:N,strideHeight:D,strideWidth:k,filterDepth:E,filterHeight:S,filterWidth:_,effectiveFilterDepth:G,effectiveFilterHeight:K,effectiveFilterWidth:be,dilationDepth:H,dilationHeight:U,dilationWidth:j,inShape:t,outShape:x,filterShape:n}}function dR(t,n,e,r){r===void 0&&(r=1);var a=Jl(n,r);return Math.floor((t[0]*(e-1)-e+a)/2)}function Fp(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Xy(t){return typeof t=="number"?[t,t,t]:t}function Jl(t,n){return n<=1?t:t+(t-1)*(n-1)}function Uf(t,n){if(!n)return t;switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+n)}}function lc(t){var n=Fp(t),e=n[0],r=n[1],a=n[2];return e===1&&r===1&&a===1}function Ra(t,n){return lc(t)||lc(n)}function Y0(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function hR(t,n,e){if(n==="complex64"){if(t.dtype==="complex64")return t.clone();var r=kn(t.shape),a=t.toFloat(),o=e.complex(a,r);return r.dispose(),a.dispose(),o}if(!AB(t.dtype,n))return ce.makeTensorFromDataId(t.dataId,t.shape,n);if(t.dtype==="complex64"){var u=e.real(t);return o=u.cast(n),u.dispose(),o}if(n==="int32")return e.int(t);if(n==="bool"){var s=Je(0,t.dtype);return o=e.notEqual(t,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+n)}function Yy(t,n){return ce.makeTensorFromDataId(t.dataId,n,t.dtype)}function pR(t,n,e){var r=(n-t)/(e-1),a=fd(e,"float32");a[0]=t;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return ar(a,"float32")}function Qy(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+n.length+".");for(var e=new Float32Array(2*t.length),r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function NE(t,n){return{real:t[2*n],imag:t[2*n+1]}}function tL(t,n,e,r){t[2*r]=n,t[2*r+1]=e}function nL(t,n,e){var r=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(r),imag:Math.sin(r)}}function rL(t,n,e){var r=function(o,u,s){return function(c,f,h){for(var p=0,m=c.length,g=0,x=!1;p<m;){var E=h(f,c[g=p+(m-p>>>1)]);E>0?p=g+1:(m=g,x=!E)}return x?p:-p-1}(o,u,s||aL)}(t,n,e),a=r<0?-(r+1):r;t.splice(a,0,n)}function aL(t,n){return t>n?1:t<n?-1:0}function Q0(t,n,e,r,a){return vR(t,n,e,r,a,0).selectedIndices}function Z0(t,n,e,r,a,o){var u=vR(t,n,e,r,a,o);return u.numValidOutputs.dispose(),{selectedIndices:u.selectedIndices,selectedScores:u.selectedScores}}function vR(t,n,e,r,a,o,u,s){s===void 0&&(s=!1);for(var c=Array.from(n).map(function(N,D){return{score:N,boxIndex:D,suppressBeginIndex:0}}).filter(function(N){return N.score>a}).sort(kE),f=o>0?-.5/o:0,h=[],p=[];h.length<e&&c.length>0;){var m=c.pop(),g=m.score,x=m.boxIndex,E=m.suppressBeginIndex;if(g<a)break;for(var S=!1,_=h.length-1;_>=E;--_){var A=oL(t,x,h[_]);if(A>=r){S=!0;break}if(m.score=m.score*iL(r,f,A),m.score<=a)break}m.suppressBeginIndex=h.length,S||(m.score===g?(h.push(x),p.push(m.score)):m.score>a&&rL(c,m,kE))}var T=h.length;return s&&(h.fill(0,T),p.fill(0,T)),{selectedIndices:ar(h,"int32"),selectedScores:ar(p,"float32"),numValidOutputs:Je(T,"int32")}}function oL(t,n,e){var r=t.subarray(4*n,4*n+4),a=t.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),f=Math.min(a[0],a[2]),h=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),m=Math.max(a[1],a[3]),g=(s-o)*(c-u),x=(p-f)*(m-h);if(g<=0||x<=0)return 0;var E=Math.max(o,f),S=Math.max(u,h),_=Math.min(s,p),A=Math.min(c,m),T=Math.max(_-E,0)*Math.max(A-S,0);return T/(g+x-T)}function iL(t,n,e){var r=Math.exp(n*e*e);return e<=t?r:0}function kE(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function mR(t,n,e){var r=new Array(t.rank).fill(0),a=t.shape.slice();return n.map(function(o){a[e]=o;var u=t.slice(r,a);return r[e]+=o,u})}function gR(t,n){for(var e=new Array(t.rank),r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];var a=Mt(e,t.dtype);for(r=0;r<a.values.length;++r){for(var o=a.indexToLoc(r),u=new Array(t.rank),s=0;s<u.length;s++)u[s]=o[s]%t.shape[s];var c=t.locToIndex(u);a.values[r]=t.values[c]}return a.toTensor()}function yR(t,n,e,r,a){for(var o=n[n.length-1],u=[t.length/o,o],s=u[0],c=u[1],f=Gf(e,s*r),h=Gf("int32",s*r),p=0;p<s;p++){for(var m=p*c,g=t.subarray(m,m+c),x=[],E=0;E<g.length;E++)x.push({value:g[E],index:E});x.sort(function(N,D){return D.value-N.value});var S=p*r,_=f.subarray(S,S+r),A=h.subarray(S,S+r);for(E=0;E<r;E++)_[E]=x[E].value,A[E]=x[E].index}var T=n.slice();return T[T.length-1]=r,[Lr(f,T,e),Lr(h,T,"int32")]}function J0(t,n){for(var e=[],r=0;r<n.length;r++)n[r]&&e.push(r);var a=Mt(t,"int32"),o=Mt([e.length,t.length],"int32");for(r=0;r<e.length;r++){var u=a.indexToLoc(e[r]),s=r*t.length;o.values.set(u,s)}return o.toTensor()}var uL=function(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map(function(a,o){return"T"+o});var e=[];this.variableNames.forEach(function(a){e.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},sL=function(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map(function(a,o){return"T"+o});var e=[];this.variableNames.forEach(function(a){e.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},lL=function(t,n,e){this.variableNames=["A"];var r=t.windowSize,a=t.batchSize,o=t.inSize,u=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[a,u];var s=n==="max"?">":"<",c=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function bR(t,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return t+"."+e})}function wa(t,n){return n===1?[t]:bR(t,n)}function ea(){var t,n,e,r,a,o,u,s,c,f;return Me().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",a="texture",o="outputColor",u="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",f=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",a="texture2D",o="gl_FragColor",u="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,f=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:a,output:o,defineOutput:u,defineSpecialNaN:s,defineSpecialInf:c,defineRound:f}}function Ns(t,n,e){e===void 0&&(e="index");var r=Ko(n);return r.map(function(a,o){return"int "+t[o]+" = "+e+" / "+a+"; "+(o===r.length-1?"int "+t[o+1]+" = "+e+" - "+t[o]+" * "+a:"index -= "+t[o]+" * "+a)+";"}).join("")}function eb(t){var n=Ko(t).map(function(e){return e.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var xR=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function cL(t,n,e,r){var a=[];t.forEach(function(g){var x=ct(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(x>1?"["+x+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))});var o,u,s=a.join(`
`),c=t.map(function(g){return function(x,E,S){S===void 0&&(S=!1);var _="";_+=S?wR(x):Vl(x);var A=x.shapeInfo.logicalShape,T=E.logicalShape;return A.length<=T.length&&(_+=S?function(N,D){var k,P=N.name,H=P.charAt(0).toUpperCase()+P.slice(1),U="get"+H+"AtOutCoords",j=N.shapeInfo.logicalShape.length,G=D.logicalShape.length,K=Fu(N.shapeInfo.logicalShape,D.logicalShape),be=An(G),pe=G-j,he=["x","y","z","w","u","v"];k=j===0?"":G<2&&K.length>=1?"coords = 0;":K.map(function(Re){return"coords."+he[Re+pe]+" = 0;"}).join(`
`);var q="";q=G<2&&j>0?"coords":N.shapeInfo.logicalShape.map(function(Re,Se){return"coords."+he[Se+pe]}).join(", ");var ne="return outputValue;",ee=ct(N.shapeInfo.logicalShape)===1,J=ct(D.logicalShape)===1;if(j!==1||ee||J){if(ee&&!J)ne=G===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(K.length){var L=j-2,se=j-1;K.indexOf(L)>-1&&K.indexOf(se)>-1?ne="return vec4(outputValue.x);":K.indexOf(L)>-1?ne="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":K.indexOf(se)>-1&&(ne="return vec4(outputValue.xx, outputValue.zz);")}}else ne=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+U+`() {
      `+be+` coords = getOutputCoords();
      `+k+`
      vec4 outputValue = get`+H+"("+q+`);
      `+ne+`
    }
  `}(x,E):function(N,D){var k=N.name,P=k.charAt(0).toUpperCase()+k.slice(1),H="get"+P+"AtOutCoords",U=D.texShape,j=N.shapeInfo.texShape,G=N.shapeInfo.logicalShape.length,K=D.logicalShape.length;if(!N.shapeInfo.isUniform&&G===K&&N.shapeInfo.flatOffset==null&&Ar(j,U))return`
      float `+H+`() {
        return sampleTexture(`+k+`, resultUV);
      }
    `;var be,pe=An(K),he=Fu(N.shapeInfo.logicalShape,D.logicalShape),q=K-G,ne=["x","y","z","w","u","v"];be=G===0?"":K<2&&he.length>=1?"coords = 0;":he.map(function(J){return"coords."+ne[J+q]+" = 0;"}).join(`
`);var ee="";return ee=K<2&&G>0?"coords":N.shapeInfo.logicalShape.map(function(J,L){return"coords."+ne[L+q]}).join(", "),`
    float `+H+`() {
      `+pe+` coords = getOutputCoords();
      `+be+`
      return get`+P+"("+ee+`);
    }
  `}(x,E)),_}(g,n,r)}).join(`
`),f=n.texShape,h=ea(),p=function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `}(h),m=function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+fL+`
    `+dL+`
    `+hL+`
  `}(h);return n.isPacked?(o=function(g,x){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(N,D){var k=[Math.ceil(D[0]/2),Math.ceil(D[1]/2)];return k[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+k[1]+`.0);
      }
    `:k[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+k[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      return 2 * (resTexRC.x * `+k[1]+` + resTexRC.y);
    }
  `}(0,x);case 2:return function(N,D){var k=[Math.ceil(D[0]/2),Math.ceil(D[1]/2)];if(Ar(N,D))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+k[0]+", "+k[1]+`));
      }
    `;var P=Math.ceil(N[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));

      int index = resTexRC.x * `+k[1]+` + resTexRC.y;
      int r = 2 * (index / `+P+`);
      int c = imod(index, `+P+`) * 2;

      return ivec2(r, c);
    }
  `}(g,x);case 3:return E=g,S=x,_=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],A=Math.ceil(E[2]/2),T=A*Math.ceil(E[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      int b = index / `+T+`;
      index -= b * `+T+`;

      int r = 2 * (index / `+A+`);
      int c = imod(index, `+A+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(N,D){for(var k=[Math.ceil(D[0]/2),Math.ceil(D[1]/2)],P=Math.ceil(N[N.length-1]/2),H=P*Math.ceil(N[N.length-2]/2),U=H,j="",G="b, r, c",K=2;K<N.length-1;K++)U*=N[N.length-K-1],j=`
      int b`+K+" = index / "+U+`;
      index -= b`+K+" * "+U+`;
    `+j,G="b"+K+", "+G;return`
    ivec`+N.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      int index = resTexRC.x * `+k[1]+` + resTexRC.y;

      `+j+`

      int b = index / `+H+`;
      index -= b * `+H+`;

      int r = 2 * (index / `+P+`);
      int c = imod(index, `+P+`) * 2;

      return ivec`+N.length+"("+G+`);
    }
  `}(g,x)}var E,S,_,A,T}(n.logicalShape,f),u=function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `}(h)):(o=function(g,x){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(_,A){return A[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+A[1]+`.0);
      }
    `:A[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+A[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+A[0]+", "+A[1]+`));
      return resTexRC.x * `+A[1]+` + resTexRC.y;
    }
  `}(0,x);case 2:return function(_,A){return Ar(_,A)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+A[0]+", "+A[1]+`));
      }
    `:_[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+A[0]+", "+A[1]+`));
        int index = resTexRC.x * `+A[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:_[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+A[0]+", "+A[1]+`));
        int index = resTexRC.x * `+A[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+A[0]+", "+A[1]+`));
      int index = resTexRC.x * `+A[1]+` + resTexRC.y;
      int r = index / `+_[1]+`;
      int c = index - r * `+_[1]+`;
      return ivec2(r, c);
    }
  `}(g,x);case 3:return E=x,S=Ns(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;
      `+S+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(_,A){var T=Ns(["r","c","d","d2"],_);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+A[0]+", "+A[1]+`));
      int index = resTexRC.x * `+A[1]+` + resTexRC.y;
      `+T+`
      return ivec4(r, c, d, d2);
    }
  `}(g,x);case 5:return function(_,A){var T=Ns(["r","c","d","d2","d3"],_);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+A[0]+`,
                             `+A[1]+`));

      int index = resTexRC.x * `+A[1]+` + resTexRC.y;

      `+T+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(g,x);case 6:return function(_,A){var T=Ns(["r","c","d","d2","d3","d4"],_);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+A[0]+", "+A[1]+`));
      int index = resTexRC.x * `+A[1]+` + resTexRC.y;

      `+T+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(g,x);default:throw new Error(g.length+"-D output sampling is not yet supported")}var E,S}(n.logicalShape,f),u=function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `}(h)),r&&(m+=pL),[m,p,u,s,o,c,e].join(`
`)}function Vl(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var o=e.shapeInfo.texShape,u=o[0],s=o[1];if(u===1&&s===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=e.shapeInfo.texShape,f=c[0],h=c[1],p=xs(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+f+", "+h+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(e){var r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Ll(e)+`
      }
    `;var o=e.shapeInfo.texShape,u=o[0],s=o[1];if(s===1&&u===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=xs(r);return s===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+u+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:u===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+u+", "+s+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=e.shapeInfo.texShape;if(u!=null&&Ar(r,u)){var s=u[0],c=u[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+s+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var f=_s(r),h=f.newShape,p=f.keptDims,m=h;if(m.length<r.length){var g=Wl(e,m);return`
      `+Vl(g)+`
      float `+o+`(int row, int col) {
        return `+o+"("+ql(["row","col"],p)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Ll(e)+`
      }
    `;var x=u[0],E=u[1],S=xs(a);return E===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+S+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+x+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:x===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+S+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+E+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+S+`;
    vec2 uv = uvFromFlat(`+x+", "+E+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(t);case 3:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[1]*r[2],s=r[2],c=_s(r),f=c.newShape,h=c.keptDims,p=f;if(p.length<r.length){var m=Wl(e,p);return`
        `+Vl(m)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+ql(["row","col","depth"],h)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+u+", "+s+`, 1)));
        `+Ll(e)+`
      }
    `;var g=e.shapeInfo.texShape,x=g[0],E=g[1],S=e.shapeInfo.flatOffset;if(E===u&&S==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+E+".0, "+x+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(E===s&&S==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+E+".0, "+x+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var _=xs(a);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+u+" + col * "+s+" + depth + "+_+`;
        vec2 uv = uvFromFlat(`+x+", "+E+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(t);case 4:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[3],s=r[2]*u,c=r[1]*s,f=_s(r),h=f.newShape,p=f.keptDims;if(h.length<r.length){var m=Wl(e,h);return`
      `+Vl(m)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+ql(["row","col","depth","depth2"],p)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+s+", "+u+`, 1)));
        `+Ll(e)+`
      }
    `;var g=e.shapeInfo.flatOffset,x=e.shapeInfo.texShape,E=x[0],S=x[1];if(S===c&&g==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+u+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+E+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===u&&g==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+E+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=xs(a);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+s+` +
          depth * `+u+` + depth2;
      vec2 uv = uvFromFlat(`+E+", "+S+", index + "+_+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(t);case 5:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[4],s=r[3]*u,c=r[2]*s,f=r[1]*c,h=_s(r),p=h.newShape,m=h.keptDims;if(p.length<r.length){var g=Wl(e,p);return`
      `+Vl(g)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+ql(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+c+", "+s+", "+u+`)) +
          depth3;
        `+Ll(e)+`
      }
    `;var x=e.shapeInfo.flatOffset,E=e.shapeInfo.texShape,S=E[0],_=E[1];if(_===f&&x==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+s+", "+u+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(_===u&&x==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var A=xs(a);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+c+" + depth * "+s+` +
          depth2 * `+u+" + depth3 + "+A+`;
      vec2 uv = uvFromFlat(`+S+", "+_+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(t);case 6:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=_s(r),s=u.newShape,c=u.keptDims;if(s.length<r.length){var f=Wl(e,s);return`
      `+Vl(f)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+ql(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var h=r[5],p=r[4]*h,m=r[3]*p,g=r[2]*m,x=r[1]*g;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+x+", "+g+", "+m+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+h+`, 1)));
        `+Ll(e)+`
      }
    `;var E=e.shapeInfo.flatOffset,S=e.shapeInfo.texShape,_=S[0],A=S[1];if(A===x&&E==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+m+", "+p+", "+h+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+A+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(A===h&&E==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+A+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var T=xs(a);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+x+" + col * "+g+" + depth * "+m+` +
          depth2 * `+p+" + depth3 * "+h+" + depth4 + "+T+`;
      vec2 uv = uvFromFlat(`+_+", "+A+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function wR(t){var n,e,r;switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=ea(),`
    vec4 `+e+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(a){var o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),s=a.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=ea();return`
    vec4 `+u+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+f.texture2D+"("+o+`, uv);
    }
  `}(t);case 2:return function(a){var o=a.shapeInfo.logicalShape,u=a.name,s="get"+u.charAt(0).toUpperCase()+u.slice(1),c=a.shapeInfo.texShape,f=c[0],h=c[1],p=ea();if(c!=null&&Ar(o,c))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+h+".0, "+f+`.0);

        return `+p.texture2D+"("+u+`, uv);
      }
    `;var m=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+m[0]+", "+m[1]+`, row, col);
      return `+p.texture2D+"("+u+`, uv);
    }
  `}(t);case 3:return function(a){var o=a.shapeInfo.logicalShape,u=a.name,s="get"+u.charAt(0).toUpperCase()+u.slice(1),c=a.shapeInfo.texShape,f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(o[0]===1){var h=o.slice(1),p=Wl(a,h);return`
        `+wR(p)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+ql(["b","row","col"],[1,2])+`);
        }
      `}var m=f[0],g=f[1],x=Math.ceil(o[2]/2),E=x*Math.ceil(o[1]/2),S=ea();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+g+", "+E+", "+x+`, b, row, col);
      return `+S.texture2D+"("+u+`, uv);
    }
  `}(t);default:return function(a){for(var o=a.shapeInfo.logicalShape,u=o.length,s=a.name,c="get"+s.charAt(0).toUpperCase()+s.slice(1),f=a.shapeInfo.texShape,h=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)],p=h[0],m=h[1],g=Math.ceil(o[u-1]/2),x=g*Math.ceil(o[u-2]/2),E="int b, int row, int col",S="b * "+x+" + (row / 2) * "+g+" + (col / 2)",_=2;_<u-1;_++)E="int b"+_+", "+E,x*=o[u-_-1],S="b"+_+" * "+x+" + "+S;var A=ea();return`
    vec4 `+c+"("+E+`) {
      int index = `+S+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+p+`);
      return `+A.texture2D+"("+s+`, uv);
    }
  `}(t)}}var fL=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dL=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hL=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,pL=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function xs(t){return"offset"+t}function Ll(t){var n=t.name,e=ct(t.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function An(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Wl(t,n){var e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function ql(t,n){return n.map(function(e){return t[e]}).join(", ")}var vL=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,$(t.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var a=t[t.length-1],o=Math.ceil(a/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var u,s,c=this.outputShape,f=c.length,h=An(f),p=wa("coords",f);if(o===1){var m=An(s=f+1);u=`
        `+m+" sourceLocR = "+m+"("+p.join()+`, 0);
        ++`+p[f-1]+`;
        `+m+" sourceLocG = "+m+"("+p.join()+`, 0);
        ++`+p[f-2]+`;
        `+m+" sourceLocA = "+m+"("+p.join()+`, 0);
        --`+p[f-1]+`;
        `+m+" sourceLocB = "+m+"("+p.join()+`, 0);
        --`+p[f-2]+";"}else s=f,u=`
        `+h+` sourceLocR = coords;
        ++`+p[f-1]+`;
        `+h+` sourceLocG = coords;
        ++`+p[f-2]+`;
        `+h+` sourceLocA = coords;
        --`+p[f-1]+`;
        `+h+` sourceLocB = coords;
        --`+p[f-2]+";";var g=["x","y","z","w","u","v"].slice(0,s),x="."+g[s-1],E=g.map(function(H){return"int "+H}),S=wa("sourceLocR",s-1).concat("inIdx.r"),_=wa("sourceLocG",s-1).concat("inIdx.g"),A=wa("sourceLocB",s-1).concat("inIdx.b"),T=wa("sourceLocA",s-1).concat("inIdx.a"),N=e==="max"?"greaterThan":"lessThan",D=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+A.join()+`),
                             getBestIndicesAChannel(`+T.join()+")));",k=`vec4(
            getAChannel(`+S.join()+`),
            hasNextCol ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow ? getAChannel(`+A.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+T.join()+") : 0.)",P=r?"":`
      float getBestIndicesAChannel(`+E.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+E.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+P+`
      void main() {
        `+h+` coords = getOutputCoords();
        bool hasNextCol = `+p[f-1]+" < "+(c[f-1]-1)+`;
        bool hasNextRow = `+p[f-2]+" < "+(c[f-2]-1)+`;
        `+u+`
        ivec4 srcIdx = ivec4(sourceLocR`+x+", sourceLocG"+x+`,
          sourceLocB`+x+", sourceLocA"+x+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+k+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+D+`
          vec4 candidate = `+k+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+N+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},mL=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterHeight,c=t.effectiveFilterWidth,f=s-1-t.padInfo.top,h=c-1-t.padInfo.left,p=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+f+", "+h+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+u+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},gL=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=h-1-t.padInfo.front,x=p-1-t.padInfo.top,E=m-1-t.padInfo.left,S=1/(n*e*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+x+", "+E+`);
      const float avgMultiplier = float(`+S+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+f+`) {
              float dyC = float(dyCCorner + wC) / `+u+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},yL=function(t,n,e,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Yt(t,n),Yt(t,e);var u="0.0";r!=null&&(Yt(t,r),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var s="1.0";a!=null&&(Yt(t,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+u+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},bL=function(t,n,e,r,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Yt(t,n),Yt(t,e);var u="vec4(0.0)";r!=null&&(Yt(t,r),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var s="vec4(1.0)";a!=null&&(Yt(t,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+u+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},xL="return areal * breal - aimag * bimag;",wL="return areal * bimag + aimag * breal;",OE=function(t,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Yt(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Xg="return a + b;",Yg="return a - b;",ME="return a * b;",ER="return (a < 0.) ? b * a : a;",Hn=function(t,n,e){this.variableNames=["A","B"],this.outputShape=Yt(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},SR=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Oi=function(t,n,e,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Yt(n,e);var a=this.outputShape.length,o="";if(r)if(a===0||ct(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+An(a)+` coords = getOutputCoords();
        `,a===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var u=wa("coords",a);o+=`
            bool nextRowOutOfBounds =
              (`+u[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+u[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},EL=function(){function t(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,n),a.gl.uniform1f(r.maxLoc,e)}},t}(),SL=function(){function t(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,n),a.gl.uniform1f(r.maxLoc,e)}},t}(),_L=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},CL=function(t){this.outputShape=[],this.outputShape=sc(t,1),this.variableNames=t.map(function(s,c){return"T"+c});var n=new Array(t.length-1);n[0]=t[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var a=n[e-1];r.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+a+"));")}var o=n.length,u=n[n.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+u+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},RL=function(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=sc(t,n);var e=this.outputShape,r=e.length,a=An(r),o=wa("coords",r),u=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(S,_){return"T"+_});var s=new Array(t.length-1);s[0]=t[0][n];for(var c=1;c<s.length;c++)s[c]=s[c-1]+t[c][n];var f=u[n],h=u.slice(-2),p=u.join(),m="if ("+f+" < "+s[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+h.join()+`));
        }`;for(c=1;c<s.length;c++){var g=s[c-1];m+=`
        if (`+f+" < "+s[c]+"  && "+f+" >= "+s[c-1]+`) {
          return getChannel(
            getT`+c+"("+zh(u,f,g)+`),
            vec2(`+zh(h,f,g)+`));
        }`}var x=s.length,E=s[s.length-1];m+=`
        return getChannel(
          getT`+x+"("+zh(u,f,E)+`),
          vec2(`+zh(h,f,E)+"));",this.userCode=`
      float getValue(`+u.map(function(S){return"int "+S})+`) {
        `+m+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+e[r-2]+` &&
            `+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function zh(t,n,e){var r=t.indexOf(n);return t.map(function(a,o){return o===r?a+" - "+e:a}).join()}var AL=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,a=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+a+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},TL=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=t.dataFormat==="channelsLast",u=n-1-t.padInfo.top,s=e-1-t.padInfo.left,c=o?1:2,f=o?2:3,h=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+h+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+f+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},DL=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.padInfo.front,o=t.padInfo.top,u=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+a+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+u+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},NL=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=n-1-t.padInfo.front,c=e-1-t.padInfo.top,f=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+u+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},kL=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,a=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+a+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},OL=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=n-1-t.padInfo.top,u=e-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},IE=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var a=t.padInfo.top,o=t.padInfo.left,u=t.strideHeight,s=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,m=4*Math.floor(t.inChannels/4),g=t.inChannels%4,x=t.dataFormat==="channelsLast",E=x?1:2,S=x?2:3,_=x?3:1,A="",T="";e&&(A=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,T="result = activation(result);");var N=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+A+`

      const ivec2 strides = ivec2(`+u+", "+s+`);
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+_+`];

        ivec2 xRCCorner =
            ivec2(coords[`+E+"], coords["+S+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+x+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+x+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+x+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+x+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+N+`
        `+T+`
        setOutput(result);
      }
    `},ML=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,e=t.padInfo.top,r=t.padInfo.left,a=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterDepth,p=t.filterHeight,m=t.filterWidth,g=4*Math.floor(t.inChannels/4),x=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+o+", "+u+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+h+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+f+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(x===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(x===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(x===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},FE=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var a=t.inHeight,o=t.inWidth,u=t.padInfo.top,s=t.padInfo.left,c=t.strideHeight,f=t.strideWidth,h=t.dilationHeight,p=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,x=t.outChannels/t.inChannels,E="",S="";e&&(E=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,S="result = activation(result);");var _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+E+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+u+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+x+`;
        int q = d2 - d1 * `+x+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+h+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+_+`
        `+S+`
        setOutput(result);
      }
    `},BE=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var a=t.inHeight,o=t.inWidth,u=t.padInfo.top,s=t.padInfo.left,c=t.strideHeight,f=t.strideWidth,h=t.dilationHeight,p=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,x=g,E="int xR; int xC; int xCOffset;",S=0;S<m;S++)for(var _=0;_<g;_++)E+=`
          vec4 xTexelR`+S+"C"+2*_+` = vec4(0.);
          vec4 wR`+S+"C"+_+` = vec4(0.);
          vec4 xR`+S+"C"+_+" = vec4(0.);";for(S=0;S<m;S++)for(var A=0;A<x;A++){if(E+=`
          xR = xRCorner + `+S*h+`;
          xC = xCCorner + `+(_=2*A)*p+`;
        `,f===1){if(_<g&&(E+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+S+"C"+_+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+S+"C"+_+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+S+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+S+"C"+_+" = vec4(previous.zw, xTexelR"+S+"C"+_+`.xy);
                } else {
                  xR`+S+"C"+_+" = vec4(0, 0, xTexelR"+S+"C"+_+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+S+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+S+"C"+_+` = vec4(0.);
                }

                xR`+S+"C"+_+" = xTexelR"+S+"C"+_+`;
              `,_+1<g)){var T=s%2==0?jC(p):p;p%2==0&&s%2==1||p%2!=0&&s%2!=1?(E+=`
                  xCOffset = xC + `+s%2+" + "+T+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+S+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(E+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+S+"C"+_+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+S+"C"+_+` = vec4(0.);
                    }
                  `),E+=`
                  xR`+S+"C"+(_+1)+` = vec4(
                    xTexelR`+S+"C"+_+".zw, xTexelR"+S+"C"+(_+2)+`.xy);
                `):E+=`
                  xCOffset = xC + `+T+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+S+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+S+"C"+(_+1)+" = xTexelR"+S+"C"+(_+2)+`;
                `}}else _<g&&(E+=`
              if(xR >= 0 && xR < `+a+`) {
            `,s%2==1?(E+=`
                xCOffset = xC + 1 - `+f+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+S+"C"+_+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+S+"C"+_+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+S+"C"+(_+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+S+"C"+(_+2)+` = vec4(0.);
                }

                xR`+S+"C"+_+` = vec4(
                  xTexelR`+S+"C"+_+".zw, xTexelR"+S+"C"+(_+2)+`.zw);
              `,_+1<g&&(E+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+f+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+S+"C"+(_+1)+" = vec4(xTexelR"+S+"C"+(_+2)+`.xy, final.xy);
                `)):(E+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+S+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+S+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + `+f+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+S+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+S+"C"+(_+2)+` = vec4(0.);
                }

                xR`+S+"C"+_+` = vec4(
                  xTexelR`+S+"C"+_+".xy, xTexelR"+S+"C"+(_+2)+`.xy);
              `,_+1<g&&(E+=`
                  xR`+S+"C"+(_+1)+` = vec4(
                    xTexelR`+S+"C"+_+".zw, xTexelR"+S+"C"+(_+2)+`.zw);
                `)),E+="}");_<g&&(E+=`
            vec4 wTexelR`+S+"C"+_+" = getW("+S+", "+_+`, d1, q);
            wR`+S+"C"+_+" = vec4(wTexelR"+S+"C"+_+".xz, wTexelR"+S+"C"+_+`.xz);
          `,_+1<g&&(E+=`
              vec4 wTexelR`+S+"C"+(_+1)+" = getW("+S+", "+(_+1)+`, d1, q);
              wR`+S+"C"+(_+1)+` =
                vec4(wTexelR`+S+"C"+(_+1)+".xz, wTexelR"+S+"C"+(_+1)+".xz);"))}for(S=0;S<m;S++)for(_=0;_<g;_++)E+="dotProd += xR"+S+"C"+_+" * wR"+S+"C"+_+";";var N="",D="";e&&(N=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,D="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+N+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+u+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+E+`

        vec4 result = dotProd;
        `+k+`
        `+D+`
        setOutput(result);
      }
    `},IL=function(t,n,e,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],u=t[1],s=t[2],c=t[3],f=n[0],h=e[0],p=e[1];this.outputShape=[f,h,p,c];var m=r==="bilinear"?1:0,g=[u-1+".0",s-1+".0"],x=g[0],E=g[1],S=h>1?[""+(u-1)/(h-1),"(y2-y1) * height_ratio","y1*"+x+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+x],_=S[0],A=S[1],T=S[2],N=p>1?[""+(s-1)/(p-1),"(x2-x1) * width_ratio","x1*"+E+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+E],D=N[0],k=N[1],P=N[2];this.userCode=`
      const float height_ratio = float(`+_+`);
      const float width_ratio = float(`+D+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+A+`;
        float width_scale = `+k+`;

        float in_y = `+T+`;
        if( in_y < 0.0 || in_y > `+x+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+P+`;
        if( in_x < 0.0 || in_x > `+E+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},FL=function(t,n,e){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=t[t.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+An(r)+` coords = getOutputCoords();
        int end = `+PE(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+PE(r,"coords")+` = idx;
          val += getX(`+function(u,s){if(u===1)return""+s;if(u===2)return s+".x, "+s+".y";if(u===3)return s+".x, "+s+".y, "+s+".z";if(u===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+u+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function PE(t,n){if(t===1)return""+n;if(t===2)return n+".y";if(t===3)return n+".z";if(t===4)return n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var BL=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Xf.DENSE;var n=Lf(t),e=ea();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ns(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `},PL=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Xf.DENSE;var n=Lf(t),e=ea();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ns(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `},LL=function(){function t(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),UL=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},zL=function(t){this.variableNames=["A"],this.outTexUsage=La.DOWNLOAD;var n=ea();this.outputShape=t,this.userCode=`
      `+xR+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},jL=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=La.DOWNLOAD;var n=ea();this.outputShape=t,this.userCode=`
      `+xR+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},HL=function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"];var r=ea(),a=n[0],o=n[1];this.outputShape=t;var u="result";e&&(u="floor(result * 255. + 0.5)"),this.userCode=`
      `+eb(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+u+`, 0., 0., 0.);
      }
    `},VL=function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=ea(),a=n[0],o=n[1];this.outputShape=t;var u="",s="result";e&&(s="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var f=0;f<=1;f++){var h=2*c+f;u+=`
          localCoords = coords;
          if(localCoords[2] + `+f+" < "+t[2]+`) {
            localCoords[2] += `+f+`;
            if(localCoords[1] + `+c+" < "+t[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+h+`] = values[0];
              } else if(offset == 1) {
                result[`+h+`] = values[1];
              } else if(offset == 2) {
                result[`+h+`] = values[2];
              } else {
                result[`+h+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+eb(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+u+`

        `+r.output+" = "+s+`;
      }
    `},WL="return real * expR - imag * expI;",qL="return real * expI + imag * expR;",LE=function(t,n,e){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var a=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},$L=function(){function t(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,a){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(e.valueLoc,n)}},t}(),GL=function(t,n,e){this.variableNames=["A","indices"];var r=t.slice();r[e]=n,this.outputShape=r,this.rank=r.length;var a=An(this.rank),o=function(u,s){var c=u.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var f=["resRC.x","resRC.y","resRC.z","resRC.w"],h=[],p=0;p<u.length;p++)p===s?h.push("int(getIndices("+f[p]+"))"):h.push(""+f[p]);return h.join()}(t,e);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},KL=function(t,n,e){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var r=An(n.length),a=An(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function XL(t,n){var e=ea();return WB(t,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function YL(t,n){return XB(t,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function QL(t,n){return YB(t,n,new Uint16Array([0,1,2,2,1,3]))}function hd(t,n,e,r,a,o,u){ZB(e,r);var s=QB(t,n),c=t.TEXTURE_2D;return ht(t,n,function(){return t.bindTexture(c,s)}),ht(t,n,function(){return t.texParameteri(c,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),ht(t,n,function(){return t.texParameteri(c,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),ht(t,n,function(){return t.texParameteri(c,t.TEXTURE_MIN_FILTER,t.NEAREST)}),ht(t,n,function(){return t.texParameteri(c,t.TEXTURE_MAG_FILTER,t.NEAREST)}),ht(t,n,function(){return t.texImage2D(c,0,a,e,r,0,o,u,null)}),ht(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function ZL(t,n,e,r,a){var o=cv(e,r);return hd(t,n,o[0],o[1],a.internalFormatFloat,a.textureFormatFloat,t.FLOAT)}function JL(t,n,e,r,a){var o=cv(e,r);return hd(t,n,o[0],o[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function e6(t,n,e,r,a){var o=cv(e,r);return hd(t,n,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function t6(t,n,e,r,a){var o=dd(e,r);return hd(t,n,o[0],o[1],a.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function n6(t,n,e,r,a){var o=dd(e,r);return hd(t,n,o[0],o[1],a.internalFormatPackedHalfFloat,t.RGBA,a.textureTypeHalfFloat)}function r6(t,n,e,r){return ht(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),CE(t,n,e,"clipSpacePos",r,3,20,0)&&CE(t,n,e,"uv",r,2,20,12)}function a6(t,n,e,r,a,o,u){var s,c,f;ht(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),o instanceof Uint8Array?(s=new Uint8Array(r*a*4),c=t.UNSIGNED_BYTE,f=t.RGBA):(s=new Float32Array(r*a*4),c=t.FLOAT,f=u.internalFormatPackedFloat),s.set(o),ht(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,f,r,a,0,t.RGBA,c,s)}),ht(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function o6(t,n,e,r){ht(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),r.data instanceof Uint8Array?ht(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):ht(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),ht(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function i6(t,n,e,r,a){var o=t.createBuffer();ht(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var u=16*e*r;return ht(t,n,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,u,t.STREAM_READ)}),ht(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,0)}),ht(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function u6(t,n,e){var r=t,a=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function s6(t,n,e,r,a){var o=cv(e,r),u=o[0],s=o[1],c=new Uint8Array(e*r*4);return ht(t,n,function(){return t.readPixels(0,0,u,s,a.downloadTextureFormat,t.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function l6(t,n,e,r,a,o,u,s){var c=t,f=new Float32Array(function(h,p){var m=dd(h,p);return m[0]*m[1]*4}(o,u));return c.bindBuffer(c.PIXEL_PACK_BUFFER,n),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,f),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),f}function c6(t,n,e,r){var a=new Float32Array(e*r*4);return ht(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,a)}),a}var f6=function(){function t(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=Me().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,UB(e,n)):this.gl=ni(e);var r="WEBGL_color_buffer_float";if(Me().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Bh(this.gl,this.debug,"OES_texture_float"),ao(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Bh(this.gl,this.debug,"OES_texture_half_float");else if(Me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ao(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Bh(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ao(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ao(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=YL(this.gl,this.debug),this.indexBuffer=QL(this.gl,this.debug),this.framebuffer=JB(this.gl,this.debug),this.textureConfig=W0(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return Me().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;ht(e,this.debug,function(){return e.finish()}),ht(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),ht(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),ht(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),ht(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),ht(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),ZL(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),JL(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),e6(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),o6(this.gl,this.debug,n,e)},t.prototype.uploadDenseMatrixToTexture=function(n,e,r,a){this.throwIfDisposed(),a6(this.gl,this.debug,n,e,r,a,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),n6(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),t6(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(RE(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ht(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,r){var a=this;return this.downloadMatrixDriver(n,function(){return s6(a.gl,a.debug,e,r,a.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(n,e,r,a,o,u){return l6(this.gl,n,0,0,0,o,u,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return u6(this.gl,n,e)},t.prototype.createBufferFromTexture=function(n,e,r){this.bindTextureToFrameBuffer(n);var a=i6(this.gl,this.debug,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},t.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},t.prototype.createFence=function(n){var e,r,a=this;if(Me().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,u=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var s=o.clientWaitSync(u,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=u}else Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(e,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(n,e,r){var a=this;return this.downloadMatrixDriver(n,function(){return c6(a.gl,a.debug,e,r)})},t.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,r=qB(e,this.debug,n),a=XL(e,this.debug),o=GB(e,this.debug);return ht(e,this.debug,function(){return e.attachShader(o,a)}),ht(e,this.debug,function(){return e.attachShader(o,r)}),KB(e,this.debug,o),this.debug&&qg(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=r6(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&ht(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},t.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&qg(this.gl,this.debug,this.program),ht(this.gl,this.debug,function(){return e.gl.useProgram(n)})},t.prototype.getUniformLocation=function(n,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?tP(this.gl,this.debug,n,e):nP(this.gl,n,e)},t.prototype.getAttributeLocation=function(n,e){var r=this;return this.throwIfDisposed(),ht(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,e)})},t.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},t.prototype.setInputMatrixTexture=function(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),rP(this.gl,this.debug,this.program,n,e,r)},t.prototype.setOutputMatrixTexture=function(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)},t.prototype.setOutputPackedMatrixTexture=function(n,e,r){this.throwIfDisposed();var a=dd(e,r),o=a[0],u=a[1];this.setOutputMatrixTextureDriver(n,o,u)},t.prototype.setOutputMatrixWriteRegion=function(n,e,r,a){this.setOutputMatrixWriteRegionDriver(r,n,a,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(n,e,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&qg(this.gl,this.debug,this.program),Ph(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),ht(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),ht(this.gl,this.debug,function(){return n.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Bh(this.gl,this.debug,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),o=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return st(this,void 0,void 0,function(){var e=this;return lt(this,function(r){switch(r.label){case 0:return[4,bE(function(){return e.disposed||e.isQueryAvailable(n,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(n,a.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(n){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var n=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},t.prototype.addItemToPoll=function(n,e){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||bE(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),$g(this.gl,this.debug,n,this.framebuffer),this.debug&&Ph(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?($g(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Ph(this.gl)):RE(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var r=e();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(n,e,r){this.throwIfDisposed();var a=this.gl;$g(a,this.debug,n,this.framebuffer),this.debug&&Ph(a),this.outputTexture=n,ht(a,this.debug,function(){return a.viewport(0,0,e,r)}),ht(a,this.debug,function(){return a.scissor(0,0,e,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(n,e,r,a){var o=this;this.throwIfDisposed(),ht(this.gl,this.debug,function(){return o.gl.scissor(n,e,r,a)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function UE(t,n){if(t.length!==n.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+n.length+" inputs");t.forEach(function(e,r){var a=e.logicalShape,o=n[r],u=o.shape;if(!Ar(a,u))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+u+" must match");if(!e.isUniform||!o.isUniform){var s=e.texShape,c=o.isUniform?null:o.texData.texShape;if(!Ar(s,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+c+" must match")}})}var d6=function(t,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=e.filterWidth,a=e.inChannels,o=e.strideWidth,u=e.strideHeight,s=e.padInfo,c=e.outWidth,f=e.dilationWidth,h=e.dilationHeight,p=e.dataFormat,m=s.left,g=s.top,x=a*r,E=ea(),S=p==="channelsLast",_=S?0:1,A=S?1:2,T="",N=0;N<=1;N++)for(var D=0;D<=1;D++)T+=`
          blockIndex = rc.y + `+D+`;
          pos = rc.x + `+N+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+u+" - "+g+`;
            d0 = offsetY + `+h+" * (pos / "+x+`);

            if(d0 < `+n[_]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+o+". - "+m+`.);
              d1 = offsetX + `+f+" * (int(mod(float(pos), "+x+".) / "+a+`.));

              if(d1 < `+n[A]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+S+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*N+D)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*N+D)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+T+`

        `+E.output+` = result;
      }
    `},h6=function(t,n,e,r,a){this.variableNames=["x"],this.outputShape=[];var o,u=n,s=t[3]-1;this.outputShape=t;var c="float("+e+") + float("+r+") * sum";o=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+u+"; j <= "+u+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},p6=function(t,n,e,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=e,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},v6=function(t,n,e,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,u=n,s=t[3]-1;this.outputShape=t;var c="float("+e+") + float("+r+") * sum";o=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+u+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+u+"; j <= "+u+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},m6=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,e=t.strideWidth,r=t.dilationHeight,a=t.effectiveFilterHeight,o=t.effectiveFilterWidth,u=a-1-t.padInfo.top,s=o-1-t.padInfo.left,c=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},g6=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.dilationDepth,o=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=s-1-t.padInfo.front,p=c-1-t.padInfo.top,m=f-1-t.padInfo.left,g=s*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+f+` +
                  wR * `+f+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Qg=function(t,n,e,r,a,o,u){e===void 0&&(e=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),o===void 0&&(o=null),u===void 0&&(u=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var s=e?t[1]:t[2],c=Math.ceil(s/2),f=e?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",p=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",x="";o&&(g=u?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,x="result = activation(result);");var E=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+f+`);
          vec4 b = getMatrixB(rc.x, `+h+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+m[0]+`);
          result += (`+p[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+E+`

        `+x+`

        setOutput(result);
      }
    `},y6=function(){function t(n,e,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,a){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(e.seedLoc,n)}},t}(),b6=function(t,n,e,r){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `},x6=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=wa("rc",n),r=An(n),a=function(s,c,f){if(s===1)return"rc > "+c[0];for(var h="",p=s-2;p<s;p++)h+=f[p]+" >= "+c[p],p<s-1&&(h+="||");return h}(n,t,e),o=function(s,c,f,h){if(s===1)return"";var p=h.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+f+`;
  `}(n,t[t.length-1],t[t.length-2],e),u=function(s,c){var f=s.length,h=function(p,m){for(var g=[],x=0;x<=1;x++)for(var E=0;E<=1;E++){for(var S=(x===0?"r":"rp1")+", "+(E===0?"c":"cp1"),_=2;_<p;_++)S=m[m.length-1-_]+","+S;g.push(S)}return g}(f,c);return f===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+h[0]+`),
          cEdge ? 0. : getA(`+h[1]+`),
          rEdge ? 0. : getA(`+h[2]+`),
          rEdge || cEdge ? 0. : getA(`+h[3]+")"}(t,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+u+`));
          }
        }
      `}},w6=function(t,n,e){this.variableNames=["x"],this.outputShape=n.map(function(c,f){return c[0]+t[f]+c[1]});var r=t.length,a=An(r),o=n.map(function(c){return c[0]}).join(","),u=n.map(function(c,f){return c[0]+t[f]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+o+`);
      `+a+" end = "+a+"("+u+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+u+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},E6=function(t,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(S,_){return S[0]+t[_]+S[1]});for(var r=t.length,a=An(r),o=n.map(function(S){return S[0]}).join(","),u=n.map(function(S,_){return S[0]+t[_]}).join(","),s=wa("rc",r),c=wa("source",r),f=s[r-1]+" < "+this.outputShape[r-1],h=r===1?"source":"vec2("+c.slice(-2).join()+")",p=[a+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+f+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+f+") {"],m=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",x=0,E=r===1?2:4;x<E;x++)g+=`
        `+p[x]+`
        if (`+m+`) {
          result[`+x+"] = float("+e+`);
        } else {
          `+a+` source = rc - start;
          result[`+x+"] = getChannel(getX("+c.join()+"), "+h+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+o+`);
      const `+a+" end = "+a+"("+u+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},Zg=function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,u=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var m=n==="avg",g="0.0";if(m||(g="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+o+`);
        const ivec2 pads = ivec2(`+h+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+f+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(x="avgValue / count");var E=4*Math.floor(r/4),S=r%4,_=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+o+`);
      const ivec2 pads = ivec2(`+h+", "+p+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+u+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+E+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+_+`
          }

          int xC = xCCorner + `+E+`;
          if (`+(S===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(S===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(S===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+_+`
          }
        }
        setOutput(`+x+`);
      }
    `}},Jg=function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,x=t.padInfo.top,E=t.padInfo.left;this.outputShape=t.outShape;var S=n==="avg",_="0.0";if(S||(_="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+o+", "+u+`);
        const ivec3 pads = ivec3(`+g+", "+x+", "+E+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+h+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var A=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(A="avgValue / count");var T=4*Math.floor(r/4),N=r%4,D=`
      if (`+S+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+o+", "+u+`);
      const ivec3 pads = ivec3(`+g+", "+x+", "+E+`);
      const float initializationValue = `+_+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+_+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+T+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+D+`
            }

            int xC = xCCorner + `+T+`;
            if (`+(N===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+D+`
            } else if (`+(N===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+D+`
            } else if (`+(N===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+D+`
            }
          }
          setOutput(`+A+`);
        }
      }
    `}},S6=function(t,n){this.variableNames=["x"];var e=t.windowSize,r=t.batchSize,a=t.inSize,o=Math.ceil(a/e);this.outputShape=[r,o];var u="0.0",s="";n==="prod"?u="1.0":n==="min"?(u="1.0 / 1e-20",s="min"):n==="max"&&(u="-1.0 / 1e-20",s="max");var c=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");var f=4*Math.floor(e/4),h=e%4,p=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,m="vec4";n==="all"?(u="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(u="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var g="";a%e>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+u+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+u+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+f+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+f+`;
        if (`+(h===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(h===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(h===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+c+`);
      }
    `},_6=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var e="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),e+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Ns(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+eb(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+e+`

        setOutput(result);
      }
    `},C6=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,a=r[1],o=r[2],u=t.shape,s=u[1],c=u[2],f=[e&&s>1?a-1:a,e&&c>1?o-1:o],h=[e&&s>1?s-1:s,e&&c>1?c-1:c],p=f[0]/h[0],m=f[1]/h[1],g=1/p,x=1/m,E=2*Math.ceil(g)+2,S=2*Math.ceil(x)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+x+`);

        const int winHeight = int(`+E+`);
        const int winWidth = int(`+S+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},R6=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var a=t[0],o=t[1],u=t[2],s=t[3];this.outputShape=[a,n,e,s];var c=[r&&n>1?o-1:o,r&&e>1?u-1:u],f=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+u+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},A6=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=t[0],o=t[1],u=t[2],s=t[3];this.outputShape=[a,n,e,s];var c=[r&&n>1?o-1:o,r&&e>1?u-1:u],f=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`,
          `+c[1]/f[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+u+`.0,
                                     `+u+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},T6=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,a=r[1],o=r[2],u=t.shape,s=u[1],c=u[2],f=[e&&s>1?a-1:a,e&&c>1?o-1:o],h=[e&&s>1?s-1:s,e&&c>1?c-1:c],p=f[0]/h[0],m=f[1]/h[1],g=1/p,x=1/m,E=2*Math.ceil(g)+2,S=2*Math.ceil(x)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+x+`);

        const int winHeight = int(`+E+`);
        const int winWidth = int(`+S+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+f[0]+`) *
                (float(dyR) / float(`+h[0]+`));

            float sourceFracCol =
                float(`+f[1]+`) *
                  (float(dyC) / float(`+h[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},D6=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var a=t[0],o=t[1],u=t[2],s=t[3];this.outputShape=[a,n,e,s];var c=[r&&n>1?o-1:o,r&&e>1?u-1:u],f=[r&&n>1?n-1:n,r&&e>1?e-1:e],h=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+u+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+h+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},N6=function(t,n){this.variableNames=["x"];var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=t,e!==1){var r=t.map(function(o,u){return function(s){return n.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(u)}).join(","),a=An(e);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},k6=function(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=t;var r=wa("rc",e),a=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],u=An(e);function s(c){var f=t.map(function(h,p){return function(m,g){return n.indexOf(m)!==-1&&t[m]!==1?t[m]+" - "+g[m]+" - 1":""+g[m]}(p,c)});return"getChannel(getX("+f.join(",")+"), vec2("+f.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+u+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return s(c)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(c){return c[e-1]="("+c[e-1]+" + 1)",s(c)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(c){return c[e-2]="("+c[e-2]+" + 1)",s(c)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(c){return c[e-1]="("+c[e-1]+" + 1)",c[e-2]="("+c[e-2]+" + 1)",s(c)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},zE=function(t,n,e,r,a,o,u){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=An(a.length),c=An(o.length),f="";e===1?f="i":e===2&&(f="i, j");var h="getIndices("+f+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var m="getUpdates("+p+")",g=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+h+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},O6=function(t,n){this.variableNames=["x","segmentIds"];var e=t.windowSize,r=t.batchSize,a=t.inSize,o=t.numSegments,u=o*Math.ceil(a/e);this.outputShape=[r,u];var s=4*Math.floor(e/4),c=e%4,f=`
        sumValue += dot(values, segFilter);
    `,h="";a%e>0&&(h=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var p="";a%e>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+f+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+f+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+f+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+f+`
        }
        setOutput(sumValue);
      }
    `},M6=function(t,n,e){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)a="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],s=[],c=0;c<n.length;c++)s.push(""+o[c]),c<t&&u.push(""+o[c]);r=u.join(),a=s.join()}var f=An(e);this.userCode=`
      void main() {
        `+f+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},I6=function(){function t(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,r=An(this.rank),a="uniform int start["+this.rank+"];",o=function(u){if(u===1)return"sourceLoc";if(u<=6)return ey.slice(0,u).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+u+" is not yet supported")}(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(u,s){return"sourceLoc."+ey[s]+" = start["+s+"] + coords."+ey[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,a){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(a,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),ey=["x","y","z","w","u","v"],F6=function(){function t(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=An(this.rank),r=wa("coords",this.rank),a=wa("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",u="getChannel(getSource("+a.join()+"), "+o+")",s=`
      result.x = `+u+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+u+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+u+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+u+`;
        }
      }
    `,f=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map(function(h,p){return"start["+p+"]"}).join()+");":n.map(function(h,p){return a[p]+" = "+r[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+f+`
        vec4 result = vec4(0.);
        `+s+`
        `+c+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,a){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(a,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),B6=function(t,n,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=An(e.length),o=An(e.length),u="";if(r===1)u="coords * strides + begin";else{var s=0;u=e.map(function(c,f){return s++,e.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(s-1)+"] * strides["+f+"] + begin["+f+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+t+`);
      `+a+" strides = "+a+"("+n+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+u+`));
      }
    `},P6=function(){function t(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(n,e,r){var a,o=jE(e,r),u=HE(n,o,r);if(u in this.freeTextures||(this.freeTextures[u]=[]),u in this.usedTextures||(this.usedTextures[u]=[]),this.freeTextures[u].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[u].shift();return this.usedTextures[u].push(s),s}return this.numUsedTextures++,this.log(),o===Pa.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===Pa.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===Pa.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===Pa.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===Pa.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[u].push(a),a},t.prototype.releaseTexture=function(n,e,r,a){if(this.freeTextures!=null){var o=HE(e,jE(r,a),a);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var u=this.usedTextures[o],s=u.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(a){n.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function jE(t,n){if(t===La.UPLOAD)return Pa.PACKED_2X2_FLOAT32;if(t===La.RENDER||t==null)return function(e){return Me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Pa.PACKED_2X2_FLOAT32:Pa.UNPACKED_FLOAT32:e?Pa.PACKED_2X2_FLOAT16:Pa.UNPACKED_FLOAT16}(n);if(t===La.DOWNLOAD||t===La.PIXELS)return Pa.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function HE(t,n,e){return t[0]+"_"+t[1]+"_"+n+"_"+e}var L6=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[r]*n[r];this.outputShape=e,this.rank=e.length;var a=An(this.rank),o=function(u){var s=u.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+u[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],f=[],h=0;h<u.length;h++)f.push("imod("+c[h]+", "+u[h]+")");return f.join()}(t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},U6=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];this.outputShape=e,this.rank=e.length;var a=An(this.rank),o=function(u){var s=u.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],f=new Array(s),h=0;h<u.length;h++)f[u[h]]=c[h];return f.join()}(n);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},z6=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=An(this.rank),o=bR("rc",this.rank),u=new Array(this.rank);for(r=0;r<n.length;r++)u[n[r]]=o[r];var s="vec2("+u.slice(-2).join()+")",c="++"+o[this.rank-1]+" < "+e[this.rank-1],f="getChannel(getA("+u.join()+"), "+s+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+f+`;
      if(`+c+`) {
        result[1] = `+f+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+f+`;
        if(`+c+`) {
          result[3] = `+f+`;
        }
      }
      setOutput(result);
    }
    `},tb=1.7580993408473768,nb=1.0507009873554805,zt=function(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Eo="if (isnan(x)) return x;",j6="return x;",VE="return abs(x);",_R=Eo+`
  return (x < 0.0) ? 0.0 : x;
`,CR=Eo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,RR="return (x >= 0.0) ? x : (exp(x) - 1.0);",H6=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+tb+`;
  float scale = `+nb+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,WE="return -x;",qE="return ceil(x);",$E="return floor(x);",GE="return exp(x);",KE="return exp(x) - 1.0;",V6=Eo+`
  return sin(x);
`,W6=Eo+`
  return cos(x);
`,q6=Eo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,$6=Eo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,G6=Eo+`
  return atan(x);
`,K6=Eo+"return log(x + sqrt(x * x + 1.0));",X6=Eo+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Y6=Eo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,jh="return x;",Q6="return x;",AR=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,TR=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DR=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Nf=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Z6=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,e=wa("rc",n),r=An(n),a=function(s,c){if(s===1)return"rc";for(var f="",h=0;h<s;h++)f+=c[h],h<s-1&&(f+=",");return f}(n,e),o=e.slice(-2),u=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+u+`));
      }
    `},Hh={};function Vh(t,n){if(n===void 0&&(n=!1),t==="linear")return n?Q6:j6;if(t==="relu")return n?AR:_R;if(t==="elu")return n?DR:RR;if(t==="relu6")return n?TR:CR;if(t==="prelu")return n?SR:ER;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var J6=600,eU=function(t){function n(e){var r,a=t.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!Me().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=ni(Me().getNumber("WEBGL_VERSION"));a.binaryCache=((r=Me().getNumber("WEBGL_VERSION"))in Hh||(Hh[r]={}),Hh[r]),a.gpgpu=new f6(o),a.canvas=o.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=e,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=e.gl.canvas;return a.textureManager=new P6(a.gpgpu),a.numMBBeforeWarning=Me().global.screen==null?1024:Me().global.screen.height*Me().global.screen.width*window.devicePixelRatio*J6/1024/1024,a.texData=new cR(a,ce),a}return wo(n,t),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(e,r,a){if(Me().getBool("DEBUG")&&this.checkNumericalProblems(e),a==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:a,values:e,usage:La.UPLOAD}),o},n.prototype.move=function(e,r,a,o){if(Me().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:a,dtype:o,values:r,usage:La.UPLOAD})},n.prototype.readSync=function(e){var r=this.texData.get(e),a=r.values,o=r.dtype,u=r.complexTensors,s=r.slice,c=r.shape,f=r.isPacked;if(s!=null){var h=void 0;h=f?new Nf(c,jh):new zt(c,jh);var p=this.runWebGLProgram(h,[{dataId:e,shape:c,dtype:o}],o),m=this.readSync(p.dataId);return this.disposeData(p.dataId),m}if(a!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return a;var g,x,E=this.activeTimers!=null;return E&&(g=zo()),o==="complex64"?x=Qy(u.real.dataSync(),u.imag.dataSync()):x=this.getValuesFromTexture(e),E&&(this.downloadWaitMs+=zo()-g),this.convertAndCacheOnCPU(e,x)},n.prototype.read=function(e){return st(this,void 0,void 0,function(){var r,a,o,u,s,c,f,h,p,m,g,x,E,S,_,A,T,N,D,k,P,H;return lt(this,function(U){switch(U.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise(function(j){return r.push(j)})];if(a=this.texData.get(e),o=a.values,u=a.shape,s=a.slice,c=a.dtype,f=a.complexTensors,h=a.isPacked,s!=null)return p=void 0,p=h?new Nf(u,jh):new zt(u,jh),m=this.runWebGLProgram(p,[{dataId:e,shape:u,dtype:c}],c),g=this.read(m.dataId),this.disposeData(m.dataId),[2,g];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!Me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Me().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return x=null,c!=="complex64"&&Me().get("WEBGL_BUFFER_SUPPORTED")&&(E=this.decode(e),S=this.texData.get(E.dataId),x=(H=this.gpgpu).createBufferFromTexture.apply(H,[S.texture].concat(Lf(u)))),this.pendingRead.set(e,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:U.sent(),U.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([f.real.data(),f.imag.data()])];case 3:return A=U.sent(),T=A[0],N=A[1],_=Qy(T,N),[3,5];case 4:x==null?_=this.getValuesFromTexture(e):(D=ct(u),_=this.gpgpu.downloadFloat32MatrixFromBuffer(x,D)),U.label=5;case 5:return E!=null&&this.disposeData(E.dataId),k=this.convertAndCacheOnCPU(e,_),P=this.pendingRead.get(e),this.pendingRead.delete(e),P.forEach(function(j){return j(k)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,k]}})})},n.prototype.checkNumericalProblems=function(e){if(e!=null)for(var r=0;r<e.length;r++){var a=e[r];if(!HB(a))throw Me().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var r,a=this.texData.get(e),o=a.shape,u=a.dtype,s=a.isPacked,c=ct(o);if(Me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var f=this.decode(e),h=this.texData.get(f.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[h.texture].concat(Lf(o))).subarray(0,c);return this.disposeData(f.dataId),p}var m=Me().getBool("WEBGL_PACK")&&s===!0,g=m?Gg(o):o,x=m?new jL(g):new zL(g),E=this.runWebGLProgram(x,[{shape:g,dtype:u,dataId:e}],"float32"),S=this.texData.get(E.dataId),_=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(S.texture,S.texShape[0],S.texShape[1]).subarray(0,c);return this.disposeData(E.dataId),_},n.prototype.time=function(e){return st(this,void 0,void 0,function(){var r,a,o,u,s,c,f;return lt(this,function(h){switch(h.label){case 0:return r=this.activeTimers,a=[],o=!1,this.programTimersStack==null?(this.programTimersStack=a,o=!0):this.activeTimers.push(a),this.activeTimers=a,e(),u=ic(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),s=ic(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(u)]:[3,2];case 1:return f=h.sent(),c.kernelMs=EB(f),c.getExtraProfileInfo=function(){return f.map(function(p,m){return{name:s[m],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},h.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:zo(),endMs:null}},n.prototype.endTimer=function(e){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=zo(),e)},n.prototype.getQueryTime=function(e){return st(this,void 0,void 0,function(){var r;return lt(this,function(a){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]})})},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var r=this.texData.get(e),a=r.texture,o=r.dtype,u=r.texShape,s=r.usage,c=r.isPacked,f=r.slice,h=f&&f.origDataId||e,p=this.dataRefCount.get(h);p>1?this.dataRefCount.set(h,p-1):(this.dataRefCount.delete(h),a!=null&&(this.numBytesInGPU-=this.computeBytes(u,o),this.textureManager.releaseTexture(a,u,s,c)));var m=this.texData.get(e);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return Me().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ce.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&e.every(function(o){return a.texData.get(o.dataId).texture==null&&o.size<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,r){var a=this.makeOutput(e.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:ce.keep(e.clone()),imag:ce.keep(r.clone())},a},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,a){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,a);if(ct(a)===0)return Lr([],a,e.dtype);var o=this.texData.get(e.dataId).isPacked,u=sR(e.shape,r,a);if(o||!u){var s=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new F6(a):new I6(a),c=s.getCustomSetupFunc(r);return this.compileAndRun(s,[e],null,c)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,a)},n.prototype.shallowSlice=function(e,r,a){var o=this.texData.get(e.dataId),u=this.makeOutput(a,e.dtype),s=this.texData.get(u.dataId);Object.assign(s,o),s.shape=a,s.dtype=e.dtype;var c=lR(r,e.strides);o.slice&&(c+=o.slice.flatOffset),s.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||e.dataId};var f=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,f+1),u},n.prototype.stridedSlice=function(e,r,a,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,a,o);var u=X0(r,a,o);if(u.some(function(c){return c===0}))return Lr([],u);var s=new B6(r,o,u);return this.compileAndRun(s,[e])},n.prototype.reverse=function(e,r){var a=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new k6(e.shape,r):new N6(e.shape,r);return this.compileAndRun(a,[e])},n.prototype.concat=function(e,r){if(e[0].dtype==="complex64"){var a=e.map(function(g){return ro(g)}),o=e.map(function(g){return Ho(g)});return Fr(this.concat(a,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(e.length===1)return e[0];if(e.length>Me().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var u=Math.floor(e.length/2),s=this.concat(e.slice(0,u),r),c=this.concat(e.slice(u),r);return this.concat([s,c],r)}if(Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var f=new RL(e.map(function(g){return g.shape}),r);return this.compileAndRun(f,e)}var h=sc(e.map(function(g){return g.shape}),r),p=e.map(function(g){return g.as2D(-1,ct(g.shape.slice(r)))}),m=new CL(p.map(function(g){return g.shape}));return this.compileAndRun(m,p).reshape(h)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,WE,e.dtype);var r=new zt(e.shape,WE);return this.compileAndRun(r,[e])},n.prototype.batchMatMul=function(e,r,a,o){var u=a?e.shape[2]:e.shape[1],s=o?r.shape[1]:r.shape[2],c=a?e.shape[1]:e.shape[2],f=e.shape[0];if((u===1||s===1)&&c>1e3){a&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var h=s===1?e:e.as3D(f,c,1),p=s===1?2:1,m=s===1?r.as3D(f,1,c):r;return this.multiply(h,m).sum(p,!0)}var g=Pr(e.dtype,r.dtype),x=new Qg(e.shape,[f,u,s],a,o);return this.compileAndRun(x,[e,r],g)},n.prototype.fusedBatchMatMul=function(e){var r=e.a,a=e.b,o=e.transposeA,u=e.transposeB,s=e.bias,c=e.activation,f=e.preluActivationWeights,h=o?r.shape[2]:r.shape[1],p=u?a.shape[1]:a.shape[2],m=r.shape[0],g=Pr(r.dtype,a.dtype),x=s!=null,E=f!=null,S=c?Vh(c,!0):null,_=new Qg(r.shape,[m,h,p],o,u,x,S,E),A=[r,a];return s&&A.push(s),f&&A.push(f),this.compileAndRun(_,A,g)},n.prototype.multiply=function(e,r){if(e.dtype==="complex64"){var a=this.texData.get(e.dataId),o=this.texData.get(r.dataId),u=new OE(xL,e.shape,r.shape),s=new OE(wL,e.shape,r.shape),c=[this.makeComplexComponentTensorInfo(e,a.complexTensors.real),this.makeComplexComponentTensorInfo(e,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],f=this.compileAndRun(u,c),h=this.compileAndRun(s,c),p=this.complex(f,h);return f.dispose(),h.dispose(),p}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,ME,e.dtype);var m=new Hn(ME,e.shape,r.shape);return this.compileAndRun(m,[e,r],e.dtype)},n.prototype.batchNormalization=function(e,r,a,o,u,s){var c=[e,r,a],f=null;s!=null&&(f=s.shape,c.push(s));var h=null;if(u!=null&&(h=u.shape,c.push(u)),Me().getBool("WEBGL_PACK_NORMALIZATION")){var p=new bL(e.shape,r.shape,a.shape,f,h,o);return this.compileAndRun(p,c)}var m=new yL(e.shape,r.shape,a.shape,f,h,o);return this.compileAndRun(m,c)},n.prototype.localResponseNormalization4D=function(e,r,a,o,u){var s=Me().getBool("WEBGL_PACK_NORMALIZATION")?new v6(e.shape,r,a,o,u):new h6(e.shape,r,a,o,u);return this.compileAndRun(s,[e])},n.prototype.LRNGrad=function(e,r,a,o,u,s,c){var f=new p6(r.shape,o,u,s,c);return this.compileAndRun(f,[r,a,e])},n.prototype.tile=function(e,r){if(e.dtype==="string"){var a=this.readSync(e.dataId).map(function(u){return Sp(u)});return gR(Mt(e.shape,e.dtype,a),r)}var o=new L6(e.shape,r);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,r,a){var o=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new E6(e.shape,r,a):new w6(e.shape,r,a);return this.compileAndRun(o,[e])},n.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var a=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new z6(e.shape,r):new U6(e.shape,r);return this.compileAndRun(a,[e])},n.prototype.gather=function(e,r,a){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,a);var o=new GL(e.shape,r.size,a);return this.compileAndRun(o,[e,r])},n.prototype.batchToSpaceND=function(e,r,a){$(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(p,m){return p*m}),u=Dp(e.shape,r,o),s=Np(u.length,r.length),c=kp(e.shape,r,o),f=aR(a,r.length),h=oR(c,a,r.length);return e.reshape(u).transpose(s).reshape(c).slice(f,h)},n.prototype.spaceToBatchND=function(e,r,a){$(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(m,g){return m*g}),u=[[0,0]];u.push.apply(u,a);for(var s=1+r.length;s<e.shape.length;++s)u.push([0,0]);var c=e.pad(u),f=Dp(c.shape,r,o,!1),h=Np(f.length,r.length,!1),p=kp(c.shape,r,o,!1);return c.reshape(f).transpose(h).reshape(p)},n.prototype.reduce=function(e,r,a){var o=e.shape[0],u=e.shape[1],s=Kg(u),c=new S6({windowSize:s,inSize:u,batchSize:o},r),f=this.compileAndRun(c,[e],a);return f.shape[1]===1?f:this.reduce(f,r,a)},n.prototype.argReduce=function(e,r,a){a===void 0&&(a=null);var o=e.shape[0],u=e.shape[1];a!=null&&(o=a.shape[0],u=a.shape[1]);var s=Kg(u),c=new lL({windowSize:s,inSize:u,batchSize:o},r,a==null),f=[e];a!=null&&f.push(a);var h=this.compileAndRun(c,f,"int32");return h.shape[1]===1?h:this.argReduce(e,r,h)},n.prototype.argReducePacked=function(e,r,a){a===void 0&&(a=null);var o=a!=null?a.shape:e.shape,u=Kg(o[o.length-1]),s=new vL(o,u,r,a==null),c=a==null?[e]:[e,a],f=this.compileAndRun(s,c,"int32");return f.rank===e.rank?this.argReducePacked(e,r,f):f},n.prototype.sum=function(e,r){Ba("sum",r,e.rank);var a=Yr(e.shape,r),o=a[0],u=ct(a[1]),s=e.as2D(-1,u),c=zg(e.dtype);return this.reduce(s,"sum",c).reshape(o)},n.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var a=Yr(e.shape,r),o=a[0],u=ct(a[1]),s=e.as2D(-1,u),c=zg(e.dtype);return this.reduce(s,"prod",c).reshape(o)},n.prototype.unsortedSegmentSum=function(e,r,a){var o=0,u=ri([o],e.rank),s=e;u!=null&&(s=e.transpose(u),o=ai(1,e.rank)[0]);var c=function(g,x,E){for(var S=[],_=g.length,A=0;A<_;A++)A!==x?S.push(g[A]):S.push(E);return S}(s.shape,o,a),f=ct([s.shape[o]]),h=s.as2D(-1,f),p=zg(e.dtype),m=this.segOpCompute(h,"unsortedSegmentSum",r,p,a).reshape(c);return u!=null&&(m=m.transpose(q0(u))),m},n.prototype.segOpCompute=function(e,r,a,o,u){var s=e.shape[0],c=e.shape[1],f=function(m,g){var x,E=!1;for(m<=uR?(x=m,E=!0):x=Hy(m,Math.floor(Math.sqrt(m)));!E;)x>g||x===m?E=!0:x=Hy(m,x+1);return x}(c,u),h=new O6({windowSize:f,inSize:c,batchSize:s,numSegments:u}),p=this.compileAndRun(h,[e,a],o);return p.shape[1]===u?p:(a=Tp(0,u).tile([c/f]),this.segOpCompute(p,r,a,o,u))},n.prototype.argMinMaxReduce=function(e,r,a){var o=[r];if(Ba("arg"+a.charAt(0).toUpperCase()+a.slice(1),o,e.rank),!Me().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var u=Yr(e.shape,o),s=u[0],c=ct(u[1]),f=e.as2D(-1,c);return this.argReduce(f,a).reshape(s)}return this.argReducePacked(e,a)},n.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},n.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},n.prototype.cumsum=function(e,r,a,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var u=new FL(e.shape,a,o);return this.compileAndRun(u,[e])},n.prototype.equal=function(e,r){if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(equal(a, b));
`,"bool");var a=new Hn("return float(a == b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.notEqual=function(e,r){if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new Hn("return float(a != b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new Hn("return float(a < b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.lessEqual=function(e,r){if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new Hn("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new Hn("return float(a > b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.greaterEqual=function(e,r){if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new Hn("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.logicalNot=function(e){var r=new zt(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},n.prototype.logicalAnd=function(e,r){if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new Hn("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.logicalOr=function(e,r){if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new Hn("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.select=function(e,r,a){var o=new M6(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,a],Pr(r.dtype,a.dtype))},n.prototype.where=function(e){Rp("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return J0(e.shape,r)},n.prototype.topk=function(e,r,a){return yR(e.dataSync(),e.shape,e.dtype,r)},n.prototype.min=function(e,r){Ba("min",r,e.rank);var a=Yr(e.shape,r),o=a[0],u=ct(a[1]),s=e.as2D(-1,u);return this.reduce(s,"min",s.dtype).reshape(o)},n.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var a=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Hn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.mod=function(e,r){var a=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Hn(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);Ba("max",r,e.rank);var a=Yr(e.shape,r),o=a[0],u=ct(a[1]),s=e.as2D(-1,u);return this.reduce(s,"max",s.dtype).reshape(o)},n.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var a=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Hn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.all=function(e,r){Ba("all",r,e.rank);var a=Yr(e.shape,r),o=a[0],u=ct(a[1]),s=e.as2D(-1,u);return this.reduce(s,"all",s.dtype).reshape(o)},n.prototype.any=function(e,r){Ba("any",r,e.rank);var a=Yr(e.shape,r),o=a[0],u=ct(a[1]),s=e.as2D(-1,u);return this.reduce(s,"any",s.dtype).reshape(o)},n.prototype.realDivide=function(e,r){if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new Hn(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,r.shape);return this.compileAndRun(a,[e,r],"float32")},n.prototype.floorDiv=function(e,r){if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new Hn(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,r.shape);return this.compileAndRun(a,[e,r],"int32")},n.prototype.add=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,Xg);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var a=Pr(e.dtype,r.dtype);if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,Xg,a);var o=new Hn(Xg,e.shape,r.shape);return this.compileAndRun(o,[e,r],a)},n.prototype.packedUnaryOp=function(e,r,a){var o=new Nf(e.shape,r);return this.compileAndRun(o,[e],a)},n.prototype.packedBinaryOp=function(e,r,a,o,u){u===void 0&&(u=!1);var s=new Oi(a,e.shape,r.shape,u);return this.compileAndRun(s,[e,r],o)},n.prototype.complexSeparableBinaryOp=function(e,r,a){var o=this,u=this.texData.get(e.dataId),s=this.texData.get(r.dataId),c=[[u.complexTensors.real,s.complexTensors.real],[u.complexTensors.imag,s.complexTensors.imag]].map(function(m){var g=m[0],x=m[1],E=o.makeComplexComponentTensorInfo(e,g),S=o.makeComplexComponentTensorInfo(r,x),_=new Hn(a,e.shape,r.shape);return o.compileAndRun(_,[E,S],Pr(g.dtype,x.dtype))}),f=c[0],h=c[1],p=this.complex(f,h);return f.dispose(),h.dispose(),p},n.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},n.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>Me().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),a=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([a,o])}var u=e.map(function(f){return f.dtype}).reduce(function(f,h){return Pr(f,h)}),s=e.map(function(f){return f.shape}),c=Me().getBool("WEBGL_PACK")?new sL(e[0].shape,s):new uL(e[0].shape,s);return this.compileAndRun(c,e,u)},n.prototype.subtract=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,Yg);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var a=Pr(e.dtype,r.dtype);if(Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,Yg,e.dtype);var o=new Hn(Yg,e.shape,r.shape);return this.compileAndRun(o,[e,r],a)},n.prototype.pow=function(e,r){var a=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Hn(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,r.shape),o=Pr(e.dtype,r.dtype);return this.compileAndRun(a,[e,r],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,qE,e.dtype);var r=new zt(e.shape,qE);return this.compileAndRun(r,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,$E,e.dtype);var r=new zt(e.shape,$E);return this.compileAndRun(r,[e])},n.prototype.sign=function(e){var r=new zt(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[e])},n.prototype.isNaN=function(e){var r=new zt(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isInf=function(e){var r=new zt(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isFinite=function(e){var r=new zt(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.round=function(e){var r=new zt(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,GE,e.dtype);var r=new zt(e.shape,GE);return this.compileAndRun(r,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,KE,e.dtype);var r=new zt(e.shape,KE);return this.compileAndRun(r,[e])},n.prototype.softmax=function(e,r){var a=mr([r],e.shape),o=this.max(e,a),u=Ca(o.shape,a),s=this.subtract(e,o.reshape(u)),c=this.exp(s),f=this.sum(c,a).reshape(u);return this.realDivide(c,f)},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var r=new zt(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[e])},n.prototype.log1p=function(e){var r=new zt(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},n.prototype.sqrt=function(e){var r=new zt(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new zt(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},n.prototype.reciprocal=function(e){var r=new zt(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},n.prototype.relu=function(e){var r;return r=Me().getBool("WEBGL_PACK")?new Nf(e.shape,AR):new zt(e.shape,_R),this.compileAndRun(r,[e])},n.prototype.relu6=function(e){var r;return r=Me().getBool("WEBGL_PACK")?new Nf(e.shape,TR):new zt(e.shape,CR),this.compileAndRun(r,[e])},n.prototype.prelu=function(e,r){var a=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(SR,e.shape,r.shape):new Hn(ER,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.elu=function(e){if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,DR,e.dtype);var r=new zt(e.shape,RR);return this.compileAndRun(r,[e])},n.prototype.eluDer=function(e,r){var a=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,r.shape):new Hn("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.selu=function(e){var r=new zt(e.shape,H6);return this.compileAndRun(r,[e])},n.prototype.int=function(e){var r=new zt(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},n.prototype.clip=function(e,r,a){var o,u=(o=Me().getBool("WEBGL_PACK_CLIP")?new SL(e.shape):new EL(e.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(o,[e],null,u)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,VE,e.dtype);var r=new zt(e.shape,VE);return this.compileAndRun(r,[e])},n.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),a=new _L(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(a,o)},n.prototype.sigmoid=function(e){var r=new zt(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},n.prototype.softplus=function(e){var r=new zt(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[e])},n.prototype.sin=function(e){var r=new zt(e.shape,V6);return this.compileAndRun(r,[e])},n.prototype.cos=function(e){var r=new zt(e.shape,W6);return this.compileAndRun(r,[e])},n.prototype.tan=function(e){var r=new zt(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},n.prototype.asin=function(e){var r=new zt(e.shape,q6);return this.compileAndRun(r,[e])},n.prototype.acos=function(e){var r=new zt(e.shape,$6);return this.compileAndRun(r,[e])},n.prototype.atan=function(e){var r=new zt(e.shape,G6);return this.compileAndRun(r,[e])},n.prototype.atan2=function(e,r){var a=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Hn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.sinh=function(e){var r=new zt(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.cosh=function(e){var r=new zt(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.tanh=function(e){var r=new zt(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[e])},n.prototype.asinh=function(e){var r=new zt(e.shape,K6);return this.compileAndRun(r,[e])},n.prototype.acosh=function(e){var r=new zt(e.shape,X6);return this.compileAndRun(r,[e])},n.prototype.atanh=function(e){var r=new zt(e.shape,Y6);return this.compileAndRun(r,[e])},n.prototype.erf=function(e){var r=new zt(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[e])},n.prototype.step=function(e,r){var a=new zt(e.shape,function(o){return o===void 0&&(o=0),Eo+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(a,[e])},n.prototype.conv2dByMatMul=function(e,r,a,o,u,s){var c=e.shape,f=this.texData.get(e.dataId),h=a.inChannels,p=c[0]*c[1]*c[2],m=a.outChannels,g=a.dataFormat==="channelsLast",x=(p===1||m===1)&&h>1e3,E=c[2]%2!=0&&!!f.isPacked;if(x||!Me().getBool("WEBGL_LAZILY_UNPACK")||!Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!E){var S=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],_=this.reshape(e,[1,S,a.inChannels]),A=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:_,b:A,transposeA:!1,transposeB:!1,bias:o,activation:u,preluActivationWeights:s}),a.outShape)}var T=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),N={dataId:e.dataId,shape:[1,T,a.inChannels],dtype:e.dtype},D=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,$(Uh(f.shape,N.shape),function(){return"packed reshape "+f.shape+" to "+N.shape+" isn't free"});var k=this.reshape(r,[1,a.inChannels,a.outChannels]),P=this.fusedBatchMatMul({a:N,b:k,transposeA:!1,transposeB:!1,bias:o,activation:u,preluActivationWeights:s}),H=this.texData.get(P.dataId);return $(H.isPacked,function(){return"batchMatMul result is expected to be packed"}),f.shape=D,H.shape=a.outShape,ce.makeTensorFromDataId(P.dataId,a.outShape,P.dtype)},n.prototype.conv2dWithIm2Row=function(e,r,a,o,u,s){var c=a.filterWidth,f=a.filterHeight,h=a.inChannels,p=a.outWidth,m=a.outHeight,g=a.dataFormat==="channelsLast",x=c*f*h,E=m*p,S=[x,E],_=e.squeeze([0]),A=r.reshape([1,x,-1]),T=new d6(S,_.shape,a),N=this.compileAndRun(T,[_]).reshape([1,S[0],S[1]]),D=o!=null,k=s!=null,P=u?Vh(u,!0):null,H=new Qg(N.shape,[1,E,a.outChannels],!0,!1,D,P,k),U=[N,A];o&&U.push(o),k&&U.push(s);var j=this.compileAndRun(H,U);return g?j.reshape([1,m,p,a.outChannels]):j.reshape([1,a.outChannels,m,p])},n.prototype.fusedConv2d=function(e){var r=e.input,a=e.filter,o=e.convInfo,u=e.bias,s=e.activation,c=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,o,u,s,c);if(Me().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,o,u,s,c);var f=u!=null,h=c!=null,p=s?Vh(s,!1):null,m=new IE(o,f,p,h),g=[r,a];return u&&g.push(u),c&&g.push(c),this.compileAndRun(m,g)},n.prototype.conv2d=function(e,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(e,r,a);if(Me().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,r,a);var o=new IE(a);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerInput=function(e,r,a){var o=new TL(a);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerFilter=function(e,r,a){var o=new AL(a);return this.compileAndRun(o,[e,r])},n.prototype.fusedDepthwiseConv2D=function(e){var r,a=e.input,o=e.filter,u=e.convInfo,s=e.bias,c=e.activation,f=e.preluActivationWeights,h=Me().getBool("WEBGL_PACK_DEPTHWISECONV")&&u.strideWidth<=2&&u.outChannels/u.inChannels==1,p=c?Vh(c,h):null,m=[a,o],g=s!=null,x=f!=null;return g&&m.push(s),x&&m.push(f),h?(r=new BE(u,g,p,x),this.compileAndRun(r,m)):(r=new FE(u,g,p,x),this.compileAndRun(r,m))},n.prototype.depthwiseConv2D=function(e,r,a){var o;return Me().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(o=new BE(a),this.compileAndRun(o,[e,r])):(o=new FE(a),this.compileAndRun(o,[e,r]))},n.prototype.depthwiseConv2DDerInput=function(e,r,a){var o=new OL(a);return this.compileAndRun(o,[e,r])},n.prototype.depthwiseConv2DDerFilter=function(e,r,a){var o=new kL(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3d=function(e,r,a){var o=new ML(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerInput=function(e,r,a){var o=new NL(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerFilter=function(e,r,a){var o=new DL(a);return this.compileAndRun(o,[e,r])},n.prototype.maxPool=function(e,r){var a=new Zg(r,"max",!1);return this.compileAndRun(a,[e])},n.prototype.avgPool=function(e,r){var a=new Zg(r,"avg",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.maxPoolBackprop=function(e,r,a,o){var u=new Zg(o,"max",!0),s=this.compileAndRun(u,[r]),c=new m6(o),f=this.compileAndRun(c,[e,s],r.dtype);return s.dispose(),f},n.prototype.avgPoolBackprop=function(e,r,a){var o=new mL(a);return this.compileAndRun(o,[e],r.dtype)},n.prototype.cast=function(e,r){return hR(e,r,this)},n.prototype.unstack=function(e,r){for(var a=e.shape[r],o=new Array(e.rank-1),u=0,s=0;s<e.rank;s++)s!==r&&(o[u++]=e.shape[s]);var c=new Array(e.rank).fill(0),f=e.shape.slice();f[r]=1;var h=new Array(a);for(s=0;s<h.length;s++)c[r]=s,h[s]=this.slice(e,c,f).reshape(o);return h},n.prototype.avgPool3d=function(e,r){var a=new Jg(r,"avg",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,r,a){var o=new gL(a);return this.compileAndRun(o,[e],r.dtype)},n.prototype.maxPool3d=function(e,r){var a=new Jg(r,"max",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,r,a,o){var u=new Jg(o,"max",!0),s=this.compileAndRun(u,[r]),c=new g6(o),f=this.compileAndRun(c,[e,s],r.dtype);return s.dispose(),f},n.prototype.reshape=function(e,r){var a=this.texData.get(e.dataId);if(a.isPacked&&!Uh(e.shape,r)&&(a.texture===null||!Uh(a.shape,r))){var o=this.packedReshape(e,r);return ce.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return Yy(e,r)},n.prototype.resizeBilinear=function(e,r,a,o){var u=Me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new A6(e.shape,r,a,o):new R6(e.shape,r,a,o);return this.compileAndRun(u,[e],"float32")},n.prototype.resizeBilinearBackprop=function(e,r,a){var o=new C6(e,r,a);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,r,a,o){var u=new D6(e.shape,r,a,o);return this.compileAndRun(u,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,r,a){var o=new T6(e,r,a);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,r,a,o){var u=r?e:ji(e),s=u.shape[0],c=u.shape[1],f=new y6(s,c,a),h=f.getCustomSetupFunc(o);return this.compileAndRun(f,[u],"int32",h)},n.prototype.oneHot=function(e,r,a,o){var u=new b6(e.size,r,a,o);return this.compileAndRun(u,[e])},n.prototype.diag=function(e){var r=new UL(e.size);return this.compileAndRun(r,[e])},n.prototype.nonMaxSuppression=function(e,r,a,o,u){return Rp("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Q0(e.dataSync(),r.dataSync(),a,o,u)},n.prototype.cropAndResize=function(e,r,a,o,u,s){var c=new IL(e.shape,r.shape,o,u,s);return this.compileAndRun(c,[e,r,a],"float32")},n.prototype.depthToSpace=function(e,r,a){$(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=e.shape[0],u=a==="NHWC"?e.shape[1]:e.shape[2],s=a==="NHWC"?e.shape[2]:e.shape[3],c=a==="NHWC"?e.shape[3]:e.shape[1],f=u*r,h=s*r,p=c/(r*r),m=new LL(a==="NHWC"?[o,f,h,p]:[o,p,f,h],r,a);return this.compileAndRun(m,[e])},n.prototype.split=function(e,r,a){return mR(e,r,a)},n.prototype.scatterND=function(e,r,a){var o=Op(0,e,a),u=o.sliceRank,s=o.numUpdates,c=o.sliceSize,f=o.strides,h=o.outputSize,p=[h/c,c],m=e.reshape([s,u]),g=r.reshape([s,c]);if(h===0)return Yy(Lr([]),a);var x=Je(0),E=new zE(s,u,m.rank,g.rank,f,p);return this.compileAndRun(E,[g,m,x]).reshape(a)},n.prototype.sparseToDense=function(e,r,a,o){var u=Op(0,e,a),s=u.sliceRank,c=u.numUpdates,f=u.strides,h=u.outputSize,p=new zE(c,s,e.rank,r.rank,f,[h,1]);return this.compileAndRun(p,[r,e,o]).reshape(a)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,r){var a=this.texData.get(e.dataId),o=new LE(WL,e.shape,r),u=new LE(qL,e.shape,r),s=[this.makeComplexComponentTensorInfo(e,a.complexTensors.real),this.makeComplexComponentTensorInfo(e,a.complexTensors.imag)],c=this.compileAndRun(o,s),f=this.compileAndRun(u,s),h=this.complex(c,f).as2D(e.shape[0],e.shape[1]);return c.dispose(),f.dispose(),h},n.prototype.gatherND=function(e,r){var a=r.shape,o=a[a.length-1],u=iR(e,r),s=u[0],c=u[1],f=u[2],h=u[3],p=r.reshape([c,o]),m=e.reshape([e.size/f,f]),g=new KL(o,h,[c,f]);return this.compileAndRun(g,[m,p]).reshape(s)},n.prototype.fill=function(e,r,a){if((a=a||cd(r))==="string"){var o=Ep(a,ct(e));return o.fill(r),ce.makeTensor(o,e,a,this)}var u=new $L(e,r),s=u.getCustomSetupFunc(r);return this.compileAndRun(u,[],a,s)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},n.prototype.linspace=function(e,r,a){return pR(e,r,a)},n.prototype.makeTensorInfo=function(e,r){var a=this.write(null,e,r);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:r}},n.prototype.makeOutput=function(e,r){var a=this.makeTensorInfo(e,r).dataId;return ce.makeTensorFromDataId(a,e,r,this)},n.prototype.unpackTensor=function(e){var r=new Z6(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},n.prototype.packTensor=function(e){var r=new x6(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,r){var a=[_p(e.shape)].concat(Cp(e.shape)),o={dtype:e.dtype,shape:a,dataId:e.dataId},u=[_p(r)].concat(Cp(r)),s=new _6(u,a),c=this.runWebGLProgram(s,[o],e.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},n.prototype.decode=function(e){var r,a=this.texData.get(e),o=a.isPacked,u=a.shape,s=a.dtype,c=Gg(u);return r=o?new PL(c):new BL(c),{dtype:s,shape:u,dataId:this.runWebGLProgram(r,[{shape:c,dtype:s,dataId:e}],s,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,r,a,o,u){var s=this;u===void 0&&(u=!1);var c=this.makeTensorInfo(e.outputShape,a),f=this.texData.get(c.dataId);if(e.packedOutput&&(f.isPacked=!0),e.outPackingScheme===Xf.DENSE){var h=Lf(e.outputShape);f.texShape=h.map(function(T){return 2*T})}if(e.outTexUsage!=null&&(f.usage=e.outTexUsage),ct(c.shape)===0)return f.values=Gf(c.dtype,0),c;var p=[],m=r.map(function(T){if(T.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var N=s.texData.get(T.dataId);if(N.texture==null){if(!e.packedInputs&&ct(T.shape)<=Me().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:T.shape,texData:null,isUniform:!0,uniformValues:N.values};e.packedInputs&&(N.isPacked=!0,N.shape=T.shape)}else if(!!N.isPacked!=!!e.packedInputs)T=N.isPacked?s.unpackTensor(T):s.packTensor(T),p.push(T),N=s.texData.get(T.dataId);else if(N.isPacked&&!Uh(N.shape,T.shape)){var D=T,k=T.shape;T.shape=N.shape,T=s.packedReshape(T,k),p.push(T),N=s.texData.get(T.dataId),D.shape=k}return s.uploadToGPU(T.dataId),{shape:T.shape,texData:N,isUniform:!1}});this.uploadToGPU(c.dataId);var g,x={shape:c.shape,texData:f,isUniform:!1},E=function(T,N,D){var k="";N.concat(D).forEach(function(U){var j=U.texData!=null&&U.texData.slice!=null&&U.texData.slice.flatOffset>0,G=U.isUniform?"uniform":U.texData.texShape;k+=U.shape+"_"+G+"_"+j});var P=T.userCode,H=T.constructor.name;return H+="_"+k+"_"+P}(e,m,x),S=this.getAndSaveBinary(E,function(){return function(T,N,D,k){var P=N.userCode,H=D.map(function(ee,J){var L={logicalShape:ee.shape,texShape:ee.isUniform?null:ee.texData.texShape,isUniform:ee.isUniform,isPacked:!ee.isUniform&&ee.texData.isPacked,flatOffset:null};return ee.texData!=null&&ee.texData.slice!=null&&ee.texData.slice.flatOffset>0&&(L.flatOffset=ee.texData.slice.flatOffset),{name:N.variableNames[J],shapeInfo:L}}),U=H.map(function(ee){return ee.shapeInfo}),j={logicalShape:k.shape,texShape:k.texData.texShape,isUniform:!1,isPacked:k.texData.isPacked,flatOffset:null},G=cL(H,j,P,N.packedInputs),K=T.createProgram(G),be=null,pe=T.getUniformLocation(K,"NAN",!1);Me().getNumber("WEBGL_VERSION")===1&&(be=T.getUniformLocation(K,"INFINITY",!1));for(var he={},q=0;q<N.variableNames.length;q++){var ne=N.variableNames[q];he[ne]=T.getUniformLocation(K,ne,!1),he["offset"+ne]=T.getUniformLocation(K,"offset"+ne,!1)}return{program:N,source:G,webGLProgram:K,uniformLocations:he,inShapeInfos:U,outShapeInfo:j,infLoc:be,nanLoc:pe}}(s.gpgpu,e,m,x)}),_=this.activeTimers!=null;if(_&&(g=this.startTimer()),function(T,N,D,k,P){UE(N.inShapeInfos,D),UE([N.outShapeInfo],[k]);var H=k.texData.texture,U=k.texData.texShape;k.texData.isPacked?T.setOutputPackedMatrixTexture(H,U[0],U[1]):T.setOutputMatrixTexture(H,U[0],U[1]),T.setProgram(N.webGLProgram),Me().getNumber("WEBGL_VERSION")===1&&N.infLoc!==null&&T.gl.uniform1f(N.infLoc,1/0),N.nanLoc!==null&&T.gl.uniform1f(N.nanLoc,NaN),D.forEach(function(j,G){var K=N.program.variableNames[G],be=N.uniformLocations[K],pe=N.uniformLocations["offset"+K];if(be!=null)if(j.isUniform)if(ct(j.shape)<2)T.gl.uniform1f(be,j.uniformValues[0]);else{var he=j.uniformValues;he instanceof Float32Array||(he=new Float32Array(he)),T.gl.uniform1fv(be,he)}else j.texData.slice!=null&&pe!=null&&T.gl.uniform1i(pe,j.texData.slice.flatOffset),T.setInputMatrixTexture(j.texData.texture,be,G)}),P!=null&&P(T,N.webGLProgram),T.executeProgram()}(this.gpgpu,S,m,x,o),p.forEach(function(T){return s.disposeData(T.dataId)}),_&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)})),!Me().getBool("WEBGL_LAZILY_UNPACK")&&f.isPacked&&u===!1){var A=this.unpackTensor(c);return this.disposeData(c.dataId),A}return c},n.prototype.compileAndRun=function(e,r,a,o,u){u===void 0&&(u=!1),a=a||r[0].dtype;var s=this.runWebGLProgram(e,r,a,o,u);return ce.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},n.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var e=this;this.disposed||(Me().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){e.gpgpu.deleteProgram(e.binaryCache[r].webGLProgram),delete e.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=nt(function(){if(!Me().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=Me().getBool("DEBUG");Me().set("DEBUG",!1);var a=e.abs(Je(1e-8)).dataSync()[0];if(Me().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var r,a=this.texData.get(e),o=a.shape,u=a.dtype,s=a.values,c=a.texture,f=a.usage,h=a.isPacked;if(c==null){var p,m=this.activeTimers!=null;m&&(p=zo());var g=a.texShape;if(g==null&&(g=iP(o,h),a.texShape=g),s!=null){var x=Gg(o),E=void 0,S=g[1],_=g[0],A=s instanceof Uint8Array;h?(S=(r=dd(g[0],g[1]))[0],_=r[1],E=new VL(x,[_,S],A)):E=new HL(x,[_,S],A);var T=this.makeTensorInfo([_,S],u);this.texData.get(T.dataId).usage=A?La.PIXELS:La.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(T.dataId),S,_,s);var N=this.runWebGLProgram(E,[T],u,null,!0),D=this.texData.get(N.dataId);a.texture=D.texture,a.texShape=D.texShape,a.isPacked=D.isPacked,a.usage=D.usage,this.disposeData(T.dataId),this.texData.delete(N.dataId),a.values=null,m&&(this.uploadWaitMs+=zo()-p)}else{var k=this.acquireTexture(g,f,u,h);a.texture=k}}},n.prototype.convertAndCacheOnCPU=function(e,r){var a=this.texData.get(e),o=a.dtype;return this.releaseGPUData(e),r!=null&&(a.values=function(u,s){if(s==="float32"||s==="complex64")return u;if(s==="int32"||s==="bool"){for(var c=s==="int32"?new Int32Array(u.length):new Uint8Array(u.length),f=0;f<c.length;++f)c[f]=Math.round(u[f]);return c}throw new Error("Unknown dtype "+s)}(r,o)),a.values},n.prototype.acquireTexture=function(e,r,a,o){if(this.numBytesInGPU+=this.computeBytes(e,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var u=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+u+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},n.prototype.computeBytes=function(e,r){return e[0]*e[1]*HC(r)},n}(fR);XC()&&ce.registerBackend("webgl",function(){return new eU},2);var tU=re({square_:function(t){var n=V(t,"x","square"),e=[n];return ce.runKernelFunc(function(r,a){return a([n]),r.square(n)},{x:n},null,"Square",{},e,[])}}),Qf="SquaredDifference",NR=re({squaredDifference_:function(t,n){var e,r=V(t,"a","squaredDifference"),a=V(n,"b","squaredDifference");e=Ln(r,a),r=e[0],a=e[1],Yt(r.shape,a.shape);var o={a:r,b:a},u=[r,a];return ce.runKernelFunc(function(s,c){var f=s.squaredDifference(r,a);return c([r,a]),f},o,function(s,c){var f=c[0],h=c[1],p=Je(2);return{a:function(){return s.mul(f.sub(h).mul(p))},b:function(){return s.mul(h.sub(f).mul(p))}}},Qf,{},u,[])}}),nU=re({abs_:function(t){var n=V(t,"x","abs");return n.dtype==="complex64"?ce.runKernelFunc(function(e){return e.complexAbs(n)},{$x:n}):ce.runKernelFunc(function(e,r){var a=e.abs(n);return r([n]),a},{x:n},function(e,r){var a=r[0];return{x:function(){return e.mul(a.toFloat().step(-1))}}},"Abs")}}),rU=re({acos_:function(t){var n=V(t,"x","acos");return ce.runKernelFunc(function(e,r){var a=e.acos(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.divStrict(Je(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),aU=re({acosh_:function(t){var n=V(t,"x","acosh");return ce.runKernelFunc(function(e,r){var a=e.acosh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),oU=re({asin_:function(t){var n=V(t,"x","asin");return ce.runKernelFunc(function(e,r){var a=e.asin(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.divStrict(Je(1).sub(a.toFloat().square()).sqrt())}}})}}),iU=re({asinh_:function(t){var n=V(t,"x","asinh");return ce.runKernelFunc(function(e,r){var a=e.asinh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.divStrict(Je(1).add(a.toFloat().square()).sqrt())}}})}}),uU=re({atan_:function(t){var n=V(t,"x","atan");return ce.runKernelFunc(function(e,r){var a=e.atan(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.toFloat().square().add(1))}}})}}),sU=re({atanh_:function(t){var n=V(t,"x","atanh");return ce.runKernelFunc(function(e,r){var a=e.atanh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(Je(1).sub(a.toFloat().square()))}}})}}),lU=re({ceil_:function(t){var n=V(t,"x","ceil");return ce.runKernelFunc(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return rn(e)}}})}}),rb=re({clipByValue_:function(t,n,e){var r=V(t,"x","clipByValue");$(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."});var a=[r],o={min:n,max:e};return ce.runKernelFunc(function(u,s){var c=u.clip(r,n,e);return s([r]),c},{x:r},function(u,s){var c=s[0];return{x:function(){return u.where(c.greaterEqual(n).logicalAnd(c.lessEqual(e)),rn(u))}}},"ClipByValue",o,a)}}),cU=re({cos_:function(t){var n=V(t,"x","cos"),e=[n];return ce.runKernelFunc(function(r,a){var o=r.cos(n);return a([n]),o},{x:n},function(r,a){var o=a[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},e)}}),fU=re({cosh_:function(t){var n=V(t,"x","cosh");return ce.runKernelFunc(function(e,r){var a=e.cosh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(e)}}})}}),dU=re({erf_:function(t){var n=V(t,"x","erf");return $(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),ce.runKernelFunc(function(e,r){var a=e.erf(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Zy=re({exp_:function(t){var n=V(t,"x","exp");return ce.runKernelFunc(function(e,r){var a=e.exp(n);return r([a]),a},{x:n},function(e,r){return{x:function(){return e.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),hU=re({expm1_:function(t){var n=V(t,"x","expm1");return ce.runKernelFunc(function(e,r){var a=e.expm1(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.mul(a.exp())}}})}}),pU=re({floor_:function(t){var n=V(t,"x","floor");return ce.runKernelFunc(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return rn(e)}}})}}),vU=re({log_:function(t){var n=V(t,"x","log"),e=[n];return ce.runKernelFunc(function(r,a){var o=r.log(n);return a([n]),o},{x:n},function(r,a){var o=a[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},e)}}),mU=re({log1p_:function(t){var n=V(t,"x","log1p");return ce.runKernelFunc(function(e,r){var a=e.log1p(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.add(1))}}})}}),gU=re({logSigmoid_:function(t){var n=V(t,"x","logSigmoid");return ce.runKernelFunc(function(e,r){var a=e.softplus(n.neg()).neg();return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.mul(a.neg().sigmoid())}}})}}),Bp=re({neg_:function(t){var n=V(t,"x","neg"),e=[n];return ce.runKernelFunc(function(r){return r.neg(n)},{x:n},function(r){return{x:function(){return r.neg()}}},"Neg",{},e)}}),yU=re({reciprocal_:function(t){var n=V(t,"x","reciprocal");return ce.runKernelFunc(function(e,r){var a=e.reciprocal(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.square().neg())}}})}}),bU=re({round_:function(t){var n=V(t,"x","round");return ce.runKernelFunc(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return rn(e)}}})}}),kR=re({rsqrt_:function(t){var n=V(t,"x","rsqrt"),e=[n];return ce.runKernelFunc(function(r,a){var o=r.rsqrt(n);return a([n]),o},{x:n},function(r,a){var o=a[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},e)}}),OR=re({sigmoid_:function(t){var n=V(t,"x","sigmoid");return ce.runKernelFunc(function(e,r){var a=e.sigmoid(n);return r([a]),a},{x:n},function(e,r){var a=r[0];return{x:function(){return e.mul(a.mul(Je(1).sub(a)))}}},"Sigmoid")}}),xU=re({sign_:function(t){var n=V(t,"x","sign");return ce.runKernelFunc(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return rn(e)}}})}}),wU=re({isNaN_:function(t){var n=V(t,"x","isNaN");return ce.runKernelFunc(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return rn(e)}}})}}),EU=re({isInf_:function(t){var n=V(t,"x","isInf");return ce.runKernelFunc(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return rn(e)}}})}}),SU=re({isFinite_:function(t){var n=V(t,"x","isFinite");return ce.runKernelFunc(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return rn(e)}}})}}),_U=re({sin_:function(t){var n=V(t,"x","sin"),e=[n];return ce.runKernelFunc(function(r,a){var o=r.sin(n);return a([n]),o},{x:n},function(r,a){var o=a[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},e)}}),CU=re({sinh_:function(t){var n=V(t,"x","sinh");return ce.runKernelFunc(function(e,r){var a=e.sinh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(e)}}})}}),RU=re({softplus_:function(t){var n=V(t,"x","softplus");return ce.runKernelFunc(function(e,r){var a=e.softplus(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.mul(a.sigmoid())}}})}}),AU=re({sqrt_:function(t){var n=V(t,"x","sqrt");return ce.runKernelFunc(function(e,r){var a=e.sqrt(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.toFloat().sqrt().mul(2))}}})}}),TU=re({step_:function(t,n){n===void 0&&(n=0);var e=V(t,"x","step");return ce.runKernelFunc(function(r){return r.step(e,n)},{$x:e},function(r){return{$x:function(){return rn(r)}}})}}),DU=re({tan_:function(t){var n=V(t,"x","tan");return ce.runKernelFunc(function(e,r){var a=e.tan(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.cos().square())}}})}}),NU=re({tanh_:function(t){var n=V(t,"x","tanh");return ce.runKernelFunc(function(e,r){var a=e.tanh(n);return r([a]),a},{x:n},function(e,r){var a=r[0];return{x:function(){return Je(1).sub(a.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function MR(t,n,e,r,a,o){var u,s,c=V(t,"x","batchNorm"),f=V(n,"mean","batchNorm"),h=V(e,"variance","batchNorm");return a!=null&&(u=V(a,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),$(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),$(f.rank===2||f.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+f.rank+"."}),$(h.rank===2||h.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+h.rank+"."}),u!=null&&$(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+u.rank+"."}),s!=null&&$(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),pd(c,f,h,s,u,o)}function IR(t,n,e,r,a,o){var u,s,c=V(t,"x","batchNorm"),f=V(n,"mean","batchNorm"),h=V(e,"variance","batchNorm");return a!=null&&(u=V(a,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),$(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),$(f.rank===3||f.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+f.rank+"."}),$(h.rank===3||h.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+h.rank+"."}),u!=null&&$(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+u.rank+"."}),s!=null&&$(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),pd(c,f,h,s,u,o)}function FR(t,n,e,r,a,o){var u,s,c=V(t,"x","batchNorm"),f=V(n,"mean","batchNorm"),h=V(e,"variance","batchNorm");return a!=null&&(u=V(a,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),$(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),$(f.rank===4||f.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+f.rank+"."}),$(h.rank===4||h.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+h.rank+"."}),u!=null&&$(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+u.rank+"."}),s!=null&&$(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),pd(c,f,h,s,u,o)}function pd(t,n,e,r,a,o){o==null&&(o=.001);var u,s,c,f=V(t,"x","batchNorm"),h=V(n,"mean","batchNorm"),p=V(e,"variance","batchNorm");a!=null&&(u=V(a,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),$(h.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),$(s==null||h.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),$(u==null||h.rank===u.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=f.rank===0||f.rank===1?f.as4D(1,1,1,f.size):f.rank===2?f.as4D(1,1,f.shape[0],f.shape[1]):f.rank===3?f.as4D(1,f.shape[0],f.shape[1],f.shape[2]):f;var m=[f,h,p,u];return ce.runKernelFunc(function(g,x){var E=g.batchNormalization(c,Wh(h),Wh(p),o,Wh(u),Wh(s));return x([f,h,p,u]),E},{x:f,mean:h,variance:p,scale:u,offset:s},function(g,x){var E=x,S=E[0],_=E[1],A=E[2],T=E[3],N=T??Je(1),D=pr(_.shape,c.shape),k=[];if(_.rank===1){for(var P=0;P<c.shape.length-1;++P)k.push(c.shape[P]);k.push(1)}var H=S.sub(_),U=g.mul(N),j=kR(A.add(Je(o))),G=j.mul(j).mul(j).mul(Je(-.5));return{x:function(){return _.rank===1?g.mul(Zl(j.as4D(1,1,1,_.shape[0]),k)).mul(N).reshape(S.shape):g.mul(j).mul(N).reshape(S.shape)},mean:function(){var K=j.mul(Je(-1)).mul(U);return _.rank===1&&(K=K.sum(D)),K.reshape(_.shape)},variance:function(){var K=G.mul(H).mul(U);return _.rank===1&&(K=K.sum(D)),K.reshape(_.shape)},scale:function(){var K=H.mul(j),be=g.mul(K);return _.rank===1&&(be=be.sum(D)),be.reshape(_.shape)},offset:function(){var K=g;return _.rank===1&&(K=K.sum(D)),K.reshape(_.shape)}}},"BatchNormalization",{varianceEpsilon:o},m).reshape(f.shape)}function Wh(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function hv(){YC("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var kU=re({batchNormalization2d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),hv(),MR(t,n,e,o,a,r)}}),OU=re({batchNormalization3d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),hv(),IR(t,n,e,o,a,r)}}),MU=re({batchNormalization4d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),hv(),FR(t,n,e,o,a,r)}}),IU=re({batchNormalization_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),hv(),pd(t,n,e,o,a,r)}}),BR=re({batchNorm_:pd}),FU=re({batchNorm2d_:MR}),BU=re({batchNorm3d_:IR}),PU=re({batchNorm4d_:FR}),pv=re({logicalAnd_:function(t,n){var e=V(t,"a","logicalAnd","bool"),r=V(n,"b","logicalAnd","bool");return Yt(e.shape,r.shape),ce.runKernelFunc(function(a){return a.logicalAnd(e,r)},{a:e,b:r},null,"LogicalAnd")}}),LU=re({logicalNot_:function(t){var n=V(t,"x","logicalNot","bool");return ce.runKernelFunc(function(e){return e.logicalNot(n)},{$x:n})}}),PR=re({logicalOr_:function(t,n){var e=V(t,"a","logicalOr","bool"),r=V(n,"b","logicalOr","bool");return Yt(e.shape,r.shape),ce.runKernelFunc(function(a){return a.logicalOr(e,r)},{$a:e,$b:r})}}),UU=re({logicalXor_:function(t,n){var e=V(t,"a","logicalXor","bool"),r=V(n,"b","logicalXor","bool");return Yt(e.shape,r.shape),PR(t,n).logicalAnd(pv(t,n).logicalNot())}}),Us=re({where_:function(t,n,e){var r=V(n,"a","where"),a=V(e,"b","where"),o=V(t,"condition","where","bool");return ln(r.shape,a.shape,"Error in where: "),o.rank===1?$(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ln(o.shape,a.shape,"Error in where: "),ce.runKernelFunc(function(u,s){var c=u.select(o,r,a);return s([o]),c},{$condition:o,$a:r,$b:a},function(u,s){var c=s[0];return{$condition:function(){return rn(c).toFloat()},$a:function(){return u.mul(c.cast(u.dtype))},$b:function(){return u.mul(c.logicalNot().cast(u.dtype))}}})}}),LR=function(t){return st(this,void 0,void 0,function(){var n,e,r;return lt(this,function(a){switch(a.label){case 0:return[4,(n=V(t,"condition","whereAsync","bool")).data()];case 1:return e=a.sent(),r=J0(n.shape,e),t!==n&&n.dispose(),[2,r]}})})},$t=re({add_:function(t,n){var e,r=V(t,"a","add"),a=V(n,"b","add");e=Ln(r,a),r=e[0],a=e[1];var o=Yt(r.shape,a.shape);return ce.runKernelFunc(function(u){return u.add(r,a)},{a:r,b:a},function(u){return{a:function(){var s=u,c=pr(r.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(r.shape)},b:function(){var s=u,c=pr(a.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(a.shape)}}},"Add")}}),zU=re({addN_:function(t){$(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),$(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var n=t.map(function(a,o){return V(a,"tensors"+o,"addN")}),e=n[0];n.forEach(function(a){if(a.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(a){if(!Ar(a.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return ce.runKernelFunc(function(a){return a.addN(n)},r,function(a){var o={};return n.forEach(function(u,s){o[s]=function(){return a.clone()}}),o},"AddN")}}),jU=re({addStrict_:function(t,n){var e=V(t,"a","addStrict"),r=V(n,"b","addStrict");return ln(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),HU=re({atan2_:function(t,n){var e,r=V(t,"a","atan2"),a=V(n,"b","atan2");e=Ln(r,a),r=e[0],a=e[1];var o=Yt(r.shape,a.shape);return ce.runKernelFunc(function(u,s){var c=u.atan2(r,a);return s([r,a]),c},{$a:r,$b:a},function(u,s){var c=s[0],f=s[1];return{$a:function(){var h=$t(c.square(),f.square()),p=u.mul(f.div(h)),m=pr(c.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(c.shape)},$b:function(){var h=$t(c.square(),f.square()),p=Bp(u.mul(c.div(h))),m=pr(f.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(f.shape)}}})}}),mo=re({div_:function(t,n){var e,r=V(t,"a","div"),a=V(n,"b","div");if(e=Ln(r,a),r=e[0],a=e[1],r.dtype==="int32"&&a.dtype==="int32")return UR(r,a);var o=Yt(r.shape,a.shape);return ce.runKernelFunc(function(u,s){var c=u.realDivide(r,a);return s([r,a]),c},{a:r,b:a},function(u,s){var c=s[0],f=s[1];return{a:function(){var h=u.div(f.toFloat()),p=pr(c.shape,o);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=u.mul(c.toFloat()),p=pr(f.shape,o);p.length>0&&(h=h.sum(p).reshape(f.shape));var m=f.square();return h.div(m.toFloat()).neg()}}},"Div")}}),VU=re({divNoNan_:function(t,n){var e,r=V(t,"a","div"),a=V(n,"b","div");r=(e=Ln(r,a))[0],a=e[1];var o=mo(r,a),u=rn(o),s=a.equal(u);return Us(s,u,o)}}),WU=re({divStrict_:function(t,n){var e=V(t,"a","div"),r=V(n,"b","div");return ln(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),UR=re({floorDiv_:function(t,n){var e,r=V(t,"a","floorDiv"),a=V(n,"b","floorDiv");e=Ln(r,a),r=e[0],a=e[1];var o=Yt(r.shape,a.shape);return ce.runKernelFunc(function(u,s){var c=u.floorDiv(r,a);return s([r,a]),c},{a:r,b:a},function(u,s){var c=s[0],f=s[1];return{a:function(){var h=u.div(f.toFloat()),p=pr(c.shape,o);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=u.mul(c.toFloat()),p=pr(f.shape,o);p.length>0&&(h=h.sum(p).reshape(f.shape));var m=f.square();return h.div(m.toFloat()).neg()}}},"FloorDiv")}}),ab=re({maximum_:function(t,n){var e,r=V(t,"a","maximum"),a=V(n,"b","maximum");return e=Ln(r,a),r=e[0],a=e[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),Yt(r.shape,a.shape),ce.runKernelFunc(function(o,u){var s=o.maximum(r,a);return u([r,a]),s},{a:r,b:a},function(o,u){var s=u[0],c=u[1];return{a:function(){return o.mul(s.greaterEqual(c).toFloat())},b:function(){return o.mul(s.less(c).toFloat())}}},"Maximum")}}),qU=re({maximumStrict_:function(t,n){var e=V(t,"a","maximumStrict"),r=V(n,"b","maximumStrict");return ln(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),zR=re({minimum_:function(t,n){var e,r=V(t,"a","minimum"),a=V(n,"b","minimum");return e=Ln(r,a),r=e[0],a=e[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),Yt(r.shape,a.shape),ce.runKernelFunc(function(o,u){var s=o.minimum(r,a);return u([r,a]),s},{a:r,b:a},function(o,u){var s=u[0],c=u[1];return{a:function(){return o.mul(s.lessEqual(c).toFloat())},b:function(){return o.mul(s.greater(c).toFloat())}}},"Minimum")}}),$U=re({minimumStrict_:function(t,n){var e=V(t,"a","minimumStrict"),r=V(n,"b","minimumStrict");return ln(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),GU=re({mod_:function(t,n){var e,r=V(t,"a","mod"),a=V(n,"b","mod");e=Ln(r,a),r=e[0],a=e[1];var o=Yt(r.shape,a.shape);return ce.runKernelFunc(function(u,s){var c=u.mod(r,a);return s([r,a]),c},{$a:r,$b:a},function(u,s){var c=s[0],f=s[1];return{$a:function(){var h=pr(c.shape,o);return h.length>0?u.sum(h).reshape(c.shape):u},$b:function(){var h=u.mul(c.div(f).floor().neg()),p=pr(f.shape,o);return p.length>0?h.sum(p).reshape(f.shape):h}}})}}),KU=re({modStrict_:function(t,n){var e=V(t,"a","modStrict"),r=V(n,"b","modStrict");return ln(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),na=re({mul_:function(t,n){var e,r=V(t,"a","mul"),a=V(n,"b","mul");e=Ln(r,a),r=e[0],a=e[1];var o=Yt(r.shape,a.shape);return ce.runKernelFunc(function(u,s){var c=u.multiply(r,a);return s([r,a]),c},{a:r,b:a},function(u,s){var c=s[0],f=s[1];return{a:function(){var h=u.mul(f.toFloat()),p=pr(c.shape,o);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=u.mul(c.toFloat()),p=pr(f.shape,o);return p.length>0?h.sum(p).reshape(f.shape):h}}},"Mul")}}),XU=re({mulStrict_:function(t,n){var e=V(t,"a","mul"),r=V(n,"b","mul");return ln(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),Pp=re({pow_:function(t,n){var e,r=V(t,"base","pow"),a=V(n,"exp","pow");e=Ln(r,a),r=e[0],a=e[1];var o=Yt(r.shape,a.shape),u=[r,a];return ce.runKernelFunc(function(s,c){var f=s.pow(r,a);return c([r,a,f]),f},{a:r,b:a},function(s,c){var f=c[0],h=c[1],p=c[2];return{a:function(){var m=h.toFloat(),g=s.mul(m.mul(f.pow(m.sub(Je(1))))),x=pr(f.shape,o);return x.length>0&&(g=g.sum(x)),g.reshape(f.shape)},b:function(){var m=f.greater(0),g=f.log().where(m,rn(f)),x=s.mul(p.mul(g)),E=pr(h.shape,o);return E.length>0&&(x=x.sum(E)),x.reshape(h.shape)}}},"Pow",{},u,[!0])}}),YU=re({powStrict_:function(t,n){return ln(t.shape,n.shape,"Error in powStrict: "),t.pow(n)}}),QU=re({squaredDifferenceStrict_:function(t,n){var e=V(t,"a","squaredDifferenceStrict"),r=V(n,"b","squaredDifferenceStrict");return ln(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),vr=re({sub_:function(t,n){var e,r=V(t,"a","sub"),a=V(n,"b","sub");e=Ln(r,a),r=e[0],a=e[1];var o=Yt(r.shape,a.shape);return ce.runKernelFunc(function(u){return u.subtract(r,a)},{a:r,b:a},function(u){return{a:function(){var s=u,c=pr(r.shape,o);return c.length>0&&(s=s.sum(c)),s.reshape(r.shape)},b:function(){var s=u,c=pr(a.shape,o);return c.length>0&&(s=s.sum(c)),s.neg().reshape(a.shape)}}},"Sub")}}),ZU=re({subStrict_:function(t,n){var e=V(t,"a","subStrict"),r=V(n,"b","subStrict");return ln(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),jR=re({equal_:function(t,n){var e,r=V(t,"a","equal"),a=V(n,"b","equal");return e=Ln(r,a),r=e[0],a=e[1],Yt(r.shape,a.shape),ce.runKernelFunc(function(o){return o.equal(r,a)},{$a:r,$b:a})}}),JU=re({equalStrict_:function(t,n){var e=V(t,"a","equalStrict"),r=V(n,"b","equalStrict");return ln(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),ez=re({greater_:function(t,n){var e,r=V(t,"a","greater"),a=V(n,"b","greater");return e=Ln(r,a),r=e[0],a=e[1],Yt(r.shape,a.shape),ce.runKernelFunc(function(o){return o.greater(r,a)},{a:r,b:a},null,"Greater")}}),HR=re({greaterEqual_:function(t,n){var e,r=V(t,"a","greaterEqual"),a=V(n,"b","greaterEqual");return e=Ln(r,a),r=e[0],a=e[1],Yt(r.shape,a.shape),ce.runKernelFunc(function(o,u){var s=o.greaterEqual(r,a);return u([r,a]),s},{a:r,b:a},function(o,u){var s=u[0],c=u[1];return{a:function(){return rn(s)},b:function(){return rn(c)}}},"GreaterEqual")}}),tz=re({greaterEqualStrict_:function(t,n){var e=V(t,"a","greaterEqualStrict"),r=V(n,"b","greaterEqualStrict");return ln(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),nz=re({greaterStrict_:function(t,n){var e=V(t,"a","greaterStrict"),r=V(n,"b","greaterStrict");return ln(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),rz=re({less_:function(t,n){var e,r=V(t,"a","less"),a=V(n,"b","less");return e=Ln(r,a),r=e[0],a=e[1],Yt(r.shape,a.shape),ce.runKernelFunc(function(o){return o.less(r,a)},{a:r,b:a},null,"Less")}}),az=re({lessEqual_:function(t,n){var e,r=V(t,"a","lessEqual"),a=V(n,"b","lessEqual");return e=Ln(r,a),r=e[0],a=e[1],Yt(r.shape,a.shape),ce.runKernelFunc(function(o,u){var s=o.lessEqual(r,a);return u([r,a]),s},{a:r,b:a},null,"LessEqual")}}),oz=re({lessEqualStrict_:function(t,n){var e=V(t,"a","lessEqualStrict"),r=V(n,"b","lessEqualStrict");return ln(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),iz=re({lessStrict_:function(t,n){var e=V(t,"a","lessStrict"),r=V(n,"b","lessStrict");return ln(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),uz=re({notEqual_:function(t,n){var e,r=V(t,"a","notEqual"),a=V(n,"b","notEqual");return e=Ln(r,a),r=e[0],a=e[1],Yt(r.shape,a.shape),ce.runKernelFunc(function(o){return o.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),sz=re({notEqualStrict_:function(t,n){var e=V(t,"a","notEqualStrict"),r=V(n,"b","notEqualStrict");return ln(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function XE(t,n){for(var e=[],r=t;r<n;++r)e.push(r);return e}function YE(t){for(var n=[],e=0;e<t.length;++e)for(var r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var ob=re({gather_:function(t,n,e){e===void 0&&(e=0);var r=V(t,"x","gather"),a=V(n,"indices","gather","int32");e=mr(e,r.shape)[0];var o=function(u,s,c){for(var f=u.shape[c],h=[],p=1,m=1,g=0;g<c;g++)h.push(u.shape[g]),p*=u.shape[g];for(g=0;g<s.rank;g++)h.push(s.shape[g]);for(g=c+1;g<u.rank;g++)h.push(u.shape[g]),m*=u.shape[g];return{batchSize:p,sliceSize:m,dimSize:f,outputShape:h}}(r,a,e);return ce.runKernelFunc(function(u,s){var c=u.gather(r,a.flatten(),e);return s([a]),c},{x:r,indices:a},function(u,s){var c=s[0];return{x:function(){var f=r.shape,h=c.size,p=f.slice(0,e),m=p.length,g=f.slice(e,f.length).slice(1),x=g.length,E=XE(0,m),S=XE(m+1,m+1+x),_=YE([p,[h],g]),A=u.reshape(_),T=c.reshape([h]),N=YE([[m],E,S]),D=A.transpose(N),k=VR(D,T,r.shape[e]),P=q0(N);return k=k.transpose(P)},indices:function(){return c}}},"Gather",{axis:e}).reshape(o.outputShape)}}),VR=re({unsortedSegmentSum_:function(t,n,e){var r=V(t,"x","unsortedSegmentSum"),a=V(n,"segmentIds","unsortedSegmentSum","int32");return $(Qn(e),function(){return"numSegments must be of dtype int"}),ce.runKernelFunc(function(o,u){var s=o.unsortedSegmentSum(r,a,e);return u([a]),s},{$x:r},function(o,u){var s=u[0];return{$x:function(){return function(c,f){for(var h=ab(f,rn(f)),p=ob(c,h),m=HR(f,Je(0,"int32")),g=p.rank-m.rank,x=0;x<g;++x)m=no(m,x+1);m=pv(m,mc(p.shape,"bool"));var E=rn(p);return Us(m,p,E)}(o,s)}}})}}),lz=function(t,n,e){return st(this,void 0,void 0,function(){var r,a,o,u,s,c,f,h,p,m,g,x,E;return lt(this,function(S){switch(S.label){case 0:for(r=V(t,"tensor","boolMask"),a=V(n,"mask","boolMask","bool"),o=e??0,u=a.rank,s=r.shape,$(u>0,function(){return"mask cannot be scalar"}),ln(s.slice(o,o+u),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,f=o;f<o+u;f++)c*=s[f];return h=s.slice(0,o).concat([c],s.slice(o+u)),p=r.reshape(h),m=a.reshape([-1]),[4,LR(m)];case 1:return g=S.sent(),x=g.squeeze([1]),E=ob(p,x,o),t!==r&&r.dispose(),n!==a&&a.dispose(),x.dispose(),p.dispose(),m.dispose(),g.dispose(),[2,E]}})})};function WR(t,n,e,r,a,o,u){o===void 0&&(o="NHWC"),$(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var s=t,c=n,f=!1;n.rank===3&&(f=!0,c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),s=[1,t[0],t[1],t[2]]),$(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),$(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),$(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var h=o==="NHWC"?s[3]:s[1],p=o==="NHWC"?c.shape[3]:c.shape[1];$(h===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+e.shape[2]+"."}),$(p===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+e.shape[3]+"."}),u!=null&&$(Qn(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."});var m=Y0(o),g=$s(s,e.shape,r,1,a,u,!1,m),x=ce.runKernelFunc(function(E,S){var _=E.conv2dDerInput(c,e,g);return S([e,c]),_},{dy4D:c,filter:e},function(E,S){var _=S[0],A=S[1];return{dy4D:function(){return so(E,_,r,a,o,1,u)},filter:function(){return ib(E,A,_.shape,r,a,o,u)}}});return f?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}function ty(t){var n=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(t),e=n[0],r=n[1],a=n[2];return e===1&&r===1&&a===1}function qR(t,n,e,r,a){$(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var o=t,u=n,s=!1;n.rank===4&&(s=!0,u=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var c=o[4],f=u.shape[4];$(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),$(u.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+u.rank}),$(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),$(c===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+e.shape[3]+"."}),$(f===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+f+") must match output depth for filter "+e.shape[4]+"."});var h=Ip(o,e.shape,r,1,a),p=ce.runKernelFunc(function(m){return m.conv3dDerInput(u,e,h)},{dy5D:u});return s?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var cz=re({conv1d_:function(t,n,e,r,a,o,u){a===void 0&&(a="NWC"),o===void 0&&(o=1);var s=V(t,"x","conv1d"),c=V(n,"filter","conv1d"),f=s,h=!1;s.rank===2&&(h=!0,f=s.as3D(1,s.shape[0],s.shape[1])),$(f.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+f.rank+"."}),$(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),u!=null&&$(Qn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."}),$(f.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+f.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),$(Ra(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),$(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var p=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),m=f.as4D(f.shape[0],1,f.shape[1],f.shape[2]),g=so(m,p,[1,e],r,"NHWC",[1,o],u);return h?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),so=re({conv2d_:function(t,n,e,r,a,o,u){a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]);var s=V(t,"x","conv2d"),c=V(n,"filter","conv2d"),f=s,h=!1;s.rank===3&&(h=!0,f=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),$(f.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+f.rank+"."}),$(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),u!=null&&$(Qn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."});var p=a==="NHWC"?f.shape[3]:f.shape[1];$(p===c.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+c.shape[2]+"."}),$(Ra(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var m=Y0(a),g=$s(f.shape,c.shape,e,o,r,u,!1,m),x=[c,f],E=ce.runKernelFunc(function(S,_){var A=S.conv2d(f,c,g);return _([c,f]),A},{x:f,filter:c},function(S,_){var A=_,T=A[0],N=A[1];return $(lc(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return $R(N.shape,S,T,e,r,a)},filter:function(){return ib(N,S,T.shape,e,r,a)}}},"Conv2D",g,x);return h?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),fz=re({conv3d_:function(t,n,e,r,a,o){a===void 0&&(a="NDHWC"),o===void 0&&(o=[1,1,1]);var u=V(t,"x","conv3d"),s=V(n,"filter","conv3d"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),$(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),$(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),$(c.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),$(function(m,g){return ty(m)||ty(g)}(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),$(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var h=Ip(c.shape,s.shape,e,o,r),p=ce.runKernelFunc(function(m,g){var x=m.conv3d(c,s,h);return g([c,s]),x},{x:c,$filter:s},function(m,g){$(ty(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var x=g[0],E=g[1];return{x:function(){return qR(x.shape,m,E,e,r)},$filter:function(){return function(S,_,A,T,N){var D=S;S.rank===4&&(D=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]));var k=_;k.rank===4&&(k=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),$(D.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+D.shape+"."}),$(k.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+k.shape+"."}),$(A.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+A+"."}),$(D.shape[4]===A[3],function(){return"Error in conv3dDerFilter: depth of input "+D.shape[4]+") must match input depth in filter ("+A[3]+"."}),$(k.shape[4]===A[4],function(){return"Error in conv3dDerFilter: depth of dy ("+k.shape[4]+") must match output depth for filter ("+A[4]+")."});var P=Ip(D.shape,A,T,1,N);return ce.runKernelFunc(function(H){return H.conv3dDerFilter(D,k,P)},{x5D:D,dy5D:k})}(x,m,E.shape,e,r)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),ib=re({conv2dDerFilter_:function(t,n,e,r,a,o,u){o===void 0&&(o="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var c=n;c.rank===3&&(c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),$(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),$(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),$(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var f=o==="NHWC"?s.shape[3]:s.shape[1],h=o==="NHWC"?c.shape[3]:c.shape[1];$(f===e[2],function(){return"Error in conv2dDerFilter: depth of input "+f+") must match input depth in filter ("+e[2]+"."}),$(h===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+h+") must match output depth for filter ("+e[3]+")."}),u!=null&&$(Qn(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."});var p=Y0(o),m=$s(s.shape,e,r,1,a,u,!1,p);return ce.runKernelFunc(function(g){return g.conv2dDerFilter(s,c,m)},{x4D:s,dy4D:c})}}),$R=re({conv2dDerInput_:WR}),vv=re({depthwiseConv2d_:function(t,n,e,r,a,o,u){o===void 0&&(o=[1,1]);var s=V(t,"x","depthwiseConv2d"),c=V(n,"filter","depthwiseConv2d"),f=s,h=!1;s.rank===3&&(h=!0,f=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),$(f.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+f.rank+"."}),$(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),$(f.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+f.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),o==null&&(o=[1,1]),$(Ra(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),u!=null&&$(Qn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."});var p=$s(f.shape,c.shape,e,o,r,u,!0),m=[f,c],g=ce.runKernelFunc(function(x,E){var S=x.depthwiseConv2D(f,c,p);return E([f,c]),S},{x:f,filter:c},function(x,E){$(lc(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var S=E[0],_=E[1];return{x:function(){return GR(S.shape,x,_,p)},filter:function(){return KR(S,x,_.shape,p)}}},"DepthwiseConv2dNative",p,m);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),GR=re({depthwiseConv2dDerInput_:function(t,n,e,r){var a=n,o=!1;n.rank===3&&(o=!0,a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var u=ce.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(a,e,r)},{dy4D:a});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),KR=re({depthwiseConv2dDerFilter_:function(t,n,e,r){var a=t;t.rank===3&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),ce.runKernelFunc(function(u){return u.depthwiseConv2DDerFilter(a,o,r)},{x4D:a,dy4D:o})}}),ub=re({separableConv2d_:function(t,n,e,r,a,o,u){o===void 0&&(o=[1,1]),u===void 0&&(u="NHWC");var s=V(t,"x","separableConv2d"),c=V(n,"depthwiseFilter","separableConv2d"),f=V(e,"pointwiseFilter","separableConv2d"),h=s,p=!1;if(s.rank===3&&(p=!0,h=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),u==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");$(h.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+h.rank+"."}),$(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),$(f.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),$(f.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+f.shape[0]+"."}),$(f.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+f.shape[1]+"."});var m=c.shape[2],g=c.shape[3];$(f.shape[2]===m*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*g+", but got "+f.shape[2]+"."});var x=vv(h,c,r,a,u,o),E=so(x,f,1,"valid",u);return p?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),dz=re({conv2dTranspose_:function(t,n,e,r,a,o){return WR(e,V(t,"x","conv2dTranspose"),V(n,"filter","conv2dTranspose"),r,a,"NHWC",o)}}),hz=re({conv3dTranspose_:function(t,n,e,r,a){return qR(e,V(t,"x","conv3dTranspose"),V(n,"filter","conv3dTranspose"),r,a)}}),mv=re({matMul_:function(t,n,e,r){var a;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=V(t,"a","matMul"),u=V(n,"b","matMul");a=Ln(o,u),o=a[0],u=a[1];var s=e?o.shape[o.rank-2]:o.shape[o.rank-1],c=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=e?o.shape[o.rank-1]:o.shape[o.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=o.shape.slice(0,-2),m=u.shape.slice(0,-2),g=ct(p),x=ct(m);$(o.rank>=2&&u.rank>=2&&o.rank===u.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+u.rank+"."}),$(Ar(p,m),function(){return"Error in matMul: outer dimensions ("+p+") and ("+m+") of Tensors with shapes "+o.shape+" and "+u.shape+" must match."}),$(s===c,function(){return"Error in matMul: inner shapes ("+s+") and ("+c+") of Tensors with shapes "+o.shape+" and "+u.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var E=o.shape.slice(0,-2).concat([f,h]),S=e?o.as3D(g,s,f):o.as3D(g,f,s),_=r?u.as3D(x,h,c):u.as3D(x,c,h),A={transposeA:e,transposeB:r};return ce.runKernelFunc(function(T,N){var D=T.batchMatMul(S,_,e,r);return N([S,_]),D},{a:S,b:_},function(T,N){var D=N,k=D[0],P=D[1];return e||r?!e&&r?{a:function(){return T.matMul(P,!1,!1)},b:function(){return T.matMul(k,!0,!1)}}:e&&!r?{a:function(){return P.matMul(T,!1,!0)},b:function(){return k.matMul(T,!1,!1)}}:{a:function(){return P.matMul(T,!0,!0)},b:function(){return T.matMul(k,!0,!0)}}:{a:function(){return T.matMul(P,!1,!0)},b:function(){return k.matMul(T,!0,!1)}}},"BatchMatMul",A).reshape(E)}}),pz=re({dot_:function(t,n){var e=V(t,"t1","dot"),r=V(n,"t2","dot");$(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var a=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return $(a===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+o+"."}),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),vz=re({outerProduct_:function(t,n){var e=V(t,"v1","outerProduct"),r=V(n,"v2","outerProduct");return $(e.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),vd=re({reverse_:function(t,n){var e=V(t,"x","reverse");if(e.rank===0)return e.clone();var r=mr(n,e.shape);return ce.runKernelFunc(function(a){return a.reverse(e,r)},{$x:e},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(e)}}),mz=re({reverse1d_:function(t){var n=V(t,"x","reverse");return $(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),vd(n,0)}}),gz=re({reverse2d_:function(t,n){var e=V(t,"x","reverse");return $(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),vd(e,n)}}),yz=re({reverse3d_:function(t,n){var e=V(t,"x","reverse");return $(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),vd(e,n)}}),bz=re({reverse4d_:function(t,n){var e=V(t,"x","reverse");return $(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),vd(e,n)}});function XR(t,n,e,r,a,o){var u=V(t,"x","maxPool"),s=u,c=!1;u.rank===3&&(c=!0,s=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),$(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),$(Ra(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),o!=null&&$(Qn(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var f=Yf(s.shape,n,e,r,a,o);if(f.filterWidth===1&&f.filterHeight===1&&Ar(f.inShape,f.outShape))return u.clone();var h=[s],p=ce.runKernelFunc(function(m,g){var x=m.maxPool(s,f);return g([s,x]),x},{x:s},function(m,g){var x=g[0],E=g[1];return{x:function(){return function(S,_,A,T,N,D,k,P){var H=V(S,"dy","maxPoolBackprop"),U=V(_,"input","maxPoolBackprop"),j=V(A,"output","maxPoolBackprop");$(U.rank===H.rank,function(){return"Rank of input ("+U.rank+") does not match rank of dy ("+H.rank+")"}),$(Ra(N,D),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+N+" and dilations '"+D+"'"}),$(H.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+H.rank+"."}),$(U.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+U.rank+"."});var G=Yf(U.shape,T,N,D,k,P);return ce.runKernelFunc(function(K){return K.maxPoolBackprop(H,U,j,G)},{$dy:H,$input:U})}(m,x,E,n,e,r,a)}}},"MaxPool",f,h);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function YR(t,n,e,r,a,o){var u=V(t,"x","avgPool","float32");$(Ra(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var s=u,c=!1;u.rank===3&&(c=!0,s=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),$(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&$(Qn(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var f=Yf(s.shape,n,e,r,a,o);if(f.filterWidth===1&&f.filterHeight===1&&Ar(f.inShape,f.outShape))return u.clone();var h=ce.runKernelFunc(function(p){return p.avgPool(s,f)},{x:s},function(p){return{x:function(){return function(m,g,x,E,S,_){var A=V(m,"dy","avgPoolBackprop"),T=V(g,"input","avgPoolBackprop");$(T.rank===A.rank,function(){return"Rank of input ("+T.rank+") does not match rank of dy ("+A.rank+")"}),$(Ra(E,S),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+E+" and dilations '"+S+"'"});var N=T,D=A,k=!1;T.rank===3&&(k=!0,N=T.as4D(1,T.shape[0],T.shape[1],T.shape[2]),D=A.as4D(1,A.shape[0],A.shape[1],A.shape[2])),$(D.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+D.rank+"."}),$(N.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+N.rank+"."});var P=Yf(N.shape,x,E,S,_),H=ce.runKernelFunc(function(U){return U.avgPoolBackprop(D,N,P)},{dy4D:D,input4D:N});return k?H.as3D(H.shape[1],H.shape[2],H.shape[3]):H}(p,s,n,e,r,a)}}},"AvgPool",f);return h=h.cast(u.dtype),c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}var Cr=re({maxPool_:function(t,n,e,r,a){return XR(t,n,e,1,r,a)}}),md=re({avgPool_:function(t,n,e,r,a){return YR(t,n,e,1,r,a)}}),xz=re({pool_:function(t,n,e,r,a,o){a==null&&(a=[1,1]),o==null&&(o=1),r===0&&(r="valid");var u=V(t,"x","maxPool"),s=u,c=!1;u.rank===3&&(c=!0,s=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),$(Ra(o,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"});var f,h=Yf(s.shape,n,o,a,r),p=[h.dilationHeight,h.dilationWidth];f=r==="same"?function(N,D){var k=N.map(function(U,j){return U+(U-1)*(D[j]-1)}).map(function(U){return U-1}),P=k.map(function(U){return Math.floor(U/2)}),H=k.map(function(U,j){return U-P[j]});return k.map(function(U,j){return[P[j],H[j]]})}([h.filterHeight,h.filterWidth],p):[[0,0],[0,0]];var m=p[0]===1&&p[1]===1,g=function(N,D,k){var P=k.map(function(pe){return pe[0]}),H=k.map(function(pe){return pe[1]}),U=N.concat(P,H),j=D.map(function(pe,he){return(pe-U[he]%pe)%pe}),G=H.map(function(pe,he){return pe+j[he]}),K=D.map(function(pe,he){return[P[he],G[he]]}),be=D.map(function(pe,he){return[0,j[he]]});return[K,be]}([h.inHeight,h.inWidth],p,f),x=g[0],E=g[1],S=m?r:"valid",_=m?s:nR(s,p,x),A=(e==="avg"?function(){return YR(_,n,o,1,S)}:function(){return XR(_,n,o,1,S)})(),T=m?A:JC(A,p,E);return c?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),wz=re({maxPool3d_:function(t,n,e,r,a,o,u){o===void 0&&(o="NDHWC");var s=V(t,"x","maxPool3d"),c=s,f=!1;s.rank===4&&(f=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),u==null&&(u=[1,1,1]),$(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),$(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),$(Ra(e,u),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+u+"'"}),a!=null&&$(Qn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var h=Mp(c.shape,n,e,u,r,a,o),p=ce.runKernelFunc(function(m,g){var x=m.maxPool3d(c,h);return g([c,x]),x},{x:c},function(m,g){var x=g[0],E=g[1];return{x:function(){return function(S,_,A,T,N,D,k,P){var H=V(S,"dy","maxPool3dBackprop"),U=V(_,"input","maxPool3dBackprop"),j=V(A,"output","maxPool3dBackprop"),G=H,K=U,be=j,pe=!1;U.rank===4&&(pe=!0,G=H.as5D(1,H.shape[0],H.shape[1],H.shape[2],H.shape[3]),K=U.as5D(1,U.shape[0],U.shape[1],U.shape[2],U.shape[3]),be=j.as5D(1,j.shape[0],j.shape[1],j.shape[2],j.shape[3])),$(G.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+G.rank+"."}),$(K.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+K.rank+"."}),$(be.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+be.rank+"."}),D==null&&(D=[1,1,1]),$(Ra(N,D),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+N+" and dilations '"+D+"'"}),P!=null&&$(Qn(k),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+P+" but got pad "+k+"."});var he=Mp(K.shape,T,N,D,k,P),q=ce.runKernelFunc(function(ne){return ne.maxPool3dBackprop(G,K,be,he)},{dy5D:G,input5D:K});return pe?q.as4D(q.shape[1],q.shape[2],q.shape[3],q.shape[4]):q}(m,x,E,n,e,u,r,a)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Ez=re({avgPool3d_:function(t,n,e,r,a,o,u){o===void 0&&(o="NDHWC");var s=V(t,"x","avgPool3d","float32"),c=s,f=!1;s.rank===4&&(f=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),u==null&&(u=[1,1,1]),$(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),$(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),$(Ra(e,u),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+u+"'"}),a!=null&&$(Qn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var h=Mp(c.shape,n,e,u,r,a,o),p=ce.runKernelFunc(function(m){return m.avgPool3d(c,h)},{x:c},function(m){return{x:function(){return function(g,x,E,S,_,A,T){var N=V(g,"dy","avgPool3dBackprop"),D=V(x,"input","avgPool3dBackprop"),k=N,P=D,H=!1;D.rank===4&&(H=!0,k=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),P=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3])),$(k.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+k.rank+"."}),$(P.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+P.rank+"."}),_==null&&(_=[1,1,1]),$(Ra(S,_),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+S+" and dilations '"+_+"'"}),T!=null&&$(Qn(A),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+T+" but got pad "+A+"."});var U=Mp(P.shape,E,S,_,A,T),j=ce.runKernelFunc(function(G){return G.avgPool3dBackprop(k,P,U)},{dy5D:k,input5D:P});return H?j.as4D(j.shape[1],j.shape[2],j.shape[3],j.shape[4]):j}(m,c,n,e,u,r,a)}}});return p=p.cast(c.dtype),f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Qo=re({slice_:function(t,n,e){var r,a,o=V(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach(function(c){$(c!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(c,f){return c>=0?c:($(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+f+"."}),o.shape[f]-r[f])}),YP(o,r,a);var u=o.shape,s={begin:r,size:a};return ce.runKernelFunc(function(c){return c.slice(o,r,a)},{x:o},function(c){for(var f=[],h=0;h<c.rank;h++)f.push([r[h],u[h]-r[h]-a[h]]);return{x:function(){return c.pad(f)}}},"Slice",s)}}),Sz=re({slice1d_:function(t,n,e){var r=V(t,"x","slice1d");return $(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Qo(r,[n],[e])}}),_z=re({slice2d_:function(t,n,e){var r=V(t,"x","slice2d");return $(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Qo(r,n,e)}}),QR=re({slice3d_:function(t,n,e){var r=V(t,"x","slice3d");return $(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Qo(r,n,e)}}),Cz=re({slice4d_:function(t,n,e){var r=V(t,"x","slice4d");return $(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Qo(r,n,e)}});function ZR(t,n,e,r,a){return n.rank<e.rank&&(n=n.reshape(Ca(n.shape,r))),t.rank<e.rank&&(t=t.reshape(Ca(t.shape,r))),{x:function(){var o=t.mul(e.equal(n).cast(t.dtype));return a==null?o:o.transpose(a)}}}var Rz=re({all_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","all","bool"),a=mr(n,r.shape),o=a,u=ri(o,r.rank);u!=null&&(r=r.transpose(u),o=ai(o.length,r.rank));var s=ce.runKernelFunc(function(f){return f.all(r,o)},{$x:r});if(e){var c=Ca(s.shape,a);return s.reshape(c)}return s}}),Az=re({any_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","any","bool"),a=mr(n,r.shape),o=a,u=ri(o,r.rank);u!=null&&(r=r.transpose(u),o=ai(o.length,r.rank));var s=ce.runKernelFunc(function(f){return f.any(r,o)},{$x:r});if(e){var c=Ca(s.shape,a);return s.reshape(c)}return s}}),Tz=re({argMax_:function(t,n){n===void 0&&(n=0);var e=V(t,"x","argMax");n==null&&(n=0);var r=mr(n,e.shape),a=ri(r,e.rank);a!=null&&(e=e.transpose(a),r=ai(r.length,e.rank));var o={axis:r[0]},u=[e];return ce.runKernelFunc(function(s,c){var f=s.argMax(e,r[0]);return c([e]),f},{x:e},function(s,c){var f=c[0];return{x:function(){return rn(f)}}},"ArgMax",o,u)}}),Dz=re({argMin_:function(t,n){n===void 0&&(n=0);var e=V(t,"x","argMin");n==null&&(n=0);var r=mr(n,e.shape),a=ri(r,e.rank);return a!=null&&(e=e.transpose(a),r=ai(r.length,e.rank)),ce.runKernelFunc(function(o,u){var s=o.argMin(e,r[0]);return u([e]),s},{$x:e},function(o,u){var s=u[0];return{$x:function(){return rn(s)}}})}}),Nz=re({logSumExp_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","logSumExp"),a=mr(n,r.shape),o=r.max(a,!0),u=r.sub(o).exp().sum(a).log(),s=o.reshape(u.shape).add(u);if(e){var c=Ca(s.shape,a);return s.reshape(c)}return s}}),gv=re({max_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","max"),a=r,o=mr(n,r.shape),u=o,s=ri(u,r.rank);s!=null&&(r=r.transpose(s),u=ai(u.length,r.rank));var c=[r],f=ce.runKernelFunc(function(p,m){var g=p.max(r,u);return m([a,g]),g},{x:r},function(p,m){return ZR(p,m[1],m[0],o,s)},"Max",{axes:u},c,[!0]);if(e){var h=Ca(f.shape,o);f=f.reshape(h)}return f}}),kz=re({mean_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","mean"),a=mr(n,r.shape),o=ct(Yr(r.shape,a)[1]);return dv(function(u){var s=Je(o);return{value:(s.dtype===u.dtype?u:u.cast(s.dtype)).div(s).sum(n,e),gradFunc:function(c){var f=u.shape.slice();return a.forEach(function(h){f[h]=1}),c.reshape(f).mul(mc(u.shape,"float32")).div(o)}}})(r)}}),Oz=re({min_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","min"),a=r,o=mr(n,r.shape),u=o,s=ri(u,r.rank);s!=null&&(r=r.transpose(s),u=ai(u.length,r.rank));var c=[r],f=ce.runKernelFunc(function(p,m){var g=p.min(r,u);return m([a,g]),g},{x:r},function(p,m){return ZR(p,m[1],m[0],o,s)},"Min",{axes:u},c,[!0]);if(e){var h=Ca(f.shape,o);f=f.reshape(h)}return f}}),Mz=re({moments_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=mr(n,(t=V(t,"x","moments")).shape),a=t.mean(r,e),o=a.shape;e||(o=Ca(a.shape,r));var u=t.toFloat().sub(a.reshape(o)).square();return{mean:a,variance:u.mean(r,e)}}}),JR=re({sum_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=mr(n,r.shape);return dv(function(o){var u=ri(a,o.rank),s=a,c=o;u!=null&&(c=o.transpose(u),s=ai(s.length,o.rank));var f=function(g){var x=o.shape.slice();return a.forEach(function(E){x[E]=1}),g.reshape(x).mul(mc(o.shape,"float32"))},h={axes:s},p=ce.runKernelFunc(function(g){return g.sum(c,s)},{x:c},function(g){return{x:function(){return f(g)}}},"Sum",h);if(e){var m=Ca(p.shape,a);p=p.reshape(m)}return{value:p,gradFunc:f}})(r)}}),Iz=re({prod_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=mr(n,r.shape),o=ri(a,r.rank),u=a,s=r;o!=null&&(s=r.transpose(o),u=ai(u.length,r.rank));var c=ce.runKernelFunc(function(h){return h.prod(s,u)},{permutedX:s});if(e){var f=Ca(c.shape,a);c=c.reshape(f)}return c}}),eA=re({elu_:function(t){var n=V(t,"x","elu");return ce.runKernelFunc(function(e,r){var a=e.elu(n);return r([a]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return ce.runKernelFunc(function(o){return o.eluDer(e,a)},{dy:e,y:a})}}})}}),Fz=re({leakyRelu_:function(t,n){n===void 0&&(n=.2);var e=V(t,"x","leakyRelu");return ab(Je(n).mul(e),e)}}),tA=re({prelu_:function(t,n){var e=V(t,"x","prelu"),r=V(n,"alpha","prelu");return ce.runKernelFunc(function(a,o){var u=a.prelu(e,r);return o([e,r]),u},{x:e,alpha:r},function(a,o){var u=o[0],s=o[1],c=u.greater(0);return{x:function(){return Us(c,a,a.mul(s))},alpha:function(){var f=Us(c,rn(a),a.mul(u)),h=pr(s.shape,a.shape);return h.length>0&&(f=f.sum(h)),f.reshape(s.shape)}}},"Prelu")}}),Pn=re({relu_:function(t){var n=V(t,"x","relu");return n.dtype==="bool"?n.toInt():ce.runKernelFunc(function(e,r){var a=e.relu(n);return r([n]),a},{x:n},function(e,r){var a=r[0];return{x:function(){return e.mulStrict(a.step().toFloat())}}},"Relu")}}),nA=re({relu6_:function(t){var n=V(t,"x","relu6");return n.dtype==="bool"?n.toInt():ce.runKernelFunc(function(e,r){var a=e.relu6(n);return r([n]),a},{x:n},function(e,r){var a=r[0],o=a.lessEqual(6).mul(a.step());return{x:function(){return e.mulStrict(o.toFloat())}}},"Relu6")}}),Bz=re({selu_:function(t){var n=V(t,"x","selu");return ce.runKernelFunc(function(e,r){var a=e.selu(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){var o=a.greater(Je(0)),u=Je(tb),s=Je(nb),c=e.mul(s),f=e.mul(u).mul(a.toFloat().exp());return Us(o,c,f)}}})}}),Wu=re({transpose_:function(t,n){var e=V(t,"x","transpose");if(n==null&&(n=e.shape.map(function(a,o){return o}).reverse()),$(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(a){$(a>=0&&a<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1)return e.clone();var r={perm:n};return ce.runKernelFunc(function(a){return a.transpose(e,n)},{x:e},function(a){var o=q0(n);return{x:function(){return a.transpose(o)}}},"Transpose",r)}}),Pz=re({localResponseNormalization_:function(t,n,e,r,a){n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),a===void 0&&(a=.5);var o=V(t,"x","localResponseNormalization");$(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),$(Qn(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var u=o,s=!1;o.rank===3&&(s=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var c=ce.runKernelFunc(function(f,h){var p=f.localResponseNormalization4D(u,n,e,r,a);return h([u,p]),p},{x4D:u},function(f,h){var p=h[0],m=h[1];return{x4D:function(){return ce.runKernelFunc(function(g){return g.LRNGrad(f,p,m,n,e,r,a)},{})}}});return s?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),rA=re({norm_:function(t,n,e,r){n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var a=function s(c,f,h){if(h===void 0&&(h=null),c.rank===0)return c.abs();if(c.rank!==1&&h===null)return s(c.reshape([-1]),f,h);if(c.rank===1||typeof h=="number"||Array.isArray(h)&&h.length===1){if(f===1)return c.abs().sum(h);if(f===1/0)return c.abs().max(h);if(f===-1/0)return c.abs().min(h);if(f==="euclidean"||f===2)return c.abs().pow(Je(2,"int32")).sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}if(Array.isArray(h)&&h.length===2){if(f===1)return c.abs().sum(h[0]).max(h[1]-1);if(f===1/0)return c.abs().sum(h[1]).max(h[0]);if(f===-1/0)return c.abs().sum(h[1]).min(h[0]);if(f==="fro"||f==="euclidean")return c.square().sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}throw new Error("Error in norm: invalid axis: "+h)}(t=V(t,"x","norm"),n,e),o=a.shape;if(r){var u=mr(e,t.shape);o=Ca(a.shape,u)}return a.reshape(o)}}),Lz=re({basicLSTMCell_:function(t,n,e,r,a,o){var u=V(t,"forgetBias","basicLSTMCell"),s=V(n,"lstmKernel","basicLSTMCell"),c=V(e,"lstmBias","basicLSTMCell"),f=V(r,"data","basicLSTMCell"),h=V(a,"c","basicLSTMCell"),p=V(o,"h","basicLSTMCell"),m=f.concat(p,1).matMul(s).add(c),g=m.shape[0],x=m.shape[1]/4,E=[g,x],S=m.slice([0,0],E),_=m.slice([0,x],E),A=m.slice([0,2*x],E),T=m.slice([0,3*x],E),N=S.sigmoid().mulStrict(_.tanh()).addStrict(h.mulStrict(u.add(A).sigmoid())),D=N.tanh().mulStrict(T.sigmoid());return[N,D]}}),Uz=re({multiRNNCell_:function(t,n,e,r){for(var a=V(n,"data","multiRNNCell"),o=Ap(e,"c","multiRNNCell"),u=Ap(r,"h","multiRNNCell"),s=a,c=[],f=0;f<t.length;f++){var h=t[f](s,o[f],u[f]);c.push(h[0]),c.push(h[1]),s=h[1]}var p=[],m=[];for(f=0;f<c.length;f+=2)p.push(c[f]),m.push(c[f+1]);return[p,m]}}),zz=re({movingAverage_:function(t,n,e,r,a){a===void 0&&(a=!0);var o=V(t,"v","movingAverage"),u=V(n,"x","movingAverage"),s=V(e,"decay","movingAverage");PB(o,u),$(Ar(o.shape,u.shape),function(){return"Shape mismatch in v and x"});var c=Je(1),f=c.sub(s),h=u.sub(o).mul(f);if(a){$(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=V(r,"step","movingAverage");h=h.div(c.sub(Pp(s,p)))}return o.add(h)}}),jz=re({stridedSlice_:function(t,n,e,r,a,o,u,s,c){if(a===void 0&&(a=0),o===void 0&&(o=0),u===void 0&&(u=0),s===void 0&&(s=0),c===void 0&&(c=0),r==null&&(r=new Array(n.length)),u!==0)throw new Error("ellipsis mask is not yet supported");var f=V(t,"x","stridedSlice"),h=DE(s),p=f.shape.slice();h.forEach(function(S){n[S]=0,e[S]=1,p.splice(S,0,1)}),f=f.reshape(p);for(var m=0;m<f.rank;m++)n[m]=QP(a,n,r,f.shape,m),e[m]=ZP(o,e,r,f.shape,m),r[m]=r[m]||1;var g=DE(c);g.forEach(function(S){e[S]=n[S]+1,r[S]=1});var x=X0(n,e,r),E=x.filter(function(S,_){return g.indexOf(_)===-1});return r.every(function(S){return S===1})?Qo(f,n,x).reshape(E):ce.runKernelFunc(function(S){return S.stridedSlice(f,n,e,r)},{$x:f}).reshape(E)}}),Hz=re({topk_:function(t,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var r=V(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(n>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+n);var o=ce.runKernelFunc(function(u){return u.topk(r,n,e)},{$x:r});return{values:o[0],indices:o[1]}}}),Vz=re({scatterND_:function(t,n,e){var r=V(t,"indices","scatterND","int32"),a=V(n,"updates","scatterND");return XP(a,r,e),ce.runKernelFunc(function(o){return o.scatterND(r,a,e)},{indices:r,updates:a},null,"ScatterNd",{shape:e})}}),sb=re({fft_:function(t){$(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return ce.runKernelFunc(function(a){return a.fft(r)},{input:t}).reshape(t.shape)}}),Lp=re({ifft_:function(t){$(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return ce.runKernelFunc(function(a){return a.ifft(r)},{input:t}).reshape(t.shape)}}),lb=re({rfft_:function(t,n){$(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var e,r=t.shape[t.shape.length-1],a=t.size/r;if(n!=null&&n<r){var o=t.shape.map(function(_){return 0}),u=t.shape.map(function(_){return _});u[t.shape.length-1]=n,e=t.slice(o,u),r=n}else if(n!=null&&n>r){var s=t.shape.map(function(_){return _});s[t.shape.length-1]=n-r,e=t.concat(kn(s),t.shape.length-1),r=n}else e=t;var c=e.zerosLike(),f=Fr(e,c).as2D(a,r),h=sb(f),p=Math.floor(r/2)+1,m=ro(h),g=Ho(h),x=m.split([p,r-p],m.shape.length-1),E=g.split([p,r-p],g.shape.length-1),S=e.shape.slice();return S[e.shape.length-1]=p,Fr(x[0],E[0]).reshape(S)}}),aA=re({irfft_:function(t){var n=t.shape[t.shape.length-1],e=t.size/n;if(n<=2){var r=t.as2D(e,n),a=Lp(r);return ro(a)}var o=[e,2*(n-1)],u=ro(t).as2D(e,n),s=Ho(t).as2D(e,n),c=u.slice([0,1],[e,n-2]).reverse(1),f=s.slice([0,1],[e,n-2]).reverse(1).mul(Je(-1)),h=u.concat(c,1),p=s.concat(f,1);return r=Fr(h,p).as2D(o[0],o[1]),a=Lp(r),ro(a)}}),Wz=Object.freeze({fft:sb,ifft:Lp,rfft:lb,irfft:aA}),qz=re({sparseToDense_:function(t,n,e,r){r===void 0&&(r=0);var a=V(t,"sparseIndices","sparseToDense","int32"),o=V(n,"sparseValues","sparseToDense"),u=V(r,"defaultValue","sparseToDense",o.dtype);return function(s,c,f,h){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var p=s.rank>0?s.shape[0]:1,m=s.rank>1?s.shape[1]:1;if(f.length!==m)throw new Error("outputShape has incorrect number of elements:, "+f.length+", should be: "+m+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==p))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+p+"]");if(c.dtype!==h.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,o,e,u),ce.runKernelFunc(function(s){return s.sparseToDense(a,o,e,u)},{$sparseIndices:a,$sparseValues:o,$defaultValue:u})}}),$z=re({gatherND_:function(t,n){var e=V(n,"indices","gatherND","int32"),r=V(t,"x","gatherND");return ce.runKernelFunc(function(a){return a.gatherND(r,e)},{x:r,indices:e},null,"GatherNd")}}),Gz=re({diag_:function(t){var n=V(t,"x","diag").flatten(),e=t.shape.concat(t.shape);return ce.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(e)}}),Kz=re({dropout_:function(t,n,e,r){var a=V(t,"x","dropout");if($(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),$(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return t instanceof Bn?a.clone():a;var o=function(c,f){if(f==null)return c.shape.slice();if(Ar(c.shape,f))return f;if(c.shape.length===f.length){for(var h=[],p=0;p<c.shape.length;p++)f[p]==null&&c.shape[p]!=null?h.push(c.shape[p]):h.push(f[p]);return h}return f}(a,e),u=1-n,s=tR(o,0,1,"float32",r).add(u).floor().div(u);return a.mul(s)}});function oA(t,n,e){for(var r=1-t%2,a=new Float32Array(t),o=0;o<t;++o){var u=2*Math.PI*o/(t+r-1);a[o]=n-e*Math.cos(u)}return ar(a,"float32")}var cb=re({hannWindow_:function(t){return oA(t,.5,.5)}}),iA=re({hammingWindow_:function(t){return oA(t,.54,.46)}}),fb=re({frame_:function(t,n,e,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var o=0,u=[];o+n<=t.size;)u.push(Qo(t,o,n)),o+=e;if(r)for(;o<t.size;){var s=o+n-t.size,c=dr([Qo(t,o,n-s),Xo([s],a)]);u.push(c),o+=e}return u.length===0?Lu([],[0,n]):dr(u).as2D(u.length,n)}}),uA=re({stft_:function(t,n,e,r,a){var o;a===void 0&&(a=cb),r==null&&(o=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var u=fb(t,n,e),s=na(u,a(n)),c=[],f=0;f<u.shape[0];f++)c.push(lb(s.slice([f,0],[1,n]),r));return dr(c)}}),Xz=Object.freeze({hannWindow:cb,hammingWindow:iA,frame:fb,stft:uA}),ta,Yz=function(t,n,e){return e===void 0&&(e=1),st(this,void 0,void 0,function(){var r,a,o,u,s,c,f,h,p,m,g,x,E,S;return lt(this,function(_){switch(_.label){case 0:return r=V(t,"predictions","inTopK"),a=V(n,"targets","inTopK"),$(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),$(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),ln(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],$(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,r.data()];case 1:return u=_.sent(),[4,a.data()];case 2:for(s=_.sent(),c=[u.length/o,o],h=c[1],p=Gf("bool",f=c[0]),m=0;m<f;m++){for(g=m*h,x=u.subarray(g,g+h),E=[],S=0;S<x.length;S++)E.push({value:x[S],index:S});for(E.sort(function(A,T){return T.value-A.value}),p[m]=0,S=0;S<e;S++)if(E[S].index===s[m]){p[m]=1;break}}return t!==r&&r.dispose(),n!==a&&a.dispose(),[2,Lr(p,a.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ta||(ta={}));var Qz=re({absoluteDifference_:function(t,n,e,r){r===void 0&&(r=ta.SUM_BY_NONZERO_WEIGHTS);var a=V(t,"labels","absoluteDifference"),o=V(n,"predictions","absoluteDifference"),u=null;e!=null&&(u=V(e,"weights","absoluteDifference")),ln(a.shape,o.shape,"Error in absoluteDifference: ");var s=a.sub(o).abs();return Hi(s,u,r)}}),Hi=re({computeWeightedLoss_:function(t,n,e){e===void 0&&(e=ta.SUM_BY_NONZERO_WEIGHTS);var r=V(t,"losses","computeWeightedLoss"),a=null;n!=null&&(a=V(n,"weights","computeWeightedLoss"));var o=a==null?r:r.mul(a);if(e===ta.NONE)return o;if(e===ta.SUM)return o.sum();if(e===ta.MEAN){if(a==null)return o.mean();var u=r.size/a.size,s=o.sum().div(a.sum());return u>1?s.div(Je(u)):s}if(e===ta.SUM_BY_NONZERO_WEIGHTS){if(a==null)return o.sum().div(Je(r.size));var c=a.mul(mc(r.shape)).notEqual(Je(0)).sum().toFloat();return o.sum().div(c)}throw Error("Unknown reduction: "+e)}}),Zz=re({cosineDistance_:function(t,n,e,r,a){a===void 0&&(a=ta.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","cosineDistance"),u=V(n,"predictions","cosineDistance"),s=null;r!=null&&(s=V(r,"weights","cosineDistance")),ln(o.shape,u.shape,"Error in cosineDistance: ");var c=Je(1).sub(o.mul(u).sum(e,!0));return Hi(c,s,a)}}),Jz=re({hingeLoss_:function(t,n,e,r){r===void 0&&(r=ta.SUM_BY_NONZERO_WEIGHTS);var a=V(t,"labels","hingeLoss"),o=V(n,"predictions","hingeLoss"),u=null;e!=null&&(u=V(e,"weights","hingeLoss")),ln(a.shape,o.shape,"Error in hingeLoss: ");var s=Je(1);a=Je(2).mul(a).sub(s);var c=s.sub(a.mul(o)).relu();return Hi(c,u,r)}}),ej=re({huberLoss_:function(t,n,e,r,a){r===void 0&&(r=1),a===void 0&&(a=ta.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","huberLoss"),u=V(n,"predictions","huberLoss"),s=null;e!=null&&(s=V(e,"weights","huberLoss")),ln(o.shape,u.shape,"Error in huberLoss: ");var c=Je(r),f=u.sub(o).abs(),h=zR(f,c),p=f.sub(h),m=Je(.5).mul(h.square()).add(c.mul(p));return Hi(m,s,a)}}),tj=re({logLoss_:function(t,n,e,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=ta.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","logLoss"),u=V(n,"predictions","logLoss"),s=null;e!=null&&(s=V(e,"weights","logLoss")),ln(o.shape,u.shape,"Error in logLoss: ");var c=Je(1),f=Je(r),h=o.mul(u.add(f).log()).neg().sub(c.sub(o).mul(c.sub(u).add(f).log()));return Hi(h,s,a)}}),nj=re({meanSquaredError_:function(t,n,e,r){r===void 0&&(r=ta.SUM_BY_NONZERO_WEIGHTS);var a=V(t,"labels","meanSquaredError"),o=V(n,"predictions","meanSquaredError"),u=null;e!=null&&(u=V(e,"weights","meanSquaredError")),ln(a.shape,o.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(o);return Hi(s,u,r)}}),rj=re({sigmoidCrossEntropy_:function(t,n,e,r,a){r===void 0&&(r=0),a===void 0&&(a=ta.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"multiClassLabels","sigmoidCrossEntropy"),u=V(n,"logits","sigmoidCrossEntropy"),s=null;if(e!=null&&(s=V(e,"weights","sigmoidCrossEntropy")),ln(o.shape,u.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=Je(r),f=Je(1),h=Je(.5);o=o.mul(f.sub(c)).add(h.mul(c))}var p=function(m,g){var x=V(m,"labels","sigmoidCrossEntropyWithLogits"),E=V(g,"logits","sigmoidCrossEntropyWithLogits");ln(x.shape,E.shape,"Error in sigmoidCrossEntropyWithLogits: ");var S=E.relu(),_=E.mul(x),A=E.abs().neg().exp().log1p();return S.sub(_).add(A)}(o,u);return Hi(p,s,a)}}),aj=re({softmaxCrossEntropy_:function(t,n,e,r,a){r===void 0&&(r=0),a===void 0&&(a=ta.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"onehotLabels","softmaxCrossEntropy"),u=V(n,"logits","softmaxCrossEntropy"),s=null;if(e!=null&&(s=V(e,"weights","softmaxCrossEntropy")),ln(o.shape,u.shape,"Error in softmaxCrossEntropy: "),r>0){var c=Je(r),f=Je(1),h=Je(o.shape[1]);o=o.mul(f.sub(c)).add(c.div(h))}var p=function(m,g,x){if(x===void 0&&(x=-1),x===-1&&(x=g.rank-1),x!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+x);return dv(function(E,S,_){var A=S.logSumExp([x],!0),T=S.toFloat().sub(A);return _([E,T]),{value:T.mul(E).neg().sum([x]),gradFunc:function(N,D){var k=D[0],P=D[1],H=Ca(N.shape,[x]);return[N.reshape(H).mul(k.toFloat().sub(P.exp())),N.reshape(H).mul(P.exp().sub(k.toFloat()))]}}})(m,g)}(o,u);return Hi(p,s,a)}}),oj=Object.freeze({get Reduction(){return ta},absoluteDifference:Qz,computeWeightedLoss:Hi,cosineDistance:Zz,hingeLoss:Jz,huberLoss:ej,logLoss:tj,meanSquaredError:nj,sigmoidCrossEntropy:rj,softmaxCrossEntropy:aj});function QE(t,n){return n===void 0&&(n=!1),ce.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var e=t.shape[0],r=t.shape[1],a=eR(e),o=t.clone(),u=Lu([[1]],[1,1]),s=u.clone(),c=e>=r?r:e,f=function(p){var m,g=o,x=s,E=a;m=ce.tidy(function(){var S=o.slice([p,p],[e-p,1]),_=S.norm(),A=o.slice([p,p],[1,1]),T=Lu([[-1]]).where(A.greater(0),Lu([[1]])),N=A.sub(T.mul(_)),D=S.div(N);s=D.shape[0]===1?u.clone():u.concat(D.slice([1,0],[D.shape[0]-1,D.shape[1]]),0);var k=T.matMul(N).div(_).neg(),P=o.slice([p,0],[e-p,r]),H=k.mul(s);if(p===0)o=P.sub(H.matMul(s.transpose().matMul(P)));else{var U=P.sub(H.matMul(s.transpose().matMul(P)));o=o.slice([0,0],[p,r]).concat(U,0)}var j=a.slice([0,p],[e,a.shape[1]-p]);if(p===0)a=j.sub(j.matMul(s).matMul(H.transpose()));else{var G=j.sub(j.matMul(s).matMul(H.transpose()));a=a.slice([0,0],[e,p]).concat(G,1)}return[s,o,a]}),s=m[0],o=m[1],a=m[2],_a([g,x,E])},h=0;h<c;++h)f(h);return!n&&e>r&&(a=a.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[a,o]})}var ij=re({bandPart_:function(t,n,e){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var r=V(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,o=r.shape.slice(-2),u=o[0],s=o[1];if(!(n<=u))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+u+").");if(!(e<=s))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+s+").");n<0&&(n=u),e<0&&(e=s);var c=Tp(0,u,1,"int32").reshape([-1,1]),f=Tp(0,s,1,"int32"),h=vr(c,f),p=pv(h.lessEqual(Je(+n,"int32")),h.greaterEqual(Je(-e,"int32"))),m=kn([u,s],r.dtype);return Ha(hr(r.reshape([-1,u,s])).map(function(g){return Us(p,g,m)})).reshape(a)}}),uj=re({gramSchmidt_:function(t){var n;if(Array.isArray(t)){n=!1,$(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=t[0].shape[0],r=function(c){$(t[c].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[c].shape[0]+" vs. "+e+")"})},a=1;a<t.length;++a)r(a)}else n=!0,t=G0(t,t.shape[0],0).map(function(c){return rR(c,[0])});$(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],u=t,s=function(c){o.push(ce.tidy(function(){var f=u[c];if(c>0)for(var h=0;h<c;++h){var p=JR(o[h].mulStrict(f)).mul(o[h]);f=f.sub(p)}return f.div(rA(f,"euclidean"))}))};for(a=0;a<t.length;++a)s(a);return n?Ha(o,0):o}}),sj=re({qr_:function(t,n){if(n===void 0&&(n=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return QE(t,n);var e=t.shape.slice(0,t.shape.length-2).reduce(function(u,s){return u*s}),r=hr(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],o=[];return r.forEach(function(u){var s=QE(u,n),c=s[0],f=s[1];a.push(c),o.push(f)}),[Ha(a,0).reshape(t.shape),Ha(o,0).reshape(t.shape)]}}),lj=Object.freeze({bandPart:ij,gramSchmidt:uj,qr:sj});function yv(t,n,e,r,a,o){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),o==null&&(o=0);var u=t.shape[0];return e=Math.min(e,u),$(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),$(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),$(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),$(n.rank===1,function(){return"scores must be a 1D tensor"}),$(n.shape[0]===u,function(){return"scores has incompatible shape with boxes. Expected "+u+", but was "+n.shape[0]}),$(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var cj=re({resizeBilinear_:function(t,n,e){e===void 0&&(e=!1);var r=V(t,"images","resizeBilinear");$(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),$(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var u=n[0],s=n[1],c=ce.runKernelFunc(function(f,h){return h([a]),f.resizeBilinear(a,u,s,e)},{x:a},function(f,h){return{x:function(){return ce.runKernelFunc(function(p){return p.resizeBilinearBackprop(f,h[0],e)},{})}}},"ResizeBilinear",{alignCorners:e,newHeight:u,newWidth:s});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),fj=re({resizeNearestNeighbor_:function(t,n,e){e===void 0&&(e=!1);var r=V(t,"images","resizeNearestNeighbor");$(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),$(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),$(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var u=n[0],s=n[1],c=ce.runKernelFunc(function(f,h){return h([a]),f.resizeNearestNeighbor(a,u,s,e)},{batchImages:a},function(f,h){return{batchImages:function(){return ce.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(f,h[0],e)},{})}}});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),dj=re({nonMaxSuppression_:function(t,n,e,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var o=V(t,"boxes","nonMaxSuppression"),u=V(n,"scores","nonMaxSuppression"),s=yv(o,u,e,r,a);e=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var c={maxOutputSize:e,iouThreshold:r,scoreThreshold:a};return ce.runKernelFunc(function(f){return f.nonMaxSuppression(o,u,e,r,a)},{boxes:o,scores:u},null,"NonMaxSuppressionV3",c)}}),hj=function(t,n,e,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),st(this,void 0,void 0,function(){var o,u,s,c,f,h,p;return lt(this,function(m){switch(m.label){case 0:return o=V(t,"boxes","nonMaxSuppressionAsync"),u=V(n,"scores","nonMaxSuppressionAsync"),s=yv(o,u,e,r,a),e=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([o.data(),u.data()])];case 1:return c=m.sent(),f=c[0],h=c[1],p=Q0(f,h,e,r,a),o!==t&&o.dispose(),u!==n&&u.dispose(),[2,p]}})})},pj=re({nonMaxSuppressionWithScore_:function(t,n,e,r,a,o){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var u=V(t,"boxes","nonMaxSuppression"),s=V(n,"scores","nonMaxSuppression"),c=yv(u,s,e,r,a,o),f={maxOutputSize:e=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:o=c.softNmsSigma},h=ce.runKernel("NonMaxSuppressionV5",{boxes:u,scores:s},f);return{selectedIndices:h[0],selectedScores:h[1]}}}),vj=function(t,n,e,r,a,o){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),st(this,void 0,void 0,function(){var u,s,c,f,h,p,m;return lt(this,function(g){switch(g.label){case 0:return u=V(t,"boxes","nonMaxSuppressionAsync"),s=V(n,"scores","nonMaxSuppressionAsync"),c=yv(u,s,e,r,a,o),e=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,o=c.softNmsSigma,[4,Promise.all([u.data(),s.data()])];case 1:return f=g.sent(),h=f[0],p=f[1],m=Z0(h,p,e,r,a,o),u!==t&&u.dispose(),s!==n&&s.dispose(),[2,m]}})})},mj=re({cropAndResize_:function(t,n,e,r,a,o){var u=V(t,"image","cropAndResize"),s=V(n,"boxes","cropAndResize","float32"),c=V(e,"boxInd","cropAndResize","int32");a=a||"bilinear",o=o||0;var f=s.shape[0];return $(u.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+u.rank+"."}),$(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+f+",4] but had shape "+s.shape+"."}),$(c.rank===1&&c.shape[0]===f,function(){return"Error in cropAndResize: boxInd must be have size ["+f+"] but had shape "+s.shape+"."}),$(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),$(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),$(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),ce.runKernelFunc(function(h,p){return h.cropAndResize(u,s,c,r,a,o)},{images:u,boxes:s,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:o,cropSize:r})}}),db=Object.freeze({resizeBilinear:cj,resizeNearestNeighbor:fj,nonMaxSuppression:dj,nonMaxSuppressionAsync:hj,nonMaxSuppressionWithScore:pj,nonMaxSuppressionWithScoreAsync:vj,cropAndResize:mj}),hb=function(t,n){return!(t>0)||n==="linear"},pb=function(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return t.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},vb=function(t,n){var e=n,r=pr(t.shape,n.shape);return r.length>0&&(e=e.sum(r)),e.reshape(t.shape)},mb=function(t,n,e){if(n==="linear")return t;if(n==="relu")return Pn(t);if(n==="elu")return eA(t);if(n==="relu6")return nA(t);if(n==="prelu")return tA(t,e);throw new Error("Unknown fused activation "+n+".")},gj=re({fusedMatMul_:function(t){var n,e=t.a,r=t.b,a=t.transposeA,o=a!==void 0&&a,u=t.transposeB,s=u!==void 0&&u,c=t.bias,f=t.activation,h=f===void 0?"linear":f,p=t.preluActivationWeights;if(hb(ce.state.gradientDepth,h)===!1){var m=mv(e,r,o,s);return c!=null&&(m=$t(m,c)),mb(m,h,p)}var g=V(e,"a","fused matMul"),x=V(r,"b","fused matMul");n=Ln(g,x),g=n[0],x=n[1];var E=o?g.shape[g.rank-2]:g.shape[g.rank-1],S=s?x.shape[x.rank-1]:x.shape[x.rank-2],_=o?g.shape[g.rank-1]:g.shape[g.rank-2],A=s?x.shape[x.rank-2]:x.shape[x.rank-1],T=g.shape.slice(0,-2),N=x.shape.slice(0,-2),D=ct(T),k=ct(N);$(g.rank>=2&&x.rank>=2&&g.rank===x.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+x.rank+"."}),$(Ar(T,N),function(){return"Error in fused matMul: outer dimensions ("+T+") and ("+N+") of Tensors with shapes "+g.shape+" and "+x.shape+" must match."}),$(E===S,function(){return"Error in fused matMul: inner shapes ("+E+") and ("+S+") of Tensors with shapes "+g.shape+" and "+x.shape+" and transposeA="+o+" and transposeB="+s+" must match."});var P,H,U=g.shape.slice(0,-2).concat([_,A]),j=o?g.as3D(D,E,_):g.as3D(D,_,E),G=s?x.as3D(k,A,S):x.as3D(k,S,A);c!=null&&Yt(U,(P=Ln(P=V(c,"bias","fused matMul"),g)[0]).shape),p!=null&&(H=V(p,"prelu weights","fused matMul"));var K={a:j,b:G};c!=null&&(K.bias=P),p!=null&&(K.preluActivationWeights=H);var be=[j,G];return ce.runKernelFunc(function(pe,he){var q=pe.fusedBatchMatMul({a:j,b:G,transposeA:o,transposeB:s,bias:P,activation:h,preluActivationWeights:H});return he([j,G,q]),q},K,function(pe,he){var q=he[0],ne=he[1],ee=he[2],J=pb(pe,ee,h),L={};return c!=null&&(L={bias:function(){return vb(P,J)}}),Object.assign(o||s?!o&&s?{a:function(){return J.matMul(ne,!1,!1)},b:function(){return J.matMul(q,!0,!1)}}:o&&!s?{a:function(){return ne.matMul(J,!1,!0)},b:function(){return q.matMul(J,!1,!1)}}:{a:function(){return ne.matMul(J,!0,!0)},b:function(){return J.matMul(q,!0,!0)}}:{a:function(){return J.matMul(ne,!1,!0)},b:function(){return q.matMul(J,!0,!1)}},L)},"_FusedMatMul",{transposeA:o,transposeB:s,activation:h},be,[!0]).reshape(U)}}),yj=re({fusedConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,a=t.pad,o=t.dataFormat,u=o===void 0?"NHWC":o,s=t.dilations,c=s===void 0?[1,1]:s,f=t.dimRoundingMode,h=t.bias,p=t.activation,m=p===void 0?"linear":p,g=t.preluActivationWeights;if(m=m||"linear",hb(ce.state.gradientDepth,m)===!1){var x=so(n,e,r,a,u,c,f);return h!=null&&(x=$t(x,h)),mb(x,m,g)}var E=V(n,"x","conv2d"),S=V(e,"filter","conv2d"),_=E,A=!1;E.rank===3&&(A=!0,_=E.as4D(1,E.shape[0],E.shape[1],E.shape[2])),$(_.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+_.rank+"."}),$(S.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+S.rank+"."}),f!=null&&$(Qn(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+f+" but got pad "+a+"."}),$(_.shape[3]===S.shape[2],function(){return"Error in conv2d: depth of input ("+_.shape[3]+") must match input depth for filter "+S.shape[2]+"."}),$(Ra(r,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),$(u==="NHWC",function(){return"Error in conv2d: got dataFormat of "+u+" but only NHWC is currently supported."});var T,N,D=$s(_.shape,S.shape,r,c,a,f);h!=null&&(T=Ln(T=V(h,"bias","fused conv2d"),E)[0],Yt(D.outShape,T.shape)),g!=null&&(N=V(g,"prelu weights","fused conv2d"));var k={x:_,filter:S};h!=null&&(k.bias=T),g!=null&&(k.preluActivationWeights=N);var P=[S,_],H=ce.runKernelFunc(function(U,j){var G=U.fusedConv2d({input:_,filter:S,convInfo:D,bias:T,activation:m,preluActivationWeights:N});return j([S,_,G]),G},k,function(U,j){var G=j,K=G[0],be=G[1],pe=G[2],he=pb(U,pe,m);$(lc(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var q={};return h!=null&&(q={bias:function(){return vb(T,he)}}),Object.assign({x:function(){return $R(be.shape,he,K,r,a)},filter:function(){return ib(be,he,K.shape,r,a)}},q)},"FusedConv2D",{convInfo:D,activation:m},P,[!0]);return A?H.as3D(H.shape[1],H.shape[2],H.shape[3]):H}}),bj=re({fusedDepthwiseConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,a=t.pad,o=t.dataFormat,u=o===void 0?"NHWC":o,s=t.dilations,c=s===void 0?[1,1]:s,f=t.dimRoundingMode,h=t.bias,p=t.activation,m=p===void 0?"linear":p,g=t.preluActivationWeights;if(hb(ce.state.gradientDepth,m)===!1){var x=vv(n,e,r,a,u,c,f);return h!=null&&(x=$t(x,h)),mb(x,m,g)}var E=V(n,"x","depthwiseConv2d"),S=V(e,"filter","depthwiseConv2d"),_=E,A=!1;E.rank===3&&(A=!0,_=E.as4D(1,E.shape[0],E.shape[1],E.shape[2])),$(_.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+_.rank+"."}),$(S.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+S.rank+"."}),$(_.shape[3]===S.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+_.shape[3]+") must match the inChannels dimension in filter "+S.shape[2]+"."}),c==null&&(c=[1,1]),$(Ra(r,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),f!=null&&$(Qn(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+f+" but got pad "+a+"."});var T,N,D=$s(_.shape,S.shape,r,c,a,f,!0);h!=null&&(T=Ln(T=V(h,"bias","fused conv2d"),E)[0],Yt(D.outShape,T.shape)),g!=null&&(N=V(g,"prelu weights","fused depthwiseConv2d"));var k={x:_,filter:S};h!=null&&(k.bias=T),g!=null&&(k.preluActivationWeights=N);var P=[S,_],H=ce.runKernelFunc(function(U,j){var G=U.fusedDepthwiseConv2D({input:_,filter:S,convInfo:D,bias:T,activation:m,preluActivationWeights:N});return j([S,_,G]),G},k,function(U,j){$(lc(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var G=j[0],K=j[1],be=j[2],pe=pb(U,be,m),he={};return h!=null&&(he={bias:function(){return vb(T,pe)}}),Object.assign({x:function(){return GR(K.shape,pe,G,D)},filter:function(){return KR(K,pe,G.shape,D)}},he)},"FusedDepthwiseConv2D",{convInfo:D,activation:m},P,[!0]);return A?H.as3D(H.shape[1],H.shape[2],H.shape[3]):H}}),xj=Object.freeze({matMul:gj,conv2d:yj,depthwiseConv2d:bj}),wj=Object.freeze({image:db,linalg:lj,losses:oj,spectral:Wz,fused:xj,signal:Xz,square:tU,squaredDifference:NR,conv1d:cz,conv2d:so,conv3d:fz,depthwiseConv2d:vv,separableConv2d:ub,conv2dTranspose:dz,conv3dTranspose:hz,op:re,batchNormalization2d:kU,batchNormalization3d:OU,batchNormalization4d:MU,batchNormalization:IU,batchNorm:BR,batchNorm2d:FU,batchNorm3d:BU,batchNorm4d:PU,booleanMaskAsync:lz,complex:Fr,real:ro,imag:Ho,concat:dr,concat1d:xP,concat2d:wP,concat3d:EP,concat4d:SP,split:G0,matMul:mv,dot:pz,outerProduct:vz,reverse:vd,reverse1d:mz,reverse2d:gz,reverse3d:yz,reverse4d:bz,maxPool:Cr,avgPool:md,pool:xz,maxPool3d:wz,avgPool3d:Ez,slice:Qo,slice1d:Sz,slice2d:_z,slice3d:QR,slice4d:Cz,abs:nU,acos:rU,acosh:aU,asin:oU,asinh:iU,atan:uU,atanh:sU,ceil:lU,clipByValue:rb,cos:cU,cosh:fU,erf:dU,exp:Zy,expm1:hU,floor:pU,log:vU,log1p:mU,logSigmoid:gU,neg:Bp,reciprocal:yU,round:bU,rsqrt:kR,sigmoid:OR,sign:xU,isNaN:wU,isInf:EU,isFinite:SU,sin:_U,sinh:CU,softplus:RU,sqrt:AU,step:TU,tan:DU,tanh:NU,all:Rz,any:Az,argMax:Tz,argMin:Dz,logSumExp:Nz,max:gv,mean:kz,min:Oz,moments:Mz,sum:JR,prod:Iz,equal:jR,equalStrict:JU,greater:ez,greaterEqual:HR,greaterEqualStrict:tz,greaterStrict:nz,less:rz,lessEqual:az,lessEqualStrict:oz,lessStrict:iz,notEqual:uz,notEqualStrict:sz,add:$t,addN:zU,addStrict:jU,atan2:HU,div:mo,divNoNan:VU,divStrict:WU,floorDiv:UR,maximum:ab,maximumStrict:qU,minimum:zR,minimumStrict:$U,mod:GU,modStrict:KU,mul:na,mulStrict:XU,pow:Pp,powStrict:YU,squaredDifferenceStrict:QU,sub:vr,subStrict:ZU,elu:eA,leakyRelu:Fz,prelu:tA,relu:Pn,relu6:nA,selu:Bz,logicalAnd:pv,logicalNot:LU,logicalOr:PR,logicalXor:UU,where:Us,whereAsync:LR,buffer:Mt,print:OP,batchToSpaceND:JC,broadcastTo:MP,cast:IP,clone:FP,cumsum:BP,depthToSpace:PP,expandDims:no,eye:eR,multinomial:LP,oneHot:Ky,pad:qs,pad1d:UP,pad2d:zP,pad3d:jP,pad4d:HP,rand:VP,randomNormal:WP,randomGamma:qP,randomUniform:tR,reshape:go,spaceToBatchND:nR,squeeze:rR,stack:Ha,tile:Zl,truncatedNormal:$P,unstack:hr,setdiff1dAsync:GP,fill:Xo,linspace:bP,ones:mc,range:Tp,scalar:Je,tensor:Lr,tensor1d:ar,tensor2d:Lu,tensor3d:$0,tensor4d:xa,tensor5d:mP,tensor6d:gP,variable:yP,zeros:kn,onesLike:ZC,zerosLike:rn,transpose:Wu,softmax:ji,logSoftmax:eL,localResponseNormalization:Pz,norm:rA,gather:ob,unsortedSegmentSum:VR,basicLSTMCell:Lz,multiRNNCell:Uz,movingAverage:zz,stridedSlice:jz,topk:Hz,scatterND:Vz,fft:sb,ifft:Lp,rfft:lb,irfft:aA,sparseToDense:qz,gatherND:$z,diag:Gz,dropout:Kz,hannWindow:cb,hammingWindow:iA,frame:fb,stft:uA,inTopKAsync:Yz});function ze(t,n){Array.isArray(t)||(t=[t]),t.forEach(function(e){e!=null&&$(e.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function ny(t,n,e,r){if(e==="linear")return t.linear(n);if(e==="relu")return t.relu(n);if(e==="elu")return t.elu(n);if(e==="relu6")return t.relu6(n);if(e==="prelu")return t.prelu(n,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var Ej=function(t){function n(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new cR(e,ce),e}return wo(n,t),n.prototype.write=function(e,r,a){this.firstUse&&(this.firstUse=!1,Me().get("IS_NODE")&&Rp(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:e,dtype:a}),o},n.prototype.move=function(e,r,a,o){this.data.set(e,{values:r,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(e){return st(this,void 0,void 0,function(){return lt(this,function(r){return[2,this.readSync(e)]})})},n.prototype.readSync=function(e){var r=this.data.get(e),a=r.dtype,o=r.complexTensors;return a==="complex64"?Qy(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),a=r;if(e.dtype==="string")try{a=r.map(function(o){return Sp(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Mt(e.shape,e.dtype,a)},n.prototype.makeOutput=function(e,r,a){var o=this.write(e,r,a);return ce.makeTensorFromDataId(o,r,a,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return st(this,void 0,void 0,function(){var r;return lt(this,function(a){return r=zo(),e(),[2,{kernelMs:zo()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,r){var a=this.makeOutput(null,e.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:ce.keep(e.clone()),imag:ce.keep(r.clone())},a},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,a){if(ze(e,"slice"),sR(e.shape,r,a)){var o=lR(r,e.strides),u=ct(a);return Lr(this.readSync(e.dataId).subarray(o,o+u),a,e.dtype)}for(var s=Mt(a,e.dtype),c=this.bufferSync(e),f=0;f<s.size;++f){var h=s.indexToLoc(f).map(function(p,m){return p+r[m]});s.values[f]=c.get.apply(c,h)}return s.toTensor()},n.prototype.stridedSlice=function(e,r,a,o){ze(e,"stridedSlice");var u=X0(r,a,o);if(u.some(function(g){return g===0}))return Lr([],u);for(var s=Mt(u,e.dtype),c=this.bufferSync(e),f=0;f<s.size;f++){for(var h=s.indexToLoc(f),p=new Array(h.length),m=0;m<p.length;m++)p[m]=h[m]*o[m]+r[m];s.set.apply(s,[c.get.apply(c,p)].concat(h))}return s.toTensor()},n.prototype.diag=function(e){for(var r=this.readSync(e.dataId),a=Mt([e.size,e.size],e.dtype),o=a.values,u=0;u<r.length;u++)o[u*e.size+u]=r[u];return a.toTensor()},n.prototype.unstack=function(e,r){for(var a=e.shape[r],o=new Array(e.rank-1),u=0,s=0;s<e.rank;s++)s!==r&&(o[u++]=e.shape[s]);var c=new Array(e.rank).fill(0),f=e.shape.slice();f[r]=1;var h=new Array(a);for(s=0;s<h.length;s++)c[r]=s,h[s]=this.slice(e,c,f).reshape(o);return h},n.prototype.reverse=function(e,r){ze(e,"reverse");for(var a=Mt(e.shape,e.dtype),o=this.bufferSync(e),u=function(c){var f=a.indexToLoc(c),h=f.slice();r.forEach(function(p){return h[p]=e.shape[p]-1-h[p]}),a.set.apply(a,[o.get.apply(o,h)].concat(f))},s=0;s<a.size;s++)u(s);return a.toTensor()},n.prototype.concat=function(e,r){var a=this;if(e[0].dtype==="complex64"){var o=e.map(function(g){return ro(g)}),u=e.map(function(g){return Ho(g)});return Fr(this.concat(o,r),this.concat(u,r))}var s=e.map(function(g){var x=ct(g.shape.slice(r));return g.as2D(-1,x)}),c=sc(s.map(function(g){return g.shape}),1),f=Mt(c,e[0].dtype).values;if(s[0].shape[0]===1){var h=0;s.forEach(function(g){f.set(a.readSync(g.dataId),h),h+=g.size})}else{var p=0;s.forEach(function(g){for(var x=a.readSync(g.dataId),E=0,S=0;S<g.shape[0];++S)for(var _=S*c[1]+p,A=0;A<g.shape[1];++A)f[_+A]=x[E++];p+=g.shape[1]})}var m=sc(e.map(function(g){return g.shape}),r);return Lr(f,m,e[0].dtype)},n.prototype.neg=function(e){return ze(e,"neg"),this.multiply(Je(-1),e)},n.prototype.add=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(a,o,u,s){return{real:a+u,imag:o+s}}):this.broadcastedBinaryOp(e,r,Pr(e.dtype,r.dtype),function(a,o){return a+o})},n.prototype.addN=function(e){var r=this;ze(e,"addN");for(var a=e.map(function(h){return r.readSync(h.dataId)}),o=Mt(e[0].shape,e[0].dtype),u=o.values,s=0;s<e.length;s++)for(var c=a[s],f=0;f<u.length;f++)u[f]+=c[f];return o.toTensor()},n.prototype.softmax=function(e,r){var a=mr([r],e.shape),o=this.max(e,a),u=Ca(o.shape,a),s=this.subtract(e,o.reshape(u)),c=this.exp(s),f=this.sum(c,a).reshape(u);return this.realDivide(c,f)},n.prototype.subtract=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(a,o,u,s){return{real:a-u,imag:o-s}}):this.broadcastedBinaryOp(e,r,Pr(e.dtype,r.dtype),function(a,o){return a-o})},n.prototype.pow=function(e,r){return ze([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return Math.pow(a,o)})},n.prototype.batchMatMul=function(e,r,a,o){ze([e,r],"matMul");for(var u=a?e.shape[1]:e.shape[2],s=a?e.shape[2]:e.shape[1],c=o?r.shape[1]:r.shape[2],f=e.shape[0],h=this.readSync(e.dataId),p=this.readSync(r.dataId),m=a?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],g=m[0],x=m[1],E=m[2],S=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],_=S[0],A=S[1],T=S[2],N=s*c,D=Mt([f,s,c],e.dtype),k=D.values,P=this.blockSize,H=0;H<f;H++)for(var U=0;U<s;U+=P)for(var j=0;j<c;j+=P)for(var G=0;G<u;G+=P)for(var K=Math.min(U+P,s),be=Math.min(j+P,c),pe=Math.min(G+P,u),he=U;he<K;he++)for(var q=j;q<be;q++){for(var ne=0,ee=G;ee<pe;ee++)ne+=h[H*g+he*x+ee*E]*p[ee*_+q*A+H*T];k[H*N+(he*c+q)]+=ne}return D.toTensor()},n.prototype.fusedBatchMatMul=function(e){var r=e.a,a=e.b,o=e.transposeA,u=e.transposeB,s=e.bias,c=e.activation,f=e.preluActivationWeights,h=this.batchMatMul(r,a,o,u);return s&&(h=this.add(h,s)),c&&(h=ny(this,h,c,f)),h},n.prototype.multiply=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(a,o,u,s){return{real:a*u-o*s,imag:a*s+o*u}}):this.broadcastedBinaryOp(e,r,Pr(e.dtype,r.dtype),function(a,o){return a*o})},n.prototype.realDivide=function(e,r){return ze([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",function(a,o){return a/o})},n.prototype.floorDiv=function(e,r){return ze([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",function(a,o){return Math.floor(a/o)})},n.prototype.sum=function(e,r){ze(e,"sum"),Ba("sum",r,e.rank);for(var a=Yr(e.shape,r),o=a[0],u=a[1],s=kn(o,Pr(e.dtype,"int32")),c=ct(u),f=this.readSync(s.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var m=p*c,g=0,x=0;x<c;++x)g+=h[m+x];f[p]=g}return s},n.prototype.prod=function(e,r){ze(e,"sum");for(var a=Yr(e.shape,r),o=a[0],u=a[1],s=kn(o,Pr(e.dtype,"int32")),c=ct(u),f=this.readSync(s.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var m=p*c,g=1,x=0;x<c;++x)g*=h[m+x];f[p]=g}return s},n.prototype.unsortedSegmentSum=function(e,r,a){ze(e,"unsortedSegmentSum");for(var o=[],u=e.rank-r.rank,s=0;s<u;++s)r=r.expandDims(s+1);for(s=0;s<a;++s){var c=Je(s,"int32"),f=jR(c,r).asType("float32").mul(e).sum(0);o.push(f)}return Ha(o)},n.prototype.argMin=function(e,r){ze(e,"argMin");var a=[r];Ba("argMin",a,e.rank);for(var o=Yr(e.shape,a),u=o[0],s=o[1],c=kn(u,"int32"),f=ct(s),h=this.readSync(c.dataId),p=this.readSync(e.dataId),m=0;m<h.length;++m){for(var g=m*f,x=p[g],E=0,S=0;S<f;++S){var _=p[g+S];_<x&&(x=_,E=S)}h[m]=E}return c},n.prototype.argMax=function(e,r){ze(e,"argMax");var a=[r];Ba("argMax",a,e.rank);for(var o=Yr(e.shape,a),u=o[0],s=o[1],c=kn(u,"int32"),f=ct(s),h=this.readSync(c.dataId),p=this.readSync(e.dataId),m=0;m<h.length;++m){for(var g=m*f,x=p[g],E=0,S=0;S<f;++S){var _=p[g+S];_>x&&(x=_,E=S)}h[m]=E}return c},n.prototype.cumsum=function(e,r,a,o){if(ze(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var u=Pr(e.dtype,"int32"),s=kn(e.shape,u),c=this.readSync(s.dataId),f=this.readSync(e.dataId),h=e.shape[e.rank-1],p=o?function(S,_){return S+h-_-1}:function(S,_){return S+_},m=0;m<f.length;m+=h)for(var g=0;g<h;g++){var x=p(m,g);if(g===0)c[x]=a?0:f[x];else{var E=p(m,g-1);c[x]=a?f[E]+c[E]:f[x]+c[E]}}return s},n.prototype.equal=function(e,r){return ze([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a===o?1:0})},n.prototype.notEqual=function(e,r){return ze([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a!==o?1:0})},n.prototype.less=function(e,r){return ze([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a<o?1:0})},n.prototype.lessEqual=function(e,r){return ze([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a<=o?1:0})},n.prototype.greater=function(e,r){return ze([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a>o?1:0})},n.prototype.greaterEqual=function(e,r){return ze([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a>=o?1:0})},n.prototype.logicalNot=function(e){ze(e,"logicalNot");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)a[o]=r[o]?0:1;return this.makeOutput(a,e.shape,"bool")},n.prototype.logicalAnd=function(e,r){return ze([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a&&o})},n.prototype.logicalOr=function(e,r){return ze([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a||o})},n.prototype.select=function(e,r,a){ze([e,r,a],"select");for(var o=this.readSync(e.dataId),u=this.readSync(r.dataId),s=this.readSync(a.dataId),c=kn(r.shape,Pr(r.dtype,a.dtype)),f=this.readSync(c.dataId),h=0,p=e.rank===0||e.rank>1||r.rank===1?1:ct(r.shape.slice(1)),m=0;m<o.length;m++)for(var g=0;g<p;g++)o[m]===1?f[h++]=u[m]:f[h++]=s[m];return c},n.prototype.where=function(e){ze([e],"where");var r=this.readSync(e.dataId);return J0(e.shape,r)},n.prototype.topk=function(e,r,a){return ze(e,"topk"),yR(this.readSync(e.dataId),e.shape,e.dtype,r)},n.prototype.min=function(e,r){ze(e,"min"),Ba("min",r,e.rank);for(var a=Yr(e.shape,r),o=a[0],u=a[1],s=kn(o,e.dtype),c=ct(u),f=this.readSync(s.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var m=p*c,g=h[m],x=0;x<c;++x){var E=h[m+x];E<g&&(g=E)}f[p]=g}return s},n.prototype.minimum=function(e,r){return ze([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return Math.min(a,o)})},n.prototype.mod=function(e,r){return ze([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){var u=a%o;return a<0&&o<0||a>=0&&o>=0?u:(u+o)%o})},n.prototype.max=function(e,r){ze(e,"max"),Ba("max",r,e.rank);for(var a=Yr(e.shape,r),o=a[0],u=a[1],s=kn(o,e.dtype),c=ct(u),f=this.readSync(s.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var m=p*c,g=h[m],x=0;x<c;++x){var E=h[m+x];E>g&&(g=E)}f[p]=g}return s},n.prototype.maximum=function(e,r){return ze([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return Math.max(a,o)})},n.prototype.all=function(e,r){ze(e,"all"),Ba("all",r,e.rank);for(var a=Yr(e.shape,r),o=a[0],u=a[1],s=kn(o,e.dtype),c=ct(u),f=this.readSync(s.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var m=p*c,g=h[m],x=0;x<c;++x){var E=h[m+x];g=g&&E}f[p]=g}return s},n.prototype.any=function(e,r){ze(e,"any"),Ba("any",r,e.rank);for(var a=Yr(e.shape,r),o=a[0],u=a[1],s=kn(o,e.dtype),c=ct(u),f=this.readSync(s.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var m=p*c,g=h[m],x=0;x<c;++x){var E=h[m+x];g=g||E}f[p]=g}return s},n.prototype.squaredDifference=function(e,r){return ze([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){var u=a-o;return u*u})},n.prototype.ceil=function(e){ze(e,"ceil");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.ceil(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.floor=function(e){ze(e,"floor");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.floor(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.sign=function(e){ze(e,"x");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?a[o]=-1:r[o]>0?a[o]=1:a[o]=0;return this.makeOutput(a,e.shape,"float32")},n.prototype.isNaN=function(e){ze(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.isInf=function(e){ze(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.isFinite=function(e){ze(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.round=function(e){ze(e,"round");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=Math.floor(r[o]);r[o]-u<.5?a[o]=Math.floor(r[o]):r[o]-u>.5?a[o]=Math.ceil(r[o]):a[o]=u%2==0?u:u+1}return this.makeOutput(a,e.shape,"float32")},n.prototype.exp=function(e){ze(e,"exp");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.exp(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.expm1=function(e){ze(e,"expm1");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.expm1(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.log=function(e){ze(e,"log");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.log(u)}return this.makeOutput(a,e.shape,"float32")},n.prototype.log1p=function(e){ze(e,"log1p");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.log1p(u)}return this.makeOutput(a,e.shape,"float32")},n.prototype.sqrt=function(e){ze(e,"sqrt");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.sqrt(u)}return this.makeOutput(a,e.shape,"float32")},n.prototype.rsqrt=function(e){ze(e,"rsqrt");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=1/Math.sqrt(u)}return this.makeOutput(a,e.shape,"float32")},n.prototype.reciprocal=function(e){ze(e,"reciprocal");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=1/r[o];return this.makeOutput(a,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){ze(e,"relu");for(var r=kn(e.shape,e.dtype),a=this.readSync(r.dataId),o=this.readSync(e.dataId),u=0;u<o.length;++u)a[u]=Math.max(0,o[u]);return r},n.prototype.relu6=function(e){ze(e,"relu");for(var r=kn(e.shape,e.dtype),a=this.readSync(r.dataId),o=this.readSync(e.dataId),u=0;u<o.length;++u)a[u]=Math.min(Math.max(0,o[u]),6);return r},n.prototype.prelu=function(e,r){return ze([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return a<0?o*a:a})},n.prototype.elu=function(e){ze(e,"elu");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var u=a[o];r[o]=u>=0?u:Math.exp(u)-1}return this.makeOutput(r,e.shape,"float32")},n.prototype.eluDer=function(e,r){ze([e,r],"eluDer");for(var a=new Float32Array(r.size),o=this.readSync(r.dataId),u=this.readSync(e.dataId),s=0;s<o.length;++s){var c=o[s];a[s]=c>=1?u[s]:u[s]*(c+1)}return this.makeOutput(a,r.shape,"float32")},n.prototype.selu=function(e){ze(e,"selu");for(var r=tb,a=nb,o=new Float32Array(e.size),u=this.readSync(e.dataId),s=0;s<u.length;++s){var c=u[s];o[s]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,r,a){ze(e,"clip");for(var o=new Float32Array(e.size),u=this.readSync(e.dataId),s=0;s<u.length;++s){var c=u[s];o[s]=c>a?a:c<r?r:c}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.abs(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<e.size;++o){var u=a[2*o],s=a[2*o+1];r[o]=Math.hypot(u,s)}return this.makeOutput(r,e.shape,"float32")},n.prototype.int=function(e){ze(e,"int");for(var r=new Int32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=a[o];return this.makeOutput(r,e.shape,"int32")},n.prototype.sigmoid=function(e){ze(e,"sigmoid");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=1/(1+Math.exp(-a[o]));return this.makeOutput(r,e.shape,"float32")},n.prototype.softplus=function(e){ze(e,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(e.size),o=this.readSync(e.dataId),u=0;u<o.length;++u){var s=o[u]>-r,c=o[u]<r,f=Math.exp(o[u]),h=void 0;h=c?f:s?o[u]:Math.log(1+f),a[u]=h}return this.makeOutput(a,e.shape,"float32")},n.prototype.sin=function(e){ze(e,"sin");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.sin(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cos=function(e){ze(e,"cos");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.cos(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tan=function(e){ze(e,"tan");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.tan(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asin=function(e){ze(e,"asin");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.asin(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acos=function(e){ze(e,"acos");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.acos(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan=function(e){ze(e,"atan");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.atan(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan2=function(e,r){return ze([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return Math.atan2(a,o)})},n.prototype.sinh=function(e){ze(e,"sinh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.sinh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cosh=function(e){ze(e,"cosh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.cosh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tanh=function(e){ze(e,"tanh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=SB(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asinh=function(e){ze(e,"asinh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.asinh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acosh=function(e){ze(e,"acosh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.acosh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atanh=function(e){ze(e,"atanh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.atanh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.erf=function(e){ze(e,"erf");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var u=Math.sign(a[o]),s=Math.abs(a[o]),c=1/(1+.3275911*s);r[o]=u*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-s*s))}return this.makeOutput(r,e.shape,"float32")},n.prototype.step=function(e,r){r===void 0&&(r=0),ze(e,"step");for(var a=new Float32Array(e.size),o=this.readSync(e.dataId),u=0;u<o.length;++u){var s=o[u];isNaN(s)?a[u]=NaN:a[u]=s>0?1:r}return this.makeOutput(a,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var r=e.input,a=e.filter,o=e.convInfo,u=e.bias,s=e.activation,c=e.preluActivationWeights,f=this.conv2d(r,a,o);return u&&(f=this.add(f,u)),s&&(f=ny(this,f,s,c)),f},n.prototype.conv2d=function(e,r,a){ze([e,r],"conv2d");for(var o=a.filterHeight,u=a.filterWidth,s=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,h=a.padInfo.top,p=a.dataFormat==="channelsLast",m=Mt(a.outShape,e.dtype),g=e.strides[0],x=p?e.strides[1]:e.strides[2],E=p?e.strides[2]:1,S=p?1:e.strides[1],_=m.strides[0],A=p?m.strides[1]:m.strides[2],T=p?m.strides[2]:1,N=p?1:m.strides[1],D=this.readSync(e.dataId),k=this.readSync(r.dataId),P=m.values,H=0;H<a.batchSize;++H)for(var U=H*g,j=H*_,G=0;G<a.outHeight;++G)for(var K=j+G*A,be=G*a.strideHeight-h,pe=0;pe<o;pe++){var he=be+pe*s;if(!(he<0||he>=a.inHeight))for(var q=pe*r.strides[0],ne=U+he*x,ee=0;ee<a.outWidth;++ee)for(var J=K+ee*T,L=ee*a.strideWidth-f,se=0;se<u;se++){var Re=L+se*c;if(!(Re<0||Re>=a.inWidth))for(var Se=ne+Re*E,je=q+se*r.strides[1],Xe=0;Xe<a.inChannels;++Xe){for(var Ve=D[Se+Xe*S],yt=0;yt<a.outChannels;++yt)P[J+yt*N]+=Ve*k[je+yt];je+=a.outChannels}}}return m.toTensor()},n.prototype.conv3d=function(e,r,a){for(var o=a.filterDepth,u=a.filterHeight,s=a.filterWidth,c=a.dilationDepth,f=a.dilationHeight,h=a.dilationWidth,p=a.padInfo.front,m=a.padInfo.left,g=a.padInfo.top,x=Mt(a.outShape,e.dtype),E=this.readSync(e.dataId),S=this.readSync(r.dataId),_=x.values,A=0;A<a.batchSize;++A)for(var T=A*e.strides[0],N=A*x.strides[0],D=0;D<a.outDepth;++D)for(var k=N+D*x.strides[1],P=D*a.strideDepth-p,H=0;H<o;H++){var U=P+H*c;if(!(U<0||U>=a.inDepth))for(var j=H*r.strides[0],G=T+U*e.strides[1],K=0;K<a.outHeight;++K)for(var be=k+K*x.strides[2],pe=K*a.strideHeight-g,he=0;he<u;he++){var q=pe+he*f;if(!(q<0||q>=a.inHeight))for(var ne=j+he*r.strides[1],ee=G+q*e.strides[2],J=0;J<a.outWidth;++J)for(var L=be+J*a.outChannels,se=J*a.strideWidth-m,Re=0;Re<s;Re++){var Se=se+Re*h;if(!(Se<0||Se>=a.inWidth))for(var je=ne+Re*r.strides[2],Xe=ee+Se*a.inChannels,Ve=je,yt=0;yt<a.inChannels;++yt){for(var ot=E[Xe+yt],He=0;He<a.outChannels;++He)_[L+He]+=ot*S[Ve+He];Ve+=a.outChannels}}}}return x.toTensor()},n.prototype.conv2dDerInput=function(e,r,a){ze([e,r],"conv2dDerInput");for(var o=Mt(a.inShape,"float32"),u=o.values,s=this.readSync(e.dataId),c=this.readSync(r.dataId),f=r.strides,h=f[0],p=f[1],m=f[2],g=a.batchSize,x=a.filterHeight,E=a.filterWidth,S=a.inChannels,_=a.inHeight,A=a.inWidth,T=a.outChannels,N=a.outHeight,D=a.outWidth,k=a.strideHeight,P=a.strideWidth,H=a.dataFormat,U=x-1-a.padInfo.top,j=E-1-a.padInfo.left,G=H==="channelsLast",K=o.strides[0],be=G?o.strides[1]:o.strides[2],pe=G?o.strides[2]:1,he=G?1:o.strides[1],q=e.strides[0],ne=G?e.strides[1]:e.strides[2],ee=G?e.strides[2]:1,J=G?1:e.strides[1],L=0;L<g;++L)for(var se=0;se<S;++se)for(var Re=0;Re<_;++Re)for(var Se=Re-U,je=Math.max(0,Math.ceil(Se/k)),Xe=Math.min(N,(x+Se)/k),Ve=0;Ve<A;++Ve){for(var yt=Ve-j,ot=Math.max(0,Math.ceil(yt/P)),He=Math.min(D,(E+yt)/P),kt=0,wt=je;wt<Xe;++wt)for(var it=wt*k-Se,It=ot;It<He;++It)for(var Qt=q*L+ne*wt+ee*It,Jt=h*(x-1-it)+p*(E-1-(It*P-yt))+m*se,cn=0;cn<T;++cn)kt+=s[Qt+J*cn]*c[Jt+cn];u[K*L+be*Re+pe*Ve+he*se]=kt}return o.toTensor()},n.prototype.conv3dDerInput=function(e,r,a){for(var o=Mt(a.inShape,"float32"),u=o.values,s=o.strides,c=s[0],f=s[1],h=s[2],p=s[3],m=this.readSync(e.dataId),g=e.strides,x=g[0],E=g[1],S=g[2],_=g[3],A=this.readSync(r.dataId),T=r.strides,N=T[0],D=T[1],k=T[2],P=T[3],H=a.batchSize,U=a.filterDepth,j=a.filterHeight,G=a.filterWidth,K=a.inChannels,be=a.inDepth,pe=a.inHeight,he=a.inWidth,q=a.outChannels,ne=a.outDepth,ee=a.outHeight,J=a.outWidth,L=a.strideDepth,se=a.strideHeight,Re=a.strideWidth,Se=U-1-a.padInfo.front,je=j-1-a.padInfo.top,Xe=G-1-a.padInfo.left,Ve=0;Ve<H;++Ve)for(var yt=0;yt<K;++yt)for(var ot=0;ot<be;++ot)for(var He=ot-Se,kt=Math.max(0,Math.ceil(He/L)),wt=Math.min(ne,(U+He)/L),it=0;it<pe;++it)for(var It=it-je,Qt=Math.max(0,Math.ceil(It/se)),Jt=Math.min(ee,(j+It)/se),cn=0;cn<he;++cn){for(var Sn=cn-Xe,Ur=Math.max(0,Math.ceil(Sn/Re)),Zn=Math.min(J,(G+Sn)/Re),aa=0,gn=kt;gn<wt;++gn)for(var qn=gn*L-He,Mn=Qt;Mn<Jt;++Mn)for(var ha=Mn*se-It,$n=Ur;$n<Zn;++$n)for(var _n=x*Ve+E*gn+S*Mn+_*$n,Vt=N*(U-1-qn)+D*(j-1-ha)+k*(G-1-($n*Re-Sn))+P*yt,Cn=0;Cn<q;++Cn)aa+=m[_n+Cn]*A[Vt+Cn];u[c*Ve+f*ot+h*it+p*cn+yt]=aa}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,r,a){ze([e,r],"conv2dDerFilter");for(var o=a.strideHeight,u=a.strideWidth,s=a.filterHeight,c=a.filterWidth,f=a.dataFormat==="channelsLast",h=Mt(a.filterShape,"float32"),p=a.padInfo.left,m=a.padInfo.top,g=this.bufferSync(e),x=this.bufferSync(r),E=0;E<s;++E)for(var S=Math.max(0,Math.ceil((m-E)/o)),_=Math.min(a.outHeight,(a.inHeight+m-E)/o),A=0;A<c;++A)for(var T=Math.max(0,Math.ceil((p-A)/u)),N=Math.min(a.outWidth,(a.inWidth+p-A)/u),D=0;D<a.inChannels;++D)for(var k=0;k<a.outChannels;++k){for(var P=0,H=0;H<a.batchSize;++H)for(var U=S;U<_;++U)for(var j=E+U*o-m,G=T;G<N;++G){var K=A+G*u-p;P+=f?g.get(H,j,K,D)*x.get(H,U,G,k):g.get(H,D,j,K)*x.get(H,k,U,G)}h.set(P,E,A,D,k)}return h.toTensor()},n.prototype.conv3dDerFilter=function(e,r,a){for(var o=a.strideDepth,u=a.strideHeight,s=a.strideWidth,c=a.filterDepth,f=a.filterHeight,h=a.filterWidth,p=Mt(a.filterShape,"float32"),m=p.values,g=p.strides,x=g[0],E=g[1],S=g[2],_=g[3],A=this.readSync(r.dataId),T=r.strides,N=T[0],D=T[1],k=T[2],P=T[3],H=this.readSync(e.dataId),U=e.strides,j=U[0],G=U[1],K=U[2],be=U[3],pe=a.padInfo.front,he=a.padInfo.left,q=a.padInfo.top,ne=0;ne<c;++ne)for(var ee=Math.max(0,Math.ceil((pe-ne)/o)),J=Math.min(a.outDepth,(a.inDepth+pe-ne)/o),L=ne*x,se=0;se<f;++se)for(var Re=Math.max(0,Math.ceil((q-se)/u)),Se=Math.min(a.outHeight,(a.inHeight+q-se)/u),je=se*E+L,Xe=0;Xe<h;++Xe)for(var Ve=Math.max(0,Math.ceil((he-Xe)/s)),yt=Math.min(a.outWidth,(a.inWidth+he-Xe)/s),ot=Xe*S+je,He=0;He<a.inChannels;++He)for(var kt=He*_+ot,wt=0;wt<a.outChannels;++wt){for(var it=0,It=0;It<a.batchSize;++It)for(var Qt=It*j,Jt=It*N,cn=ee;cn<J;++cn)for(var Sn=(ne+cn*o-pe)*G+Qt,Ur=cn*D+Jt,Zn=Re;Zn<Se;++Zn)for(var aa=(se+Zn*u-q)*K+Sn,gn=Zn*k+Ur,qn=Ve;qn<yt;++qn){var Mn=qn*P+gn;it+=H[(Xe+qn*s-he)*be+aa+He]*A[Mn+wt]}m[kt+wt]=it}return p.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var r=e.input,a=e.filter,o=e.convInfo,u=e.bias,s=e.activation,c=e.preluActivationWeights,f=this.depthwiseConv2D(r,a,o);return u&&(f=this.add(f,u)),s&&(f=ny(this,f,s,c)),f},n.prototype.depthwiseConv2D=function(e,r,a){ze([e,r],"depthwiseConv2D");for(var o=a.filterHeight,u=a.filterWidth,s=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,h=a.padInfo.top,p=a.outChannels/a.inChannels,m=Mt(a.outShape,e.dtype),g=this.readSync(e.dataId),x=this.readSync(r.dataId),E=m.values,S=0;S<a.batchSize;++S)for(var _=S*e.strides[0],A=S*m.strides[0],T=0;T<a.outHeight;++T)for(var N=A+T*m.strides[1],D=T*a.strideHeight-f,k=0;k<o;++k){var P=D+k*s;if(!(P<0||P>=a.inHeight))for(var H=k*r.strides[0],U=_+P*e.strides[1],j=0;j<a.outWidth;++j)for(var G=N+j*m.strides[2],K=j*a.strideWidth-h,be=0;be<u;++be){var pe=K+be*c;if(!(pe<0||pe>=a.inWidth))for(var he=H+be*r.strides[1],q=U+pe*a.inChannels,ne=G,ee=he,J=0;J<a.inChannels;++J){for(var L=g[q+J],se=0;se<p;++se)E[ne+se]+=L*x[ee+se];ne+=p,ee+=p}}}return m.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,r,a){ze([e,r],"depthwiseConv2DDerInput");for(var o=Mt(a.inShape,"float32"),u=o.values,s=o.strides,c=s[0],f=s[1],h=s[2],p=this.readSync(e.dataId),m=e.strides,g=m[0],x=m[1],E=m[2],S=this.readSync(r.dataId),_=r.strides,A=_[0],T=_[1],N=_[2],D=a.batchSize,k=a.filterHeight,P=a.filterWidth,H=a.inChannels,U=a.inHeight,j=a.inWidth,G=a.outChannels,K=a.outHeight,be=a.outWidth,pe=a.strideHeight,he=a.strideWidth,q=k-1-a.padInfo.top,ne=P-1-a.padInfo.left,ee=G/H,J=0;J<D;++J)for(var L=0;L<H;++L)for(var se=0;se<U;++se)for(var Re=se-q,Se=Math.max(0,Math.ceil(Re/pe)),je=Math.min(K,(k+Re)/pe),Xe=0;Xe<j;++Xe){for(var Ve=Xe-ne,yt=Math.max(0,Math.ceil(Ve/he)),ot=Math.min(be,(P+Ve)/he),He=0,kt=Se;kt<je;++kt)for(var wt=kt*pe-Re,it=yt;it<ot;++it)for(var It=g*J+x*kt+E*it,Qt=A*(k-1-wt)+T*(P-1-(it*he-Ve))+N*L,Jt=0;Jt<ee;++Jt)He+=p[It+(L*ee+Jt)]*S[Qt+Jt];u[c*J+f*se+h*Xe+L]=He}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,r,a){ze([e,r],"depthwiseConv2DDerFilter");for(var o=a.strideHeight,u=a.strideWidth,s=a.filterHeight,c=a.filterWidth,f=Mt(a.filterShape,"float32"),h=a.padInfo.left,p=a.padInfo.top,m=a.outChannels/a.inChannels,g=this.bufferSync(e),x=this.bufferSync(r),E=0;E<s;++E)for(var S=Math.max(0,Math.ceil((p-E)/o)),_=Math.min(a.outHeight,(a.inHeight+p-E)/o),A=0;A<c;++A)for(var T=Math.max(0,Math.ceil((h-A)/u)),N=Math.min(a.outWidth,(a.inWidth+h-A)/u),D=0;D<a.outChannels;++D){for(var k=Math.trunc(D/m),P=D%m,H=0,U=0;U<a.batchSize;++U)for(var j=S;j<_;++j)for(var G=E+j*o-p,K=T;K<N;++K){var be=A+K*u-h;H+=g.get(U,G,be,k)*x.get(U,j,K,D)}f.set(H,E,A,k,P)}return f.toTensor()},n.prototype.tile=function(e,r){return ze(e,"tile"),gR(this.bufferSync(e),r)},n.prototype.pad=function(e,r,a){ze(e,"pad");var o=r.map(function(m,g){return m[0]+e.shape[g]+m[1]}),u=r.map(function(m){return m[0]}),s=this.bufferSync(e),c=Mt(o,e.dtype);a!==0&&c.values.fill(a);for(var f=0;f<e.size;f++){var h=s.indexToLoc(f),p=h.map(function(m,g){return m+u[g]});c.set.apply(c,[s.get.apply(s,h)].concat(p))}return c.toTensor()},n.prototype.transpose=function(e,r){ze(e,"transpose");for(var a=new Array(e.rank),o=0;o<a.length;o++)a[o]=e.shape[r[o]];var u=this.readSync(e.dataId),s=Mt(a,e.dtype),c=this.bufferSync(e);for(o=0;o<e.size;++o){for(var f=c.indexToLoc(o),h=new Array(f.length),p=0;p<h.length;p++)h[p]=f[r[p]];var m=s.locToIndex(h);s.values[m]=u[o]}return s.toTensor()},n.prototype.gather=function(e,r,a){ze([e,r],"gather");var o=e.shape.slice(),u=this.readSync(r.dataId);o[a]=u.length;for(var s=Mt(o,e.dtype),c=this.bufferSync(e),f=0;f<s.size;++f){var h=s.indexToLoc(f),p=h.slice();p[a]=u[h[a]];var m=c.locToIndex(p);s.values[f]=c.values[m]}return s.toTensor()},n.prototype.batchToSpaceND=function(e,r,a){ze([e],"batchToSpaceND");var o=r.reduce(function(p,m){return p*m}),u=Dp(e.shape,r,o),s=Np(u.length,r.length),c=kp(e.shape,r,o),f=aR(a,r.length),h=oR(c,a,r.length);return e.reshape(u).transpose(s).reshape(c).slice(f,h)},n.prototype.spaceToBatchND=function(e,r,a){ze([e],"spaceToBatchND");var o=r.reduce(function(m,g){return m*g}),u=[[0,0]];u.push.apply(u,a);for(var s=1+r.length;s<e.shape.length;++s)u.push([0,0]);var c=e.pad(u),f=Dp(c.shape,r,o,!1),h=Np(f.length,r.length,!1),p=kp(c.shape,r,o,!1);return c.reshape(f).transpose(h).reshape(p)},n.prototype.pool=function(e,r,a){ze(e,"pool");for(var o=r.strideHeight,u=r.strideWidth,s=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(e.dataId),E=Mt(r.outShape,e.dtype),S=E.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3],A=r.outShape[2]*r.outShape[3],T=r.outShape[3],N=0;N<r.batchSize;++N)for(var D=N*_,k=N*e.strides[0],P=0;P<r.inChannels;++P)for(var H=0;H<r.outHeight;++H)for(var U=H*o-p,j=Math.max(0,U),G=Math.min(r.inHeight,f+U),K=D+H*A,be=0;be<r.outWidth;++be){for(var pe=be*u-m,he=Math.max(0,pe),q=Math.min(r.inWidth,h+pe),ne=g,ee=0,J=0,L=j;L<G;L+=s){for(var se=k+L*e.strides[1],Re=he;Re<q;Re+=c){var Se=x[se+Re*e.strides[2]+P];a==="max"&&Se>ne?ne=Se:a==="avg"&&(ee+=Se,J++)}if(isNaN(ne))break}S[K+be*T+P]=a==="avg"?ee/J:ne}return E.toTensor()},n.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},n.prototype.maxPoolPositions=function(e,r){for(var a=Mt(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,s=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,g=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var E=0;E<r.inChannels;++E)for(var S=0;S<r.outHeight;++S){for(var _=S*o-p,A=_;A<0;)A+=s;for(var T=Math.min(r.inHeight,f+_),N=0;N<r.outWidth;++N){for(var D=N*u-m,k=D;k<0;)k+=c;for(var P=Math.min(r.inWidth,h+D),H=Number.NEGATIVE_INFINITY,U=-1,j=A;j<T;j+=s)for(var G=j-_,K=k;K<P;K+=c){var be=K-D,pe=g.get(x,j,K,E);pe>H&&(H=pe,U=G*h+be)}a.set(U,x,S,N,E)}}return a.toTensor()},n.prototype.maxPoolBackprop=function(e,r,a,o){ze([r,a],"maxPoolBackprop");for(var u=this.maxPoolPositions(r,o),s=o.strideHeight,c=o.strideWidth,f=o.dilationHeight,h=o.dilationWidth,p=o.effectiveFilterHeight,m=o.effectiveFilterWidth,g=m-1-o.padInfo.left,x=p-1-o.padInfo.top,E=Mt(r.shape,"float32"),S=this.bufferSync(u),_=this.bufferSync(e),A=0;A<o.batchSize;++A)for(var T=0;T<o.inChannels;++T)for(var N=0;N<o.inHeight;++N)for(var D=0;D<o.inWidth;++D){for(var k=N-x,P=D-g,H=0,U=0;U<p;U+=f){var j=(k+U)/s;if(!(j<0||j>=o.outHeight||Math.floor(j)!==j))for(var G=0;G<m;G+=h){var K=(P+G)/c;if(!(K<0||K>=o.outWidth||Math.floor(K)!==K)){var be=p*m-1-S.get(A,j,K,T)===U*m+G?1:0;be!==0&&(H+=_.get(A,j,K,T)*be)}}}E.set(H,A,N,D,T)}return E.toTensor()},n.prototype.avgPoolBackprop=function(e,r,a){ze([e,r],"avgPoolBackprop");for(var o=a.strideHeight,u=a.strideWidth,s=a.filterHeight,c=a.filterWidth,f=a.dilationHeight,h=a.dilationWidth,p=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=m-1-a.padInfo.left,x=p-1-a.padInfo.top,E=Mt(r.shape,"float32"),S=1/(s*c),_=this.bufferSync(e),A=0;A<a.batchSize;++A)for(var T=0;T<a.inChannels;++T)for(var N=0;N<a.inHeight;++N)for(var D=0;D<a.inWidth;++D){for(var k=N-x,P=D-g,H=0,U=0;U<p;U+=f){var j=(k+U)/o;if(!(j<0||j>=a.outHeight||Math.floor(j)!==j))for(var G=0;G<m;G+=h){var K=(P+G)/u;K<0||K>=a.outWidth||Math.floor(K)!==K||(H+=_.get(A,j,K,T))}}E.set(H*S,A,N,D,T)}return E.toTensor()},n.prototype.pool3d=function(e,r,a){ze(e,"pool3d");for(var o=r.strideDepth,u=r.strideHeight,s=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,h=r.dilationWidth,p=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,x=r.padInfo.front,E=r.padInfo.top,S=r.padInfo.left,_=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=this.readSync(e.dataId),T=Mt(r.outShape,e.dtype),N=T.values,D=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[2]*r.outShape[3]*r.outShape[4],P=r.outShape[3]*r.outShape[4],H=r.outShape[4],U=0;U<r.batchSize;++U)for(var j=U*D,G=U*e.strides[0],K=0;K<r.inChannels;++K)for(var be=0;be<r.outDepth;++be){for(var pe=be*o-x,he=pe;he<0;)he+=c;for(var q=Math.min(r.inDepth,p+pe),ne=j+be*k,ee=0;ee<r.outHeight;++ee){for(var J=ee*u-E,L=J;L<0;)L+=f;for(var se=Math.min(r.inHeight,m+J),Re=ne+ee*P,Se=0;Se<r.outWidth;++Se){for(var je=Se*s-S,Xe=je;Xe<0;)Xe+=h;for(var Ve=Math.min(r.inWidth,g+je),yt=Re+Se*H,ot=_,He=0,kt=0,wt=he;wt<q;wt+=c){for(var it=G+wt*e.strides[1],It=L;It<se;It+=f){for(var Qt=it+It*e.strides[2],Jt=Xe;Jt<Ve;Jt+=h){var cn=A[Qt+Jt*e.strides[3]+K];if(a==="max"&&cn>ot?ot=cn:a==="avg"&&(He+=cn,kt++),isNaN(ot))break}if(isNaN(ot))break}if(isNaN(ot))break}N[yt+K]=a==="avg"?He/kt:ot}}}return T.toTensor()},n.prototype.avgPool3d=function(e,r){return ze(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,r,a){ze([e,r],"avgPool3dBackprop");for(var o=a.strideDepth,u=a.strideHeight,s=a.strideWidth,c=a.filterDepth,f=a.filterHeight,h=a.filterWidth,p=a.dilationDepth,m=a.dilationHeight,g=a.dilationWidth,x=a.effectiveFilterDepth,E=a.effectiveFilterHeight,S=a.effectiveFilterWidth,_=x-1-a.padInfo.front,A=S-1-a.padInfo.left,T=E-1-a.padInfo.top,N=Mt(r.shape,"float32"),D=1/(c*f*h),k=this.bufferSync(e),P=0;P<a.batchSize;++P)for(var H=0;H<a.inChannels;++H)for(var U=0;U<a.inDepth;++U)for(var j=0;j<a.inHeight;++j)for(var G=0;G<a.inWidth;++G){for(var K=U-_,be=j-T,pe=G-A,he=0,q=0;q<x;q+=p){var ne=(K+q)/o;if(!(ne<0||ne>=a.outDepth||Math.floor(ne)!==ne))for(var ee=0;ee<E;ee+=m){var J=(be+ee)/u;if(!(J<0||J>=a.outHeight||Math.floor(J)!==J))for(var L=0;L<S;L+=g){var se=(pe+L)/s;se<0||se>=a.outWidth||Math.floor(se)!==se||(he+=k.get(P,ne,J,se,H))}}}N.set(he*D,P,U,j,G,H)}return N.toTensor()},n.prototype.maxPool3d=function(e,r){return ze(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,r){for(var a=Mt(r.outShape,"int32"),o=r.strideDepth,u=r.strideHeight,s=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,h=r.dilationWidth,p=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,x=r.padInfo.front,E=r.padInfo.top,S=r.padInfo.left,_=this.bufferSync(e),A=0;A<r.batchSize;++A)for(var T=0;T<r.inChannels;++T)for(var N=0;N<r.outDepth;++N){for(var D=N*o-x,k=D;k<0;)k+=c;for(var P=Math.min(r.inDepth,p+D),H=0;H<r.outHeight;++H){for(var U=H*u-E,j=U;j<0;)j+=f;for(var G=Math.min(r.inHeight,m+U),K=0;K<r.outWidth;++K){for(var be=K*s-S,pe=be;pe<0;)pe+=h;for(var he=Math.min(r.inWidth,g+be),q=Number.NEGATIVE_INFINITY,ne=-1,ee=k;ee<P;ee+=c)for(var J=ee-D,L=j;L<G;L+=f)for(var se=L-U,Re=pe;Re<he;Re+=h){var Se=Re-be,je=_.get(A,ee,L,Re,T);je>=q&&(q=je,ne=J*m*g+se*m+Se)}a.set(ne,A,N,H,K,T)}}}return a.toTensor()},n.prototype.maxPool3dBackprop=function(e,r,a,o){ze([r,a],"maxPool3dBackprop");for(var u=this.maxPool3dPositions(r,o),s=o.strideDepth,c=o.strideHeight,f=o.strideWidth,h=o.dilationDepth,p=o.dilationHeight,m=o.dilationWidth,g=o.effectiveFilterDepth,x=o.effectiveFilterHeight,E=o.effectiveFilterWidth,S=g-1-o.padInfo.front,_=E-1-o.padInfo.left,A=x-1-o.padInfo.top,T=Mt(r.shape,"float32"),N=this.bufferSync(u),D=this.bufferSync(e),k=0;k<o.batchSize;++k)for(var P=0;P<o.inChannels;++P)for(var H=0;H<o.inDepth;++H)for(var U=0;U<o.inHeight;++U)for(var j=0;j<o.inWidth;++j){for(var G=H-S,K=U-A,be=j-_,pe=0,he=0;he<g;he+=h){var q=(G+he)/s;if(!(q<0||q>=o.outDepth||Math.floor(q)!==q))for(var ne=0;ne<x;ne+=p){var ee=(K+ne)/c;if(!(ee<0||ee>=o.outHeight||Math.floor(ee)!==ee))for(var J=0;J<E;J+=m){var L=(be+J)/f;if(!(L<0||L>=o.outWidth||Math.floor(L)!==L)){var se=g*x*E-1-N.get(k,q,ee,L,P)===he*x*E+ne*E+J?1:0;se!==0&&(pe+=D.get(k,q,ee,L,P)*se)}}}}T.set(pe,k,H,U,j,P)}return T.toTensor()},n.prototype.cast=function(e,r){return hR(e,r,this)},n.prototype.reshape=function(e,r){return Yy(e,r)},n.prototype.avgPool=function(e,r){return ze(e,"avgPool"),this.pool(e,r,"avg").toFloat()},n.prototype.resizeBilinear=function(e,r,a,o){ze(e,"resizeBilinear");for(var u=e.shape,s=u[0],c=u[1],f=u[2],h=u[3],p=this.readSync(e.dataId),m=new Float32Array(ct([s,r,a,h])),g=[o&&r>1?c-1:c,o&&a>1?f-1:f],x=[o&&r>1?r-1:r,o&&a>1?a-1:a],E=0,S=g[0]/x[0],_=g[1]/x[1],A=0;A<s;A++)for(var T=0;T<r;T++)for(var N=S*T,D=Math.floor(N),k=N-D,P=Math.min(c-1,Math.ceil(N)),H=A*e.strides[0]+D*e.strides[1],U=A*e.strides[0]+P*e.strides[1],j=0;j<a;j++)for(var G=_*j,K=Math.floor(G),be=G-K,pe=Math.min(f-1,Math.ceil(G)),he=H+K*e.strides[2],q=U+K*e.strides[2],ne=H+pe*e.strides[2],ee=U+pe*e.strides[2],J=0;J<h;J++){var L=p[he+J],se=p[q+J],Re=L+(p[ne+J]-L)*be,Se=Re+(se+(p[ee+J]-se)*be-Re)*k;m[E++]=Se}return Lr(m,[s,r,a,h])},n.prototype.resizeBilinearBackprop=function(e,r,a){ze([e,r],"resizeBilinearBackprop");for(var o=r.shape,u=o[0],s=o[1],c=o[2],f=o[3],h=e.shape,p=h[1],m=h[2],g=new Float32Array(u*s*c*f),x=[a&&p>1?s-1:s,a&&m>1?c-1:c],E=[a&&p>1?p-1:p,a&&m>1?m-1:m],S=x[0]/E[0],_=x[1]/E[1],A=this.readSync(e.dataId),T=0,N=0;N<u;N++)for(var D=N*r.strides[0],k=0;k<p;k++)for(var P=k*S,H=Math.floor(P),U=Math.min(Math.ceil(P),s-1),j=D+H*r.strides[1],G=D+U*r.strides[1],K=P-H,be=1-K,pe=0;pe<m;pe++)for(var he=pe*_,q=Math.floor(he),ne=Math.min(Math.ceil(he),c-1),ee=he-q,J=1-ee,L=j+q*r.strides[2],se=j+ne*r.strides[2],Re=G+q*r.strides[2],Se=G+ne*r.strides[2],je=be*J,Xe=be*ee,Ve=K*J,yt=K*ee,ot=0;ot<f;ot++){var He=A[T++];g[L+ot]+=He*je,g[se+ot]+=He*Xe,g[Re+ot]+=He*Ve,g[Se+ot]+=He*yt}return xa(g,[u,c,s,f],r.dtype)},n.prototype.resizeNearestNeighbor=function(e,r,a,o){ze(e,"resizeNearestNeighbor");for(var u=e.shape,s=u[0],c=u[1],f=u[2],h=u[3],p=this.readSync(e.dataId),m=new Float32Array(s*r*a*h),g=[o&&r>1?c-1:c,o&&a>1?f-1:f],x=[o&&r>1?r-1:r,o&&a>1?a-1:a],E=g[0]/x[0],S=g[1]/x[1],_=0,A=0;A<s;A++)for(var T=A*e.strides[0],N=0;N<r;N++)for(var D=E*N,k=T+Math.min(c-1,o?Math.round(D):Math.floor(D))*e.strides[1],P=0;P<a;P++)for(var H=S*P,U=k+Math.min(f-1,o?Math.round(H):Math.floor(H))*e.strides[2],j=0;j<h;j++){var G=p[U+j];m[_++]=G}return Lr(m,[s,r,a,h],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,r,a){ze([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,u=o[0],s=o[1],c=o[2],f=o[3],h=e.shape,p=h[1],m=h[2],g=new Float32Array(u*s*c*f),x=this.readSync(e.dataId),E=[a&&p>1?s-1:s,a&&m>1?c-1:c],S=[a&&p>1?p-1:p,a&&m>1?m-1:m],_=E[0]/S[0],A=E[1]/S[1],T=1/_,N=1/A,D=2*Math.ceil(T)+2,k=2*Math.ceil(N)+2,P=0;P<u;P++)for(var H=P*r.strides[0],U=0;U<s;U++)for(var j=H+U*r.strides[1],G=Math.floor(U*T),K=Math.floor(G-D/2),be=0;be<c;be++)for(var pe=j+be*r.strides[2],he=Math.floor(be*N),q=Math.floor(he-k/2),ne=0;ne<f;ne++){for(var ee=0,J=0;J<D;J++){var L=J+K;if(!(L<0||L>=p)){var se=H+L*e.strides[1],Re=L*_;if(U===Math.min(s-1,a?Math.round(Re):Math.floor(Re)))for(var Se=0;Se<k;Se++){var je=Se+q;if(!(je<0||je>=m)){var Xe=se+je*e.strides[2],Ve=je*A;be===Math.min(c-1,a?Math.round(Ve):Math.floor(Ve))&&(ee+=x[Xe+ne])}}}}g[pe+ne]=ee}return xa(g,r.shape,r.dtype)},n.prototype.batchNormalization=function(e,r,a,o,u,s){ze([e,r,a,u,s],"batchNorm");for(var c=this.readSync(e.dataId),f=this.readSync(r.dataId),h=this.readSync(a.dataId),p=u?this.readSync(u.dataId):new Float32Array([1]),m=s?this.readSync(s.dataId):new Float32Array([0]),g=new Float32Array(c.length),x=m.length,E=p.length,S=h.length,_=f.length,A=0,T=0,N=0,D=0,k=0;k<c.length;++k)g[k]=m[A++]+(c[k]-f[T++])*p[N++]/Math.sqrt(h[D++]+o),A>=x&&(A=0),T>=_&&(T=0),N>=E&&(N=0),D>=S&&(D=0);return xa(g,e.shape)},n.prototype.localResponseNormalization4D=function(e,r,a,o,u){ze(e,"localResponseNormalization4D");var s=e.shape[3],c=s-1,f=this.readSync(e.dataId),h=e.size,p=new Float32Array(h);function m(S){for(var _=S%s,A=S-_+Math.max(0,_-r),T=S-_+Math.min(_+r,c),N=0;A<=T;A++){var D=f[A];N+=D*D}return N}for(var g=0;g<h;g++){var x=m(g),E=f[g]*Math.pow(a+o*x,-u);p[g]=E}return xa(p,e.shape)},n.prototype.LRNGrad=function(e,r,a,o,u,s,c){ze(e,"LRNGrad");for(var f=e.shape[3],h=this.readSync(e.dataId),p=this.readSync(r.dataId),m=this.readSync(a.dataId),g=new Float32Array(e.size),x=e.size,E=0;E<x;E++){for(var S=E%f,_=E-S+Math.max(0,S-o),A=E-S+Math.min(f,S+o+1),T=0,N=_;N<A;N++)T+=Math.pow(p[N],2);for(T=s*T+u,N=_;N<A;N++){var D=-2*s*c*p[N]*m[E]/T;E===N&&(D+=Math.pow(T,-c)),D*=h[E],g[N]+=D}}return xa(g,e.shape)},n.prototype.multinomial=function(e,r,a,o){ze(e,"multinomial");for(var u=r?e:ji(e),s=u.shape[0],c=u.shape[1],f=kn([s,a],"int32"),h=this.readSync(f.dataId),p=this.readSync(u.dataId),m=0;m<s;++m){var g=m*c,x=new Float32Array(c-1);x[0]=p[g];for(var E=1;E<x.length;++E)x[E]=x[E-1]+p[g+E];for(var S=fv(o.toString()),_=m*a,A=0;A<a;++A){var T=S();h[_+A]=x.length;for(var N=0;N<x.length;N++)if(T<x[N]){h[_+A]=N;break}}}return f},n.prototype.oneHot=function(e,r,a,o){ze(e,"oneHot");var u=new Float32Array(e.size*r);u.fill(o);for(var s=this.readSync(e.dataId),c=0;c<e.size;++c)s[c]>=0&&s[c]<r&&(u[c*r+s[c]]=a);return Lu(u,[e.size,r],"int32")},n.prototype.nonMaxSuppression=function(e,r,a,o,u){return ze(e,"nonMaxSuppression"),Q0(this.readSync(e.dataId),this.readSync(r.dataId),a,o,u)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,r){for(var a=e.shape[0],o=e.shape[1],u=Mt(e.shape,"float32"),s=Mt(e.shape,"float32"),c=ro(e).as2D(a,o),f=Ho(e).as2D(a,o),h=0;h<a;h++)for(var p=c.slice([h,0],[1,o]),m=f.slice([h,0],[1,o]),g=Fr(p,m),x=this.readSync(this.fftImpl(g,r).dataId),E=0;E<o;E++){var S=NE(x,E);u.values[h*o+E]=S.real,s.values[h*o+E]=S.imag}return Fr(u.toTensor(),s.toTensor()).as2D(a,o)},n.prototype.fftImpl=function(e,r){var a=e.as1D(),o=a.size;if(this.isExponentOf2(o)){var u=this.fftRadix2(a,o,r).as2D(e.shape[0],e.shape[1]);return r&&(u=Fr(ro(u).div(Je(o)),Ho(u).div(Je(o)))),u}var s=this.readSync(e.dataId),c=function(f){for(var h=new Float32Array(f.length/2),p=new Float32Array(f.length/2),m=0;m<f.length;m+=2)h[m/2]=f[m],p[m/2]=f[m+1];return{real:h,imag:p}}(this.fourierTransformByMatmul(s,o,r));return Fr(c.real,c.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return(e&e-1)==0},n.prototype.fftRadix2=function(e,r,a){if(r===1)return e;var o=this.readSync(e.dataId),u=r/2,s=function(_){for(var A=Math.ceil(_.length/4),T=new Float32Array(A),N=new Float32Array(A),D=0;D<_.length;D+=4)T[Math.floor(D/4)]=_[D],N[Math.floor(D/4)]=_[D+1];return{real:T,imag:N}}(o),c=Fr(s.real,s.imag).as1D(),f=function(_){for(var A=Math.floor(_.length/4),T=new Float32Array(A),N=new Float32Array(A),D=2;D<_.length;D+=4)T[Math.floor(D/4)]=_[D],N[Math.floor(D/4)]=_[D+1];return{real:T,imag:N}}(o),h=Fr(f.real,f.imag).as1D();c=this.fftRadix2(c,u,a),h=this.fftRadix2(h,u,a);var p=function(_,A){for(var T=new Float32Array(_/2),N=new Float32Array(_/2),D=0;D<Math.ceil(_/2);D++){var k=(A?2:-2)*Math.PI*(D/_);T[D]=Math.cos(k),N[D]=Math.sin(k)}return{real:T,imag:N}}(r,a),m=Fr(p.real,p.imag).mul(h),g=c.add(m),x=c.sub(m),E=ro(g).concat(ro(x)),S=Ho(g).concat(Ho(x));return Fr(E,S).as1D()},n.prototype.fourierTransformByMatmul=function(e,r,a){for(var o=new Float32Array(2*r),u=0;u<r;u++){for(var s=0,c=0,f=0;f<r;f++){var h=nL(u*f,r,a),p=NE(e,f);s+=p.real*h.real-p.imag*h.imag,c+=p.real*h.imag+p.imag*h.real}a&&(s/=r,c/=r),tL(o,s,c,u)}return o},n.prototype.depthToSpace=function(e,r,a){$(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),$(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=e.shape[0],u=e.shape[1],s=e.shape[2],c=e.shape[3],f=u*r,h=s*r,p=c/(r*r),m=this.readSync(e.dataId),g=new Float32Array(o*f*h*p),x=0,E=0;E<o;++E)for(var S=0;S<f;++S)for(var _=Math.floor(S/r),A=S%r,T=0;T<h;++T)for(var N=Math.floor(T/r),D=(A*r+T%r)*p,k=0;k<p;++k){var P=k+D+c*(N+s*(_+u*E));g[x++]=m[P]}return xa(g,[o,f,h,p])},n.prototype.broadcastedBinaryOp=function(e,r,a,o){var u=Yt(e.shape,r.shape),s=Mt(u,a),c=this.readSync(e.dataId),f=this.readSync(r.dataId),h=Fu(e.shape,u),p=Fu(r.shape,u),m=s.values;if(h.length+p.length===0)for(var g=0;g<m.length;++g)m[g]=o(c[g%c.length],f[g%f.length]);else{var x=this.bufferSync(e),E=this.bufferSync(r),S=function(_){var A=s.indexToLoc(_),T=A.slice(-e.rank);h.forEach(function(P){return T[P]=0});var N=x.locToIndex(T),D=A.slice(-r.rank);p.forEach(function(P){return D[P]=0});var k=E.locToIndex(D);m[_]=o(c[N],f[k])};for(g=0;g<m.length;++g)S(g)}return s.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,r,a){var o=Yt(e.shape,r.shape),u=Mt(o,"float32"),s=Mt(o,"float32"),c=this.readSync(e.dataId),f=this.readSync(r.dataId),h=Fu(e.shape,o),p=Fu(r.shape,o),m=u.values,g=s.values;if(h.length+p.length===0)for(var x=0;x<m.length;x++){var E=x%c.length,S=x%f.length,_=a(c[2*E],c[2*E+1],f[2*S],f[2*S+1]);m[x]=_.real,g[x]=_.imag}else{var A=this.bufferSync(this.data.get(e.dataId).complexTensors.real),T=this.bufferSync(this.data.get(r.dataId).complexTensors.real),N=function(D){var k=u.indexToLoc(D),P=k.slice(-e.rank);h.forEach(function(K){return P[K]=0});var H=A.locToIndex(P),U=k.slice(-r.rank);p.forEach(function(K){return U[K]=0});var j=T.locToIndex(U),G=a(c[2*H],c[2*H+1],f[2*j],f[2*j+1]);m[D]=G.real,g[D]=G.imag};for(x=0;x<m.length;x++)N(x)}return this.complex(u.toTensor(),s.toTensor())},n.prototype.split=function(e,r,a){return mR(e,r,a)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,r,a,o,u,s){for(var c=e.shape,f=c[0],h=c[1],p=c[2],m=c[3],g=r.shape[0],x=o[0],E=o[1],S=Mt([g,x,E,m],"float32"),_=this.readSync(r.dataId),A=this.readSync(a.dataId),T=this.readSync(e.dataId),N=e.strides,D=S.strides,k=0;k<g;k++){var P=4*k,H=_[P],U=_[P+1],j=_[P+2],G=_[P+3],K=A[k];if(!(K>=f))for(var be=x>1?(j-H)*(h-1)/(x-1):0,pe=E>1?(G-U)*(p-1)/(E-1):0,he=0;he<x;he++){var q=x>1?H*(h-1)+he*be:.5*(H+j)*(h-1);if(q<0||q>h-1)for(var ne=0;ne<E;ne++)for(var ee=0;ee<m;ee++){var J=ee+ne*D[2]+he*D[1]+k*D[0];S.values[J]=s}else if(u==="bilinear"){var L=Math.floor(q),se=Math.ceil(q),Re=q-L;for(ne=0;ne<E;ne++)if((wt=E>1?U*(p-1)+ne*pe:.5*(U+G)*(p-1))<0||wt>p-1)for(ee=0;ee<m;ee++)J=ee+ne*D[2]+he*D[1]+k*D[0],S.values[J]=s;else{var Se=Math.floor(wt),je=Math.ceil(wt),Xe=wt-Se;for(ee=0;ee<m;ee++){var Ve=T[J=ee+Se*N[2]+L*N[1]+K*N[0]],yt=T[J=ee+je*N[2]+L*N[1]+K*N[0]],ot=T[J=ee+Se*N[2]+se*N[1]+K*N[0]],He=Ve+(yt-Ve)*Xe,kt=ot+(T[J=ee+je*N[2]+se*N[1]+K*N[0]]-ot)*Xe;J=ee+ne*D[2]+he*D[1]+k*D[0],S.values[J]=He+(kt-He)*Re}}}else for(ne=0;ne<E;++ne){var wt;if((wt=E>1?U*(p-1)+ne*pe:.5*(U+G)*(p-1))<0||wt>p-1)for(ee=0;ee<m;ee++)J=ee+ne*D[2]+he*D[1]+k*D[0],S.values[J]=s;else{var it=Math.round(wt),It=Math.round(q);for(ee=0;ee<m;ee++){var Qt=ee+it*N[2]+It*N[1]+K*N[0],Jt=ee+ne*D[2]+he*D[1]+k*D[0];S.values[Jt]=T[Qt]}}}}}return S.toTensor()},n.prototype.sparseToDense=function(e,r,a,o){var u=Op(0,e,a),s=u.sliceRank,c=u.numUpdates,f=u.sliceSize,h=u.strides,p=u.outputSize;return this.scatter(e,r,a,p,f,c,s,h,o,!1)},n.prototype.gatherND=function(e,r){var a=r.shape,o=a[a.length-1],u=iR(e,r),s=u[0],c=u[1],f=u[2],h=u[3];if(c===0)return Lr([],s,e.dtype);for(var p=new Kf([c,f],e.dtype),m=this.readSync(r.dataId),g=this.readSync(e.dataId),x=0;x<c;x++){for(var E=[],S=0,_=0;_<o;_++){var A=m[x*o+_];S+=A*h[_],E.push(A)}if(S<0||S>=e.size/f)throw new Error("Invalid indices: "+E+" does not index into "+e.shape);for(var T=0;T<f;T++)p.values[x*f+T]=g[S*f+T]}return p.toTensor().reshape(s)},n.prototype.scatterND=function(e,r,a){var o=Op(0,e,a),u=o.sliceRank,s=o.numUpdates,c=o.sliceSize,f=o.strides,h=o.outputSize,p=Je(0);return this.scatter(e,r,a,h,c,s,u,f,p,!0)},n.prototype.fill=function(e,r,a){var o=Ep(a=a||cd(r),ct(e));return o.fill(r),ce.makeTensor(o,e,a,this)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var r=Ep(e.dtype,ct(e.shape));return this.makeOutput(r,e.shape,e.dtype)},n.prototype.linspace=function(e,r,a){return pR(e,r,a)},n.prototype.scatter=function(e,r,a,o,u,s,c,f,h,p){var m=[o/u,u],g=this.readSync(e.dataId),x=this.readSync(r.dataId);if(o===0)return Lr([],a,r.dtype);var E=new Kf(m,r.dtype);E.values.fill(this.readSync(h.dataId)[0]);for(var S=0;S<s;S++){for(var _=[],A=0,T=0;T<c;T++){var N=g[S*c+T];_.push(N),A+=N*f[T]}if(A<0||A>=o/u)throw new Error("Invalid indices: "+_+" does not index into "+a);for(var D=0;D<u;D++)p?E.values[A*u+D]+=x[S*u+D]:E.values[A*u+D]=r.rank===0?x[0]:x[S*u+D]}return E.toTensor().reshape(a)},n}(fR);ce.registerBackend("cpu",function(){return new Ej},1);for(var ry=0,ZE=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs,a=n,o=a.boxes,u=a.scores,s=r,c=s.maxOutputSize,f=s.iouThreshold,h=s.scoreThreshold,p=s.softNmsSigma,m=e;ze(o,"NonMaxSuppressionWithScore");var g=Z0(m.data.get(o.dataId).values,m.data.get(u.dataId).values,c,f,h,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,a=e;ze(r,"square");for(var o=a.data.get(r.dataId).values,u=new Float32Array(o.length),s=0;s<o.length;++s){var c=o[s];u[s]=c*c}return{dataId:a.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Qf,backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n,a=r.a,o=r.b,u=e;ze([a,o],Qf);var s=u.data.get(a.dataId).values,c=u.data.get(o.dataId).values,f=function(m,g,x,E,S,_){var A=Yt(m,g),T=A.length,N=Ko(A),D=Gf(S,ct(A)),k=m.length,P=g.length,H=Ko(m),U=Ko(g),j=Fu(m,A),G=Fu(g,A);if(j.length+G.length===0)for(var K=0;K<D.length;++K)D[K]=_(x[K%x.length],E[K%E.length]);else{var be=function(pe){var he=OB(pe,T,N),q=he.slice(-k);j.forEach(function(L){return q[L]=0});var ne=wE(q,k,H),ee=he.slice(-P);G.forEach(function(L){return ee[L]=0});var J=wE(ee,P,U);D[pe]=_(x[ne],E[J])};for(K=0;K<D.length;++K)be(K)}return[D,A]}(a.shape,o.shape,s,c,a.dtype,function(m,g){var x=m-g;return x*x}),h=f[0],p=f[1];return{dataId:u.write(h,p,a.dtype),shape:p,dtype:a.dtype}}}];ry<ZE.length;ry++)UC(ZE[ry]);var Ul,Sj=function(t){this.variableNames=["A"];var n=ea(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},_j=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=ea(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+e+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `};for(var ay=0,JE=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs,a=n.pixels,o=r.numChannels,u=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=u?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=c[0],h=c[1],p=[h,f],m=[h,f,o];(s||u)&&(Ul==null&&(Ul=document.createElement("canvas").getContext("2d")),Ul.canvas.width=f,Ul.canvas.height=h,Ul.drawImage(a,0,0,f,h),a=Ul.canvas);var g=e.makeTensorInfo(p,"int32");e.texData.get(g.dataId).usage=La.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(g.dataId),a);var x=Me().getBool("WEBGL_PACK")?new _j(m):new Sj(m),E=e.runWebGLProgram(x,[g],"int32");return e.disposeData(g.dataId),E}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs;Rp("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=n,o=a.boxes,u=a.scores,s=r,c=s.maxOutputSize,f=s.iouThreshold,h=s.scoreThreshold,p=s.softNmsSigma,m=e,g=Z0(m.readSync(o.dataId),m.readSync(u.dataId),c,f,h,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,a=e,o=new zt(r.shape,"return x * x;");return a.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Qf,backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n,a=r.a,o=r.b,u=e,s=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi("return (a - b) * (a - b);",a.shape,o.shape):new Hn("return (a - b) * (a - b);",a.shape,o.shape);return u.compileAndRun(s,[a,o])}}];ay<JE.length;ay++)UC(JE[ay]);for(var oy=0,eS=[{kernelName:"Square",gradFunc:function(t,n){var e=n[0];return{x:function(){return t.mul(e.toFloat().mul(2))}}}},{kernelName:Qf,gradFunc:function(t,n){var e=n[0],r=n[1],a=Je(2);return{a:function(){return na(t,na(a,vr(e,r)))},b:function(){return na(t,na(a,vr(r,e)))}}}}];oy<eS.length;oy++)wB(eS[oy]);var Cj=function(){function t(){}return t.prototype.fetch=function(n,e){return fetch(n,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},t}();Me().get("IS_BROWSER")&&Me().setPlatform("browser",new Cj);var iy,Rj=function(){return require("node-fetch")},Aj=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(n,e){return Me().global.fetch!=null?Me().global.fetch(n,e):(iy==null&&(iy=Rj()),iy(n,e))},t.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)},t}();Me().get("IS_NODE")&&Me().setPlatform("node",new Aj);var Jy={float32:4,int32:4,uint16:2,uint8:1,bool:1},Up=4;function sA(t,n){for(var e={},r=0,a=function(s){var c=s.name,f=s.dtype,h=s.shape,p=ct(h),m=void 0;if("quantization"in s){var g=s.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var x=Jy[g.dtype],E=t.slice(r,r+p*x),S=g.dtype==="uint8"?new Uint8Array(E):new Uint16Array(E);if(f==="float32")m=Float32Array.from(S,function(k){return k*g.scale+g.min});else{if(f!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+f);m=Int32Array.from(S,function(k){return Math.round(k*g.scale+g.min)})}r+=p*x}else if(f==="string"){var _=ct(s.shape);m=[];for(var A=0;A<_;A++){var T=new Uint32Array(t.slice(r,r+Up))[0];r+=Up;var N=new Uint8Array(t.slice(r,r+T));m.push(N),r+=T}}else{var D=Jy[f];if(E=t.slice(r,r+p*D),f==="float32")m=new Float32Array(E);else if(f==="int32")m=new Int32Array(E);else{if(f!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+f);m=new Uint8Array(E)}r+=p*D}e[c]=Lr(m,h,f)},o=0,u=n;o<u.length;o++)a(u[o]);return e}function Tj(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var n=0,e=[];t.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(n),a=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),a),a+=o.byteLength}),r.buffer}var e0=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function tS(t){return e0?Buffer.byteLength(t):new Blob([t]).size}function gb(t){var n=0;t.forEach(function(a){n+=a.byteLength});var e=new Uint8Array(n),r=0;return t.forEach(function(a){e.set(new Uint8Array(a),r),r+=a.byteLength}),e.buffer}function nS(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var n=t.split("/");return n[n.length-1]}function gd(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:tS(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:tS(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Ua=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(n){t.getInstance().saveRouters.push(n)},t.registerLoadRouter=function(n){t.getInstance().loadRouters.push(n)},t.getSaveHandlers=function(n){return t.getHandlers(n,"save")},t.getLoadHandlers=function(n,e){return t.getHandlers(n,"load",e)},t.getHandlers=function(n,e,r){var a=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var u=o(n,r);u!==null&&a.push(u)}),a},t}(),ec="://",Uu=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(n,e){$(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(ec)&&(n=n.slice(0,n.indexOf(ec))),$(n.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();$(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=e},t.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function ip(t){if(t.indexOf(ec)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Uu.getSchemes().join(","));return{scheme:t.split(ec)[0],path:t.split(ec)[1]}}function rS(t,n,e){return e===void 0&&(e=!1),st(this,void 0,void 0,function(){var r,a,o,u,s,c,f,h,p;return lt(this,function(m){switch(m.label){case 0:return $(t!==n,function(){return"Old path and new path are the same: '"+t+"'"}),$((r=Ua.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),$(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),a=r[0],$((o=Ua.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),$(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),u=o[0],s=ip(t).scheme,c=ip(t).path,f=s===ip(t).scheme,[4,a.load()];case 1:return h=m.sent(),e&&f?[4,Uu.getManager(s).removeModel(c)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,u.save(h)];case 4:return p=m.sent(),!e||f?[3,6]:[4,Uu.getManager(s).removeModel(c)];case 5:m.sent(),m.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var ks="models_store",Bu="model_info_store";function lA(){if(!Me().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function t0(t){var n=t.result;n.createObjectStore(ks,{keyPath:"modelPath"}),n.createObjectStore(Bu,{keyPath:"modelPath"})}var tc=function(){function t(n){if(this.indexedDB=lA(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return t.prototype.save=function(n){return st(this,void 0,void 0,function(){return lt(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},t.prototype.load=function(){return st(this,void 0,void 0,function(){return lt(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(n,e){var r=this;return new Promise(function(a,o){var u=r.indexedDB.open("tensorflowjs",1);u.onupgradeneeded=function(){return t0(u)},u.onsuccess=function(){var s=u.result;if(e==null){var c=s.transaction(ks,"readonly"),f=c.objectStore(ks).get(r.modelPath);f.onsuccess=function(){if(f.result==null)return s.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(f.result.modelArtifacts)},f.onerror=function(E){return s.close(),o(f.error)},c.oncomplete=function(){return s.close()}}else{var h,p=gd(e),m=s.transaction(Bu,"readwrite"),g=m.objectStore(Bu),x=g.put({modelPath:r.modelPath,modelArtifactsInfo:p});x.onsuccess=function(){var E=(h=s.transaction(ks,"readwrite")).objectStore(ks).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:p});E.onsuccess=function(){return a({modelArtifactsInfo:p})},E.onerror=function(S){var _=(g=m.objectStore(Bu)).delete(r.modelPath);_.onsuccess=function(){return s.close(),o(E.error)},_.onerror=function(A){return s.close(),o(E.error)}}},x.onerror=function(E){return s.close(),o(x.error)},m.oncomplete=function(){h==null?s.close():h.oncomplete=function(){return s.close()}}}},u.onerror=function(s){return o(u.error)}})},t.URL_SCHEME="indexeddb://",t}(),aS=function(t){return Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(tc.URL_SCHEME)?(n=t.slice(tc.URL_SCHEME.length),new tc(n)):null;var n};Ua.registerSaveRouter(aS),Ua.registerLoadRouter(aS);var Dj=function(){function t(){this.indexedDB=lA()}return t.prototype.listModels=function(){return st(this,void 0,void 0,function(){var n=this;return lt(this,function(e){return[2,new Promise(function(r,a){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return t0(o)},o.onsuccess=function(){var u=o.result,s=u.transaction(Bu,"readonly"),c=s.objectStore(Bu).getAll();c.onsuccess=function(){for(var f={},h=0,p=c.result;h<p.length;h++){var m=p[h];f[m.modelPath]=m.modelArtifactsInfo}r(f)},c.onerror=function(f){return u.close(),a(c.error)},s.oncomplete=function(){return u.close()}},o.onerror=function(u){return a(o.error)}})]})})},t.prototype.removeModel=function(n){return st(this,void 0,void 0,function(){var e=this;return lt(this,function(r){var a;return n=(a=n).startsWith(tc.URL_SCHEME)?a.slice(tc.URL_SCHEME.length):a,[2,new Promise(function(o,u){var s=e.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return t0(s)},s.onsuccess=function(){var c,f=s.result,h=f.transaction(Bu,"readwrite"),p=h.objectStore(Bu),m=p.get(n);m.onsuccess=function(){if(m.result==null)return f.close(),u(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var g=p.delete(n),x=function(){var E=(c=f.transaction(ks,"readwrite")).objectStore(ks).delete(n);E.onsuccess=function(){return o(m.result.modelArtifactsInfo)},E.onerror=function(S){return u(m.error)}};g.onsuccess=x,g.onerror=function(E){return x(),f.close(),u(m.error)}},m.onerror=function(g){return f.close(),u(m.error)},h.oncomplete=function(){c==null?f.close():c.oncomplete=function(){return f.close()}}},s.onerror=function(c){return u(s.error)}})]})})},t}();if(Me().getBool("IS_BROWSER"))try{Uu.registerManager(tc.URL_SCHEME,new Dj)}catch{}var Mi="/",$l="tensorflowjs_models",cA="info",Nj="model_topology",kj="weight_specs",Oj="weight_data",Mj="model_metadata";function fA(t){return{info:[$l,t,cA].join(Mi),topology:[$l,t,Nj].join(Mi),weightSpecs:[$l,t,kj].join(Mi),weightData:[$l,t,Oj].join(Mi),modelMetadata:[$l,t,Mj].join(Mi)}}function Ij(t){var n=t.split(Mi);if(n.length<3)throw new Error("Invalid key format: "+t);return n.slice(1,n.length-1).join(Mi)}var nc=function(){function t(n){if(!Me().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=fA(this.modelPath)}return t.prototype.save=function(n){return st(this,void 0,void 0,function(){var e,r,a;return lt(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),a=gd(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(u){if(e0)return Buffer.from(u).toString("base64");for(var s=new Uint8Array(u),c="",f=0,h=s.length;f<h;f++)c+=String.fromCharCode(s[f]);return btoa(c)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return st(this,void 0,void 0,function(){var n,e,r,a,o,u,s;return lt(this,function(c){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=a,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(u=JSON.parse(o),e.format=u.format,e.generatedBy=u.generatedBy,e.convertedBy=u.convertedBy,e.userDefinedMetadata=u.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(f){if(e0){var h=Buffer.from(f,"base64");return h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength)}for(var p=atob(f),m=new Uint8Array(p.length),g=0;g<p.length;++g)m.set([p.charCodeAt(g)],g);return m.buffer}(s),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),oS=function(t){return Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(nc.URL_SCHEME)?(n=t.slice(nc.URL_SCHEME.length),new nc(n)):null;var n};Ua.registerSaveRouter(oS),Ua.registerLoadRouter(oS);var Fj=function(){function t(){$(Me().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),$(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return st(this,void 0,void 0,function(){var n,e,r,a,o,u;return lt(this,function(s){for(n={},e=$l+Mi,r=Mi+cA,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(e)&&o.endsWith(r)&&(u=Ij(o),n[u]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},t.prototype.removeModel=function(n){return st(this,void 0,void 0,function(){var e,r;return lt(this,function(a){var o;if(n=(o=n).startsWith(nc.URL_SCHEME)?o.slice(nc.URL_SCHEME.length):o,e=fA(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},t}();if(Me().getBool("IS_BROWSER"))try{Uu.registerManager(nc.URL_SCHEME,new Fj)}catch{}var Bj="model",Pj=".json",Lj=".weights.bin";function iS(t){return new Promise(function(n){return setTimeout(n)}).then(t)}var uy=function(){function t(n){if(!Me().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),n!=null&&n.length!==0||(n=Bj),this.modelTopologyFileName=n+Pj,this.weightDataFileName=n+Lj}return t.prototype.save=function(n){return st(this,void 0,void 0,function(){var e,r,a,o,u,s;return lt(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],a={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(u=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,u.href=o,[4,iS(function(){return u.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),n.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,iS(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:gd(n)}]}})})},t.URL_SCHEME="downloads://",t}(),Uj=function(){function t(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return t.prototype.load=function(){return st(this,void 0,void 0,function(){var n,e,r=this;return lt(this,function(a){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,u){var s=new FileReader;s.onload=function(c){var f=JSON.parse(c.target.result),h=f.modelTopology;if(h!=null){e.length===0&&o({modelTopology:h});var p=f.weightsManifest;if(p!=null){var m;try{m=r.checkManifestAndWeightFiles(p,e)}catch(S){return void u(S)}var g=[],x=[],E=[];p.forEach(function(S){S.paths.forEach(function(_){x.push(_),E.push(null)}),g.push.apply(g,S.weights)}),p.forEach(function(S){S.paths.forEach(function(_){var A=new FileReader;A.onload=function(T){var N=T.target.result,D=x.indexOf(_);E[D]=N,E.indexOf(null)===-1&&o({modelTopology:h,weightSpecs:g,weightData:gb(E),format:f.format,generatedBy:f.generatedBy,convertedBy:f.convertedBy,userDefinedMetadata:f.userDefinedMetadata})},A.onerror=function(T){return u("Failed to weights data from file of path '"+_+"'.")},A.readAsArrayBuffer(m[_])})})}else u(new Error("weightManifest field is missing from file "+n.name))}else u(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(c){return u("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},t.prototype.checkManifestAndWeightFiles=function(n,e){for(var r=[],a=e.map(function(c){return nS(c.name)}),o={},u=0,s=n;u<s.length;u++)s[u].paths.forEach(function(c){var f=nS(c);if(r.indexOf(f)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+f+"'");if(r.push(f),a.indexOf(f)===-1)throw new Error("Weight file with basename '"+f+"' is not provided.");o[c]=e[a.indexOf(f)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},t}();function uS(t,n,e,r){(function(o){$(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,u){$(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),$(u>=0&&u<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+u}),$(u>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+u})}(e=e??0,r=r??1);var a=0;return Promise.all(t.map(function(o){return o.then(function(u){var s=e+ ++a/t.length*(r-e);return n(s),u}),o}))}function dA(t,n){return st(this,void 0,void 0,function(){var e,r,a,o,u,s,c,f,h;return lt(this,function(p){switch(p.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?Me().platform.fetch:n.fetchFunc,r=t.map(function(m){return e(m,n.requestInit,{isBinary:!0})}),a=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return u=p.sent(),[3,4];case 2:return[4,uS(r,n.onProgress,a,o)];case 3:u=p.sent(),p.label=4;case 4:return s=u.map(function(m){return m.arrayBuffer()}),c=.5,f=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return h=p.sent(),[3,8];case 6:return[4,uS(s,n.onProgress,c,f)];case 7:h=p.sent(),p.label=8;case 8:return[2,h]}})})}function sS(t){var n=this;return function(e,r,a){return r===void 0&&(r=""),st(n,void 0,void 0,function(){var o,u,s,c,f,h,p,m,g,x;return lt(this,function(E){switch(E.label){case 0:if(o=e.map(function(){return!1}),u={},s=a!=null?a.map(function(){return!1}):[],c=[],e.forEach(function(S,_){var A=0;S.weights.forEach(function(T){var N="quantization"in T?T.quantization.dtype:T.dtype,D=Jy[N]*ct(T.shape),k=function(){o[_]=!0,u[_]==null&&(u[_]=[]),u[_].push({manifestEntry:T,groupOffset:A,sizeBytes:D})};a!=null?a.forEach(function(P,H){P===T.name&&(k(),s[H]=!0)}):k(),c.push(T.name),A+=D})}),!s.every(function(S){return S}))throw f=a.filter(function(S,_){return!s[_]}),new Error("Could not find weights in manifest with names: "+f.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return h=o.reduce(function(S,_,A){return _&&S.push(A),S},[]),p=[],h.forEach(function(S){e[S].paths.forEach(function(_){var A=r+(r.endsWith("/")?"":"/")+_;p.push(A)})}),[4,t(p)];case 1:return m=E.sent(),g={},x=0,h.forEach(function(S){for(var _=e[S].paths.length,A=0,T=0;T<_;T++)A+=m[x+T].byteLength;for(var N=new ArrayBuffer(A),D=new Uint8Array(N),k=0,P=0;P<_;P++){var H=new Uint8Array(m[x+P]);D.set(H,k),k+=H.byteLength}u[S].forEach(function(U){var j=sA(N.slice(U.groupOffset,U.groupOffset+U.sizeBytes),[U.manifestEntry]);for(var G in j)g[G]=j[G]}),x+=_}),[2,g]}})})}}Ua.registerSaveRouter(function(t){return Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(uy.URL_SCHEME)?function(n){return n===void 0&&(n="model"),new uy(n)}(t.slice(uy.URL_SCHEME.length)):null});var hA=function(){function t(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?($(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=Me().platform.fetch,$(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&$(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(n){return st(this,void 0,void 0,function(){var e,r,a,o;return lt(this,function(u){switch(u.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],a={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=u.sent()).ok)return[2,{modelArtifactsInfo:gd(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return st(this,void 0,void 0,function(){var n,e,r,a,o,u,s,c,f,h,p,m;return lt(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,n.json()];case 3:return e=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=e.modelTopology,o=e.weightsManifest,u=e.generatedBy,s=e.convertedBy,c=e.format,f=e.userDefinedMetadata,a==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:m=g.sent(),h=m[0],p=m[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:h,weightData:p,userDefinedMetadata:f,generatedBy:u,convertedBy:s,format:c}]}})})},t.prototype.loadWeights=function(n){return st(this,void 0,void 0,function(){var e,r,a,o,u,s,c,f,h,p,m;return lt(this,function(g){switch(g.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=function(x){var E=x.lastIndexOf("/"),S=x.lastIndexOf("?"),_=x.substring(0,E),A=S>E?x.substring(S):"";return[_+"/",A]}(e),a=r[0],o=r[1],u=this.weightPathPrefix||a,s=[],c=0,f=n;c<f.length;c++)h=f[c],s.push.apply(s,h.weights);return p=[],n.forEach(function(x){x.paths.forEach(function(E){p.push(u+E+o)})}),[4,dA(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=g.sent(),[2,[s,gb(m)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function n0(t){return t.match(hA.URL_SCHEME_REGEX)!=null}var lS=function(t,n){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(e){return n0(e)}):n0(t))?r0(t,{onProgress:n}):null};function r0(t,n){return new hA(t,n)}Ua.registerSaveRouter(lS),Ua.registerLoadRouter(lS);var sy=function(){function t(n){this.modelArtifacts=n}return t.prototype.load=function(){return st(this,void 0,void 0,function(){return lt(this,function(n){return[2,this.modelArtifacts]})})},t}(),zj=function(){function t(n){this.saveHandler=n}return t.prototype.save=function(n){return st(this,void 0,void 0,function(){return lt(this,function(e){return[2,this.saveHandler(n)]})})},t}(),pA=Object.freeze({browserFiles:function(t){return new Uj(t)},browserHTTPRequest:function(t,n){return r0(t,n)},concatenateArrayBuffers:gb,decodeWeights:sA,encodeWeights:function(t,n){return st(this,void 0,void 0,function(){var e,r,a,o,u,s=this;return lt(this,function(c){switch(c.label){case 0:for(e=[],r=[],a=Array.isArray(t)?t.map(function(f){return f.name}):Object.keys(t),o=function(f){var h=a[f],p=Array.isArray(t)?t[f].tensor:t[h];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+h+"': "+p.dtype);var m={name:h,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var g=new Promise(function(x){return st(s,void 0,void 0,function(){var E,S,_,A,T,N,D;return lt(this,function(k){switch(k.label){case 0:return[4,p.bytes()];case 1:for(E=k.sent(),S=E.reduce(function(P,H){return P+H.length},0)+Up*E.length,_=new Uint8Array(S),A=0,T=0;T<E.length;T++)N=E[T],D=new Uint8Array(new Uint32Array([N.length]).buffer),_.set(D,A),A+=Up,_.set(N,A),A+=N.length;return x(_),[2]}})})});r.push(g)}else r.push(p.data());n!=null&&(m.group=n),e.push(m)},u=0;u<a.length;++u)o(u);return[4,Promise.all(r)];case 1:return[2,{data:Tj(c.sent()),specs:e}]}})})},fromMemory:function(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new sy(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new sy({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new sy({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))},getLoadHandlers:function(t,n){return Ua.getLoadHandlers(t,n)},getModelArtifactsInfoForJSON:gd,getSaveHandlers:function(t){return Ua.getSaveHandlers(t)},http:r0,isHTTPScheme:n0,loadWeights:function(t,n,e,r){return n===void 0&&(n=""),st(this,void 0,void 0,function(){return lt(this,function(a){return[2,sS(function(o){return dA(o,{requestInit:r})})(t,n,e)]})})},registerLoadRouter:function(t){return Ua.registerLoadRouter(t)},registerSaveRouter:function(t){return Ua.registerSaveRouter(t)},weightsLoaderFactory:sS,withSaveHandler:function(t){return new zj(t)},copyModel:function(t,n){return st(this,void 0,void 0,function(){return lt(this,function(e){return[2,rS(t,n,!1)]})})},listModels:function(){return st(this,void 0,void 0,function(){var t,n,e,r,a,o,u;return lt(this,function(s){switch(s.label){case 0:t=Uu.getSchemes(),n={},e=0,r=t,s.label=1;case 1:return e<r.length?(a=r[e],[4,Uu.getManager(a).listModels()]):[3,4];case 2:for(u in o=s.sent())n[a+ec+u]=o[u];s.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})},moveModel:function(t,n){return st(this,void 0,void 0,function(){return lt(this,function(e){return[2,rS(t,n,!0)]})})},removeModel:function(t){return st(this,void 0,void 0,function(){var n;return lt(this,function(e){return n=ip(t),[2,Uu.getManager(n.scheme).removeModel(n.path)]})})}}),zl;re({confusionMatrix_:function(t,n,e){var r=V(t,"labels","confusionMatrix"),a=V(n,"predictions","confusionMatrix");$(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),$(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),$(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),$(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),$(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=Ky(r.asType("int32"),e),u=Ky(a.asType("int32"),e);return o.transpose().matMul(u).asType("int32")}});var jj=re({fromPixels_:function(t,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,r=!1,a=!1,o=!1,u=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);u=!0}if(a&&a&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(LC("FromPixels",ce.backendName)!=null)return ce.runKernel("FromPixels",{pixels:t},{numChannels:n});var s,c,f=a?[t.videoWidth,t.videoHeight]:[t.width,t.height],h=f[0],p=f[1];if(u?s=t.getContext("2d").getImageData(0,0,h,p).data:r||e?s=t.data:(o||a)&&(zl==null&&(zl=document.createElement("canvas").getContext("2d")),zl.canvas.width=h,zl.canvas.height=p,zl.drawImage(t,0,0,h,p),s=zl.getImageData(0,0,h,p).data),n===4)c=new Int32Array(s);else{var m=h*p;c=new Int32Array(m*n);for(var g=0;g<m;g++)for(var x=0;x<n;++x)c[g*n+x]=s[4*g+x]}return $0(c,[p,h,n],"int32")}}),yb=Object.freeze({toPixels:function(t,n){return st(this,void 0,void 0,function(){var e,r,a,o,u,s,c,f,h,p,m,g,x,E,S,_,A,T,N,D,k,P,H;return lt(this,function(U){switch(U.label){case 0:if(e=V(t,"img","toPixels"),t instanceof Bn||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),a=r[0],o=r[1],(u=e.rank===2?1:e.shape[2])>4||u===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+u);return[4,e.data()];case 1:return s=U.sent(),c=e.min(),f=e.max(),[4,Promise.all([c.data(),f.data()])];case 2:if(h=U.sent(),p=h[0],m=h[1],g=p[0],x=m[0],c.dispose(),f.dispose(),e.dtype==="float32"){if(g<0||x>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+x+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(g<0||x>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+x+"].")}for(E=e.dtype==="float32"?255:1,S=new Uint8ClampedArray(o*a*4),_=0;_<a*o;++_)A=void 0,T=void 0,N=void 0,D=void 0,u===1?(A=s[_]*E,T=s[_]*E,N=s[_]*E,D=255):u===3?(A=s[3*_]*E,T=s[3*_+1]*E,N=s[3*_+2]*E,D=255):u===4&&(A=s[4*_]*E,T=s[4*_+1]*E,N=s[4*_+2]*E,D=s[4*_+3]*E),S[(k=4*_)+0]=Math.round(A),S[k+1]=Math.round(T),S[k+2]=Math.round(N),S[k+3]=Math.round(D);return n!=null&&(n.width=o,n.height=a,P=n.getContext("2d"),H=new ImageData(S,o,a),P.putImageData(H,0,0)),e!==t&&e.dispose(),[2,S]}})})},fromPixels:jj}),Hj=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(n,e){return new n(e)},t}(),Vj=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]},t}();function Gs(t){$(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),$(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),$(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Vj.register(t)}var Ks=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return wo(n,t),n.prototype.minimize=function(e,r,a){r===void 0&&(r=!1);var o=this.computeGradients(e,a),u=o.value,s=o.grads;if(a!=null){var c=a.map(function(f){return{name:f.name,tensor:s[f.name]}});this.applyGradients(c)}else this.applyGradients(s);return _a(s),r?u:(u.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,r){return JP(e,r)},n.prototype.dispose=function(){this.iterations_!=null&&_a(this.iterations_)},n.prototype.saveIterations=function(){return st(this,void 0,void 0,function(){return lt(this,function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Je(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return st(this,void 0,void 0,function(){return lt(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(e){return st(this,void 0,void 0,function(){return lt(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(e){return st(this,void 0,void 0,function(){var r;return lt(this,function(a){switch(a.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,e.slice(1)]}})})},n}(Hj);Object.defineProperty(Ks,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var Wj=function(t){function n(e,r,a){a===void 0&&(a=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=a,o.accumulatedGrads=[],o.accumulatedUpdates=[],a==null&&(o.epsilon=ce.backend.epsilon()),o}return wo(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var u=ce.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accum_grad",variable:nt(function(){return rn(u).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:a+"/accum_var",variable:nt(function(){return rn(u).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[a];if(s!=null){var c=r.accumulatedGrads[o].variable,f=r.accumulatedUpdates[o].variable;nt(function(){var h=c.mul(r.rho).add(s.square().mul(1-r.rho)),p=f.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(s),m=f.mul(r.rho).add(p.square().mul(1-r.rho));c.assign(h),f.assign(m);var g=p.mul(-r.learningRate).add(u);u.assign(g)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(_a(this.accumulatedGrads.map(function(e){return e.variable})),_a(this.accumulatedUpdates.map(function(e){return e.variable})))},n.prototype.getWeights=function(){return st(this,void 0,void 0,function(){var e;return lt(this,function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(e){return st(this,void 0,void 0,function(){var r;return lt(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(e)];case 1:return e=a.sent(),r=e.length/2,this.accumulatedGrads=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(Ks);Gs(Wj);var qj=function(t){function n(e,r){r===void 0&&(r=.1);var a=t.call(this)||this;return a.learningRate=e,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return wo(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var u=ce.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accumulator",variable:nt(function(){return Xo(u.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[a];if(s!=null){var c=r.accumulatedGrads[o].variable;nt(function(){var f=c.add(s.square());c.assign(f);var h=s.div(f.add(ce.backend.epsilon()).sqrt()).mul(-r.learningRate).add(u);u.assign(h)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&_a(this.accumulatedGrads.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return st(this,void 0,void 0,function(){return lt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return st(this,void 0,void 0,function(){return lt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(Ks);Gs(qj);var $j=function(t){function n(e,r,a,o){o===void 0&&(o=null);var u=t.call(this)||this;return u.learningRate=e,u.beta1=r,u.beta2=a,u.epsilon=o,u.accumulatedFirstMoment=[],u.accumulatedSecondMoment=[],nt(function(){u.accBeta1=Je(r).variable(),u.accBeta2=Je(a).variable()}),o==null&&(u.epsilon=ce.backend.epsilon()),u}return wo(n,t),n.prototype.applyGradients=function(e){var r=this,a=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);nt(function(){var o=vr(1,r.accBeta1),u=vr(1,r.accBeta2);a.forEach(function(s,c){var f=ce.registeredVariables[s];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:s+"/m",variable:nt(function(){return rn(f).variable(!1)})}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:s+"/v",variable:nt(function(){return rn(f).variable(!1)})});var h=Array.isArray(e)?e[c].tensor:e[s];if(h!=null){var p=r.accumulatedFirstMoment[c].variable,m=r.accumulatedSecondMoment[c].variable,g=p.mul(r.beta1).add(h.mul(1-r.beta1)),x=m.mul(r.beta2).add(h.square().mul(1-r.beta2)),E=g.div(o),S=x.div(u);p.assign(g),m.assign(x);var _=E.div(S.sqrt().add(r.epsilon)).mul(-r.learningRate).add(f);f.assign(_)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&_a(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedSecondMoment!=null&&_a(this.accumulatedSecondMoment.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return st(this,void 0,void 0,function(){var e;return lt(this,function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(e){return st(this,void 0,void 0,function(){var r,a=this;return lt(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),nt(function(){a.accBeta1.assign(Pp(a.beta1,a.iterations_+1)),a.accBeta2.assign(Pp(a.beta2,a.iterations_+1))}),r=e.length/2,this.accumulatedFirstMoment=e.slice(0,r).map(function(u){return{originalName:u.name,variable:u.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(r,2*r).map(function(u){return{originalName:u.name,variable:u.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(Ks);Gs($j);var Gj=function(t){function n(e,r,a,o,u){o===void 0&&(o=null),u===void 0&&(u=0);var s=t.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=a,s.epsilon=o,s.decay=u,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],nt(function(){s.iteration=Je(0).variable(),s.accBeta1=Je(r).variable()}),o==null&&(s.epsilon=ce.backend.epsilon()),s}return wo(n,t),n.prototype.applyGradients=function(e){var r=this,a=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);nt(function(){var o=vr(1,r.accBeta1),u=mo(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(s,c){var f=ce.registeredVariables[s];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:s+"/m",variable:rn(f).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:s+"/v",variable:rn(f).variable(!1)});var h=Array.isArray(e)?e[c].tensor:e[s];if(h!=null){var p=r.accumulatedFirstMoment[c].variable,m=r.accumulatedWeightedInfNorm[c].variable,g=p.mul(r.beta1).add(h.mul(1-r.beta1)),x=m.mul(r.beta2),E=h.abs(),S=x.maximum(E);p.assign(g),m.assign(S);var _=u.div(o).mul(g.div(S.add(r.epsilon))).add(f);f.assign(_)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&_a(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedWeightedInfNorm!=null&&_a(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return st(this,void 0,void 0,function(){return lt(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(e){return st(this,void 0,void 0,function(){return lt(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(Ks);Gs(Gj);var vA=function(t){function n(e){var r=t.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return wo(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var u=Array.isArray(e)?e[o].tensor:e[a];if(u!=null){var s=ce.registeredVariables[a];nt(function(){var c=r.c.mul(u).add(s);s.assign(c)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=hP(Je(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return st(this,void 0,void 0,function(){return lt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},n.prototype.setWeights=function(e){return st(this,void 0,void 0,function(){return lt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,r){return new e(r.learningRate)},n.className="SGD",n}(Ks);Gs(vA);var Kj=function(t){function n(e,r,a){a===void 0&&(a=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=a,o.accumulations=[],o.m=Je(o.momentum),o}return wo(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var u=ce.registeredVariables[a];r.accumulations[o]==null&&(r.accumulations[o]={originalName:a+"/momentum",variable:nt(function(){return rn(u).variable(!1)})});var s=r.accumulations[o].variable,c=Array.isArray(e)?e[o].tensor:e[a];c!=null&&nt(function(){var f,h=r.m.mul(s).add(c);f=r.useNesterov?r.c.mul(c.add(h.mul(r.m))).add(u):r.c.mul(h).add(u),s.assign(h),u.assign(f)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&_a(this.accumulations.map(function(e){return e.variable}))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return st(this,void 0,void 0,function(){return lt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return st(this,void 0,void 0,function(){return lt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(vA);Gs(Kj);var Xj=function(t){function n(e,r,a,o,u){r===void 0&&(r=.9),a===void 0&&(a=0),o===void 0&&(o=null),u===void 0&&(u=!1);var s=t.call(this)||this;if(s.learningRate=e,s.decay=r,s.momentum=a,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=u,o==null&&(s.epsilon=ce.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return wo(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var u=ce.registeredVariables[a];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:a+"/rms",variable:nt(function(){return rn(u).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:a+"/momentum",variable:nt(function(){return rn(u).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:a+"/mg",variable:nt(function(){return rn(u).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[a];if(s!=null){var c=r.accumulatedMeanSquares[o].variable,f=r.accumulatedMoments[o].variable;nt(function(){var h=c.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[o].variable,m=p.mul(r.decay).add(s.mul(1-r.decay)),g=f.mul(r.momentum).add(s.mul(r.learningRate).div(h.sub(m.square().add(r.epsilon)).sqrt()));c.assign(h),p.assign(m),f.assign(g);var x=u.sub(g);u.assign(x)}else{var E=c.mul(r.decay).add(s.square().mul(1-r.decay));g=f.mul(r.momentum).add(s.mul(r.learningRate).div(E.add(r.epsilon).sqrt())),c.assign(E),f.assign(g),x=u.sub(g),u.assign(x)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&_a(this.accumulatedMeanSquares.map(function(e){return e.variable})),this.accumulatedMeanGrads!=null&&this.centered&&_a(this.accumulatedMeanGrads.map(function(e){return e.variable})),this.accumulatedMoments!=null&&_a(this.accumulatedMoments.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return st(this,void 0,void 0,function(){var e;return lt(this,function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(e){return st(this,void 0,void 0,function(){var r;return lt(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(e)];case 1:return e=a.sent(),r=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(Ks);Gs(Xj);Bn.prototype.squaredDifference=function(t){return NR(this,t)},ke=wj;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var a0=function(t,n){return a0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])},a0(t,n)};function Nt(t,n){a0(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var Zr=function(){return Zr=Object.assign||function(n){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Zr.apply(this,arguments)};function pt(t,n,e,r){function a(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(h){try{f(r.next(h))}catch(p){u(p)}}function c(h){try{f(r.throw(h))}catch(p){u(p)}}function f(h){h.done?o(h.value):a(h.value).then(s,c)}f((r=r.apply(t,[])).next())})}function vt(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,a&&(o=f[0]&2?a.return:f[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,f[1])).done)return o;switch(a=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,a=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){e.label=f[1];break}if(f[0]===6&&e.label<o[1]){e.label=o[1],o=f;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(f);break}o[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(t,e)}catch(h){f=[6,h],a=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function zf(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),a=0,n=0;n<e;n++)for(var o=arguments[n],u=0,s=o.length;u<s;u++,a++)r[a]=o[u];return r}var rc=function(){function t(n,e){if(!Is(n)||!Is(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:e}));this._width=n,this._height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function bv(t,n){return t instanceof Bn&&t.shape.length===n}function Yj(t){return bv(t,2)}function xv(t){return bv(t,3)}function zu(t){return bv(t,4)}function Qj(t){return t%1!==0}function cS(t){return t%2===0}function Zj(t,n){n===void 0&&(n=2);var e=Math.pow(10,n);return Math.floor(t*e)/e}function fS(t){return t&&t.width&&t.height}function Jj(t,n){var e=t.width,r=t.height,a=n/Math.max(r,e);return new rc(Math.round(e*a),Math.round(r*a))}function bb(t){return t.reduce(function(n,e){return n.add(e)},new un(0,0)).div(new un(t.length,t.length))}function Zf(t,n,e){return Array(t).fill(0).map(function(r,a){return n+a*e})}function Is(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function dS(t){return Is(t)&&0<=t&&t<=1}var un=function(){function t(n,e){this._x=n,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(n){return new t(this.x+n.x,this.y+n.y)},t.prototype.sub=function(n){return new t(this.x-n.x,this.y-n.y)},t.prototype.mul=function(n){return new t(this.x*n.x,this.y*n.y)},t.prototype.div=function(n){return new t(this.x/n.x,this.y/n.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),qu=function(){function t(n,e){e===void 0&&(e=!0);var r=n||{},a=[r.left,r.top,r.right,r.bottom].every(Is),o=[r.x,r.y,r.width,r.height].every(Is);if(!o&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var u=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=u[0],c=u[1],f=u[2],h=u[3];t.assertIsValidBox({x:s,y:c,width:f,height:h},"Box.constructor",e),this._x=s,this._y=c,this._width=f,this._height=h}return t.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(Is)},t.assertIsValidBox=function(n,e,r){if(r===void 0&&(r=!1),!t.isRect(n))throw new Error(e+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!r&&(n.width<0||n.height<0))throw new Error(e+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new un(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new un(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new un(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new un(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(u){return Math.round(u)}),e=n[0],r=n[1],a=n[2],o=n[3];return new t({x:e,y:r,width:a,height:o})},t.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(u){return Math.floor(u)}),e=n[0],r=n[1],a=n[2],o=n[3];return new t({x:e,y:r,width:a,height:o})},t.prototype.toSquare=function(){var n=this,e=n.x,r=n.y,a=n.width,o=n.height,u=Math.abs(a-o);return a<o&&(e-=u/2,a+=u),o<a&&(r-=u/2,o+=u),new t({x:e,y:r,width:a,height:o})},t.prototype.rescale=function(n){var e=fS(n)?n.width:n,r=fS(n)?n.height:n;return new t({x:this.x*e,y:this.y*r,width:this.width*e,height:this.height*r})},t.prototype.pad=function(n,e){var r=[this.x-n/2,this.y-e/2,this.width+n,this.height+e],a=r[0],o=r[1],u=r[2],s=r[3];return new t({x:a,y:o,width:u,height:s})},t.prototype.clipAtImageBorders=function(n,e){var r=this,a=r.x,o=r.y,u=r.right,s=r.bottom,c=Math.max(a,0),f=Math.max(o,0),h=u-c,p=s-f,m=Math.min(h,n-c),g=Math.min(p,e-f);return new t({x:c,y:f,width:m,height:g}).floor()},t.prototype.shift=function(n,e){var r=this,a=r.width,o=r.height,u=this.x+n,s=this.y+e;return new t({x:u,y:s,width:a,height:o})},t.prototype.padAtBorders=function(n,e){var r=this.width+1,a=this.height+1,o=1,u=1,s=r,c=a,f=this.left,h=this.top,p=this.right,m=this.bottom;return p>e&&(s=-p+e+r,p=e),m>n&&(c=-m+n+a,m=n),f<1&&(c=2-f,f=1),h<1&&(c=2-h,h=1),{dy:u,edy:c,dx:o,edx:s,y:h,ey:m,x:f,ex:p,w:r,h:a}},t.prototype.calibrate=function(n){return new t({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},t}(),wv=function(t){Nt(n,t);function n(e,r,a,o,u){return u===void 0&&(u=!1),t.call(this,{left:e,top:r,right:a,bottom:o},u)||this}return n}(qu),mA=function(){function t(n,e,r,a,o){this._imageDims=new rc(o.width,o.height),this._score=n,this._classScore=e,this._className=r,this._box=new qu(a).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new qu(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:e})},t}(),oi=function(t){Nt(n,t);function n(e,r,a){return t.call(this,e,e,"",r,a)||this}return n.prototype.forSize=function(e,r){var a=t.prototype.forSize.call(this,e,r),o=a.score,u=a.relativeBox,s=a.imageDims;return new n(o,u,s)},n}(mA);function e5(t,n,e){e===void 0&&(e=!0);var r=Math.max(0,Math.min(t.right,n.right)-Math.max(t.left,n.left)),a=Math.max(0,Math.min(t.bottom,n.bottom)-Math.max(t.top,n.top)),o=r*a;return e?o/(t.area+n.area-o):o/Math.min(t.area,n.area)}function t5(t){var n=t.map(function(s){return s.x}),e=t.map(function(s){return s.y}),r=n.reduce(function(s,c){return c<s?c:s},1/0),a=e.reduce(function(s,c){return c<s?c:s},1/0),o=n.reduce(function(s,c){return s<c?c:s},0),u=e.reduce(function(s,c){return s<c?c:s},0);return new wv(r,a,o,u)}function Jf(t,n,e,r){r===void 0&&(r=!0);for(var a=n.map(function(s,c){return{score:s,boxIndex:c}}).sort(function(s,c){return s.score-c.score}).map(function(s){return s.boxIndex}),o=[],u=function(){var s=a.pop();o.push(s);for(var c=a,f=[],h=0;h<c.length;h++){var p=c[h],m=t[s],g=t[p];f.push(e5(m,g,r))}a=a.filter(function(x,E){return f[E]<=e})};a.length>0;)u();return o}function yd(t,n){return nt(function(){var e=n[0],r=n[1],a=n[2],o=Xo(zf(t.shape.slice(0,3),[1]),e),u=Xo(zf(t.shape.slice(0,3),[1]),r),s=Xo(zf(t.shape.slice(0,3),[1]),a),c=dr([o,u,s],3);return vr(t,c)})}function n5(t,n){return n===void 0&&(n=!1),nt(function(){var e=t.shape.slice(1),r=e[0],a=e[1];if(r===a)return t;var o=Math.abs(r-a),u=Math.round(o*(n?.5:1)),s=r>a?2:1,c=function(g){var x=t.shape.slice();return x[s]=g,Xo(x,0)},f=c(u),h=o-f.shape[s],p=n&&h?c(h):null,m=[p,t,f].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return dr(m,s)})}function ly(t){return 1/(1+Math.exp(-t))}var xb=function(t){Nt(n,t);function n(e,r,a,o,u){return u===void 0&&(u=!1),t.call(this,{x:e,y:r,width:a,height:o},u)||this}return n}(qu),r5=.5,a5=.43,o5=.45,zp=function(){function t(n,e,r){r===void 0&&(r=new un(0,0));var a=e.width,o=e.height;this._imgDims=new rc(a,o),this._shift=r,this._positions=n.map(function(u){return u.mul(new un(a,o)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new un(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(e){return e.sub(n._shift).div(new un(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new this.constructor(this.relativePositions,{width:n,height:e})},t.prototype.shiftBy=function(n,e){return new this.constructor(this.relativePositions,this._imgDims,new un(n,e))},t.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},t.prototype.align=function(n,e){if(e===void 0&&(e={}),n){var r=n instanceof oi?n.box.floor():new qu(n);return this.shiftBy(r.x,r.y).align(null,e)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=a.useDlibAlignment,u=a.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(u)},t.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),e=n[0],r=n[1],a=n[2],o=function(p){return a.sub(p).magnitude()},u=(o(e)+o(r))/2,s=Math.floor(u/o5),c=bb(n),f=Math.floor(Math.max(0,c.x-r5*s)),h=Math.floor(Math.max(0,c.y-a5*s));return new xb(f,h,Math.min(s,this.imageWidth+f),Math.min(s,this.imageHeight+h))},t.prototype.alignMinBbox=function(n){var e=t5(this.positions);return e.pad(e.width*n,e.height*n)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),i5=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],bb([e[3],e[4]])]},n}(zp),u5=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(bb)},n}(zp),hS=function(){function t(n,e){this._label=n,this._distance=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+Zj(this.distance)+")":"")},t}(),pS=function(t){Nt(n,t);function n(e,r){var a=t.call(this,e)||this;return a._label=r,a}return n.assertIsValidLabeledBox=function(e,r){if(qu.assertIsValidBox(e,r),!Is(e.label))throw new Error(r+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(qu),qh=function(){function t(n,e){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},t.fromJSON=function(n){var e=n.descriptors.map(function(r){return new Float32Array(r)});return new t(n.label,e)},t}();(function(t){Nt(n,t);function n(e,r,a,o){var u=t.call(this,e,r)||this;return u._score=a,u._classScore=o,u}return n.assertIsValidPredictedBox=function(e,r){if(pS.assertIsValidLabeledBox(e,r),!dS(e.score)||!dS(e.classScore))throw new Error(r+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n})(pS);function s5(t){return t.detection instanceof oi}function wb(t,n){var e={detection:n};return Object.assign({},t,e)}function gA(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:n}}function yA(t){var n="";if(!t)try{t=require("fs")}catch(r){n=r.toString()}var e=t?function(r){return new Promise(function(a,o){t.readFile(r,function(u,s){return u?o(u):a(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:e}}function bA(){var t=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,e=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=yA();return Zr({Canvas:t||function(){function u(){}return u}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function u(){}return u}(),Image:n||function(){function u(){}return u}(),ImageData:global.ImageData||function(){function u(){}return u}(),Video:global.HTMLVideoElement||function(){function u(){}return u}(),createCanvasElement:e,createImageElement:r,fetch:a},o)}function xA(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function wA(){return typeof global=="object"&&typeof require=="function"&&typeof rT<"u"&&typeof process<"u"&&!!process.version}var fr;function l5(){if(!fr)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return fr}function o0(t){fr=t}function Eb(){xA()&&o0(gA()),wA()&&o0(bA())}function c5(t){if(fr||Eb(),!fr)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=t.Canvas,e=n===void 0?fr.Canvas:n,r=t.Image,a=r===void 0?fr.Image:r;fr.Canvas=e,fr.Image=a,fr.createCanvasElement=t.createCanvasElement||function(){return new e},fr.createImageElement=t.createImageElement||function(){return new a},fr.ImageData=t.ImageData||fr.ImageData,fr.Video=t.Video||fr.Video,fr.fetch=t.fetch||fr.fetch,fr.readFile=t.readFile||fr.readFile}var ra={getEnv:l5,setEnv:o0,initialize:Eb,createBrowserEnv:gA,createFileSystem:yA,createNodejsEnv:bA,monkeyPatch:c5,isBrowser:xA,isNodejs:wA};Eb();function EA(t){return!ra.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function zs(t){var n=ra.getEnv(),e=n.Canvas,r=n.CanvasRenderingContext2D;if(t instanceof r)return t;var a=EA(t);if(!(a instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=a.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var vS;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(vS||(vS={}));function SA(t){var n=ra.getEnv(),e=n.Image,r=n.Video;return t instanceof e&&t.complete||t instanceof r&&t.readyState>=3}function f5(t){return new Promise(function(n,e){if(t instanceof ra.getEnv().Canvas||SA(t))return n();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),n(o))}function a(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),e(o))}t.addEventListener("load",r),t.addEventListener("error",a)})}function _A(t){var n=ra.getEnv(),e=n.Image,r=n.Video;return t instanceof e?new rc(t.naturalWidth,t.naturalHeight):t instanceof r?new rc(t.videoWidth,t.videoHeight):new rc(t.width,t.height)}function Ev(t){var n=t.width,e=t.height,r=ra.getEnv().createCanvasElement,a=r();return a.width=n,a.height=e,a}function Sb(t,n){var e=ra.getEnv().ImageData;if(!(t instanceof e)&&!SA(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=_A(t),a=r.width,o=r.height,u=Ev({width:a,height:o});return t instanceof e?zs(u).putImageData(t,0,0):zs(u).drawImage(t,0,0,a,o),u}function d5(t,n){return pt(this,void 0,void 0,function(){var e,r,a,o,u,s;return vt(this,function(c){switch(c.label){case 0:return e=ra.getEnv().createCanvasElement(),r=t.shape.slice(zu(t)?1:0),a=r[0],o=r[1],u=r[2],s=nt(function(){return t.as3D(a,o,u).toInt()}),[4,yb.toPixels(s,e)];case 1:return c.sent(),s.dispose(),[2,e]}})})}function mS(t){var n=ra.getEnv(),e=n.Image,r=n.Canvas,a=n.Video;return t instanceof e||t instanceof r||t instanceof a}function h5(t,n,e){e===void 0&&(e=!1);var r=ra.getEnv(),a=r.Image,o=r.Canvas;if(!(t instanceof a||t instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var u=_A(t),s=n/Math.max(u.height,u.width),c=s*u.width,f=s*u.height,h=Ev({width:n,height:n}),p=t instanceof o?t:Sb(t),m=Math.abs(c-f)/2,g=e&&c<f?m:0,x=e&&f<c?m:0;return zs(h).drawImage(p,g,x,c,f),h}var jp=function(){function t(n,e){var r=this;if(e===void 0&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=e,this._batchSize=n.length,n.forEach(function(a,o){if(xv(a)){r._imageTensors[o]=a,r._inputDimensions[o]=a.shape;return}if(zu(a)){var u=a.shape[0];if(u!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+u+" passed, but not supported in input array");r._imageTensors[o]=a,r._inputDimensions[o]=a.shape.slice(1);return}var s=a instanceof ra.getEnv().Canvas?a:Sb(a);r._canvases[o]=s,r._inputDimensions[o]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var n=this;return Zf(this.batchSize,0,1).map(function(e,r){return n.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},t.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},t.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},t.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},t.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var e=this.getInputWidth(n),r=this.getInputHeight(n);return Jj({width:e,height:r},this.inputSize)},t.prototype.toBatchTensor=function(n,e){var r=this;return e===void 0&&(e=!0),this._inputSize=n,nt(function(){var a=Zf(r.batchSize,0,1).map(function(u){var s=r.getInput(u);if(s instanceof Bn){var c=zu(s)?s:s.expandDims();return c=n5(c,e),(c.shape[1]!==n||c.shape[2]!==n)&&(c=db.resizeBilinear(c,[n,n])),c.as3D(n,n,3)}if(s instanceof ra.getEnv().Canvas)return yb.fromPixels(h5(s,n,e));throw new Error("toBatchTensor - at batchIdx "+u+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),o=Ha(a.map(function(u){return u.toFloat()})).as4D(r.batchSize,n,n,3);return o})},t}();function Tr(t){return pt(this,void 0,void 0,function(){var n,e,r;return vt(this,function(a){switch(a.label){case 0:if(t instanceof jp)return[2,t];if(n=Array.isArray(t)?t:[t],!n.length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(t)?" at input index "+o+":":""},r=n.map(EA),r.forEach(function(o,u){if(!mS(o)&&!xv(o)&&!zu(o))throw typeof n[u]=="string"?new Error("toNetInput -"+e(u)+" string passed, but could not resolve HTMLElement for element id "+n[u]):new Error("toNetInput -"+e(u)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(zu(o)){var s=o.shape[0];if(s!==1)throw new Error("toNetInput -"+e(u)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return mS(o)&&f5(o)}))];case 1:return a.sent(),[2,new jp(r,Array.isArray(t))]}})})}function _b(t,n){return pt(this,void 0,void 0,function(){var e,r,a,o,u,s,c;return vt(this,function(f){switch(f.label){case 0:return e=ra.getEnv().Canvas,r=t,t instanceof e?[3,5]:[4,Tr(t)];case 1:if(a=f.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=a.getInput(0),o instanceof e?(u=o,[3,4]):[3,2];case 2:return[4,d5(o)];case 3:u=f.sent(),f.label=4;case 4:r=u,f.label=5;case 5:return s=zs(r),c=n.map(function(h){return h instanceof oi?h.forSize(r.width,r.height).box.floor():h}).map(function(h){return h.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(h){var p=h.x,m=h.y,g=h.width,x=h.height,E=Ev({width:g,height:x});return zs(E).putImageData(s.getImageData(p,m,g,x),0,0),E})]}})})}function Cb(t,n){return pt(this,void 0,void 0,function(){return vt(this,function(e){if(!xv(t)&&!zu(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(zu(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,nt(function(){var r=t.shape.slice(zu(t)?1:0),a=r[0],o=r[1],u=r[2],s=n.map(function(f){return f instanceof oi?f.forSize(o,a).box:f}).map(function(f){return f.clipAtImageBorders(o,a)}),c=s.map(function(f){var h=f.x,p=f.y,m=f.width,g=f.height;return QR(t.as3D(a,o,u),[p,h,0],[g,m,u])});return c})]})})}function p5(t,n){return pt(this,void 0,void 0,function(){var e,r;return vt(this,function(a){switch(a.label){case 0:return e=ra.getEnv().fetch,[4,e(t,n)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function v5(t){return pt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,p5(t)];case 1:return[2,n.sent().json()]}})})}function CA(t,n){var e=n+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:e};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+e};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var a=t.split("/").filter(function(s){return s}),o=t.endsWith(".json")?a[a.length-1]:e,u=r+(t.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return u=t.startsWith("/")?"/"+u:u,{modelBaseUri:u,manifestUri:u==="/"?"/"+o:u+"/"+o}}function m5(t,n){return pt(this,void 0,void 0,function(){var e,r,a,o;return vt(this,function(u){switch(u.label){case 0:return e=CA(t,n),r=e.manifestUri,a=e.modelBaseUri,[4,v5(r)];case 1:return o=u.sent(),[2,pA.loadWeights(o,a)]}})})}var Vi=function(){function t(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(n){var e=this.traversePropertyPath(n),r=e.obj,a=e.objProp;return r[a]},t.prototype.reassignParamFromPath=function(n,e){var r=this.traversePropertyPath(n),a=r.obj,o=r.objProp;a[o].dispose(),a[o]=e},t.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(e){var r=e.paramPath;return{path:r,tensor:n.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof uc})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof uc)})},t.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(e){var r=e.path,a=e.tensor;n.reassignParamFromPath(r,a.variable())})},t.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(e){var r=e.path,a=e.tensor,o=Lr(a.dataSync());a.dispose(),n.reassignParamFromPath(r,o)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(e){if(n&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var e=n.tensor;return Array.from(e.dataSync())}).reduce(function(n,e){return n.concat(e)}))},t.prototype.load=function(n){return pt(this,void 0,void 0,function(){return vt(this,function(e){switch(e.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return e.sent(),[2]}})})},t.prototype.loadFromUri=function(n){return pt(this,void 0,void 0,function(){var e;return vt(this,function(r){switch(r.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,m5(n,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},t.prototype.loadFromDisk=function(n){return pt(this,void 0,void 0,function(){var e,r,a,o,u,s,c,f,h,p;return vt(this,function(m){switch(m.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return e=ra.getEnv().readFile,r=CA(n,this.getDefaultModelName()),a=r.manifestUri,o=r.modelBaseUri,u=function(g){return Promise.all(g.map(function(x){return e(x).then(function(E){return E.buffer})}))},s=pA.weightsLoaderFactory(u),h=(f=JSON).parse,[4,e(a)];case 1:return c=h.apply(f,[m.sent().toString()]),[4,s(c,o)];case 2:return p=m.sent(),this.loadFromWeightMap(p),[2]}})})},t.prototype.loadFromWeightMap=function(n){var e=this.extractParamsFromWeigthMap(n),r=e.paramMappings,a=e.params;this._paramMappings=r,this._params=a},t.prototype.extractWeights=function(n){var e=this.extractParams(n),r=e.paramMappings,a=e.params;this._paramMappings=r,this._params=a},t.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=n.split("/").reduce(function(o,u){if(!o.nextObj.hasOwnProperty(u))throw new Error("traversePropertyPath - object does not have property "+u+", for path "+n);return{obj:o.nextObj,objProp:u,nextObj:o.nextObj[u]}},{nextObj:this.params}),r=e.obj,a=e.objProp;if(!r||!a||!(r[a]instanceof Bn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:r,objProp:a}},t}();function za(t,n,e){return nt(function(){var r=ub(t,n.depthwise_filter,n.pointwise_filter,e,"same");return r=$t(r,n.bias),r})}function cy(t,n,e){return e===void 0&&(e=!1),nt(function(){var r=Pn(e?$t(so(t,n.conv0.filters,[2,2],"same"),n.conv0.bias):za(t,n.conv0,[2,2])),a=za(r,n.conv1,[1,1]),o=Pn($t(r,a)),u=za(o,n.conv2,[1,1]);return Pn($t(r,$t(a,u)))})}function $h(t,n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),nt(function(){var a=Pn(e?$t(so(t,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):za(t,n.conv0,r?[2,2]:[1,1])),o=za(a,n.conv1,[1,1]),u=Pn($t(a,o)),s=za(u,n.conv2,[1,1]),c=Pn($t(a,$t(o,s))),f=za(c,n.conv3,[1,1]);return Pn($t(a,$t(o,$t(s,f))))})}function yo(t,n,e,r){return e===void 0&&(e="same"),r===void 0&&(r=!1),nt(function(){var a=$t(so(t,n.filters,[1,1],e),n.bias);return r?Pn(a):a})}function Wi(t,n){Object.keys(t).forEach(function(e){n.some(function(r){return r.originalPath===e})||t[e].dispose()})}function Sv(t,n){return function(e,r,a,o){var u=xa(t(e*r*a*a),[a,a,e,r]),s=ar(t(r));return n.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:u,bias:s}}}function Rb(t,n){return function(e,r,a){var o=Lu(t(e*r),[e,r]),u=ar(t(r));return n.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:o,bias:u}}}var RA=function(){function t(n,e,r){this.depthwise_filter=n,this.pointwise_filter=e,this.bias=r}return t}();function Ab(t,n){return function(e,r,a){var o=xa(t(9*e),[3,3,e,1]),u=xa(t(e*r),[1,1,e,r]),s=ar(t(r));return n.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new RA(o,u,s)}}function Tb(t){return function(n){var e=t(n+"/depthwise_filter",4),r=t(n+"/pointwise_filter",4),a=t(n+"/bias",1);return new RA(e,r,a)}}function Qu(t,n){return function(e,r,a){var o=t[e];if(!bv(o,r))throw new Error("expected weightMap["+e+"] to be a Tensor"+r+"D, instead have "+o);return n.push({originalPath:e,paramPath:a||e}),o}}function qi(t){var n=t;function e(a){var o=n.slice(0,a);return n=n.slice(a),o}function r(){return n}return{extractWeights:e,getRemainingWeights:r}}function AA(t,n){var e=Sv(t,n),r=Ab(t,n);function a(u,s,c,f){f===void 0&&(f=!1);var h=f?e(u,s,3,c+"/conv0"):r(u,s,c+"/conv0"),p=r(s,s,c+"/conv1"),m=r(s,s,c+"/conv2");return{conv0:h,conv1:p,conv2:m}}function o(u,s,c,f){f===void 0&&(f=!1);var h=a(u,s,c,f),p=h.conv0,m=h.conv1,g=h.conv2,x=r(s,s,c+"/conv3");return{conv0:p,conv1:m,conv2:g,conv3:x}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function g5(t){var n=[],e=qi(t),r=e.extractWeights,a=e.getRemainingWeights,o=AA(r,n).extractDenseBlock4Params,u=o(3,32,"dense0",!0),s=o(32,64,"dense1"),c=o(64,128,"dense2"),f=o(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:u,dense1:s,dense2:c,dense3:f}}}function TA(t){return function(n){var e=t(n+"/filters",4),r=t(n+"/bias",1);return{filters:e,bias:r}}}function DA(t,n){var e=Qu(t,n),r=TA(e),a=Tb(e);function o(s,c){c===void 0&&(c=!1);var f=c?r(s+"/conv0"):a(s+"/conv0"),h=a(s+"/conv1"),p=a(s+"/conv2");return{conv0:f,conv1:h,conv2:p}}function u(s,c){c===void 0&&(c=!1);var f=c?r(s+"/conv0"):a(s+"/conv0"),h=a(s+"/conv1"),p=a(s+"/conv2"),m=a(s+"/conv3");return{conv0:f,conv1:h,conv2:p,conv3:m}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:u}}function y5(t){var n=[],e=DA(t,n).extractDenseBlock4Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return Wi(t,n),{params:r,paramMappings:n}}var NA=function(t){Nt(n,t);function n(){return t.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return nt(function(){var a=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=yd(a,o).div(Je(255)),s=$h(u,r.dense0,!0);return s=$h(s,r.dense1),s=$h(s,r.dense2),s=$h(s,r.dense3),s=md(s,[7,7],[2,2],"valid"),s})},n.prototype.forward=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Tr(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(e){return y5(e)},n.prototype.extractParams=function(e){return g5(e)},n}(Vi);function Wo(t,n){return nt(function(){return $t(mv(t,n.weights),n.bias)})}function b5(t,n,e){var r=[],a=qi(t),o=a.extractWeights,u=a.getRemainingWeights,s=Rb(o,r),c=s(n,e,"fc");if(u().length!==0)throw new Error("weights remaing after extract: "+u().length);return{paramMappings:r,params:{fc:c}}}function x5(t){var n=[],e=Qu(t,n);function r(o){var u=e(o+"/weights",2),s=e(o+"/bias",1);return{weights:u,bias:s}}var a={fc:r("fc")};return Wi(t,n),{params:a,paramMappings:n}}function kA(t){var n={},e={};return Object.keys(t).forEach(function(r){var a=r.startsWith("fc")?e:n;a[r]=t[r]}),{featureExtractorMap:n,classifierMap:e}}var OA=function(t){Nt(n,t);function n(e,r){var a=t.call(this,e)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return nt(function(){var o=e instanceof jp?r.faceFeatureExtractor.forwardInput(e):e;return Wo(o.as2D(o.shape[0],-1),a.fc)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return b5(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(e){var r=kA(e),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),x5(o)},n.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),o=a*r+a,u=e.slice(0,e.length-o),s=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(u),this.extractClassifierParams(s)},n}(Vi),gS=["neutral","happy","sad","angry","fearful","disgusted","surprised"],w5=function(){function t(n){var e=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);gS.forEach(function(r,a){e[r]=n[a]})}return t.prototype.asSortedArray=function(){var n=this;return gS.map(function(e){return{expression:e,probability:n[e]}}).sort(function(e,r){return r.probability-e.probability})},t}(),E5=function(t){Nt(n,t);function n(e){return e===void 0&&(e=new NA),t.call(this,"FaceExpressionNet",e)||this}return n.prototype.forwardInput=function(e){var r=this;return nt(function(){return ji(r.runNet(e))})},n.prototype.forward=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Tr(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.predictExpressions=function(e){return pt(this,void 0,void 0,function(){var r,a,o,u,s=this;return vt(this,function(c){switch(c.label){case 0:return[4,Tr(e)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(hr(a).map(function(f){return pt(s,void 0,void 0,function(){var h;return vt(this,function(p){switch(p.label){case 0:return[4,f.data()];case 1:return h=p.sent(),f.dispose(),[2,h]}})})}))];case 3:return o=c.sent(),a.dispose(),u=o.map(function(f){return new w5(f)}),[2,r.isBatchInput?u:u[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(OA);function MA(t,n){var e={expressions:n};return Object.assign({},t,e)}function S5(t){return s5(t)&&t.landmarks instanceof zp&&t.unshiftedLandmarks instanceof zp&&t.alignedRect instanceof oi}function Db(t,n){var e=t.detection.box,r=n.shiftBy(e.x,e.y),a=r.align(),o=t.detection.imageDims,u=new oi(t.detection.score,a.rescale(o.reverse()),o),s={landmarks:r,unshiftedLandmarks:n,alignedRect:u};return Object.assign({},t,s)}function _5(t,n){var e=Sv(t,n),r=Ab(t,n);function a(u,s,c){var f=r(u,s,c+"/separable_conv0"),h=r(s,s,c+"/separable_conv1"),p=e(u,s,1,c+"/expansion_conv");return{separable_conv0:f,separable_conv1:h,expansion_conv:p}}function o(u,s){var c=r(u,u,s+"/separable_conv0"),f=r(u,u,s+"/separable_conv1"),h=r(u,u,s+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:h}}return{extractConvParams:e,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:o}}function C5(t,n){var e=[],r=qi(t),a=r.extractWeights,o=r.getRemainingWeights,u=_5(a,e),s=u.extractConvParams,c=u.extractSeparableConvParams,f=u.extractReductionBlockParams,h=u.extractMainBlockParams,p=s(3,32,3,"entry_flow/conv_in"),m=f(32,64,"entry_flow/reduction_block_0"),g=f(64,128,"entry_flow/reduction_block_1"),x={conv_in:p,reduction_block_0:m,reduction_block_1:g},E={};Zf(n,0,1).forEach(function(T){E["main_block_"+T]=h(128,"middle_flow/main_block_"+T)});var S=f(128,256,"exit_flow/reduction_block"),_=c(256,512,"exit_flow/separable_conv"),A={reduction_block:S,separable_conv:_};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:x,middle_flow:E,exit_flow:A}}}function R5(t,n){var e=Qu(t,n),r=TA(e),a=Tb(e);function o(s){var c=a(s+"/separable_conv0"),f=a(s+"/separable_conv1"),h=r(s+"/expansion_conv");return{separable_conv0:c,separable_conv1:f,expansion_conv:h}}function u(s){var c=a(s+"/separable_conv0"),f=a(s+"/separable_conv1"),h=a(s+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:h}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:o,extractMainBlockParams:u}}function A5(t,n){var e=[],r=R5(t,e),a=r.extractConvParams,o=r.extractSeparableConvParams,u=r.extractReductionBlockParams,s=r.extractMainBlockParams,c=a("entry_flow/conv_in"),f=u("entry_flow/reduction_block_0"),h=u("entry_flow/reduction_block_1"),p={conv_in:c,reduction_block_0:f,reduction_block_1:h},m={};Zf(n,0,1).forEach(function(S){m["main_block_"+S]=s("middle_flow/main_block_"+S)});var g=u("exit_flow/reduction_block"),x=o("exit_flow/separable_conv"),E={reduction_block:g,separable_conv:x};return Wi(t,e),{params:{entry_flow:p,middle_flow:m,exit_flow:E},paramMappings:e}}function IA(t,n,e){return $t(so(t,n.filters,e,"same"),n.bias)}function fy(t,n,e){e===void 0&&(e=!0);var r=e?Pn(t):t;return r=za(r,n.separable_conv0,[1,1]),r=za(Pn(r),n.separable_conv1,[1,1]),r=Cr(r,[3,3],[2,2],"same"),r=$t(r,IA(t,n.expansion_conv,[2,2])),r}function T5(t,n){var e=za(Pn(t),n.separable_conv0,[1,1]);return e=za(Pn(e),n.separable_conv1,[1,1]),e=za(Pn(e),n.separable_conv2,[1,1]),e=$t(e,t),e}var D5=function(t){Nt(n,t);function n(e){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return n.prototype.forwardInput=function(e){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return nt(function(){var o=e.toBatchTensor(112,!0),u=[122.782,117.001,104.298],s=yd(o,u).div(Je(256)),c=Pn(IA(s,a.entry_flow.conv_in,[2,2]));return c=fy(c,a.entry_flow.reduction_block_0,!1),c=fy(c,a.entry_flow.reduction_block_1),Zf(r._numMainBlocks,0,1).forEach(function(f){c=T5(c,a.middle_flow["main_block_"+f])}),c=fy(c,a.exit_flow.reduction_block),c=Pn(za(c,a.exit_flow.separable_conv,[1,1])),c})},n.prototype.forward=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Tr(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(e){return A5(e,this._numMainBlocks)},n.prototype.extractParams=function(e){return C5(e,this._numMainBlocks)},n}(Vi);function N5(t){var n=[],e=qi(t),r=e.extractWeights,a=e.getRemainingWeights,o=Rb(r,n),u=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{fc:{age:u,gender:s}}}}function k5(t){var n=[],e=Qu(t,n);function r(o){var u=e(o+"/weights",2),s=e(o+"/bias",1);return{weights:u,bias:s}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Wi(t,n),{params:a,paramMappings:n}}var Hp;(function(t){t.FEMALE="female",t.MALE="male"})(Hp||(Hp={}));var O5=function(t){Nt(n,t);function n(e){e===void 0&&(e=new D5(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return nt(function(){var o=e instanceof jp?r.faceFeatureExtractor.forwardInput(e):e,u=md(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),s=Wo(u,a.fc.age).as1D(),c=Wo(u,a.fc.gender);return{age:s,gender:c}})},n.prototype.forwardInput=function(e){var r=this;return nt(function(){var a=r.runNet(e),o=a.age,u=a.gender;return{age:o,gender:ji(u)}})},n.prototype.forward=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Tr(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.predictAgeAndGender=function(e){return pt(this,void 0,void 0,function(){var r,a,o,u,s,c,f=this;return vt(this,function(h){switch(h.label){case 0:return[4,Tr(e)];case 1:return r=h.sent(),[4,this.forwardInput(r)];case 2:return a=h.sent(),o=hr(a.age),u=hr(a.gender),s=o.map(function(p,m){return{ageTensor:p,genderTensor:u[m]}}),[4,Promise.all(s.map(function(p){var m=p.ageTensor,g=p.genderTensor;return pt(f,void 0,void 0,function(){var x,E,S,_,A;return vt(this,function(T){switch(T.label){case 0:return[4,m.data()];case 1:return x=T.sent()[0],[4,g.data()];case 2:return E=T.sent()[0],S=E>.5,_=S?Hp.MALE:Hp.FEMALE,A=S?E:1-E,m.dispose(),g.dispose(),[2,{age:x,gender:_,genderProbability:A}]}})})}))];case 3:return c=h.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return N5(e)},n.prototype.extractParamsFromWeigthMap=function(e){var r=kA(e),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),k5(o)},n.prototype.extractParams=function(e){var r=1539,a=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(o)},n}(Vi),FA=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.postProcess=function(e,r,a){var o=a.map(function(s){var c=s.width,f=s.height,h=r/Math.max(f,c);return{width:c*h,height:f*h}}),u=o.length;return nt(function(){var s=function(m,g){return Ha([Xo([68],m),Xo([68],g)],1).as2D(1,136).as1D()},c=function(m,g){var x=o[m],E=x.width,S=x.height;return g(E,S)?Math.abs(E-S)/2:0},f=function(m){return c(m,function(g,x){return g<x})},h=function(m){return c(m,function(g,x){return x<g})},p=e.mul(Xo([u,136],r)).sub(Ha(Array.from(Array(u),function(m,g){return s(f(g),h(g))}))).div(Ha(Array.from(Array(u),function(m,g){return s(o[g].width,o[g].height)})));return p})},n.prototype.forwardInput=function(e){var r=this;return nt(function(){var a=r.runNet(e);return r.postProcess(a,e.inputSize,e.inputDimensions.map(function(o){var u=o[0],s=o[1];return{height:u,width:s}}))})},n.prototype.forward=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Tr(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.detectLandmarks=function(e){return pt(this,void 0,void 0,function(){var r,a,o,u=this;return vt(this,function(s){switch(s.label){case 0:return[4,Tr(e)];case 1:return r=s.sent(),a=nt(function(){return hr(u.forwardInput(r))}),[4,Promise.all(a.map(function(c,f){return pt(u,void 0,void 0,function(){var h,p,m,g,x;return vt(this,function(E){switch(E.label){case 0:return m=(p=Array).from,[4,c.data()];case 1:return h=m.apply(p,[E.sent()]),g=h.filter(function(S,_){return cS(_)}),x=h.filter(function(S,_){return!cS(_)}),[2,new u5(Array(68).fill(0).map(function(S,_){return new un(g[_],x[_])}),{height:r.getInputHeight(f),width:r.getInputWidth(f)})]}})})}))];case 2:return o=s.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(OA),BA=function(t){Nt(n,t);function n(e){return e===void 0&&(e=new NA),t.call(this,"FaceLandmark68Net",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(FA);function M5(t){var n=[],e=DA(t,n).extractDenseBlock3Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return Wi(t,n),{params:r,paramMappings:n}}function I5(t){var n=[],e=qi(t),r=e.extractWeights,a=e.getRemainingWeights,o=AA(r,n).extractDenseBlock3Params,u=o(3,32,"dense0",!0),s=o(32,64,"dense1"),c=o(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:u,dense1:s,dense2:c}}}var F5=function(t){Nt(n,t);function n(){return t.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return nt(function(){var a=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=yd(a,o).div(Je(255)),s=cy(u,r.dense0,!0);return s=cy(s,r.dense1),s=cy(s,r.dense2),s=md(s,[14,14],[2,2],"valid"),s})},n.prototype.forward=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Tr(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(e){return M5(e)},n.prototype.extractParams=function(e){return I5(e)},n}(Vi),B5=function(t){Nt(n,t);function n(e){return e===void 0&&(e=new F5),t.call(this,"FaceLandmark68TinyNet",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(FA);(function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(BA);function P5(t,n){return $t(na(t,n.weights),n.biases)}function Nb(t,n,e,r,a){a===void 0&&(a="same");var o=n.conv,u=o.filters,s=o.bias,c=so(t,u,e,a);return c=$t(c,s),c=P5(c,n.scale),r?Pn(c):c}function L5(t,n){return Nb(t,n,[1,1],!0)}function PA(t,n){return Nb(t,n,[1,1],!1)}function LA(t,n){return Nb(t,n,[2,2],!0,"valid")}function U5(t,n){function e(s,c,f){var h=t(s),p=h.length/(c*f*f);if(Qj(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+h.length+", numFilters: "+c+", filterSize: "+f);return nt(function(){return Wu(xa(h,[c,p,f,f]),[2,3,1,0])})}function r(s,c,f,h){var p=e(s,c,f),m=ar(t(c));return n.push({paramPath:h+"/filters"},{paramPath:h+"/bias"}),{filters:p,bias:m}}function a(s,c){var f=ar(t(s)),h=ar(t(s));return n.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:f,biases:h}}function o(s,c,f,h){var p=r(s,c,f,h+"/conv"),m=a(c,h+"/scale");return{conv:p,scale:m}}function u(s,c,f,h,p){p===void 0&&(p=!1);var m=o((p?.5:1)*s,c,f,h+"/conv1"),g=o(s,c,f,h+"/conv2");return{conv1:m,conv2:g}}return{extractConvLayerParams:o,extractResidualLayerParams:u}}function z5(t){var n=qi(t),e=n.extractWeights,r=n.getRemainingWeights,a=[],o=U5(e,a),u=o.extractConvLayerParams,s=o.extractResidualLayerParams,c=u(4704,32,7,"conv32_down"),f=s(9216,32,3,"conv32_1"),h=s(9216,32,3,"conv32_2"),p=s(9216,32,3,"conv32_3"),m=s(36864,64,3,"conv64_down",!0),g=s(36864,64,3,"conv64_1"),x=s(36864,64,3,"conv64_2"),E=s(36864,64,3,"conv64_3"),S=s(147456,128,3,"conv128_down",!0),_=s(147456,128,3,"conv128_1"),A=s(147456,128,3,"conv128_2"),T=s(589824,256,3,"conv256_down",!0),N=s(589824,256,3,"conv256_1"),D=s(589824,256,3,"conv256_2"),k=s(589824,256,3,"conv256_down_out"),P=nt(function(){return Wu(Lu(e(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var H={conv32_down:c,conv32_1:f,conv32_2:h,conv32_3:p,conv64_down:m,conv64_1:g,conv64_2:x,conv64_3:E,conv128_down:S,conv128_1:_,conv128_2:A,conv256_down:T,conv256_1:N,conv256_2:D,conv256_down_out:k,fc:P};return{params:H,paramMappings:a}}function j5(t,n){var e=Qu(t,n);function r(u){var s=e(u+"/scale/weights",1),c=e(u+"/scale/biases",1);return{weights:s,biases:c}}function a(u){var s=e(u+"/conv/filters",4),c=e(u+"/conv/bias",1),f=r(u);return{conv:{filters:s,bias:c},scale:f}}function o(u){return{conv1:a(u+"/conv1"),conv2:a(u+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function H5(t){var n=[],e=j5(t,n),r=e.extractConvLayerParams,a=e.extractResidualLayerParams,o=r("conv32_down"),u=a("conv32_1"),s=a("conv32_2"),c=a("conv32_3"),f=a("conv64_down"),h=a("conv64_1"),p=a("conv64_2"),m=a("conv64_3"),g=a("conv128_down"),x=a("conv128_1"),E=a("conv128_2"),S=a("conv256_down"),_=a("conv256_1"),A=a("conv256_2"),T=a("conv256_down_out"),N=t.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!Yj(N))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+N);var D={conv32_down:o,conv32_1:u,conv32_2:s,conv32_3:c,conv64_down:f,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:x,conv128_2:E,conv256_down:S,conv256_1:_,conv256_2:A,conv256_down_out:T,fc:N};return Wi(t,n),{params:D,paramMappings:n}}function Po(t,n){var e=L5(t,n.conv1);return e=PA(e,n.conv2),e=$t(e,t),e=Pn(e),e}function Gh(t,n){var e=LA(t,n.conv1);e=PA(e,n.conv2);var r=md(t,2,2,"valid"),a=kn(r.shape),o=r.shape[3]!==e.shape[3],u=r.shape[1]!==e.shape[1]||r.shape[2]!==e.shape[2];if(u){var s=zf(e.shape);s[1]=1;var c=kn(s);e=dr([e,c],1);var f=zf(e.shape);f[2]=1;var h=kn(f);e=dr([e,h],2)}return r=o?dr([r,a],3):r,e=$t(r,e),e=Pn(e),e}var V5=function(t){Nt(n,t);function n(){return t.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return nt(function(){var a=e.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],u=yd(a,o).div(Je(256)),s=LA(u,r.conv32_down);s=Cr(s,3,2,"valid"),s=Po(s,r.conv32_1),s=Po(s,r.conv32_2),s=Po(s,r.conv32_3),s=Gh(s,r.conv64_down),s=Po(s,r.conv64_1),s=Po(s,r.conv64_2),s=Po(s,r.conv64_3),s=Gh(s,r.conv128_down),s=Po(s,r.conv128_1),s=Po(s,r.conv128_2),s=Gh(s,r.conv256_down),s=Po(s,r.conv256_1),s=Po(s,r.conv256_2),s=Gh(s,r.conv256_down_out);var c=s.mean([1,2]),f=mv(c,r.fc);return f})},n.prototype.forward=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Tr(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.computeFaceDescriptor=function(e){return pt(this,void 0,void 0,function(){var r,a,o,u=this;return vt(this,function(s){switch(s.label){case 0:return[4,Tr(e)];case 1:return r=s.sent(),a=nt(function(){return hr(u.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return o=s.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(e){return H5(e)},n.prototype.extractParams=function(e){return z5(e)},n}(Vi);function UA(t,n){var e={descriptor:n};return Object.assign({},t,e)}function zA(t,n){var e={age:n};return Object.assign({},t,e)}function jA(t,n,e){var r={gender:n,genderProbability:e};return Object.assign({},t,r)}var HA=function(){function t(n){var e=n===void 0?{}:n,r=e.minFaceSize,a=e.scaleFactor,o=e.maxNumScales,u=e.scoreThresholds,s=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=o||10,this._scoreThresholds=u||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function W5(t,n){function e(c,f){var h=xa(t(9*c),[3,3,c,1]),p=ar(t(c)),m=ar(t(c)),g=ar(t(c)),x=ar(t(c));return n.push({paramPath:f+"/filters"},{paramPath:f+"/batch_norm_scale"},{paramPath:f+"/batch_norm_offset"},{paramPath:f+"/batch_norm_mean"},{paramPath:f+"/batch_norm_variance"}),{filters:h,batch_norm_scale:p,batch_norm_offset:m,batch_norm_mean:g,batch_norm_variance:x}}function r(c,f,h,p,m){var g=xa(t(c*f*h*h),[h,h,c,f]),x=ar(t(f));return n.push({paramPath:p+"/filters"},{paramPath:p+"/"+(m?"batch_norm_offset":"bias")}),{filters:g,bias:x}}function a(c,f,h,p){var m=r(c,f,h,p,!0),g=m.filters,x=m.bias;return{filters:g,batch_norm_offset:x}}function o(c,f,h){var p=e(c,h+"/depthwise_conv"),m=a(c,f,1,h+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:m}}function u(){var c=a(3,32,3,"mobilenetv1/conv_0"),f=o(32,64,"mobilenetv1/conv_1"),h=o(64,128,"mobilenetv1/conv_2"),p=o(128,128,"mobilenetv1/conv_3"),m=o(128,256,"mobilenetv1/conv_4"),g=o(256,256,"mobilenetv1/conv_5"),x=o(256,512,"mobilenetv1/conv_6"),E=o(512,512,"mobilenetv1/conv_7"),S=o(512,512,"mobilenetv1/conv_8"),_=o(512,512,"mobilenetv1/conv_9"),A=o(512,512,"mobilenetv1/conv_10"),T=o(512,512,"mobilenetv1/conv_11"),N=o(512,1024,"mobilenetv1/conv_12"),D=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:f,conv_2:h,conv_3:p,conv_4:m,conv_5:g,conv_6:x,conv_7:E,conv_8:S,conv_9:_,conv_10:A,conv_11:T,conv_12:N,conv_13:D}}function s(){var c=a(1024,256,1,"prediction_layer/conv_0"),f=a(256,512,3,"prediction_layer/conv_1"),h=a(512,128,1,"prediction_layer/conv_2"),p=a(128,256,3,"prediction_layer/conv_3"),m=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),x=a(256,64,1,"prediction_layer/conv_6"),E=a(64,128,3,"prediction_layer/conv_7"),S=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),_=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),A=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),T=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),N=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),D=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),P=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),H=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),U=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),j=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),G=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),K={box_encoding_predictor:S,class_predictor:_},be={box_encoding_predictor:A,class_predictor:T},pe={box_encoding_predictor:N,class_predictor:D},he={box_encoding_predictor:k,class_predictor:P},q={box_encoding_predictor:H,class_predictor:U},ne={box_encoding_predictor:j,class_predictor:G};return{conv_0:c,conv_1:f,conv_2:h,conv_3:p,conv_4:m,conv_5:g,conv_6:x,conv_7:E,box_predictor_0:K,box_predictor_1:be,box_predictor_2:pe,box_predictor_3:he,box_predictor_4:q,box_predictor_5:ne}}return{extractMobilenetV1Params:u,extractPredictionLayerParams:s}}function q5(t){var n=[],e=qi(t),r=e.extractWeights,a=e.getRemainingWeights,o=W5(r,n),u=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,c=u(),f=s(),h=$0(r(5118*4),[1,5118,4]),p={extra_dim:h};if(n.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:f,output_layer:p},paramMappings:n}}function $5(t,n){var e=Qu(t,n);function r(f,h,p){var m=e(f+"/Conv2d_"+h+"_pointwise/weights",4,p+"/filters"),g=e(f+"/Conv2d_"+h+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:m,batch_norm_offset:g}}function a(f){var h="mobilenetv1/conv_"+f,p="MobilenetV1/Conv2d_"+f+"_depthwise",m=h+"/depthwise_conv",g=h+"/pointwise_conv",x=e(p+"/depthwise_weights",4,m+"/filters"),E=e(p+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),S=e(p+"/BatchNorm/beta",1,m+"/batch_norm_offset"),_=e(p+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),A=e(p+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:x,batch_norm_scale:E,batch_norm_offset:S,batch_norm_mean:_,batch_norm_variance:A},pointwise_conv:r("MobilenetV1",f,g)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function u(f,h){var p=e(f+"/weights",4,h+"/filters"),m=e(f+"/biases",1,h+"/bias");return{filters:p,bias:m}}function s(f){var h=u("Prediction/BoxPredictor_"+f+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+f+"/box_encoding_predictor"),p=u("Prediction/BoxPredictor_"+f+"/ClassPredictor","prediction_layer/box_predictor_"+f+"/class_predictor");return{box_encoding_predictor:h,class_predictor:p}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:c}}function G5(t){var n=[],e=$5(t,n),r=e.extractMobilenetV1Params,a=e.extractPredictionLayerParams,o=t["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!xv(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var u={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:o}};return Wi(t,n),{params:u,paramMappings:n}}function Uo(t,n,e){return nt(function(){var r=so(t,n.filters,e,"same");return r=$t(r,n.batch_norm_offset),rb(r,0,6)})}var K5=.0010000000474974513;function X5(t,n,e){return nt(function(){var r=vv(t,n.filters,e,"same");return r=BR(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,K5),rb(r,0,6)})}function Y5(t){return[2,4,6,12].some(function(n){return n===t})?[2,2]:[1,1]}function Q5(t,n){return nt(function(){var e=null,r=Uo(t,n.conv_0,[2,2]),a=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(a.forEach(function(o,u){var s=u+1,c=Y5(s);r=X5(r,o.depthwise_conv,c),r=Uo(r,o.pointwise_conv,[1,1]),s===11&&(e=r)}),e===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:e}})}function Z5(t,n,e,r,a){var o=t.shape[0],u=Math.min(e,o),s=n.map(function(h,p){return{score:h,boxIndex:p}}).filter(function(h){return h.score>a}).sort(function(h,p){return p.score-h.score}),c=function(h){return h<=r?1:0},f=[];return s.forEach(function(h){if(!(f.length>=u)){for(var p=h.score,m=f.length-1;m>=0;--m){var g=J5(t,h.boxIndex,f[m]);if(g!==0&&(h.score*=c(g),h.score<=a))break}p===h.score&&f.push(h.boxIndex)}}),f}function J5(t,n,e){var r=t.arraySync(),a=Math.min(r[n][0],r[n][2]),o=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),s=Math.max(r[n][1],r[n][3]),c=Math.min(r[e][0],r[e][2]),f=Math.min(r[e][1],r[e][3]),h=Math.max(r[e][0],r[e][2]),p=Math.max(r[e][1],r[e][3]),m=(u-a)*(s-o),g=(h-c)*(p-f);if(m<=0||g<=0)return 0;var x=Math.max(a,c),E=Math.max(o,f),S=Math.min(u,h),_=Math.min(s,p),A=Math.max(S-x,0)*Math.max(_-E,0);return A/(m+g-A)}function eH(t){var n=hr(Wu(t,[1,0])),e=[vr(n[2],n[0]),vr(n[3],n[1])],r=[$t(n[0],mo(e[0],Je(2))),$t(n[1],mo(e[1],Je(2)))];return{sizes:e,centers:r}}function tH(t,n){var e=eH(t),r=e.sizes,a=e.centers,o=hr(Wu(n,[1,0])),u=mo(na(Zy(mo(o[2],Je(5))),r[0]),Je(2)),s=$t(na(mo(o[0],Je(10)),r[0]),a[0]),c=mo(na(Zy(mo(o[3],Je(5))),r[1]),Je(2)),f=$t(na(mo(o[1],Je(10)),r[1]),a[1]);return Wu(Ha([vr(s,u),vr(f,c),$t(s,u),$t(f,c)]),[1,0])}function nH(t,n,e){return nt(function(){var r=t.shape[0],a=tH(go(Zl(e.extra_dim,[r,1,1]),[-1,4]),go(t,[-1,4]));a=go(a,[r,a.shape[0]/r,4]);var o=OR(Qo(n,[0,0,1],[-1,-1,-1])),u=Qo(o,[0,0,0],[-1,-1,1]);u=go(u,[r,u.shape[1]]);var s=hr(a),c=hr(u);return{boxes:s,scores:c}})}function jl(t,n){return nt(function(){var e=t.shape[0],r=go(yo(t,n.box_encoding_predictor),[e,-1,1,4]),a=go(yo(t,n.class_predictor),[e,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function rH(t,n,e){return nt(function(){var r=Uo(t,e.conv_0,[1,1]),a=Uo(r,e.conv_1,[2,2]),o=Uo(a,e.conv_2,[1,1]),u=Uo(o,e.conv_3,[2,2]),s=Uo(u,e.conv_4,[1,1]),c=Uo(s,e.conv_5,[2,2]),f=Uo(c,e.conv_6,[1,1]),h=Uo(f,e.conv_7,[2,2]),p=jl(n,e.box_predictor_0),m=jl(t,e.box_predictor_1),g=jl(a,e.box_predictor_2),x=jl(u,e.box_predictor_3),E=jl(c,e.box_predictor_4),S=jl(h,e.box_predictor_5),_=dr([p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,x.boxPredictionEncoding,E.boxPredictionEncoding,S.boxPredictionEncoding],1),A=dr([p.classPrediction,m.classPrediction,g.classPrediction,x.classPrediction,E.classPrediction,S.classPrediction],1);return{boxPredictions:_,classPredictions:A}})}var _v=function(){function t(n){var e=n===void 0?{}:n,r=e.minConfidence,a=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),VA=function(t){Nt(n,t);function n(){return t.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return nt(function(){var a=e.toBatchTensor(512,!1).toFloat(),o=vr(na(a,Je(.007843137718737125)),Je(1)),u=Q5(o,r.mobilenetv1),s=rH(u.out,u.conv11,r.prediction_layer),c=s.boxPredictions,f=s.classPredictions;return nH(c,f,r.output_layer)})},n.prototype.forward=function(e){return pt(this,void 0,void 0,function(){var r;return vt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Tr(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.locateFaces=function(e,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a,o,u,s,c,f,h,p,m,g,x,E,S,_,A,T,N,D,k,P,H;return vt(this,function(U){switch(U.label){case 0:return a=new _v(r),o=a.maxResults,u=a.minConfidence,[4,Tr(e)];case 1:for(s=U.sent(),c=this.forwardInput(s),f=c.boxes,h=c.scores,p=f[0],m=h[0],g=1;g<f.length;g++)f[g].dispose(),h[g].dispose();return S=(E=Array).from,[4,m.data()];case 2:return x=S.apply(E,[U.sent()]),_=.5,A=Z5(p,x,o,_,u),T=s.getReshapedInputDimensions(0),N=s.inputSize,D=N/T.width,k=N/T.height,P=p.arraySync(),H=A.map(function(j){var G=[Math.max(0,P[j][0]),Math.min(1,P[j][2])].map(function(ne){return ne*k}),K=G[0],be=G[1],pe=[Math.max(0,P[j][1]),Math.min(1,P[j][3])].map(function(ne){return ne*D}),he=pe[0],q=pe[1];return new oi(x[j],new xb(he,K,q-he,be-K),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),p.dispose(),m.dispose(),[2,H]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(e){return G5(e)},n.prototype.extractParams=function(e){return q5(e)},n}(Vi);(function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(VA);var aH=.4,oH=[new un(.738768,.874946),new un(2.42204,2.65704),new un(4.30971,7.04493),new un(10.246,4.59428),new un(12.6868,11.8741)],iH=[new un(1.603231,2.094468),new un(6.041143,7.080126),new un(2.882459,3.518061),new un(4.266906,5.178857),new un(9.041765,10.66308)],uH=[117.001,114.697,97.404],sH="tiny_yolov2_model",lH="tiny_yolov2_separable_conv_model",Kh=function(t){return typeof t=="number"};function cH(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!Kh(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(n){return n||{}}).every(function(n){return Kh(n.x)&&Kh(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(Kh)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function kb(t){return nt(function(){var n=na(t,Je(.10000000149011612));return $t(Pn(vr(t,n)),n)})}function Nu(t,n){return nt(function(){var e=qs(t,[[0,0],[1,1],[1,1],[0,0]]);return e=so(e,n.conv.filters,[1,1],"valid"),e=vr(e,n.bn.sub),e=na(e,n.bn.truediv),e=$t(e,n.conv.bias),kb(e)})}function ku(t,n){return nt(function(){var e=qs(t,[[0,0],[1,1],[1,1],[0,0]]);return e=ub(e,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),e=$t(e,n.bias),kb(e)})}function fH(t,n){var e=Sv(t,n);function r(u,s){var c=ar(t(u)),f=ar(t(u));return n.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:c,truediv:f}}function a(u,s,c){var f=e(u,s,3,c+"/conv"),h=r(s,c+"/bn");return{conv:f,bn:h}}var o=Ab(t,n);return{extractConvParams:e,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function dH(t,n,e,r){var a=qi(t),o=a.extractWeights,u=a.getRemainingWeights,s=[],c=fH(o,s),f=c.extractConvParams,h=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams,m;if(n.withSeparableConvs){var g=r[0],x=r[1],E=r[2],S=r[3],_=r[4],A=r[5],T=r[6],N=r[7],D=r[8],k=n.isFirstLayerConv2d?f(g,x,3,"conv0"):p(g,x,"conv0"),P=p(x,E,"conv1"),H=p(E,S,"conv2"),U=p(S,_,"conv3"),j=p(_,A,"conv4"),G=p(A,T,"conv5"),K=N?p(T,N,"conv6"):void 0,be=D?p(N,D,"conv7"):void 0,pe=f(D||N||T,5*e,1,"conv8");m={conv0:k,conv1:P,conv2:H,conv3:U,conv4:j,conv5:G,conv6:K,conv7:be,conv8:pe}}else{var g=r[0],x=r[1],E=r[2],S=r[3],_=r[4],A=r[5],T=r[6],N=r[7],D=r[8],k=h(g,x,"conv0"),P=h(x,E,"conv1"),H=h(E,S,"conv2"),U=h(S,_,"conv3"),j=h(_,A,"conv4"),G=h(A,T,"conv5"),K=h(T,N,"conv6"),be=h(N,D,"conv7"),pe=f(D,5*e,1,"conv8");m={conv0:k,conv1:P,conv2:H,conv3:U,conv4:j,conv5:G,conv6:K,conv7:be,conv8:pe}}if(u().length!==0)throw new Error("weights remaing after extract: "+u().length);return{params:m,paramMappings:s}}function hH(t,n){var e=Qu(t,n);function r(s){var c=e(s+"/sub",1),f=e(s+"/truediv",1);return{sub:c,truediv:f}}function a(s){var c=e(s+"/filters",4),f=e(s+"/bias",1);return{filters:c,bias:f}}function o(s){var c=a(s+"/conv"),f=r(s+"/bn");return{conv:c,bn:f}}var u=Tb(e);return{extractConvParams:a,extractConvWithBatchNormParams:o,extractSeparableConvParams:u}}function pH(t,n){var e=[],r=hH(t,e),a=r.extractConvParams,o=r.extractConvWithBatchNormParams,u=r.extractSeparableConvParams,s;if(n.withSeparableConvs){var c=n.filterSizes&&n.filterSizes.length||9;s={conv0:n.isFirstLayerConv2d?a("conv0"):u("conv0"),conv1:u("conv1"),conv2:u("conv2"),conv3:u("conv3"),conv4:u("conv4"),conv5:u("conv5"),conv6:c>7?u("conv6"):void 0,conv7:c>8?u("conv7"):void 0,conv8:a("conv8")}}else s={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:a("conv8")};return Wi(t,e),{params:s,paramMappings:e}}var yS;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(yS||(yS={}));var Ob=function(){function t(n){var e=n===void 0?{}:n,r=e.inputSize,a=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),WA=function(t){Nt(n,t);function n(e){var r=t.call(this,"TinyYolov2")||this;return cH(e),r._config=e,r}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(e,r){var a=Nu(e,r.conv0);return a=Cr(a,[2,2],[2,2],"same"),a=Nu(a,r.conv1),a=Cr(a,[2,2],[2,2],"same"),a=Nu(a,r.conv2),a=Cr(a,[2,2],[2,2],"same"),a=Nu(a,r.conv3),a=Cr(a,[2,2],[2,2],"same"),a=Nu(a,r.conv4),a=Cr(a,[2,2],[2,2],"same"),a=Nu(a,r.conv5),a=Cr(a,[2,2],[1,1],"same"),a=Nu(a,r.conv6),a=Nu(a,r.conv7),yo(a,r.conv8,"valid",!1)},n.prototype.runMobilenet=function(e,r){var a=this.config.isFirstLayerConv2d?kb(yo(e,r.conv0,"valid",!1)):ku(e,r.conv0);return a=Cr(a,[2,2],[2,2],"same"),a=ku(a,r.conv1),a=Cr(a,[2,2],[2,2],"same"),a=ku(a,r.conv2),a=Cr(a,[2,2],[2,2],"same"),a=ku(a,r.conv3),a=Cr(a,[2,2],[2,2],"same"),a=ku(a,r.conv4),a=Cr(a,[2,2],[2,2],"same"),a=ku(a,r.conv5),a=Cr(a,[2,2],[1,1],"same"),a=r.conv6?ku(a,r.conv6):a,a=r.conv7?ku(a,r.conv7):a,yo(a,r.conv8,"valid",!1)},n.prototype.forwardInput=function(e,r){var a=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return nt(function(){var u=e.toBatchTensor(r,!1).toFloat();return u=a.config.meanRgb?yd(u,a.config.meanRgb):u,u=u.div(Je(256)),a.config.withSeparableConvs?a.runMobilenet(u,o):a.runTinyYolov2(u,o)})},n.prototype.forward=function(e,r){return pt(this,void 0,void 0,function(){var a;return vt(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Tr(e)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},n.prototype.detect=function(e,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a,o,u,s,c,f,h,p,m,g,x,E,S,_,A=this;return vt(this,function(T){switch(T.label){case 0:return a=new Ob(r),o=a.inputSize,u=a.scoreThreshold,[4,Tr(e)];case 1:return s=T.sent(),[4,this.forwardInput(s,o)];case 2:return c=T.sent(),f=nt(function(){return hr(c)[0].expandDims()}),h={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(f,s.getReshapedInputDimensions(0),u)];case 3:return p=T.sent(),c.dispose(),f.dispose(),m=p.map(function(N){return N.box}),g=p.map(function(N){return N.score}),x=p.map(function(N){return N.classScore}),E=p.map(function(N){return A.config.classes[N.label]}),S=Jf(m.map(function(N){return N.rescale(o)}),g,this.config.iouThreshold,!0),_=S.map(function(N){return new mA(g[N],x[N],E[N],m[N],h)}),[2,_]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(e){return pH(e,this.config)},n.prototype.extractParams=function(e){var r=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return dH(e,this.config,this.boxEncodingSize,r)},n.prototype.extractBoxes=function(e,r,a){return pt(this,void 0,void 0,function(){var o,u,s,c,f,h,p,m,g,x,E,S,_,A,T,N,D,k,P,H,U,j,G,K,be,pe,he,q,ne,ee=this;return vt(this,function(J){switch(J.label){case 0:return o=r.width,u=r.height,s=Math.max(o,u),c=s/o,f=s/u,h=e.shape[1],p=this.config.anchors.length,m=nt(function(){var L=e.reshape([h,h,p,ee.boxEncodingSize]),se=L.slice([0,0,0,0],[h,h,p,4]),Re=L.slice([0,0,0,4],[h,h,p,1]),Se=ee.withClassScores?ji(L.slice([0,0,0,5],[h,h,p,ee.config.classes.length]),3):Je(0);return[se,Re,Se]}),g=m[0],x=m[1],E=m[2],S=[],[4,x.array()];case 1:return _=J.sent(),[4,g.array()];case 2:A=J.sent(),T=0,J.label=3;case 3:if(!(T<h))return[3,12];N=0,J.label=4;case 4:if(!(N<h))return[3,11];D=0,J.label=5;case 5:return D<p?(k=ly(_[T][N][D][0]),!a||k>a?(P=(N+ly(A[T][N][D][0]))/h*c,H=(T+ly(A[T][N][D][1]))/h*f,U=Math.exp(A[T][N][D][2])*this.config.anchors[D].x/h*c,j=Math.exp(A[T][N][D][3])*this.config.anchors[D].y/h*f,G=P-U/2,K=H-j/2,be={row:T,col:N,anchor:D},this.withClassScores?[4,this.extractPredictedClass(E,be)]:[3,7]):[3,9]):[3,10];case 6:return ne=J.sent(),[3,8];case 7:ne={classScore:1,label:0},J.label=8;case 8:pe=ne,he=pe.classScore,q=pe.label,S.push(Zr({box:new wv(G,K,G+U,K+j),score:k,classScore:k*he,label:q},be)),J.label=9;case 9:return D++,[3,5];case 10:return N++,[3,4];case 11:return T++,[3,3];case 12:return g.dispose(),x.dispose(),E.dispose(),[2,S]}})})},n.prototype.extractPredictedClass=function(e,r){return pt(this,void 0,void 0,function(){var a,o,u,s;return vt(this,function(c){switch(c.label){case 0:return a=r.row,o=r.col,u=r.anchor,[4,e.array()];case 1:return s=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(f,h){return s[a][o][u][h]}).map(function(f,h){return{classScore:f,label:h}}).reduce(function(f,h){return f.classScore>h.classScore?f:h})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(Vi),vH=function(t){Nt(n,t);function n(e){e===void 0&&(e=!0);var r=this,a=Object.assign({},{withSeparableConvs:e,iouThreshold:aH,classes:["face"]},e?{anchors:iH,meanRgb:uH}:{anchors:oH,withClassScores:!0});return r=t.call(this,a)||this,r}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return pt(this,void 0,void 0,function(){var a;return vt(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return a=o.sent(),[2,a.map(function(u){return new oi(u.score,u.relativeBox,{width:u.imageWidth,height:u.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?lH:sH},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n}(WA),mH=function(t){Nt(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return n}(Ob),bd=function(){function t(){}return t.prototype.then=function(n){return pt(this,void 0,void 0,function(){var e;return vt(this,function(r){switch(r.label){case 0:return e=n,[4,this.run()];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return pt(this,void 0,void 0,function(){return vt(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},t}();function Cv(t,n,e,r,a){return a===void 0&&(a=function(o){var u=o.alignedRect;return u}),pt(this,void 0,void 0,function(){var o,u,s,c,f;return vt(this,function(h){switch(h.label){case 0:return o=t.map(function(p){return S5(p)?a(p):p.detection}),s=r,s?[3,5]:n instanceof Bn?[4,Cb(n,o)]:[3,2];case 1:return c=h.sent(),[3,4];case 2:return[4,_b(n,o)];case 3:c=h.sent(),h.label=4;case 4:s=c,h.label=5;case 5:return u=s,[4,e(u)];case 6:return f=h.sent(),u.forEach(function(p){return p instanceof Bn&&p.dispose()}),[2,f]}})})}function Mb(t,n,e,r,a){return pt(this,void 0,void 0,function(){var o=this;return vt(this,function(u){return[2,Cv([t],n,function(s){return pt(o,void 0,void 0,function(){return vt(this,function(c){return[2,e(s[0])]})})},r,a)]})})}function gH(t){return nt(function(){return Ha(hr(t,3).reverse(),3)})}var Xh=2,Vp=12;function yH(t,n){var e=Sv(t,n),r=Rb(t,n);function a(f,h){var p=ar(t(f));return n.push({paramPath:h}),p}function o(f,h,p){p===void 0&&(p=!1);var m=e(f[0],f[1],3,h+"/conv1"),g=a(f[1],h+"/prelu1_alpha"),x=e(f[1],f[2],3,h+"/conv2"),E=a(f[2],h+"/prelu2_alpha"),S=e(f[2],f[3],p?2:3,h+"/conv3"),_=a(f[3],h+"/prelu3_alpha");return{conv1:m,prelu1_alpha:g,conv2:x,prelu2_alpha:E,conv3:S,prelu3_alpha:_}}function u(){var f=o([3,10,16,32],"pnet"),h=e(32,2,1,"pnet/conv4_1"),p=e(32,4,1,"pnet/conv4_2");return Zr(Zr({},f),{conv4_1:h,conv4_2:p})}function s(){var f=o([3,28,48,64],"rnet",!0),h=r(576,128,"rnet/fc1"),p=a(128,"rnet/prelu4_alpha"),m=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return Zr(Zr({},f),{fc1:h,prelu4_alpha:p,fc2_1:m,fc2_2:g})}function c(){var f=o([3,32,64,64],"onet"),h=e(64,128,2,"onet/conv4"),p=a(128,"onet/prelu4_alpha"),m=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),x=r(256,2,"onet/fc2_1"),E=r(256,4,"onet/fc2_2"),S=r(256,10,"onet/fc2_3");return Zr(Zr({},f),{conv4:h,prelu4_alpha:p,fc1:m,prelu5_alpha:g,fc2_1:x,fc2_2:E,fc2_3:S})}return{extractPNetParams:u,extractRNetParams:s,extractONetParams:c}}function bH(t){var n=qi(t),e=n.extractWeights,r=n.getRemainingWeights,a=[],o=yH(e,a),u=o.extractPNetParams,s=o.extractRNetParams,c=o.extractONetParams,f=u(),h=s(),p=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:f,rnet:h,onet:p},paramMappings:a}}function xH(t,n){var e=Qu(t,n);function r(h){var p=e(h+"/weights",4,h+"/filters"),m=e(h+"/bias",1);return{filters:p,bias:m}}function a(h){var p=e(h+"/weights",2),m=e(h+"/bias",1);return{weights:p,bias:m}}function o(h){return e(h,1)}function u(h){var p=r(h+"/conv1"),m=o(h+"/prelu1_alpha"),g=r(h+"/conv2"),x=o(h+"/prelu2_alpha"),E=r(h+"/conv3"),S=o(h+"/prelu3_alpha");return{conv1:p,prelu1_alpha:m,conv2:g,prelu2_alpha:x,conv3:E,prelu3_alpha:S}}function s(){var h=u("pnet"),p=r("pnet/conv4_1"),m=r("pnet/conv4_2");return Zr(Zr({},h),{conv4_1:p,conv4_2:m})}function c(){var h=u("rnet"),p=a("rnet/fc1"),m=o("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),x=a("rnet/fc2_2");return Zr(Zr({},h),{fc1:p,prelu4_alpha:m,fc2_1:g,fc2_2:x})}function f(){var h=u("onet"),p=r("onet/conv4"),m=o("onet/prelu4_alpha"),g=a("onet/fc1"),x=o("onet/prelu5_alpha"),E=a("onet/fc2_1"),S=a("onet/fc2_2"),_=a("onet/fc2_3");return Zr(Zr({},h),{conv4:p,prelu4_alpha:m,fc1:g,prelu5_alpha:x,fc2_1:E,fc2_2:S,fc2_3:_})}return{extractPNetParams:s,extractRNetParams:c,extractONetParams:f}}function wH(t){var n=[],e=xH(t,n),r=e.extractPNetParams,a=e.extractRNetParams,o=e.extractONetParams,u=r(),s=a(),c=o();return Wi(t,n),{params:{pnet:u,rnet:s,onet:c},paramMappings:n}}function i0(t,n){var e=n[0],r=n[1];return{height:Math.floor(e*t),width:Math.floor(r*t)}}function EH(t,n,e){for(var r=e[0],a=e[1],o=Vp/t,u=[],s=Math.min(r,a)*o,c=0;s>=12;)u.push(o*Math.pow(n,c)),s=s*n,c+=1;return u}var Ib=function(t){Nt(n,t);function n(e,r,a,o){return t.call(this,{left:e,top:r,right:a,bottom:o},!0)||this}return n}(qu);function qA(t){return nt(function(){return na(vr(t,Je(127.5)),Je(.0078125))})}function ac(t,n){return nt(function(){return $t(Pn(t),na(n,Bp(Pn(Bp(t)))))})}function Fb(t,n,e){return e===void 0&&(e=!1),nt(function(){var r=yo(t,n.conv1,"valid");return r=ac(r,n.prelu1_alpha),r=Cr(r,e?[2,2]:[3,3],[2,2],"same"),r=yo(r,n.conv2,"valid"),r=ac(r,n.prelu2_alpha),r=e?r:Cr(r,[3,3],[2,2],"valid"),r=yo(r,n.conv3,"valid"),r=ac(r,n.prelu3_alpha),r})}function SH(t,n){return nt(function(){var e=Fb(t,n,!0),r=yo(e,n.conv4_1,"valid"),a=no(gv(r,3),3),o=ji(vr(r,a),3),u=yo(e,n.conv4_2,"valid");return{prob:o,regions:u}})}function _H(t,n){return nt(function(){var e=i0(n,t.shape.slice(1)),r=e.height,a=e.width,o=db.resizeBilinear(t,[r,a]),u=qA(o);return Wu(u,[0,2,1,3])})}function CH(t,n,e,r){for(var a=[],o=t.arraySync(),u=0;u<t.shape[0];u++)for(var s=0;s<t.shape[1];s++)o[u][s]>=r&&a.push(new un(s,u));var c=a.map(function(f){var h=new wv(Math.round((f.y*Xh+1)/e),Math.round((f.x*Xh+1)/e),Math.round((f.y*Xh+Vp)/e),Math.round((f.x*Xh+Vp)/e)),p=o[f.y][f.x],m=n.arraySync(),g=new Ib(m[f.y][f.x][0],m[f.y][f.x][1],m[f.y][f.x][2],m[f.y][f.x][3]);return{cell:h,score:p,region:g}});return c}function RH(t,n,e,r,a){a.stage1=[];var o=n.map(function(m){return nt(function(){var g={scale:m},x=_H(t,m),E=Date.now(),S=SH(x,r),_=S.prob,A=S.regions;g.pnet=Date.now()-E;var T=hr(hr(_,3)[1])[0],N=hr(A)[0];return{scoresTensor:T,regionsTensor:N,scale:m,statsForScale:g}})}),u=o.map(function(m){var g=m.scoresTensor,x=m.regionsTensor,E=m.scale,S=m.statsForScale,_=CH(g,x,E,e);if(g.dispose(),x.dispose(),!_.length)return a.stage1.push(S),[];var A=Date.now(),T=Jf(_.map(function(N){return N.cell}),_.map(function(N){return N.score}),.5);return S.nms=Date.now()-A,S.numBoxes=T.length,a.stage1.push(S),T.map(function(N){return _[N]})}),s=u.reduce(function(m,g){return m.concat(g)},[]),c=[],f=[];if(s.length>0){var h=Date.now(),p=Jf(s.map(function(m){return m.cell}),s.map(function(m){return m.score}),.7);a.stage1_nms=Date.now()-h,f=p.map(function(m){return s[m].score}),c=p.map(function(m){return s[m]}).map(function(m){var g=m.cell,x=m.region;return new wv(g.left+x.left*g.width,g.top+x.top*g.height,g.right+x.right*g.width,g.bottom+x.bottom*g.height).toSquare().round()})}return{boxes:c,scores:f}}function $A(t,n,e){var r=e.width,a=e.height;return pt(this,void 0,void 0,function(){var o,u,s,c=this;return vt(this,function(f){switch(f.label){case 0:return o=zs(t),[4,Promise.all(n.map(function(h){return pt(c,void 0,void 0,function(){var p,m,g,x,E,S,_,A;return vt(this,function(T){return p=h.padAtBorders(t.height,t.width),m=p.y,g=p.ey,x=p.x,E=p.ex,S=x-1,_=m-1,A=o.getImageData(S,_,E-S,g-_),[2,ra.isNodejs()?Sb(A):createImageBitmap(A)]})})}))];case 1:return u=f.sent(),s=[],u.forEach(function(h){var p=Ev({width:r,height:a}),m=zs(p);m.drawImage(h,0,0,r,a);for(var g=m.getImageData(0,0,r,a).data,x=[],E=0;E<g.length;E+=4)x.push(g[E+2]),x.push(g[E+1]),x.push(g[E]);s.push(x)}),[2,s.map(function(h){var p=nt(function(){var m=Wu(xa(h,[1,r,a,3]),[0,2,1,3]).toFloat();return qA(m)});return p})]}})})}function AH(t,n){return nt(function(){var e=Fb(t,n),r=go(e,[e.shape[0],n.fc1.weights.shape[0]]),a=Wo(r,n.fc1),o=ac(a,n.prelu4_alpha),u=Wo(o,n.fc2_1),s=no(gv(u,1),1),c=ji(vr(u,s),1),f=Wo(o,n.fc2_2),h=hr(c,1)[1];return{scores:h,regions:f}})}function TH(t,n,e,r,a){return pt(this,void 0,void 0,function(){var o,u,s,c,f,h,p,m,g,x,E,S,_,A;return vt(this,function(T){switch(T.label){case 0:return o=Date.now(),[4,$A(t,n,{width:24,height:24})];case 1:return u=T.sent(),a.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=u.map(function(N){var D=AH(N,r);return N.dispose(),D}),a.stage2_rnet=Date.now()-o,c=s.length>1?dr(s.map(function(N){return N.scores})):s[0].scores,p=(h=Array).from,[4,c.data()];case 2:return f=p.apply(h,[T.sent()]),c.dispose(),m=f.map(function(N,D){return{score:N,idx:D}}).filter(function(N){return N.score>e}).map(function(N){var D=N.idx;return D}),g=m.map(function(N){return n[N]}),x=m.map(function(N){return f[N]}),E=[],S=[],g.length>0&&(o=Date.now(),_=Jf(g,x,.7),a.stage2_nms=Date.now()-o,A=_.map(function(N){var D=s[m[N]].regions.arraySync();return new Ib(D[0][0],D[0][1],D[0][2],D[0][3])}),S=_.map(function(N){return x[N]}),E=_.map(function(N,D){return g[N].calibrate(A[D])})),s.forEach(function(N){N.regions.dispose(),N.scores.dispose()}),[2,{boxes:E,scores:S}]}})})}function DH(t,n){return nt(function(){var e=Fb(t,n);e=Cr(e,[2,2],[2,2],"same"),e=yo(e,n.conv4,"valid"),e=ac(e,n.prelu4_alpha);var r=go(e,[e.shape[0],n.fc1.weights.shape[0]]),a=Wo(r,n.fc1),o=ac(a,n.prelu5_alpha),u=Wo(o,n.fc2_1),s=no(gv(u,1),1),c=ji(vr(u,s),1),f=Wo(o,n.fc2_2),h=Wo(o,n.fc2_3),p=hr(c,1)[1];return{scores:p,regions:f,points:h}})}function NH(t,n,e,r,a){return pt(this,void 0,void 0,function(){var o,u,s,c,f,h,p,m,g,x,E,S,_,A,T;return vt(this,function(N){switch(N.label){case 0:return o=Date.now(),[4,$A(t,n,{width:48,height:48})];case 1:return u=N.sent(),a.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=u.map(function(D){var k=DH(D,r);return D.dispose(),k}),a.stage3_onet=Date.now()-o,c=s.length>1?dr(s.map(function(D){return D.scores})):s[0].scores,p=(h=Array).from,[4,c.data()];case 2:return f=p.apply(h,[N.sent()]),c.dispose(),m=f.map(function(D,k){return{score:D,idx:k}}).filter(function(D){return D.score>e}).map(function(D){var k=D.idx;return k}),g=m.map(function(D){var k=s[D].regions.arraySync();return new Ib(k[0][0],k[0][1],k[0][2],k[0][3])}),x=m.map(function(D,k){return n[D].calibrate(g[k])}),E=m.map(function(D){return f[D]}),S=[],_=[],A=[],x.length>0&&(o=Date.now(),T=Jf(x,E,.7,!1),a.stage3_nms=Date.now()-o,S=T.map(function(D){return x[D]}),_=T.map(function(D){return E[D]}),A=T.map(function(D,k){return Array(5).fill(0).map(function(P,H){var U=s[D].points.arraySync();return new un(U[0][H]*(S[k].width+1)+S[k].left,U[0][H+5]*(S[k].height+1)+S[k].top)})})),s.forEach(function(D){D.regions.dispose(),D.scores.dispose(),D.points.dispose()}),[2,{boxes:S,scores:_,points:A}]}})})}var kH=function(t){Nt(n,t);function n(){return t.call(this,"Mtcnn")||this}return n.prototype.load=function(e){return pt(this,void 0,void 0,function(){return vt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,e)]})})},n.prototype.loadFromDisk=function(e){return pt(this,void 0,void 0,function(){return vt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,e)]})})},n.prototype.forwardInput=function(e,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a,o,u,s,c,f,h,p,m,g,x,E,S,_,A,T,N,D,k,P,H;return vt(this,function(U){switch(U.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(o=e.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return u={},s=Date.now(),c=nt(function(){return gH(no(yb.fromPixels(o)).toFloat())}),f=function(j){return c.dispose(),u.total=Date.now()-s,j},h=c.shape.slice(1),p=h[0],m=h[1],g=new HA(r),x=g.minFaceSize,E=g.scaleFactor,S=g.maxNumScales,_=g.scoreThresholds,A=g.scaleSteps,T=(A||EH(x,E,[p,m])).filter(function(j){var G=i0(j,[p,m]);return Math.min(G.width,G.height)>Vp}).slice(0,S),u.scales=T,u.pyramid=T.map(function(j){return i0(j,[p,m])}),N=Date.now(),[4,RH(c,T,_[0],a.pnet,u)];case 1:return D=U.sent(),u.total_stage1=Date.now()-N,D.boxes.length?(u.stage2_numInputBoxes=D.boxes.length,N=Date.now(),[4,TH(o,D.boxes,_[1],a.rnet,u)]):[2,f({results:[],stats:u})];case 2:return k=U.sent(),u.total_stage2=Date.now()-N,k.boxes.length?(u.stage3_numInputBoxes=k.boxes.length,N=Date.now(),[4,NH(o,k.boxes,_[2],a.onet,u)]):[2,f({results:[],stats:u})];case 3:return P=U.sent(),u.total_stage3=Date.now()-N,H=P.boxes.map(function(j,G){return Db(wb({},new oi(P.scores[G],new xb(j.left/m,j.top/p,j.width/m,j.height/p),{height:p,width:m})),new i5(P.points[G].map(function(K){return K.sub(new un(j.left,j.top)).div(new un(j.width,j.height))}),{width:j.width,height:j.height}))}),[2,f({results:H,stats:u})]}})})},n.prototype.forward=function(e,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a;return vt(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Tr(e)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},n.prototype.forwardWithStats=function(e,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a;return vt(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Tr(e)];case 1:return[2,a.apply(this,[o.sent(),r])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(e){return wH(e)},n.prototype.extractParams=function(e){return bH(e)},n}(Vi),OH=.4,MH=[new un(1.603231,2.094468),new un(6.041143,7.080126),new un(2.882459,3.518061),new un(4.266906,5.178857),new un(9.041765,10.66308)],IH=[117.001,114.697,97.404],FH=function(t){Nt(n,t);function n(){var e=this,r={withSeparableConvs:!0,iouThreshold:OH,classes:["face"],anchors:MH,meanRgb:IH,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e=t.call(this,r)||this,e}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return pt(this,void 0,void 0,function(){var a;return vt(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return a=o.sent(),[2,a.map(function(u){return new oi(u.score,u.relativeBox,{width:u.imageWidth,height:u.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n}(WA),Rr={ssdMobilenetv1:new VA,tinyFaceDetector:new FH,tinyYolov2:new vH,mtcnn:new kH,faceLandmark68Net:new BA,faceLandmark68TinyNet:new B5,faceRecognitionNet:new V5,faceExpressionNet:new E5,ageGenderNet:new O5},GA=function(t){Nt(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=a,o}return n}(bd),Bb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r,a=this;return vt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,Cv(e,this.input,function(u){return pt(a,void 0,void 0,function(){return vt(this,function(s){switch(s.label){case 0:return[4,Promise.all(u.map(function(c){return Rr.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(u,s){return MA(u,r[s])})]}})})},n.prototype.withAgeAndGender=function(){return new zb(this,this.input)},n}(GA),Pb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r;return vt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,Mb(e,this.input,function(o){return Rr.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,MA(e,r)]}})})},n.prototype.withAgeAndGender=function(){return new jb(this,this.input)},n}(GA),Lb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Hb(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Wb(this,this.input)},n}(Bb),Ub=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Vb(this,this.input)},n.prototype.withFaceDescriptor=function(){return new qb(this,this.input)},n}(Pb),KA=function(t){Nt(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=a,o}return n}(bd),zb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r,a=this;return vt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,Cv(e,this.input,function(u){return pt(a,void 0,void 0,function(){return vt(this,function(s){switch(s.label){case 0:return[4,Promise.all(u.map(function(c){return Rr.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(u,s){var c=r[s],f=c.age,h=c.gender,p=c.genderProbability;return zA(jA(u,h,p),f)})]}})})},n.prototype.withFaceExpressions=function(){return new Bb(this,this.input)},n}(KA),jb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r,a,o,u;return vt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return e=s.sent(),e?[4,Mb(e,this.input,function(c){return Rr.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=s.sent(),a=r.age,o=r.gender,u=r.genderProbability,[2,zA(jA(e,o,u),a)]}})})},n.prototype.withFaceExpressions=function(){return new Pb(this,this.input)},n}(KA),Hb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new Lb(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Wb(this,this.input)},n}(zb),Vb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new Ub(this,this.input)},n.prototype.withFaceDescriptor=function(){return new qb(this,this.input)},n}(jb),XA=function(t){Nt(n,t);function n(e,r){var a=t.call(this)||this;return a.parentTask=e,a.input=r,a}return n}(bd),Wb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r;return vt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),[4,Cv(e,this.input,function(o){return Promise.all(o.map(function(u){return Rr.faceRecognitionNet.computeFaceDescriptor(u)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(o,u){return UA(e[u],o)})]}})})},n.prototype.withFaceExpressions=function(){return new Lb(this,this.input)},n.prototype.withAgeAndGender=function(){return new Hb(this,this.input)},n}(XA),qb=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r;return vt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,Mb(e,this.input,function(o){return Rr.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,UA(e,r)]}})})},n.prototype.withFaceExpressions=function(){return new Ub(this,this.input)},n.prototype.withAgeAndGender=function(){return new Vb(this,this.input)},n}(XA),YA=function(t){Nt(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.useTinyLandmarkNet=a,o}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Rr.faceLandmark68TinyNet:Rr.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(bd),BH=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r,a,o,u,s=this;return vt(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return e=c.sent(),r=e.map(function(f){return f.detection}),this.input instanceof Bn?[4,Cb(this.input,r)]:[3,3];case 2:return o=c.sent(),[3,5];case 3:return[4,_b(this.input,r)];case 4:o=c.sent(),c.label=5;case 5:return a=o,[4,Promise.all(a.map(function(f){return s.landmarkNet.detectLandmarks(f)}))];case 6:return u=c.sent(),a.forEach(function(f){return f instanceof Bn&&f.dispose()}),[2,e.map(function(f,h){return Db(f,u[h])})]}})})},n.prototype.withFaceExpressions=function(){return new Lb(this,this.input)},n.prototype.withAgeAndGender=function(){return new Hb(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Wb(this,this.input)},n}(YA),PH=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r,a,o,u;return vt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return e=s.sent(),e?(r=e.detection,this.input instanceof Bn?[4,Cb(this.input,[r])]:[3,3]):[2];case 2:return o=s.sent(),[3,5];case 3:return[4,_b(this.input,[r])];case 4:o=s.sent(),s.label=5;case 5:return a=o,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return u=s.sent(),a.forEach(function(c){return c instanceof Bn&&c.dispose()}),[2,Db(e,u)]}})})},n.prototype.withFaceExpressions=function(){return new Ub(this,this.input)},n.prototype.withAgeAndGender=function(){return new Vb(this,this.input)},n.prototype.withFaceDescriptor=function(){return new qb(this,this.input)},n}(YA),QA=function(t){Nt(n,t);function n(e,r){r===void 0&&(r=new _v);var a=t.call(this)||this;return a.input=e,a.options=r,a}return n}(bd),LH=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r,a,o;return vt(this,function(u){switch(u.label){case 0:return e=this,r=e.input,a=e.options,a instanceof HA?[4,Rr.mtcnn.forward(r,a)]:[3,2];case 1:return[2,u.sent().map(function(s){return s.detection})];case 2:if(o=a instanceof mH?function(s){return Rr.tinyFaceDetector.locateFaces(s,a)}:a instanceof _v?function(s){return Rr.ssdMobilenetv1.locateFaces(s,a)}:a instanceof Ob?function(s){return Rr.tinyYolov2.locateFaces(s,a)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(r){return pt(e,void 0,void 0,function(){var a;return vt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a.map(function(u){return wb({},u)}))]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new BH(this.runAndExtendWithFaceDetections(),this.input,e)},n.prototype.withFaceExpressions=function(){return new Bb(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new zb(this.runAndExtendWithFaceDetections(),this.input)},n}(QA),UH=function(t){Nt(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return pt(this,void 0,void 0,function(){var e,r;return vt(this,function(a){switch(a.label){case 0:return[4,new LH(this.input,this.options)];case 1:return e=a.sent(),r=e[0],e.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(r){return pt(e,void 0,void 0,function(){var a;return vt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a?wb({},a):void 0)]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new PH(this.runAndExtendWithFaceDetection(),this.input,e)},n.prototype.withFaceExpressions=function(){return new Pb(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new jb(this.runAndExtendWithFaceDetection(),this.input)},n}(QA);function ZA(t,n){return n===void 0&&(n=new _v),new UH(t,n)}function zH(t,n){if(t.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(t),r=Array.from(n);return Math.sqrt(e.map(function(a,o){return a-r[o]}).reduce(function(a,o){return a+Math.pow(o,2)},0))}(function(){function t(n,e){e===void 0&&(e=.6),this._distanceThreshold=e;var r=Array.isArray(n)?n:[n];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,o=function(){return"person "+a++};this._labeledDescriptors=r.map(function(u){if(u instanceof qh)return u;if(u instanceof Float32Array)return new qh(o(),[u]);if(u.descriptor&&u.descriptor instanceof Float32Array)return new qh(o(),[u.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(n,e){return e.map(function(r){return zH(r,n)}).reduce(function(r,a){return r+a},0)/(e.length||1)},t.prototype.matchDescriptor=function(n){var e=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,o=r.label;return new hS(o,e.computeMeanDistance(n,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},t.prototype.findBestMatch=function(n){var e=this.matchDescriptor(n);return e.distance<this.distanceThreshold?e:new hS("unknown",e.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},t.fromJSON=function(n){var e=n.labeledDescriptors.map(function(r){return qh.fromJSON(r)});return new t(e,n.distanceThreshold)},t})();async function jH(t){var h;if(!t||!Array.isArray(t))return{status:!1,message:"Invalid descriptor data"};const n=await Wn.users.toArray();function e(p,m){return Math.sqrt(p.reduce((g,x,E)=>g+Math.pow(x-m[E],2),0))}let r={user:null,dist:1};for(const p of n){if(!p.descriptor||p.descriptor.length!==t.length)continue;const m=e(t,p.descriptor);m<r.dist&&(r={user:p,dist:m})}if(!r.user||r.dist>=.6)return{status:!1,message:"Face not recognized (offline)"};console.log("bestmatch",r);const a=new Date,o=new Date;o.setHours(10,0,0,0);const u=new Date;if(u.setHours(24,0,0,0),a<o||a>u)return{status:!1,message:"You can only sign in between 10:00 AM and 5:00 PM"};const s=new Date().toISOString().slice(0,10),c=await Wn.attendance.where("userId").equals((h=r==null?void 0:r.user)==null?void 0:h._id).toArray();console.log("existing attendanec",c);const f=c==null?void 0:c.some(p=>p.signInAt.startsWith(s));return console.log("already marked",f),f?{status:!1,message:`Already marked for ${r.user.name} (offline)`}:(await Wn.attendance.add({userId:r.user._id,signInAt:new Date().toISOString()}),await Wn.syncAttendanceQueue.add({operation:"add",data:{userId:r.user._id,signInAt:new Date().toISOString()}}),{status:!0,message:`Marked for ${r.user.name} (offline)`,userId:r.user._id})}const JA=async()=>await Wn.users.toArray(),eT=async()=>await Wn.attendance.toArray(),tT=async()=>{const t=new Date;t.setHours(10,0,0,0);const n=new Date;n.setHours(24,0,0,0);const e=t.toISOString(),r=n.toISOString(),a=await Wn.users.toArray(),o=await Wn.attendance.where("signInAt").between(e,r).toArray();console.log("attendanceToday",o);const u=(o==null?void 0:o.length)>0&&(o==null?void 0:o.map(s=>s==null?void 0:s.userId));return u.length>0?(a==null?void 0:a.filter(c=>!(u!=null&&u.includes(c==null?void 0:c._id)))).map(c=>({_id:c._id,name:c.name,aadhaar:c.aadhaar,aadhaarVerified:c.aadhaarVerified,createdAt:c.createdAt})):a};async function HH(){const t=["/models/ssd_mobilenetv1_model-shard1","/models/ssd_mobilenetv1_model-shard2","/models/ssd_mobilenetv1_model-weights_manifest.json","/models/face_landmark_68_model-shard1","/models/face_landmark_68_model-weights_manifest.json","/models/face_recognition_model-shard1","/models/face_recognition_model-shard2","/models/face_recognition_model-weights_manifest.json"];for(const n of t){const r=await(await fetch(n)).blob(),a=n.split("/models/")[1];await Wn.models.put({name:a,blob:r})}console.log("Models saved to IndexedDB")}function VH(){const t=window.fetch;window.fetch=async function(n,e){if(typeof n=="string"&&n.startsWith("/models/")){const r=n.split("/models/")[1],a=await Wn.models.get(r);if(a!=null&&a.blob)return new Response(a.blob);throw new Error(`Model ${r} not found in IndexedDB`)}return t(n,e)}}async function nT(){window.navigator.onLine?(await Rr.ssdMobilenetv1.loadFromUri("/models"),await Rr.faceLandmark68Net.loadFromUri("/models"),await Rr.faceRecognitionNet.loadFromUri("/models")):(VH(),await Rr.ssdMobilenetv1.loadFromUri("/models"),await Rr.faceLandmark68Net.loadFromUri("/models"),await Rr.faceRecognitionNet.loadFromUri("/models"))}function WH(){const t=FC(),{pathname:n}=ei(),e=F.useRef(null),[r,a]=F.useState(!0),[o,u]=F.useState(null),[s,c]=F.useState(!1);F.useEffect(()=>{(async()=>{try{await nT(),console.log("Face models loaded successfully")}catch(x){console.error("Error loading face models:",x)}})()},[]);const f=async()=>{c(!0);const g=jt.loading("Capturing image..."),x=e.current;if(!x||x.readyState!==4){jt.dismiss(g),jt.error("Camera not ready"),c(!1);return}jt.dismiss(g);const E=jt.loading("Detecting face..."),S=await ZA(x).withFaceLandmarks().withFaceDescriptor();if(!S){jt.dismiss(E),jt.error("No face detected. Try again."),c(!1);return}h(x),m(),jt.dismiss(E),jt.success("face detected");const _=Array.from(S.descriptor),A=jt.loading("Matching face...");try{if(window.navigator.onLine){const T=await En.post("/api/attendance/sign-in",{descriptor:_});T.data.status?(jt.dismiss(A),jt.success(T.data.message),u(""),a(!0),p(),c(!1)):(jt.dismiss(A),jt.error(T.data.message),u(""),a(!0),p(),c(!1))}else{const T=await jH(_);T.status?(jt.dismiss(A),jt.success(T.message),u(""),a(!0),p(),c(!1)):(jt.dismiss(A),jt.error(T.message),u(""),a(!0),p(),c(!1))}}catch(T){jt.dismiss(A),u(""),a(!0),p(),c(!1),console.log(T)}},h=g=>{const x=document.createElement("canvas");x.width=g.videoWidth,x.height=g.videoHeight,x.getContext("2d").drawImage(g,0,0,x.width,x.height);const S=x.toDataURL("image/jpeg");u(S)},p=()=>{navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:480,height:360}}).then(g=>{e.current?(e.current.srcObject=g,a(g)):console.error("webcamVideo.current is null")}).catch(g=>{console.error("Error accessing camera:",g)})},m=()=>{var g;r&&((g=r==null?void 0:r.getTracks())==null||g.forEach(x=>x.stop()),e.current&&(e.current.srcObject=null),a(null))};return F.useEffect(()=>{p()},[]),F.useEffect(()=>{t&&(async()=>{await j0(),await H0(),await U0(),await z0()})()},[t]),Q.jsx(Q.Fragment,{children:Q.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-10 lg:px-8",children:[Q.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[Q.jsx("h1",{className:" text-center text-2xl/9 font-bold tracking-tight text-cyan-700",children:"AIITS"}),Q.jsx("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-400",children:"Attendance"})]}),Q.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:Q.jsxs("div",{className:"space-y-6",children:[Q.jsxs("div",{children:[r&&Q.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,className:"border rounded-xl"}),o&&Q.jsx("div",{className:"mt-4",children:Q.jsx("img",{src:o,alt:"Captured",className:"rounded shadow-md"})})]}),Q.jsx("div",{children:s?Q.jsx("button",{type:"button",className:"cursor-pointer outline-none flex w-full justify-center rounded-md bg-cyan-900 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-cyan-800",children:Q.jsxs("svg",{className:"mr-3 size-5 animate-spin text-gray-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Q.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Q.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}):Q.jsx("button",{onClick:f,type:"button",className:"cursor-pointer outline-none flex w-full justify-center rounded-md bg-cyan-900 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-cyan-800",children:"Mark Attendance"})})]})})]})})}function qH(){const t=F.useRef(null),[n,e]=F.useState(!0),[r,a]=F.useState(null),[o,u]=F.useState(""),[s,c]=F.useState(""),[f,h]=F.useState(""),[p,m]=F.useState(1),[g,x]=F.useState(!1);F.useEffect(()=>{(async()=>{try{await nT(),console.log("Face models loaded successfully")}catch(k){console.error("Error loading face models:",k)}})()},[]);const E=async D=>{if(D.preventDefault(),!o)return jt.error("Please enter Full Name");if(!s)return jt.error("Please enter Aadhaar No");const k=jt.loading("Verifying!");try{if(window.navigator.onLine){const P=await En.get(`/api/user/verify-aadhaar/${s}`);P.data.status?(jt.dismiss(k),jt.success(P.data.message),m(2)):(jt.dismiss(k),jt.error(P.data.message))}else jt.dismiss(k),jt.success("you are offline! will be verifying when you Online"),m(2)}catch{jt.dismiss(k),jt.error("Somthing went wrong. Please try again !")}},S=async()=>{x(!0);const D=jt.loading("Capturing image..."),k=t.current;if(!k||k.readyState!==4){jt.dismiss(D),jt.error("Camera not ready"),x(!1);return}jt.dismiss(D);const P=jt.loading("Detecting face..."),H=await ZA(k).withFaceLandmarks().withFaceDescriptor();if(!H){jt.dismiss(P),jt.error("No face detected. Try again."),x(!1);return}_(k),N(),jt.dismiss(P),jt.success("face detected"),x(!1);const U=Array.from(H.descriptor);h(U)},_=D=>{const k=document.createElement("canvas");k.width=D.videoWidth,k.height=D.videoHeight,k.getContext("2d").drawImage(D,0,0,k.width,k.height);const H=k.toDataURL("image/jpeg");a(H)},A=async()=>{x(!0);const D={name:o,aadhaar:s,aadhaarVerified:!0,descriptor:f},k={name:o,aadhaar:s,aadhaarVerified:!1,descriptor:f,addedBy:"",createdAt:new Date().toISOString()};try{navigator.onLine?(await En.post("/api/user/register",{...D}),jt.success("Registered successfully!")):(await Wn.users.add(k),await Wn.syncUserQueue.add({operation:"add",data:k}),jt.success("User registered offline. Will sync when online.")),x(!1),m(1),a(null),u(""),c(""),h(""),a(""),e(!0)}catch{x(!1)}},T=()=>{navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:480,height:360}}).then(D=>{t.current?(t.current.srcObject=D,e(D)):console.error("webcamVideo.current is null")}).catch(D=>{console.error("Error accessing camera:",D)})},N=()=>{n&&(n.getTracks().forEach(D=>D.stop()),t.current&&(t.current.srcObject=null),e(null))};return F.useEffect(()=>{p===2&&T()},[p]),Q.jsx(Q.Fragment,{children:Q.jsxs("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-10 lg:px-8",children:[Q.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[Q.jsx("h1",{className:" text-center text-2xl/9 font-bold tracking-tight text-cyan-700",children:"AIITS"}),Q.jsx("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-400",children:"Register an User"})]}),Q.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:p===1?Q.jsxs("form",{onSubmit:E,className:"space-y-6",children:[Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"name",className:"block text-sm/6 font-medium text-gray-500",children:"Full Name"}),Q.jsx("div",{className:"mt-2",children:Q.jsx("input",{id:"name",name:"name",type:"text",placeholder:"Enter Full Name",value:o,onChange:D=>u(D.target.value),className:"block w-full rounded-md px-3 py-1.5 text-base text-gray-200 outline-none border border-gray-700 placeholder:text-gray-600  sm:text-sm/6"})})]}),Q.jsxs("div",{children:[Q.jsx("div",{className:"flex items-center justify-between",children:Q.jsx("label",{htmlFor:"aadhaar",className:"block text-sm/6 font-medium text-gray-500",children:"Aadhaar No"})}),Q.jsx("div",{className:"mt-2",children:Q.jsx("input",{id:"aadhaar",name:"aadhaar",type:"text",placeholder:"Enter Aadhaar No",value:s,onChange:D=>c(D.target.value),className:"block w-full rounded-md px-3 py-1.5 text-base text-gray-200 outline-none border border-gray-700 placeholder:text-gray-600  sm:text-sm/6"})})]}),Q.jsx("div",{children:Q.jsx("button",{type:"submit",className:"cursor-pointer outline-none flex w-full justify-center rounded-md bg-cyan-900 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-cyan-800",children:"Verify Aadhaar & Next"})})]}):p===2?Q.jsxs("div",{className:"space-y-6",children:[Q.jsxs("div",{children:[n&&Q.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,className:"border rounded-xl"}),r&&Q.jsx("div",{className:"mt-4",children:Q.jsx("img",{src:r,alt:"Captured",className:"rounded shadow-md"})})]}),Q.jsx("div",{children:g?Q.jsx("button",{type:"button",className:"cursor-pointer outline-none flex w-full justify-center rounded-md bg-cyan-900 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-cyan-800",children:Q.jsxs("svg",{className:"mr-3 size-5 animate-spin text-gray-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Q.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Q.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}):f?g?Q.jsx("button",{type:"button",className:"cursor-pointer outline-none flex w-full justify-center rounded-md bg-cyan-900 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-cyan-800",children:Q.jsxs("svg",{className:"mr-3 size-5 animate-spin text-gray-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Q.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Q.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}):Q.jsx("button",{onClick:A,type:"button",className:"cursor-pointer outline-none flex w-full justify-center rounded-md bg-cyan-900 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-cyan-800",children:"Register"}):Q.jsx("button",{onClick:S,type:"button",className:"cursor-pointer outline-none flex w-full justify-center rounded-md bg-cyan-900 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-cyan-800",children:"Capture Image"})})]}):null})]})})}function $H(){const[t,n]=F.useState(0),[e,r]=F.useState(0),[a,o]=F.useState(0),u=async()=>{const s=await JA();n(s.length);const c=await eT();r(c.length);const f=await tT();o(f.length)};return F.useEffect(()=>{u()},[]),Q.jsx(Q.Fragment,{children:Q.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:Q.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 text-white",children:[Q.jsx("div",{className:"bg-gray-900 rounded-2xl p-6 shadow-lg border border-gray-800 hover:scale-105 transition h-28",children:Q.jsxs("div",{className:"flex items-center justify-between",children:[Q.jsxs("div",{children:[Q.jsx("p",{className:"text-sm text-gray-400",children:"Total Users"}),Q.jsx("h2",{className:"text-3xl font-bold text-white mt-2",children:t})]}),Q.jsx("div",{className:"text-indigo-400 bg-indigo-800/20 p-3 rounded-full",children:Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Q.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-3-3h-4a3 3 0 00-3 3v2h5zm0-9a4 4 0 11-8 0 4 4 0 018 0z"})})})]})}),Q.jsx("div",{className:"bg-gray-900 rounded-2xl p-6 shadow-lg border border-gray-800 hover:scale-105 transition h-28",children:Q.jsxs("div",{className:"flex items-center justify-between",children:[Q.jsxs("div",{children:[Q.jsx("p",{className:"text-sm text-gray-400",children:"Present Today"}),Q.jsx("h2",{className:"text-3xl font-bold text-green-400 mt-2",children:e})]}),Q.jsx("div",{className:"text-green-400 bg-green-800/20 p-3 rounded-full",children:Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Q.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})})})]})}),Q.jsx("div",{className:"bg-gray-900 rounded-2xl p-6 shadow-lg border border-gray-800 hover:scale-105 transition h-28",children:Q.jsxs("div",{className:"flex items-center justify-between",children:[Q.jsxs("div",{children:[Q.jsx("p",{className:"text-sm text-gray-400",children:"Absent Today"}),Q.jsx("h2",{className:"text-3xl font-bold text-red-400 mt-2",children:a})]}),Q.jsx("div",{className:"text-red-400 bg-red-800/20 p-3 rounded-full",children:Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Q.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]})})})}function GH(){const[t,n]=F.useState([]),e=async()=>{const r=await JA();n(r)};return F.useEffect(()=>{e()},[]),Q.jsx(Q.Fragment,{children:Q.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:Q.jsx("div",{className:"overflow-x-auto",children:Q.jsxs("table",{className:"min-w-full bg-gray-900 border border-gray-800 rounded-xl",children:[Q.jsx("thead",{className:"bg-gray-800 text-gray-300",children:Q.jsxs("tr",{children:[Q.jsx("th",{className:"px-6 py-3 text-left",children:"#"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Name"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Aadhaar"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Created Date"})]})}),Q.jsx("tbody",{className:"text-gray-200",children:t&&t.map((r,a)=>Q.jsxs("tr",{className:"hover:bg-gray-700 transition",children:[Q.jsx("td",{className:"px-6 py-4",children:a+1}),Q.jsx("td",{className:"px-6 py-4",children:r.name}),r.aadhaarVerified?Q.jsx("td",{className:"px-6 py-4 text-green-400",children:r.aadhaar}):Q.jsx("td",{className:"px-6 py-4 text-red-400",children:r.aadhaar}),Q.jsx("td",{className:"px-6 py-4",children:r.createdAt})]},a))})]})})})})}function KH(){const[t,n]=F.useState([]),e=async()=>{const r=await eT();n(r)};return F.useEffect(()=>{e()},[]),Q.jsx(Q.Fragment,{children:Q.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:Q.jsx("div",{className:"overflow-x-auto",children:Q.jsxs("table",{className:"min-w-full bg-gray-900 border border-gray-800 rounded-xl",children:[Q.jsx("thead",{className:"bg-gray-800 text-gray-300",children:Q.jsxs("tr",{children:[Q.jsx("th",{className:"px-6 py-3 text-left",children:"#"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Name"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Aadhaar"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Date"})]})}),Q.jsx("tbody",{className:"text-gray-200",children:t&&t.map((r,a)=>Q.jsxs("tr",{className:"hover:bg-gray-700 transition",children:[Q.jsx("td",{className:"px-6 py-4",children:a+1}),Q.jsx("td",{className:"px-6 py-4",children:r.user.name}),r.user.aadhaarVerified?Q.jsx("td",{className:"px-6 py-4 text-green-400",children:r.user.aadhaar}):Q.jsx("td",{className:"px-6 py-4 text-red-400",children:r.user.aadhaar}),Q.jsx("td",{className:"px-6 py-4 text-green-400",children:"Present"}),Q.jsx("td",{className:"px-6 py-4",children:r.signInAt})]},a))})]})})})})}function XH(){const[t,n]=F.useState([]),e=async()=>{const r=await tT();n(r)};return F.useEffect(()=>{e()},[]),Q.jsx(Q.Fragment,{children:Q.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:Q.jsx("div",{className:"overflow-x-auto",children:Q.jsxs("table",{className:"min-w-full bg-gray-900 border border-gray-800 rounded-xl",children:[Q.jsx("thead",{className:"bg-gray-800 text-gray-300",children:Q.jsxs("tr",{children:[Q.jsx("th",{className:"px-6 py-3 text-left",children:"#"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Name"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Aadhaar"}),Q.jsx("th",{className:"px-6 py-3 text-left",children:"Status"})]})}),Q.jsx("tbody",{className:"text-gray-200",children:t&&t.map((r,a)=>Q.jsxs("tr",{className:"hover:bg-gray-700 transition",children:[Q.jsx("td",{className:"px-6 py-4",children:a+1}),Q.jsx("td",{className:"px-6 py-4",children:r==null?void 0:r.name}),r.aadhaarVerified?Q.jsx("td",{className:"px-6 py-4 text-green-400",children:r.aadhaar}):Q.jsx("td",{className:"px-6 py-4 text-red-400",children:r.aadhaar}),Q.jsx("td",{className:"px-6 py-4 text-red-400",children:"Absent"})]},a))})]})})})})}const YH=()=>{const t=$p(),[n,e]=F.useState(!1);async function r(){await Wn.models.get("ssd_manifest")?console.log("Face models already cached in IndexedDB"):(console.log("Saving face models to IndexedDB..."),await HH())}return F.useEffect(()=>{const a=async()=>{await r(),await j0(),await H0(),await U0(),await z0()};return window.navigator.onLine&&a(),window.addEventListener("online",a),()=>window.removeEventListener("online",a)},[]),Q.jsx("div",{className:" flex items-center justify-center  text-white",children:Q.jsxs("div",{className:"text-center px-4",children:[Q.jsx("h1",{className:"text-5xl font-bold mb-4",children:"Welcome to the Attendance System"}),Q.jsx("p",{className:"text-lg mb-8",children:"Mark your presence using face recognition and Aadhaar verification."}),n?Q.jsxs("div",{className:"flex items-center justify-center gap-2",children:[Q.jsx("button",{onClick:()=>t("/mark-attendance"),className:"bg-white text-cyan-800 shadow font-semibold px-6 py-2 rounded-lg hover:bg-gray-200 transition",children:"Mark Attendence"}),Q.jsx("button",{onClick:()=>t("/admin/dashboard"),className:"bg-white text-cyan-800 shadow font-semibold px-6 py-2 rounded-lg hover:bg-gray-200 transition",children:"Admin"})]}):Q.jsx("button",{onClick:()=>e(!n),className:"bg-white text-cyan-800 shadow font-semibold px-6 py-2 rounded-lg hover:bg-gray-200 transition",children:"Get Started"})]})})};function QH(){const t=Ck([{element:Q.jsx(TO,{}),errorElement:Q.jsx(gE,{}),children:[{path:"/",element:Q.jsx(YH,{})},{path:"/mark-attendance",element:Q.jsx(WH,{})}]},{element:Q.jsx(gB,{}),errorElement:Q.jsx(gE,{}),children:[{path:"/admin/dashboard",element:Q.jsx($H,{})},{path:"/admin/user-register",element:Q.jsx(qH,{})},{path:"/admin/users",element:Q.jsx(GH,{})},{path:"/admin/present-users",element:Q.jsx(KH,{})},{path:"/admin/absent-users",element:Q.jsx(XH,{})}]}]);return Q.jsxs(Q.Fragment,{children:[Q.jsx(Pk,{router:t}),Q.jsx(AO,{})]})}ND.createRoot(document.getElementById("root")).render(Q.jsx(F.StrictMode,{children:Q.jsx(QH,{})}))});export default ZH();
